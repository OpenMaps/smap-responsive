/*! jQuery v1.11.0 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(d,c){"object"==typeof module&&"object"==typeof module.exports?module.exports=d.document?c(d,!0):function(b){if(!b.document){throw new Error("jQuery requires a window with a document")}return c(b)}:c(d)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k="".trim,l={},m="1.11.0",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++){if(null!=(e=arguments[h])){for(d in e){a=g[d],c=e[d],g!==c&&(j&&c&&(n.isPlainObject(c)||(b=n.isArray(c)))?(b?(b=!1,f=a&&n.isArray(a)?a:[]):f=a&&n.isPlainObject(a)?a:{},g[d]=n.extend(j,f,c)):void 0!==c&&(g[d]=c))}}}return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray||function(a){return"array"===n.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a){return !1}return !0},isPlainObject:function(a){var b;if(!a||"object"!==n.type(a)||a.nodeType||n.isWindow(a)){return !1}try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}if(l.ownLast){for(b in a){return j.call(a,b)}}for(b in a){}return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&n.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++){if(d=b.apply(a[e],c),d===!1){break}}}else{for(e in a){if(d=b.apply(a[e],c),d===!1){break}}}}else{if(g){for(;f>e;e++){if(d=b.call(a[e],e,a[e]),d===!1){break}}}else{for(e in a){if(d=b.call(a[e],e,a[e]),d===!1){break}}}}return a},trim:k&&!k.call("\ufeff\xa0")?function(a){return null==a?"":k.call(a)}:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g){return g.call(b,a,c)}for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d){a[e++]=b[d++]}if(c!==c){while(void 0!==b[d]){a[e++]=b[d++]}}return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++){d=!b(a[f],f),d!==h&&e.push(a[f])}return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h){for(;g>f;f++){d=b(a[f],f,c),null!=d&&i.push(d)}}else{for(f in a){d=b(a[f],f,c),null!=d&&i.push(d)}}return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),n.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||n.guid++,e):void 0},now:function(){return +new Date},support:l}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s="sizzle"+-new Date,t=a.document,u=0,v=0,w=eb(),x=eb(),y=eb(),z=function(a,b){return a===b&&(j=!0),0},A="undefined",B=1<<31,C={}.hasOwnProperty,D=[],E=D.pop,F=D.push,G=D.push,H=D.slice,I=D.indexOf||function(a){for(var b=0,c=this.length;c>b;b++){if(this[b]===a){return b}}return -1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",K="[\\x20\\t\\r\\n\\f]",L="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",M=L.replace("w","w#"),N="\\["+K+"*("+L+")"+K+"*(?:([*^$|!~]?=)"+K+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+M+")|)|)"+K+"*\\]",O=":("+L+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+N.replace(3,8)+")*)|.*)\\)|)",P=new RegExp("^"+K+"+|((?:^|[^\\\\])(?:\\\\.)*)"+K+"+$","g"),Q=new RegExp("^"+K+"*,"+K+"*"),R=new RegExp("^"+K+"*([>+~]|"+K+")"+K+"*"),S=new RegExp("="+K+"*([^\\]'\"]*?)"+K+"*\\]","g"),T=new RegExp(O),U=new RegExp("^"+M+"$"),V={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L.replace("w","w*")+")"),ATTR:new RegExp("^"+N),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+K+"*(even|odd|(([+-]|)(\\d*)n|)"+K+"*(?:([+-]|)"+K+"*(\\d+)|))"+K+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+K+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+K+"*((?:-\\d)?\\d*)"+K+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,Y=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,$=/[+~]/,_=/'|\\/g,ab=new RegExp("\\\\([\\da-f]{1,6}"+K+"?|("+K+")|.)","ig"),bb=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{G.apply(D=H.call(t.childNodes),t.childNodes),D[t.childNodes.length].nodeType}catch(cb){G={apply:D.length?function(a,b){F.apply(a,H.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]){}a.length=c-1}}}function db(a,b,d,e){var f,g,h,i,j,m,p,q,u,v;if((b?b.ownerDocument||b:t)!==l&&k(b),b=b||l,d=d||[],!a||"string"!=typeof a){return d}if(1!==(i=b.nodeType)&&9!==i){return[]}if(n&&!e){if(f=Z.exec(a)){if(h=f[1]){if(9===i){if(g=b.getElementById(h),!g||!g.parentNode){return d}if(g.id===h){return d.push(g),d}}else{if(b.ownerDocument&&(g=b.ownerDocument.getElementById(h))&&r(b,g)&&g.id===h){return d.push(g),d}}}else{if(f[2]){return G.apply(d,b.getElementsByTagName(a)),d}if((h=f[3])&&c.getElementsByClassName&&b.getElementsByClassName){return G.apply(d,b.getElementsByClassName(h)),d}}}if(c.qsa&&(!o||!o.test(a))){if(q=p=s,u=b,v=9===i&&a,1===i&&"object"!==b.nodeName.toLowerCase()){m=ob(a),(p=b.getAttribute("id"))?q=p.replace(_,"\\$&"):b.setAttribute("id",q),q="[id='"+q+"'] ",j=m.length;while(j--){m[j]=q+pb(m[j])}u=$.test(a)&&mb(b.parentNode)||b,v=m.join(",")}if(v){try{return G.apply(d,u.querySelectorAll(v)),d}catch(w){}finally{p||b.removeAttribute("id")}}}}return xb(a.replace(P,"$1"),b,d,e)}function eb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function fb(a){return a[s]=!0,a}function gb(a){var b=l.createElement("div");try{return !!a(b)}catch(c){return !1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function hb(a,b){var c=a.split("|"),e=a.length;while(e--){d.attrHandle[c[e]]=b}}function ib(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||B)-(~a.sourceIndex||B);if(d){return d}if(c){while(c=c.nextSibling){if(c===b){return -1}}}return a?1:-1}function jb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function kb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function lb(a){return fb(function(b){return b=+b,fb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--){c[e=f[g]]&&(c[e]=!(d[e]=c[e]))}})})}function mb(a){return a&&typeof a.getElementsByTagName!==A&&a}c=db.support={},f=db.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},k=db.setDocument=function(a){var b,e=a?a.ownerDocument||a:t,g=e.defaultView;return e!==l&&9===e.nodeType&&e.documentElement?(l=e,m=e.documentElement,n=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){k()},!1):g.attachEvent&&g.attachEvent("onunload",function(){k()})),c.attributes=gb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=gb(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=Y.test(e.getElementsByClassName)&&gb(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=gb(function(a){return m.appendChild(a).id=s,!e.getElementsByName||!e.getElementsByName(s).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==A&&n){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ab,bb);return function(a){var c=typeof a.getAttributeNode!==A&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==A?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++]){1===c.nodeType&&d.push(c)}return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==A&&n?b.getElementsByClassName(a):void 0},p=[],o=[],(c.qsa=Y.test(e.querySelectorAll))&&(gb(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&o.push("[*^$]="+K+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||o.push("\\["+K+"*(?:value|"+J+")"),a.querySelectorAll(":checked").length||o.push(":checked")}),gb(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&o.push("name"+K+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||o.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),o.push(",.*:")})),(c.matchesSelector=Y.test(q=m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector||m.msMatchesSelector))&&gb(function(a){c.disconnectedMatch=q.call(a,"div"),q.call(a,"[s!='']:x"),p.push("!=",O)}),o=o.length&&new RegExp(o.join("|")),p=p.length&&new RegExp(p.join("|")),b=Y.test(m.compareDocumentPosition),r=b||Y.test(m.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return !0}}}return !1},z=b?function(a,b){if(a===b){return j=!0,0}var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===t&&r(t,a)?-1:b===e||b.ownerDocument===t&&r(t,b)?1:i?I.call(i,a)-I.call(i,b):0:4&d?-1:1)}:function(a,b){if(a===b){return j=!0,0}var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],k=[b];if(!f||!g){return a===e?-1:b===e?1:f?-1:g?1:i?I.call(i,a)-I.call(i,b):0}if(f===g){return ib(a,b)}c=a;while(c=c.parentNode){h.unshift(c)}c=b;while(c=c.parentNode){k.unshift(c)}while(h[d]===k[d]){d++}return d?ib(h[d],k[d]):h[d]===t?-1:k[d]===t?1:0},e):l},db.matches=function(a,b){return db(a,null,null,b)},db.matchesSelector=function(a,b){if((a.ownerDocument||a)!==l&&k(a),b=b.replace(S,"='$1']"),!(!c.matchesSelector||!n||p&&p.test(b)||o&&o.test(b))){try{var d=q.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType){return d}}catch(e){}}return db(b,l,null,[a]).length>0},db.contains=function(a,b){return(a.ownerDocument||a)!==l&&k(a),r(a,b)},db.attr=function(a,b){(a.ownerDocument||a)!==l&&k(a);var e=d.attrHandle[b.toLowerCase()],f=e&&C.call(d.attrHandle,b.toLowerCase())?e(a,b,!n):void 0;return void 0!==f?f:c.attributes||!n?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},db.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},db.uniqueSort=function(a){var b,d=[],e=0,f=0;if(j=!c.detectDuplicates,i=!c.sortStable&&a.slice(0),a.sort(z),j){while(b=a[f++]){b===a[f]&&(e=d.push(f))}while(e--){a.splice(d[e],1)}}return i=null,a},e=db.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent){return a.textContent}for(a=a.firstChild;a;a=a.nextSibling){c+=e(a)}}else{if(3===f||4===f){return a.nodeValue}}}else{while(b=a[d++]){c+=e(b)}}return c},d=db.selectors={cacheLength:50,createPseudo:fb,match:V,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ab,bb),a[3]=(a[4]||a[5]||"").replace(ab,bb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||db.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&db.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return V.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&T.test(c)&&(b=ob(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ab,bb).toLowerCase();return"*"===a?function(){return !0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=w[a+" "];return b||(b=new RegExp("(^|"+K+")"+a+"("+K+"|$)"))&&w(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==A&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=db.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return !!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),t=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p]){if(h?l.nodeName.toLowerCase()===r:1===l.nodeType){return !1}}o=p="only"===a&&!o&&"nextSibling"}return !0}if(o=[g?q.firstChild:q.lastChild],g&&t){k=q[s]||(q[s]={}),j=k[a]||[],n=j[0]===u&&j[1],m=j[0]===u&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop()){if(1===l.nodeType&&++m&&l===b){k[a]=[u,n,m];break}}}else{if(t&&(j=(b[s]||(b[s]={}))[a])&&j[0]===u){m=j[1]}else{while(l=++n&&l&&l[p]||(m=n=0)||o.pop()){if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(t&&((l[s]||(l[s]={}))[a]=[u,m]),l===b)){break}}}}return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||db.error("unsupported pseudo: "+a);return e[s]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?fb(function(a,c){var d,f=e(a,b),g=f.length;while(g--){d=I.call(a,f[g]),a[d]=!(c[d]=f[g])}}):function(a){return e(a,0,c)}):e}},pseudos:{not:fb(function(a){var b=[],c=[],d=g(a.replace(P,"$1"));return d[s]?fb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--){(f=g[h])&&(a[h]=!(b[h]=f))}}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:fb(function(a){return function(b){return db(a,b).length>0}}),contains:fb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:fb(function(a){return U.test(a||"")||db.error("unsupported lang: "+a),a=a.replace(ab,bb).toLowerCase(),function(b){var c;do{if(c=n?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang")){return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-")}}while((b=b.parentNode)&&1===b.nodeType);return !1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===m},focus:function(a){return a===l.activeElement&&(!l.hasFocus||l.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling){if(a.nodeType<6){return !1}}return !0},parent:function(a){return !d.pseudos.empty(a)},header:function(a){return X.test(a.nodeName)},input:function(a){return W.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:lb(function(){return[0]}),last:lb(function(a,b){return[b-1]}),eq:lb(function(a,b,c){return[0>c?c+b:c]}),even:lb(function(a,b){for(var c=0;b>c;c+=2){a.push(c)}return a}),odd:lb(function(a,b){for(var c=1;b>c;c+=2){a.push(c)}return a}),lt:lb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;){a.push(d)}return a}),gt:lb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;){a.push(d)}return a})}},d.pseudos.nth=d.pseudos.eq;for(b in {radio:!0,checkbox:!0,file:!0,password:!0,image:!0}){d.pseudos[b]=jb(b)}for(b in {submit:!0,reset:!0}){d.pseudos[b]=kb(b)}function nb(){}nb.prototype=d.filters=d.pseudos,d.setFilters=new nb;function ob(a,b){var c,e,f,g,h,i,j,k=x[a+" "];if(k){return b?0:k.slice(0)}h=a,i=[],j=d.preFilter;while(h){(!c||(e=Q.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=R.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(P," ")}),h=h.slice(c.length));for(g in d.filter){!(e=V[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length))}if(!c){break}}return b?h.length:h?db.error(a):x(a,i).slice(0)}function pb(a){for(var b=0,c=a.length,d="";c>b;b++){d+=a[b].value}return d}function qb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=v++;return b.first?function(b,c,f){while(b=b[d]){if(1===b.nodeType||e){return a(b,c,f)}}}:function(b,c,g){var h,i,j=[u,f];if(g){while(b=b[d]){if((1===b.nodeType||e)&&a(b,c,g)){return !0}}}else{while(b=b[d]){if(1===b.nodeType||e){if(i=b[s]||(b[s]={}),(h=i[d])&&h[0]===u&&h[1]===f){return j[2]=h[2]}if(i[d]=j,j[2]=a(b,c,g)){return !0}}}}}}function rb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--){if(!a[e](b,c,d)){return !1}}return !0}:a[0]}function sb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++){(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h))}return g}function tb(a,b,c,d,e,f){return d&&!d[s]&&(d=tb(d)),e&&!e[s]&&(e=tb(e,f)),fb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||wb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:sb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=sb(r,n),d(j,[],h,i),k=j.length;while(k--){(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}}if(f){if(e||a){if(e){j=[],k=r.length;while(k--){(l=r[k])&&j.push(q[k]=l)}e(null,r=[],j,i)}k=r.length;while(k--){(l=r[k])&&(j=e?I.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}}else{r=sb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):G.apply(g,r)}})}function ub(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],i=g||d.relative[" "],j=g?1:0,k=qb(function(a){return a===b},i,!0),l=qb(function(a){return I.call(b,a)>-1},i,!0),m=[function(a,c,d){return !g&&(d||c!==h)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>j;j++){if(c=d.relative[a[j].type]){m=[qb(rb(m),c)]}else{if(c=d.filter[a[j].type].apply(null,a[j].matches),c[s]){for(e=++j;f>e;e++){if(d.relative[a[e].type]){break}}return tb(j>1&&rb(m),j>1&&pb(a.slice(0,j-1).concat({value:" "===a[j-2].type?"*":""})).replace(P,"$1"),c,e>j&&ub(a.slice(j,e)),f>e&&ub(a=a.slice(e)),f>e&&pb(a))}m.push(c)}}return rb(m)}function vb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,i,j,k){var m,n,o,p=0,q="0",r=f&&[],s=[],t=h,v=f||e&&d.find.TAG("*",k),w=u+=null==t?1:Math.random()||0.1,x=v.length;for(k&&(h=g!==l&&g);q!==x&&null!=(m=v[q]);q++){if(e&&m){n=0;while(o=a[n++]){if(o(m,g,i)){j.push(m);break}}k&&(u=w)}c&&((m=!o&&m)&&p--,f&&r.push(m))}if(p+=q,c&&q!==p){n=0;while(o=b[n++]){o(r,s,g,i)}if(f){if(p>0){while(q--){r[q]||s[q]||(s[q]=E.call(j))}}s=sb(s)}G.apply(j,s),k&&!f&&s.length>0&&p+b.length>1&&db.uniqueSort(j)}return k&&(u=w,h=t),r};return c?fb(f):f}g=db.compile=function(a,b){var c,d=[],e=[],f=y[a+" "];if(!f){b||(b=ob(a)),c=b.length;while(c--){f=ub(b[c]),f[s]?d.push(f):e.push(f)}f=y(a,vb(e,d))}return f};function wb(a,b,c){for(var d=0,e=b.length;e>d;d++){db(a,b[d],c)}return c}function xb(a,b,e,f){var h,i,j,k,l,m=ob(a);if(!f&&1===m.length){if(i=m[0]=m[0].slice(0),i.length>2&&"ID"===(j=i[0]).type&&c.getById&&9===b.nodeType&&n&&d.relative[i[1].type]){if(b=(d.find.ID(j.matches[0].replace(ab,bb),b)||[])[0],!b){return e}a=a.slice(i.shift().value.length)}h=V.needsContext.test(a)?0:i.length;while(h--){if(j=i[h],d.relative[k=j.type]){break}if((l=d.find[k])&&(f=l(j.matches[0].replace(ab,bb),$.test(i[0].type)&&mb(b.parentNode)||b))){if(i.splice(h,1),a=f.length&&pb(i),!a){return G.apply(e,f),e}break}}}return g(a,m)(f,b,!n,e,$.test(a)&&mb(b.parentNode)||b),e}return c.sortStable=s.split("").sort(z).join("")===s,c.detectDuplicates=!!j,k(),c.sortDetached=gb(function(a){return 1&a.compareDocumentPosition(l.createElement("div"))}),gb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||hb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&gb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||hb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),gb(function(a){return null==a.getAttribute("disabled")})||hb(J,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),db}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b)){return n.grep(a,function(a,d){return !!b.call(a,d,a)!==c})}if(b.nodeType){return n.grep(a,function(a){return a===b!==c})}if("string"==typeof b){if(w.test(b)){return n.filter(b,a,c)}b=n.filter(b,a)}return n.grep(a,function(a){return n.inArray(a,b)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a){return this.pushStack(n(a).filter(function(){for(b=0;e>b;b++){if(n.contains(d[b],this)){return !0}}}))}for(b=0;e>b;b++){n.find(a,d[b],c)}return c=this.pushStack(e>1?n.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return !!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=a.document,A=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,B=n.fn.init=function(a,b){var c,d;if(!a){return this}if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:A.exec(a),!c||!c[1]&&b){return !b||b.jquery?(b||y).find(a):this.constructor(b).find(a)}if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:z,!0)),v.test(c[1])&&n.isPlainObject(b)){for(c in b){n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c])}}return this}if(d=z.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2]){return y.find(a)}this.length=1,this[0]=d}return this.context=z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};B.prototype=n.fn,y=n(z);var C=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!n(e).is(c))){1===e.nodeType&&d.push(e),e=e[b]}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling){1===a.nodeType&&a!==b&&c.push(a)}return c}}),n.fn.extend({has:function(a){var b,c=n(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++){if(n.contains(this,c[b])){return !0}}})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++){for(c=this[d];c&&c!==b;c=c.parentNode){if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}}}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?n.inArray(this[0],n(a)):n.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function E(a,b){do{a=a[b]}while(a&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return E(a,"nextSibling")},prev:function(a){return E(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return n.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(D[a]||(e=n.unique(e)),C.test(a)&&(e=e.reverse())),this.pushStack(e)}});var F=/\S+/g,G={};function H(a){var b=G[a]={};return n.each(a.match(F)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?G[a]||H(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++){if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&n.each(arguments,function(a,c){var d;while((d=n.inArray(c,h,d))>-1){h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return !h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return !i},fireWith:function(a,c){return !h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return !!d}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1){for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++){c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f}}return f||g.resolveWith(k,c),g.promise()}});var I;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){if(a===!0?!--n.readyWait:!n.isReady){if(!z.body){return setTimeout(n.ready)}n.isReady=!0,a!==!0&&--n.readyWait>0||(I.resolveWith(z,[n]),n.fn.trigger&&n(z).trigger("ready").off("ready"))}}});function J(){z.addEventListener?(z.removeEventListener("DOMContentLoaded",K,!1),a.removeEventListener("load",K,!1)):(z.detachEvent("onreadystatechange",K),a.detachEvent("onload",K))}function K(){(z.addEventListener||"load"===event.type||"complete"===z.readyState)&&(J(),n.ready())}n.ready.promise=function(b){if(!I){if(I=n.Deferred(),"complete"===z.readyState){setTimeout(n.ready)}else{if(z.addEventListener){z.addEventListener("DOMContentLoaded",K,!1),a.addEventListener("load",K,!1)}else{z.attachEvent("onreadystatechange",K),a.attachEvent("onload",K);var c=!1;try{c=null==a.frameElement&&z.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!n.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}J(),n.ready()}}()}}}return I.promise(b)};var L="undefined",M;for(M in n(l)){break}l.ownLast="0"!==M,l.inlineBlockNeedsLayout=!1,n(function(){var a,b,c=z.getElementsByTagName("body")[0];c&&(a=z.createElement("div"),a.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",b=z.createElement("div"),c.appendChild(a).appendChild(b),typeof b.style.zoom!==L&&(b.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(l.inlineBlockNeedsLayout=3===b.offsetWidth)&&(c.style.zoom=1)),c.removeChild(a),a=b=null)}),function(){var a=z.createElement("div");if(null==l.deleteExpando){l.deleteExpando=!0;try{delete a.test}catch(b){l.deleteExpando=!1}}a=null}(),n.acceptData=function(a){var b=n.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(O,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}n.data(a,b,c)}else{c=void 0}}return c}function Q(a){var b;for(b in a){if(("data"!==b||!n.isEmptyObject(a[b]))&&"toJSON"!==b){return !1}}return !0}function R(a,b,d,e){if(n.acceptData(a)){var f,g,h=n.expando,i=a.nodeType,j=i?n.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b){return k||(k=i?a[h]=c.pop()||n.guid++:h),j[k]||(j[k]=i?{}:{toJSON:n.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=n.extend(j[k],b):j[k].data=n.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[n.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[n.camelCase(b)])):f=g,f}}}function S(a,b,c){if(n.acceptData(a)){var d,e,f=a.nodeType,g=f?n.cache:a,h=f?a[n.expando]:n.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){n.isArray(b)?b=b.concat(n.map(b,n.camelCase)):b in d?b=[b]:(b=n.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--){delete d[b[e]]}if(c?!Q(d):!n.isEmptyObject(d)){return}}(c||(delete g[h].data,Q(g[h])))&&(f?n.cleanData([a],!0):l.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}n.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?n.cache[a[n.expando]]:a[n.expando],!!a&&!Q(a)},data:function(a,b,c){return R(a,b,c)},removeData:function(a,b){return S(a,b)},_data:function(a,b,c){return R(a,b,c,!0)},_removeData:function(a,b){return S(a,b,!0)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=n.data(f),1===f.nodeType&&!n._data(f,"parsedAttrs"))){c=g.length;while(c--){d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d]))}n._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){n.data(this,a)}):arguments.length>1?this.each(function(){n.data(this,a,b)}):f?P(f,a,n.data(f,a)):void 0},removeData:function(a){return this.each(function(){n.removeData(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=n._data(a,b),c&&(!d||n.isArray(c)?d=n._data(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return n._data(a,c)||n._data(a,c,{empty:n.Callbacks("once memory").add(function(){n._removeData(a,b+"queue"),n._removeData(a,c)})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--){c=n._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h))}return h(),e.promise(b)}});var T=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,U=["Top","Right","Bottom","Left"],V=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},W=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c){n.access(a,b,h,c[h],!0,f,g)}}else{if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b)){for(;i>h;h++){b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)))}}}return e?a:j?b.call(a):i?b(a[0],c):f},X=/^(?:checkbox|radio)$/i;!function(){var a=z.createDocumentFragment(),b=z.createElement("div"),c=z.createElement("input");if(b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a>",l.leadingWhitespace=3===b.firstChild.nodeType,l.tbody=!b.getElementsByTagName("tbody").length,l.htmlSerialize=!!b.getElementsByTagName("link").length,l.html5Clone="<:nav></:nav>"!==z.createElement("nav").cloneNode(!0).outerHTML,c.type="checkbox",c.checked=!0,a.appendChild(c),l.appendChecked=c.checked,b.innerHTML="<textarea>x</textarea>",l.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,a.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",l.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,l.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){l.noCloneEvent=!1}),b.cloneNode(!0).click()),null==l.deleteExpando){l.deleteExpando=!0;try{delete b.test}catch(d){l.deleteExpando=!1}}a=b=c=null}(),function(){var b,c,d=z.createElement("div");for(b in {submit:!0,change:!0,focusin:!0}){c="on"+b,(l[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),l[b+"Bubbles"]=d.attributes[c].expando===!1)}d=null}();var Y=/^(?:input|select|textarea)$/i,Z=/^key/,$=/^(?:mouse|contextmenu)|click/,_=/^(?:focusinfocus|focusoutblur)$/,ab=/^([^.]*)(?:\.(.+)|)$/;function bb(){return !0}function cb(){return !1}function db(){try{return z.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=n.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof n===L||a&&n.event.triggered===a.type?void 0:n.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(F)||[""],h=b.length;while(h--){f=ab.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=n.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=n.event.special[o]||{},l=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},i),(m=g[o])||(m=g[o]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),n.event.global[o]=!0)}a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=n.hasData(a)&&n._data(a);if(r&&(k=r.events)){b=(b||"").match(F)||[""],j=b.length;while(j--){if(h=ab.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;while(f--){g=m[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g))}i&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete k[o])}else{for(o in k){n.event.remove(a,o+b[j],c,d,!0)}}}n.isEmptyObject(k)&&(delete r.handle,n._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,m,o=[d||z],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||z,3!==d.nodeType&&8!==d.nodeType&&!_.test(p+n.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[n.expando]?b:new n.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),k=n.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!n.isWindow(d)){for(i=k.delegateType||p,_.test(i+p)||(h=h.parentNode);h;h=h.parentNode){o.push(h),l=h}l===(d.ownerDocument||z)&&o.push(l.defaultView||l.parentWindow||a)}m=0;while((h=o[m++])&&!b.isPropagationStopped()){b.type=m>1?i:k.bindType||p,f=(n._data(h,"events")||{})[b.type]&&n._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&n.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault())}if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&n.acceptData(d)&&g&&d[p]&&!n.isWindow(d)){l=d[g],l&&(d[g]=null),n.event.triggered=p;try{d[p]()}catch(r){}n.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(n._data(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped()){(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((n.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type)){for(;i!=this;i=i.parentNode||this){if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++){d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?n(c,this).index(i)>=0:n.find(c,this,null,[i]).length),e[c]&&e.push(d)}e.length&&g.push({elem:i,handlers:e})}}}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[n.expando]){return a}var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=$.test(e)?this.mouseHooks:Z.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--){c=d[b],a[c]=f[c]}return a.target||(a.target=f.srcElement||z),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||z,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==db()&&this.focus){try{return this.focus(),!1}catch(a){}}},delegateType:"focusin"},blur:{trigger:function(){return this===db()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return n.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=z.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===L&&(a[d]=null),a.detachEvent(d,c))},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&(a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault())?bb:cb):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void (this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:cb,isPropagationStopped:cb,isImmediatePropagationStopped:cb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=bb,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=bb,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),l.submitBubbles||(n.event.special.submit={setup:function(){return n.nodeName(this,"form")?!1:void n.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=n.nodeName(b,"input")||n.nodeName(b,"button")?b.form:void 0;c&&!n._data(c,"submitBubbles")&&(n.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),n._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&n.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return n.nodeName(this,"form")?!1:void n.event.remove(this,"._submit")}}),l.changeBubbles||(n.event.special.change={setup:function(){return Y.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(n.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),n.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),n.event.simulate("change",this,a,!0)})),!1):void n.event.add(this,"beforeactivate._change",function(a){var b=a.target;Y.test(b.nodeName)&&!n._data(b,"changeBubbles")&&(n.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||n.event.simulate("change",this.parentNode,a,!0)}),n._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return n.event.remove(this,"._change"),!Y.test(this.nodeName)}}),l.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=n._data(d,b);e||d.addEventListener(a,c,!0),n._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=n._data(d,b)-1;e?n._data(d,b,e):(d.removeEventListener(a,c,!0),n._removeData(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a){this.on(f,b,c,a[f],e)}return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1){d=cb}else{if(!d){return this}}return 1===e&&(g=d,d=function(a){return n().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj){return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this}if("object"==typeof a){for(e in a){this.off(e,b,a[e])}return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=cb),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});function eb(a){var b=fb.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}var fb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gb=/ jQuery\d+="(?:null|\d+)"/g,hb=new RegExp("<(?:"+fb+")[\\s/>]","i"),ib=/^\s+/,jb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,kb=/<([\w:]+)/,lb=/<tbody/i,mb=/<|&#?\w+;/,nb=/<(?:script|style|link)/i,ob=/checked\s*(?:[^=]|=\s*.checked.)/i,pb=/^$|\/(?:java|ecma)script/i,qb=/^true\/(.*)/,rb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,sb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:l.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},tb=eb(z),ub=tb.appendChild(z.createElement("div"));sb.optgroup=sb.option,sb.tbody=sb.tfoot=sb.colgroup=sb.caption=sb.thead,sb.th=sb.td;function vb(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==L?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==L?a.querySelectorAll(b||"*"):void 0;if(!f){for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++){!b||n.nodeName(d,b)?f.push(d):n.merge(f,vb(d,b))}}return void 0===b||b&&n.nodeName(a,b)?n.merge([a],f):f}function wb(a){X.test(a.type)&&(a.defaultChecked=a.checked)}function xb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function yb(a){return a.type=(null!==n.find.attr(a,"type"))+"/"+a.type,a}function zb(a){var b=qb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function Ab(a,b){for(var c,d=0;null!=(c=a[d]);d++){n._data(c,"globalEval",!b||n._data(b[d],"globalEval"))}}function Bb(a,b){if(1===b.nodeType&&n.hasData(a)){var c,d,e,f=n._data(a),g=n._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h){for(d=0,e=h[c].length;e>d;d++){n.event.add(b,c,h[c][d])}}}g.data&&(g.data=n.extend({},g.data))}}function Cb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!l.noCloneEvent&&b[n.expando]){e=n._data(b);for(d in e.events){n.removeEvent(b,d,e.handle)}b.removeAttribute(n.expando)}"script"===c&&b.text!==a.text?(yb(b).text=a.text,zb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),l.html5Clone&&a.innerHTML&&!n.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&X.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}n.extend({clone:function(a,b,c){var d,e,f,g,h,i=n.contains(a.ownerDocument,a);if(l.html5Clone||n.isXMLDoc(a)||!hb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ub.innerHTML=a.outerHTML,ub.removeChild(f=ub.firstChild)),!(l.noCloneEvent&&l.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a))){for(d=vb(f),h=vb(a),g=0;null!=(e=h[g]);++g){d[g]&&Cb(e,d[g])}}if(b){if(c){for(h=h||vb(a),d=d||vb(f),g=0;null!=(e=h[g]);g++){Bb(e,d[g])}}else{Bb(a,f)}}return d=vb(f,"script"),d.length>0&&Ab(d,!i&&vb(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,m=a.length,o=eb(b),p=[],q=0;m>q;q++){if(f=a[q],f||0===f){if("object"===n.type(f)){n.merge(p,f.nodeType?[f]:f)}else{if(mb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(kb.exec(f)||["",""])[1].toLowerCase(),k=sb[i]||sb._default,h.innerHTML=k[1]+f.replace(jb,"<$1></$2>")+k[2],e=k[0];while(e--){h=h.lastChild}if(!l.leadingWhitespace&&ib.test(f)&&p.push(b.createTextNode(ib.exec(f)[0])),!l.tbody){f="table"!==i||lb.test(f)?"<table>"!==k[1]||lb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--){n.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}}n.merge(p,h.childNodes),h.textContent="";while(h.firstChild){h.removeChild(h.firstChild)}h=o.lastChild}else{p.push(b.createTextNode(f))}}}}h&&o.removeChild(h),l.appendChecked||n.grep(vb(p,"input"),wb),q=0;while(f=p[q++]){if((!d||-1===n.inArray(f,d))&&(g=n.contains(f.ownerDocument,f),h=vb(o.appendChild(f),"script"),g&&Ab(h),c)){e=0;while(f=h[e++]){pb.test(f.type||"")&&c.push(f)}}}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=n.expando,j=n.cache,k=l.deleteExpando,m=n.event.special;null!=(d=a[h]);h++){if((b||n.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events){for(e in g.events){m[e]?n.event.remove(d,e):n.removeEvent(d,e,g.handle)}}j[f]&&(delete j[f],k?delete d[i]:typeof d.removeAttribute!==L?d.removeAttribute(i):d[i]=null,c.push(f))}}}}),n.fn.extend({text:function(a){return W(this,function(a){return void 0===a?n.text(this):this.empty().append((this[0]&&this[0].ownerDocument||z).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=xb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++){b||1!==c.nodeType||n.cleanData(vb(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&Ab(vb(c,"script")),c.parentNode.removeChild(c))}return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&n.cleanData(vb(a,!1));while(a.firstChild){a.removeChild(a.firstChild)}a.options&&n.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return W(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a){return 1===b.nodeType?b.innerHTML.replace(gb,""):void 0}if(!("string"!=typeof a||nb.test(a)||!l.htmlSerialize&&hb.test(a)||!l.leadingWhitespace&&ib.test(a)||sb[(kb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(jb,"<$1></$2>");try{for(;d>c;c++){b=this[c]||{},1===b.nodeType&&(n.cleanData(vb(b,!1)),b.innerHTML=a)}b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(vb(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,k=this.length,m=this,o=k-1,p=a[0],q=n.isFunction(p);if(q||k>1&&"string"==typeof p&&!l.checkClone&&ob.test(p)){return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)})}if(k&&(i=n.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=n.map(vb(i,"script"),yb),f=g.length;k>j;j++){d=i,j!==o&&(d=n.clone(d,!0,!0),f&&n.merge(g,vb(d,"script"))),b.call(this[j],d,j)}if(f){for(h=g[g.length-1].ownerDocument,n.map(g,zb),j=0;f>j;j++){d=g[j],pb.test(d.type||"")&&!n._data(d,"globalEval")&&n.contains(h,d)&&(d.src?n._evalUrl&&n._evalUrl(d.src):n.globalEval((d.text||d.textContent||d.innerHTML||"").replace(rb,"")))}}i=c=null}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=0,e=[],g=n(a),h=g.length-1;h>=d;d++){c=d===h?this:this.clone(!0),n(g[d])[b](c),f.apply(e,c.get())}return this.pushStack(e)}});var Db,Eb={};function Fb(b,c){var d=n(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:n.css(d[0],"display");return d.detach(),e}function Gb(a){var b=z,c=Eb[a];return c||(c=Fb(a,b),"none"!==c&&c||(Db=(Db||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Db[0].contentWindow||Db[0].contentDocument).document,b.write(),b.close(),c=Fb(a,b),Db.detach()),Eb[a]=c),c}!function(){var a,b,c=z.createElement("div"),d="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=c.getElementsByTagName("a")[0],a.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(a.style.opacity),l.cssFloat=!!a.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===c.style.backgroundClip,a=c=null,l.shrinkWrapBlocks=function(){var a,c,e,f;if(null==b){if(a=z.getElementsByTagName("body")[0],!a){return}f="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",c=z.createElement("div"),e=z.createElement("div"),a.appendChild(c).appendChild(e),b=!1,typeof e.style.zoom!==L&&(e.style.cssText=d+";width:1px;padding:1px;zoom:1",e.innerHTML="<div></div>",e.firstChild.style.width="5px",b=3!==e.offsetWidth),a.removeChild(c),a=c=e=null}return b}}();var Hb=/^margin/,Ib=new RegExp("^("+T+")(?!px)[a-z%]+$","i"),Jb,Kb,Lb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Jb=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),Ib.test(g)&&Hb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):z.documentElement.currentStyle&&(Jb=function(a){return a.currentStyle},Kb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Jb(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Ib.test(g)&&!Lb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Mb(a,b){return{get:function(){var c=a();if(null!=c){return c?void delete this.get:(this.get=b).apply(this,arguments)}}}}!function(){var b,c,d,e,f,g,h=z.createElement("div"),i="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",j="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";h.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",b=h.getElementsByTagName("a")[0],b.style.cssText="float:left;opacity:.5",l.opacity=/^0.5/.test(b.style.opacity),l.cssFloat=!!b.style.cssFloat,h.style.backgroundClip="content-box",h.cloneNode(!0).style.backgroundClip="",l.clearCloneStyle="content-box"===h.style.backgroundClip,b=h=null,n.extend(l,{reliableHiddenOffsets:function(){if(null!=c){return c}var a,b,d,e=z.createElement("div"),f=z.getElementsByTagName("body")[0];if(f){return e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=z.createElement("div"),a.style.cssText=i,f.appendChild(a).appendChild(e),e.innerHTML="<table><tr><td></td><td>t</td></tr></table>",b=e.getElementsByTagName("td"),b[0].style.cssText="padding:0;margin:0;border:0;display:none",d=0===b[0].offsetHeight,b[0].style.display="",b[1].style.display="none",c=d&&0===b[0].offsetHeight,f.removeChild(a),e=f=null,c}},boxSizing:function(){return null==d&&k(),d},boxSizingReliable:function(){return null==e&&k(),e},pixelPosition:function(){return null==f&&k(),f},reliableMarginRight:function(){var b,c,d,e;if(null==g&&a.getComputedStyle){if(b=z.getElementsByTagName("body")[0],!b){return}c=z.createElement("div"),d=z.createElement("div"),c.style.cssText=i,b.appendChild(c).appendChild(d),e=d.appendChild(z.createElement("div")),e.style.cssText=d.style.cssText=j,e.style.marginRight=e.style.width="0",d.style.width="1px",g=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight),b.removeChild(c)}return g}});function k(){var b,c,h=z.getElementsByTagName("body")[0];h&&(b=z.createElement("div"),c=z.createElement("div"),b.style.cssText=i,h.appendChild(b).appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",n.swap(h,null!=h.style.zoom?{zoom:1}:{},function(){d=4===c.offsetWidth}),e=!0,f=!1,g=!0,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(c,null)||{}).top,e="4px"===(a.getComputedStyle(c,null)||{width:"4px"}).width),h.removeChild(b),c=h=null)}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b){g[f]=a.style[f],a.style[f]=b[f]}e=c.apply(a,d||[]);for(f in b){a.style[f]=g[f]}return e};var Nb=/alpha\([^)]*\)/i,Ob=/opacity\s*=\s*([^)]*)/,Pb=/^(none|table(?!-c[ea]).+)/,Qb=new RegExp("^("+T+")(.*)$","i"),Rb=new RegExp("^([+-])=("+T+")","i"),Sb={position:"absolute",visibility:"hidden",display:"block"},Tb={letterSpacing:0,fontWeight:400},Ub=["Webkit","O","Moz","ms"];function Vb(a,b){if(b in a){return b}var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Ub.length;while(e--){if(b=Ub[e]+c,b in a){return b}}return d}function Wb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++){d=a[g],d.style&&(f[g]=n._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&V(d)&&(f[g]=n._data(d,"olddisplay",Gb(d.nodeName)))):f[g]||(e=V(d),(c&&"none"!==c||!e)&&n._data(d,"olddisplay",e?c:n.css(d,"display"))))}for(g=0;h>g;g++){d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"))}return a}function Xb(a,b,c){var d=Qb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Yb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2){"margin"===c&&(g+=n.css(a,c+U[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+U[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+U[f]+"Width",!0,e))):(g+=n.css(a,"padding"+U[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+U[f]+"Width",!0,e)))}return g}function Zb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Jb(a),g=l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Kb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Ib.test(e)){return e}d=g&&(l.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Yb(a,b,c||(g?"border":"content"),d,f)+"px"}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Kb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":l.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;if(b=n.cssProps[h]||(n.cssProps[h]=Vb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c){return g&&"get" in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]}if(f=typeof c,"string"===f&&(e=Rb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),l.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set" in g&&void 0===(c=g.set(a,c,d))))){try{i[b]="",i[b]=c}catch(j){}}}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Vb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get" in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Kb(a,b,d)),"normal"===f&&b in Tb&&(f=Tb[b]),""===c||c?(e=parseFloat(f),c===!0||n.isNumeric(e)?e||0:f):f}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Pb.test(n.css(a,"display"))?n.swap(a,Sb,function(){return Zb(a,b,d)}):Zb(a,b,d):void 0},set:function(a,c,d){var e=d&&Jb(a);return Xb(a,c,d?Yb(a,b,d,l.boxSizing()&&"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),l.opacity||(n.cssHooks.opacity={get:function(a,b){return Ob.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?0.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=n.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===n.trim(f.replace(Nb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Nb.test(f)?f.replace(Nb,e):f+" "+e)}}),n.cssHooks.marginRight=Mb(l.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},Kb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++){e[a+U[d]+b]=f[d]||f[d-2]||f[0]}return e}},Hb.test(a)||(n.cssHooks[a+b].set=Xb)}),n.fn.extend({css:function(a,b){return W(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=Jb(a),e=b.length;e>g;g++){f[b[g]]=n.css(a,b[g],!1,d)}return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Wb(this,!0)},hide:function(){return Wb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){V(this)?n(this).show():n(this).hide()})}});function $b(a,b,c,d,e){return new $b.prototype.init(a,b,c,d,e)}n.Tween=$b,$b.prototype={constructor:$b,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=$b.propHooks[this.prop];return a&&a.get?a.get(this):$b.propHooks._default.get(this)},run:function(a){var b,c=$b.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):$b.propHooks._default.set(this),this}},$b.prototype.init.prototype=$b.prototype,$b.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},$b.propHooks.scrollTop=$b.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return 0.5-Math.cos(a*Math.PI)/2}},n.fx=$b.prototype.init,n.fx.step={};var _b,ac,bc=/^(?:toggle|show|hide)$/,cc=new RegExp("^(?:([+-])=|)("+T+")([a-z%]*)$","i"),dc=/queueHooks$/,ec=[jc],fc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=cc.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&cc.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do{h=h||".5",g/=h,n.style(c.elem,a,g+f)}while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function gc(){return setTimeout(function(){_b=void 0}),_b=n.now()}function hc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b){c=U[e],d["margin"+c]=d["padding"+c]=a}return b&&(d.opacity=d.width=a),d}function ic(a,b,c){for(var d,e=(fc[b]||[]).concat(fc["*"]),f=0,g=e.length;g>f;f++){if(d=e[f].call(c,b,a)){return d}}}function jc(a,b,c){var d,e,f,g,h,i,j,k,m=this,o={},p=a.style,q=a.nodeType&&V(a),r=n._data(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height" in b||"width" in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=n.css(a,"display"),k=Gb(a.nodeName),"none"===j&&(j=k),"inline"===j&&"none"===n.css(a,"float")&&(l.inlineBlockNeedsLayout&&"inline"!==k?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",l.shrinkWrapBlocks()||m.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b){if(e=b[d],bc.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d]){continue}q=!0}o[d]=r&&r[d]||n.style(a,d)}}if(!n.isEmptyObject(o)){r?"hidden" in r&&(q=r.hidden):r=n._data(a,"fxshow",{}),f&&(r.hidden=!q),q?n(a).show():m.done(function(){n(a).hide()}),m.done(function(){var b;n._removeData(a,"fxshow");for(b in o){n.style(a,b,o[b])}});for(d in o){g=ic(q?r[d]:0,d,m),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}}function kc(a,b){var c,d,e,f,g;for(c in a){if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand" in g){f=g.expand(f),delete a[d];for(c in f){c in a||(a[c]=f[c],b[c]=e)}}else{b[d]=e}}}function lc(a,b,c){var d,e,f=0,g=ec.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e){return !1}for(var b=_b||gc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++){j.tweens[g].run(f)}return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:_b||gc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e){return this}for(e=!0;d>c;c++){j.tweens[c].run(1)}return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(kc(k,j.opts.specialEasing);g>f;f++){if(d=ec[f].call(j,a,k,j.opts)){return d}}return n.map(k,ic,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(lc,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++){c=a[d],fc[c]=fc[c]||[],fc[c].unshift(b)}},prefilter:function(a,b){b?ec.unshift(a):ec.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(V).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=lc(this,n.extend({},a),f);(e||n._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=n._data(this);if(e){g[e]&&g[e].stop&&d(g[e])}else{for(e in g){g[e]&&g[e].stop&&dc.test(e)&&d(g[e])}}for(e=f.length;e--;){f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1))}(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=n._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;){f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1))}for(b=0;g>b;b++){d[b]&&d[b].finish&&d[b].finish.call(this)}delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(hc(b,!0),a,d,e)}}),n.each({slideDown:hc("show"),slideUp:hc("hide"),slideToggle:hc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=n.timers,c=0;for(_b=n.now();c<b.length;c++){a=b[c],a()||b[c]!==a||b.splice(c--,1)}b.length||n.fx.stop(),_b=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){ac||(ac=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(ac),ac=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e=z.createElement("div");e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=e.getElementsByTagName("a")[0],c=z.createElement("select"),d=c.appendChild(z.createElement("option")),b=e.getElementsByTagName("input")[0],a.style.cssText="top:1px",l.getSetAttribute="t"!==e.className,l.style=/top/.test(a.getAttribute("style")),l.hrefNormalized="/a"===a.getAttribute("href"),l.checkOn=!!b.value,l.optSelected=d.selected,l.enctype=!!z.createElement("form").enctype,c.disabled=!0,l.optDisabled=!d.disabled,b=z.createElement("input"),b.setAttribute("value",""),l.input=""===b.getAttribute("value"),b.value="t",b.setAttribute("type","radio"),l.radioValue="t"===b.value,a=b=c=d=e=null}();var mc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];if(arguments.length){return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set" in b&&void 0!==b.set(this,e,"value")||(this.value=e))})}if(e){return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get" in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(mc,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.text(a)}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++){if(c=d[i],!(!c.selected&&i!==e||(l.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f){return b}g.push(b)}}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--){if(d=e[g],n.inArray(n.valHooks.option.get(d),f)>=0){try{d.selected=c=!0}catch(h){d.scrollHeight}}else{d.selected=!1}}return c||(a.selectedIndex=-1),e}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},l.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var nc,oc,pc=n.expr.attrHandle,qc=/^(?:checked|selected)$/i,rc=l.getSetAttribute,sc=l.input;n.fn.extend({attr:function(a,b){return W(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){return typeof a.getAttribute===L?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?oc:nc)),void 0===c?d&&"get" in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set" in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(F);if(f&&1===a.nodeType){while(c=f[e++]){d=n.propFix[c]||c,n.expr.match.bool.test(c)?sc&&rc||!qc.test(c)?a[d]=!1:a[n.camelCase("default-"+c)]=a[d]=!1:n.attr(a,c,""),a.removeAttribute(rc?c:d)}}},attrHooks:{type:{set:function(a,b){if(!l.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),oc={set:function(a,b,c){return b===!1?n.removeAttr(a,c):sc&&rc||!qc.test(c)?a.setAttribute(!rc&&n.propFix[c]||c,c):a[n.camelCase("default-"+c)]=a[c]=!0,c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=pc[b]||n.find.attr;pc[b]=sc&&rc||!qc.test(b)?function(a,b,d){var e,f;return d||(f=pc[b],pc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,pc[b]=f),e}:function(a,b,c){return c?void 0:a[n.camelCase("default-"+b)]?b.toLowerCase():null}}),sc&&rc||(n.attrHooks.value={set:function(a,b,c){return n.nodeName(a,"input")?void (a.defaultValue=b):nc&&nc.set(a,b,c)}}),rc||(nc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},pc.id=pc.name=pc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},n.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:nc.set},n.attrHooks.contenteditable={set:function(a,b,c){nc.set(a,""===b?!1:b,c)}},n.each(["width","height"],function(a,b){n.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),l.style||(n.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var tc=/^(?:input|select|textarea|button|object)$/i,uc=/^(?:a|area)$/i;n.fn.extend({prop:function(a,b){return W(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return a=n.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set" in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get" in e&&null!==(d=e.get(a,b))?d:a[b]}},propHooks:{tabIndex:{get:function(a){var b=n.find.attr(a,"tabindex");return b?parseInt(b,10):tc.test(a.nodeName)||uc.test(a.nodeName)&&a.href?0:-1}}}}),l.hrefNormalized||n.each(["href","src"],function(a,b){n.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),l.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this}),l.enctype||(n.propFix.enctype="encoding");var vc=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(n.isFunction(a)){return this.each(function(b){n(this).addClass(a.call(this,b,this.className))})}if(j){for(b=(a||"").match(F)||[];i>h;h++){if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):" ")){f=0;while(e=b[f++]){d.indexOf(" "+e+" ")<0&&(d+=e+" ")}g=n.trim(d),c.className!==g&&(c.className=g)}}}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(n.isFunction(a)){return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))})}if(j){for(b=(a||"").match(F)||[];i>h;h++){if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(vc," "):"")){f=0;while(e=b[f++]){while(d.indexOf(" "+e+" ")>=0){d=d.replace(" "+e+" "," ")}}g=a?n.trim(d):"",c.className!==g&&(c.className=g)}}}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(F)||[];while(b=f[d++]){e.hasClass(b)?e.removeClass(b):e.addClass(b)}}else{(c===L||"boolean"===c)&&(this.className&&n._data(this,"__className__",this.className),this.className=this.className||a===!1?"":n._data(this,"__className__")||"")}})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++){if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(vc," ").indexOf(b)>=0){return !0}}return !1}}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var wc=n.now(),xc=/\?/,yc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;n.parseJSON=function(b){if(a.JSON&&a.JSON.parse){return a.JSON.parse(b+"")}var c,d=null,e=n.trim(b+"");return e&&!n.trim(e.replace(yc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():n.error("Invalid JSON: "+b)},n.parseXML=function(b){var c,d;if(!b||"string"!=typeof b){return null}try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+b),c};var zc,Ac,Bc=/#.*$/,Cc=/([?&])_=[^&]*/,Dc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ec=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Fc=/^(?:GET|HEAD)$/,Gc=/^\/\//,Hc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Ic={},Jc={},Kc="*/".concat("*");try{Ac=location.href}catch(Lc){Ac=z.createElement("a"),Ac.href="",Ac=Ac.href}zc=Hc.exec(Ac.toLowerCase())||[];function Mc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(F)||[];if(n.isFunction(c)){while(d=f[e++]){"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}}}function Nc(a,b,c,d){var e={},f=a===Jc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Oc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(d in b){void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d])}return c&&n.extend(!0,a,c),a}function Pc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0]){i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"))}if(e){for(g in h){if(h[g]&&h[g].test(e)){i.unshift(g);break}}}if(i[0] in c){f=i[0]}else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Qc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1]){for(g in a.converters){j[g.toLowerCase()]=a.converters[g]}}f=k.shift();while(f){if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift()){if("*"===f){f=i}else{if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g){for(e in j){if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}}}if(g!==!0){if(g&&a["throws"]){b=g(b)}else{try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}}}}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ac,type:"GET",isLocal:Ec.test(zc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Kc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Oc(Oc(a,n.ajaxSettings),b):Oc(n.ajaxSettings,a)},ajaxPrefilter:Mc(Ic),ajaxTransport:Mc(Jc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Dc.exec(f)){j[b[1].toLowerCase()]=b[2]}}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a){if(2>t){for(b in a){q[b]=[q[b],a[b]]}}else{v.always(a[v.status])}}return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||Ac)+"").replace(Bc,"").replace(Gc,zc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(F)||[""],null==k.crossDomain&&(c=Hc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===zc[1]&&c[2]===zc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(zc[3]||("http:"===zc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),Nc(Ic,k,b,v),2===t){return v}h=k.global,h&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Fc.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(xc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Cc.test(e)?e.replace(Cc,"$1_="+wc++):e+(xc.test(e)?"&":"?")+"_="+wc++)),k.ifModified&&(n.lastModified[e]&&v.setRequestHeader("If-Modified-Since",n.lastModified[e]),n.etag[e]&&v.setRequestHeader("If-None-Match",n.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Kc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers){v.setRequestHeader(d,k.headers[d])}if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t)){return v.abort()}u="abort";for(d in {success:1,error:1,complete:1}){v[d](k[d])}if(i=Nc(Jc,k,b,v)){v.readyState=1,h&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t)){throw w}x(-1,w)}}else{x(-1,"No Transport")}function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Pc(k,v,c)),u=Qc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(n.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){if(n.isFunction(a)){return this.each(function(b){n(this).wrapAll(a.call(this,b))})}if(this[0]){var b=n(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!l.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||n.css(a,"display"))},n.expr.filters.visible=function(a){return !n.expr.filters.hidden(a)};var Rc=/%20/g,Sc=/\[\]$/,Tc=/\r?\n/g,Uc=/^(?:submit|button|image|reset|file)$/i,Vc=/^(?:input|select|textarea|keygen)/i;function Wc(a,b,c,d){var e;if(n.isArray(b)){n.each(b,function(b,e){c||Sc.test(a)?d(a,e):Wc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)})}else{if(c||"object"!==n.type(b)){d(a,b)}else{for(e in b){Wc(a+"["+e+"]",b[e],c,d)}}}}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a)){n.each(a,function(){e(this.name,this.value)})}else{for(c in a){Wc(c,a[c],b,e)}}return d.join("&").replace(Rc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&Vc.test(this.nodeName)&&!Uc.test(a)&&(this.checked||!X.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(Tc,"\r\n")}}):{name:b.name,value:c.replace(Tc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return !this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&$c()||_c()}:$c;var Xc=0,Yc={},Zc=n.ajaxSettings.xhr();a.ActiveXObject&&n(a).on("unload",function(){for(var a in Yc){Yc[a](void 0,!0)}}),l.cors=!!Zc&&"withCredentials" in Zc,Zc=l.ajax=!!Zc,Zc&&n.ajaxTransport(function(a){if(!a.crossDomain||l.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Xc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields){for(e in a.xhrFields){f[e]=a.xhrFields[e]}}a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c){void 0!==c[e]&&f.setRequestHeader(e,c[e]+"")}f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState)){if(delete Yc[g],b=void 0,f.onreadystatechange=n.noop,e){4!==f.readyState&&f.abort()}else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Yc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function $c(){try{return new a.XMLHttpRequest}catch(b){}}function _c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=z.head||n("head")[0]||z.documentElement;return{send:function(d,e){b=z.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ad=[],bd=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ad.pop()||n.expando+"_"+wc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(bd.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&bd.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(bd,"$1"+e):b.jsonp!==!1&&(b.url+=(xc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ad.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a){return null}"boolean"==typeof b&&(c=b,b=!1),b=b||z;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var cd=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&cd){return cd.apply(this,arguments)}var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h,a.length),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&n.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var dd=a.document.documentElement;function ed(a){return n.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&n.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using" in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length){return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)})}var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f){return b=f.documentElement,n.contains(b,e)?(typeof e.getBoundingClientRect!==L&&(d=e.getBoundingClientRect()),c=ed(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d}},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===n.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(c=a.offset()),c.top+=n.css(a[0],"borderTopWidth",!0),c.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-n.css(d,"marginTop",!0),left:b.left-c.left-n.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||dd;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position")){a=a.offsetParent}return a||dd})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);n.fn[a]=function(d){return W(this,function(a,d,e){var f=ed(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void (f?f.scrollTo(c?n(f).scrollLeft():e,c?e:n(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=Mb(l.pixelPosition,function(a,c){return c?(c=Kb(a,b),Ib.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return W(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var fd=a.jQuery,gd=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=gd),b&&a.jQuery===n&&(a.jQuery=fd),n},typeof b===L&&(a.jQuery=a.$=n),n});
/*!
 * Bootstrap v3.1.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if("undefined"==typeof jQuery){throw new Error("Bootstrap requires jQuery")}+function(d){function c(){var g=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var h in e){if(void 0!==g.style[h]){return{end:e[h]}}}return !1}d.fn.emulateTransitionEnd=function(a){var i=!1,h=this;d(this).one(d.support.transition.end,function(){i=!0});var g=function(){i||d(h).trigger(d.support.transition.end)};return setTimeout(g,a),this},d(function(){d.support.transition=c()})}(jQuery),+function(g){var e='[data-dismiss="alert"]',i=function(a){g(a).on("click",e,this.close)};i.prototype.close=function(a){function m(){j.trigger("closed.bs.alert").remove()}var l=g(this),k=l.attr("data-target");k||(k=l.attr("href"),k=k&&k.replace(/.*(?=#[^\s]*$)/,""));var j=g(k);a&&a.preventDefault(),j.length||(j=l.hasClass("alert")?l:l.parent()),j.trigger(a=g.Event("close.bs.alert")),a.isDefaultPrevented()||(j.removeClass("in"),g.support.transition&&j.hasClass("fade")?j.one(g.support.transition.end,m).emulateTransitionEnd(150):m())};var h=g.fn.alert;g.fn.alert=function(a){return this.each(function(){var c=g(this),b=c.data("bs.alert");b||c.data("bs.alert",b=new i(this)),"string"==typeof a&&b[a].call(c)})},g.fn.alert.Constructor=i,g.fn.alert.noConflict=function(){return g.fn.alert=h,this},g(document).on("click.bs.alert.data-api",e,i.prototype.close)}(jQuery),+function(e){var d=function(b,a){this.$element=e(b),this.options=e.extend({},d.DEFAULTS,a),this.isLoading=!1};d.DEFAULTS={loadingText:"loading..."},d.prototype.setState=function(a){var k="disabled",j=this.$element,i=j.is("input")?"val":"html",h=j.data();a+="Text",h.resetText||j.data("resetText",j[i]()),j[i](h[a]||this.options[a]),setTimeout(e.proxy(function(){"loadingText"==a?(this.isLoading=!0,j.addClass(k).attr(k,k)):this.isLoading&&(this.isLoading=!1,j.removeClass(k).removeAttr(k))},this),0)},d.prototype.toggle=function(){var i=!0,h=this.$element.closest('[data-toggle="buttons"]');if(h.length){var j=this.$element.find("input");"radio"==j.prop("type")&&(j.prop("checked")&&this.$element.hasClass("active")?i=!1:h.find(".active").removeClass("active")),i&&j.prop("checked",!this.$element.hasClass("active")).trigger("change")}i&&this.$element.toggleClass("active")};var g=e.fn.button;e.fn.button=function(a){return this.each(function(){var h=e(this),c=h.data("bs.button"),b="object"==typeof a&&a;c||h.data("bs.button",c=new d(this,b)),"toggle"==a?c.toggle():a&&c.setState(a)})},e.fn.button.Constructor=d,e.fn.button.noConflict=function(){return e.fn.button=g,this},e(document).on("click.bs.button.data-api","[data-toggle^=button]",function(a){var h=e(a.target);h.hasClass("btn")||(h=h.closest(".btn")),h.button("toggle"),a.preventDefault()})}(jQuery),+function(e){var d=function(a,h){this.$element=e(a),this.$indicators=this.$element.find(".carousel-indicators"),this.options=h,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",e.proxy(this.pause,this)).on("mouseleave",e.proxy(this.cycle,this))};d.DEFAULTS={interval:5000,pause:"hover",wrap:!0},d.prototype.cycle=function(a){return a||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},d.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},d.prototype.to=function(a){var i=this,h=this.getActiveIndex();return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(a)}):h==a?this.pause().cycle():this.slide(a>h?"next":"prev",e(this.$items[a]))},d.prototype.pause=function(a){return a||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},d.prototype.next=function(){return this.sliding?void 0:this.slide("next")},d.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},d.prototype.slide=function(r,q){var p=this.$element.find(".item.active"),o=q||p[r](),n=this.interval,m="next"==r?"left":"right",l="next"==r?"first":"last",k=this;if(!o.length){if(!this.options.wrap){return}o=this.$element.find(".item")[l]()}if(o.hasClass("active")){return this.sliding=!1}var a=e.Event("slide.bs.carousel",{relatedTarget:o[0],direction:m});return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(this.sliding=!0,n&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var c=e(k.$indicators.children()[k.getActiveIndex()]);c&&c.addClass("active")})),e.support.transition&&this.$element.hasClass("slide")?(o.addClass(r),o[0].offsetWidth,p.addClass(m),o.addClass(m),p.one(e.support.transition.end,function(){o.removeClass([r,m].join(" ")).addClass("active"),p.removeClass(["active",m].join(" ")),k.sliding=!1,setTimeout(function(){k.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1000*p.css("transition-duration").slice(0,-1))):(p.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),n&&this.cycle(),this)};var g=e.fn.carousel;e.fn.carousel=function(a){return this.each(function(){var i=e(this),h=i.data("bs.carousel"),c=e.extend({},d.DEFAULTS,i.data(),"object"==typeof a&&a),b="string"==typeof a?a:c.slide;h||i.data("bs.carousel",h=new d(this,c)),"number"==typeof a?h.to(a):b?h[b]():c.interval&&h.pause().cycle()})},e.fn.carousel.Constructor=d,e.fn.carousel.noConflict=function(){return e.fn.carousel=g,this},e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(a){var l,k=e(this),j=e(k.attr("data-target")||(l=k.attr("href"))&&l.replace(/.*(?=#[^\s]+$)/,"")),i=e.extend({},j.data(),k.data()),h=k.attr("data-slide-to");h&&(i.interval=!1),j.carousel(i),(h=k.attr("data-slide-to"))&&j.data("bs.carousel").to(h),a.preventDefault()}),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var a=e(this);a.carousel(a.data())})})}(jQuery),+function(e){var d=function(b,a){this.$element=e(b),this.options=e.extend({},d.DEFAULTS,a),this.transitioning=null,this.options.parent&&(this.$parent=e(this.options.parent)),this.options.toggle&&this.toggle()};d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var b=this.$element.hasClass("width");return b?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var a=e.Event("show.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){var l=this.$parent&&this.$parent.find("> .panel > .in");if(l&&l.length){var k=l.data("bs.collapse");if(k&&k.transitioning){return}l.collapse("hide"),k||l.data("bs.collapse",null)}var j=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[j](0),this.transitioning=1;var i=function(){this.$element.removeClass("collapsing").addClass("collapse in")[j]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition){return i.call(this)}var h=e.camelCase(["scroll",j].join("-"));this.$element.one(e.support.transition.end,e.proxy(i,this)).emulateTransitionEnd(350)[j](this.$element[0][h])}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var a=e.Event("hide.bs.collapse");if(this.$element.trigger(a),!a.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var h=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return e.support.transition?void this.$element[i](0).one(e.support.transition.end,e.proxy(h,this)).emulateTransitionEnd(350):h.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var g=e.fn.collapse;e.fn.collapse=function(a){return this.each(function(){var h=e(this),c=h.data("bs.collapse"),b=e.extend({},d.DEFAULTS,h.data(),"object"==typeof a&&a);!c&&b.toggle&&"show"==a&&(a=!a),c||h.data("bs.collapse",c=new d(this,b)),"string"==typeof a&&c[a]()})},e.fn.collapse.Constructor=d,e.fn.collapse.noConflict=function(){return e.fn.collapse=g,this},e(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(r){var q,p=e(this),o=p.attr("data-target")||r.preventDefault()||(q=p.attr("href"))&&q.replace(/.*(?=#[^\s]+$)/,""),n=e(o),m=n.data("bs.collapse"),l=m?"toggle":p.data(),k=p.attr("data-parent"),a=k&&e(k);m&&m.transitioning||(a&&a.find('[data-toggle=collapse][data-parent="'+k+'"]').not(p).addClass("collapsed"),p[n.hasClass("in")?"addClass":"removeClass"]("collapsed")),n.collapse(l)})}(jQuery),+function(i){function h(a){i(m).remove(),i(l).each(function(){var c=n(i(this)),b={relatedTarget:this};c.hasClass("open")&&(c.trigger(a=i.Event("hide.bs.dropdown",b)),a.isDefaultPrevented()||c.removeClass("open").trigger("hidden.bs.dropdown",b))})}function n(a){var g=a.attr("data-target");g||(g=a.attr("href"),g=g&&/#[A-Za-z]/.test(g)&&g.replace(/.*(?=#[^\s]*$)/,""));var e=g&&i(g);return e&&e.length?e:a.parent()}var m=".dropdown-backdrop",l="[data-toggle=dropdown]",k=function(a){i(a).on("click.bs.dropdown",this.toggle)};k.prototype.toggle=function(p){var o=i(this);if(!o.is(".disabled, :disabled")){var c=n(o),b=c.hasClass("open");if(h(),!b){"ontouchstart" in document.documentElement&&!c.closest(".navbar-nav").length&&i('<div class="dropdown-backdrop"/>').insertAfter(i(this)).on("click",h);var a={relatedTarget:this};if(c.trigger(p=i.Event("show.bs.dropdown",a)),p.isDefaultPrevented()){return}c.toggleClass("open").trigger("shown.bs.dropdown",a),o.focus()}return !1}},k.prototype.keydown=function(a){if(/(38|40|27)/.test(a.keyCode)){var r=i(this);if(a.preventDefault(),a.stopPropagation(),!r.is(".disabled, :disabled")){var q=n(r),p=q.hasClass("open");if(!p||p&&27==a.keyCode){return 27==a.which&&q.find(l).focus(),r.click()}var o=" li:not(.divider):visible a",e=q.find("[role=menu]"+o+", [role=listbox]"+o);if(e.length){var c=e.index(e.filter(":focus"));38==a.keyCode&&c>0&&c--,40==a.keyCode&&c<e.length-1&&c++,~c||(c=0),e.eq(c).focus()}}}};var j=i.fn.dropdown;i.fn.dropdown=function(a){return this.each(function(){var e=i(this),b=e.data("bs.dropdown");b||e.data("bs.dropdown",b=new k(this)),"string"==typeof a&&b[a].call(e)})},i.fn.dropdown.Constructor=k,i.fn.dropdown.noConflict=function(){return i.fn.dropdown=j,this},i(document).on("click.bs.dropdown.data-api",h).on("click.bs.dropdown.data-api",".dropdown form",function(b){b.stopPropagation()}).on("click.bs.dropdown.data-api",l,k.prototype.toggle).on("keydown.bs.dropdown.data-api",l+", [role=menu], [role=listbox]",k.prototype.keydown)}(jQuery),+function(e){var d=function(a,h){this.options=h,this.$element=e(a),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};d.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},d.prototype.toggle=function(b){return this[this.isShown?"hide":"show"](b)},d.prototype.show=function(a){var i=this,h=e.Event("show.bs.modal",{relatedTarget:a});this.$element.trigger(h),this.isShown||h.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var c=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(document.body),i.$element.show().scrollTop(0),c&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var b=e.Event("shown.bs.modal",{relatedTarget:a});c?i.$element.find(".modal-dialog").one(e.support.transition.end,function(){i.$element.focus().trigger(b)}).emulateTransitionEnd(300):i.$element.focus().trigger(b)}))},d.prototype.hide=function(a){a&&a.preventDefault(),a=e.Event("hide.bs.modal"),this.$element.trigger(a),this.isShown&&!a.isDefaultPrevented()&&(this.isShown=!1,this.escape(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one(e.support.transition.end,e.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},d.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(b){this.$element[0]===b.target||this.$element.has(b.target).length||this.$element.focus()},this))},d.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",e.proxy(function(b){27==b.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},d.prototype.hideModal=function(){var b=this;this.$element.hide(),this.backdrop(function(){b.removeBackdrop(),b.$element.trigger("hidden.bs.modal")})},d.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},d.prototype.backdrop=function(a){var i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var h=e.support.transition&&i;if(this.$backdrop=e('<div class="modal-backdrop '+i+'" />').appendTo(document.body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(b){b.target===b.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),h&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!a){return}h?this.$backdrop.one(e.support.transition.end,a).emulateTransitionEnd(150):a()}else{!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,a).emulateTransitionEnd(150):a()):a&&a()}};var g=e.fn.modal;e.fn.modal=function(b,a){return this.each(function(){var i=e(this),h=i.data("bs.modal"),c=e.extend({},d.DEFAULTS,i.data(),"object"==typeof b&&b);h||i.data("bs.modal",h=new d(this,c)),"string"==typeof b?h[b](a):c.show&&h.show(a)})},e.fn.modal.Constructor=d,e.fn.modal.noConflict=function(){return e.fn.modal=g,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(a){var k=e(this),j=k.attr("href"),i=e(k.attr("data-target")||j&&j.replace(/.*(?=#[^\s]+$)/,"")),h=i.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(j)&&j},i.data(),k.data());k.is("a")&&a.preventDefault(),i.modal(h,this).one("hide",function(){k.is(":visible")&&k.focus()})}),e(document).on("show.bs.modal",".modal",function(){e(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){e(document.body).removeClass("modal-open")})}(jQuery),+function(e){var d=function(h,c){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",h,c)};d.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},d.prototype.init=function(a,p,o){this.enabled=!0,this.type=a,this.$element=e(p),this.options=this.getOptions(o);for(var n=this.options.trigger.split(" "),m=n.length;m--;){var l=n[m];if("click"==l){this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this))}else{if("manual"!=l){var k="hover"==l?"mouseenter":"focusin",j="hover"==l?"mouseleave":"focusout";this.$element.on(k+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(j+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},d.prototype.getDefaults=function(){return d.DEFAULTS},d.prototype.getOptions=function(a){return a=e.extend({},this.getDefaults(),this.$element.data(),a),a.delay&&"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay}),a},d.prototype.getDelegateOptions=function(){var a={},h=this.getDefaults();return this._options&&e.each(this._options,function(b,c){h[b]!=c&&(a[b]=c)}),a},d.prototype.enter=function(a){var h=a instanceof this.constructor?a:e(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(h.timeout),h.hoverState="in",h.options.delay&&h.options.delay.show?void (h.timeout=setTimeout(function(){"in"==h.hoverState&&h.show()},h.options.delay.show)):h.show()},d.prototype.leave=function(a){var h=a instanceof this.constructor?a:e(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(h.timeout),h.hoverState="out",h.options.delay&&h.options.delay.hide?void (h.timeout=setTimeout(function(){"out"==h.hoverState&&h.hide()},h.options.delay.hide)):h.hide()},d.prototype.show=function(){var H=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(H),H.isDefaultPrevented()){return}var G=this,F=this.tip();this.setContent(),this.options.animation&&F.addClass("fade");var E="function"==typeof this.options.placement?this.options.placement.call(this,F[0],this.$element[0]):this.options.placement,D=/\s?auto?\s?/i,C=D.test(E);C&&(E=E.replace(D,"")||"top"),F.detach().css({top:0,left:0,display:"block"}).addClass(E),this.options.container?F.appendTo(this.options.container):F.insertAfter(this.$element);var B=this.getPosition(),A=F[0].offsetWidth,z=F[0].offsetHeight;if(C){var y=this.$element.parent(),x=E,w=document.documentElement.scrollTop||document.body.scrollTop,v="body"==this.options.container?window.innerWidth:y.outerWidth(),u="body"==this.options.container?window.innerHeight:y.outerHeight(),t="body"==this.options.container?0:y.offset().left;E="bottom"==E&&B.top+B.height+z-w>u?"top":"top"==E&&B.top-w-z<0?"bottom":"right"==E&&B.right+A>v?"left":"left"==E&&B.left-A<t?"right":E,F.removeClass(x).addClass(E)}var s=this.getCalculatedOffset(E,B,A,z);this.applyPlacement(s,E),this.hoverState=null;var a=function(){G.$element.trigger("shown.bs."+G.type)};e.support.transition&&this.$tip.hasClass("fade")?F.one(e.support.transition.end,a).emulateTransitionEnd(150):a()}},d.prototype.applyPlacement=function(v,u){var t,s=this.tip(),r=s[0].offsetWidth,q=s[0].offsetHeight,p=parseInt(s.css("margin-top"),10),o=parseInt(s.css("margin-left"),10);isNaN(p)&&(p=0),isNaN(o)&&(o=0),v.top=v.top+p,v.left=v.left+o,e.offset.setOffset(s[0],e.extend({using:function(b){s.css({top:Math.round(b.top),left:Math.round(b.left)})}},v),0),s.addClass("in");var n=s[0].offsetWidth,m=s[0].offsetHeight;if("top"==u&&m!=q&&(t=!0,v.top=v.top+q-m),/bottom|top/.test(u)){var a=0;v.left<0&&(a=-2*v.left,v.left=0,s.offset(v),n=s[0].offsetWidth,m=s[0].offsetHeight),this.replaceArrow(a-r+n,n,"left")}else{this.replaceArrow(m-q,m,"top")}t&&s.offset(v)},d.prototype.replaceArrow=function(i,h,j){this.arrow().css(j,i?50*(1-i/h)+"%":"")},d.prototype.setContent=function(){var h=this.tip(),c=this.getTitle();h.find(".tooltip-inner")[this.options.html?"html":"text"](c),h.removeClass("fade in top bottom left right")},d.prototype.hide=function(){function a(){"in"!=j.hoverState&&i.detach(),j.$element.trigger("hidden.bs."+j.type)}var j=this,i=this.tip(),h=e.Event("hide.bs."+this.type);return this.$element.trigger(h),h.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?i.one(e.support.transition.end,a).emulateTransitionEnd(150):a(),this.hoverState=null,this)},d.prototype.fixTitle=function(){var b=this.$element;(b.attr("title")||"string"!=typeof b.attr("data-original-title"))&&b.attr("data-original-title",b.attr("title")||"").attr("title","")},d.prototype.hasContent=function(){return this.getTitle()},d.prototype.getPosition=function(){var a=this.$element[0];return e.extend({},"function"==typeof a.getBoundingClientRect?a.getBoundingClientRect():{width:a.offsetWidth,height:a.offsetHeight},this.$element.offset())},d.prototype.getCalculatedOffset=function(i,h,k,j){return"bottom"==i?{top:h.top+h.height,left:h.left+h.width/2-k/2}:"top"==i?{top:h.top-j,left:h.left+h.width/2-k/2}:"left"==i?{top:h.top+h.height/2-j/2,left:h.left-k}:{top:h.top+h.height/2-j/2,left:h.left+h.width}},d.prototype.getTitle=function(){var i,h=this.$element,j=this.options;return i=h.attr("data-original-title")||("function"==typeof j.title?j.title.call(h[0]):j.title)},d.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},d.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},d.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},d.prototype.enable=function(){this.enabled=!0},d.prototype.disable=function(){this.enabled=!1},d.prototype.toggleEnabled=function(){this.enabled=!this.enabled},d.prototype.toggle=function(a){var h=a?e(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;h.tip().hasClass("in")?h.leave(h):h.enter(h)},d.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var g=e.fn.tooltip;e.fn.tooltip=function(a){return this.each(function(){var h=e(this),c=h.data("bs.tooltip"),b="object"==typeof a&&a;(c||"destroy"!=a)&&(c||h.data("bs.tooltip",c=new d(this,b)),"string"==typeof a&&c[a]())})},e.fn.tooltip.Constructor=d,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=g,this}}(jQuery),+function(e){var d=function(h,c){this.init("popover",h,c)};if(!e.fn.tooltip){throw new Error("Popover requires tooltip.js")}d.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),d.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),d.prototype.constructor=d,d.prototype.getDefaults=function(){return d.DEFAULTS},d.prototype.setContent=function(){var i=this.tip(),h=this.getTitle(),j=this.getContent();i.find(".popover-title")[this.options.html?"html":"text"](h),i.find(".popover-content")[this.options.html?"string"==typeof j?"html":"append":"text"](j),i.removeClass("fade top bottom left right in"),i.find(".popover-title").html()||i.find(".popover-title").hide()},d.prototype.hasContent=function(){return this.getTitle()||this.getContent()},d.prototype.getContent=function(){var h=this.$element,c=this.options;return h.attr("data-content")||("function"==typeof c.content?c.content.call(h[0]):c.content)},d.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},d.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var g=e.fn.popover;e.fn.popover=function(a){return this.each(function(){var h=e(this),c=h.data("bs.popover"),b="object"==typeof a&&a;(c||"destroy"!=a)&&(c||h.data("bs.popover",c=new d(this,b)),"string"==typeof a&&c[a]())})},e.fn.popover.Constructor=d,e.fn.popover.noConflict=function(){return e.fn.popover=g,this}}(jQuery),+function(e){function d(i,h){var b,a=e.proxy(this.process,this);this.$element=e(e(i).is("body")?window:i),this.$body=e("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",a),this.options=e.extend({},d.DEFAULTS,h),this.selector=(this.options.target||(b=e(i).attr("href"))&&b.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=e([]),this.targets=e([]),this.activeTarget=null,this.refresh(),this.process()}d.DEFAULTS={offset:10},d.prototype.refresh=function(){var a=this.$element[0]==window?"offset":"position";this.offsets=e([]),this.targets=e([]);var h=this;this.$body.find(this.selector).map(function(){var i=e(this),c=i.data("target")||i.attr("href"),b=/^#./.test(c)&&e(c);return b&&b.length&&b.is(":visible")&&[[b[a]().top+(!e.isWindow(h.$scrollElement.get(0))&&h.$scrollElement.scrollTop()),c]]||null}).sort(function(i,c){return i[0]-c[0]}).each(function(){h.offsets.push(this[0]),h.targets.push(this[1])})},d.prototype.process=function(){var i,h=this.$scrollElement.scrollTop()+this.options.offset,n=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,m=n-this.$scrollElement.height(),l=this.offsets,k=this.targets,j=this.activeTarget;if(h>=m){return j!=(i=k.last()[0])&&this.activate(i)}if(j&&h<=l[0]){return j!=(i=k[0])&&this.activate(i)}for(i=l.length;i--;){j!=k[i]&&h>=l[i]&&(!l[i+1]||h<=l[i+1])&&this.activate(k[i])}},d.prototype.activate=function(a){this.activeTarget=a,e(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+a+'"],'+this.selector+'[href="'+a+'"]',h=e(i).parents("li").addClass("active");h.parent(".dropdown-menu").length&&(h=h.closest("li.dropdown").addClass("active")),h.trigger("activate.bs.scrollspy")};var g=e.fn.scrollspy;e.fn.scrollspy=function(a){return this.each(function(){var h=e(this),c=h.data("bs.scrollspy"),b="object"==typeof a&&a;c||h.data("bs.scrollspy",c=new d(this,b)),"string"==typeof a&&c[a]()})},e.fn.scrollspy.Constructor=d,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=g,this},e(window).on("load",function(){e('[data-spy="scroll"]').each(function(){var a=e(this);a.scrollspy(a.data())})})}(jQuery),+function(e){var d=function(a){this.element=e(a)};d.prototype.show=function(){var a=this.element,l=a.closest("ul:not(.dropdown-menu)"),k=a.data("target");if(k||(k=a.attr("href"),k=k&&k.replace(/.*(?=#[^\s]*$)/,"")),!a.parent("li").hasClass("active")){var j=l.find(".active:last a")[0],i=e.Event("show.bs.tab",{relatedTarget:j});if(a.trigger(i),!i.isDefaultPrevented()){var h=e(k);this.activate(a.parent("li"),l),this.activate(h,h.parent(),function(){a.trigger({type:"shown.bs.tab",relatedTarget:j})})}}},d.prototype.activate=function(a,l,k){function j(){i.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),a.addClass("active"),h?(a[0].offsetWidth,a.addClass("in")):a.removeClass("fade"),a.parent(".dropdown-menu")&&a.closest("li.dropdown").addClass("active"),k&&k()}var i=l.find("> .active"),h=k&&e.support.transition&&i.hasClass("fade");h?i.one(e.support.transition.end,j).emulateTransitionEnd(150):j(),i.removeClass("in")};var g=e.fn.tab;e.fn.tab=function(a){return this.each(function(){var c=e(this),b=c.data("bs.tab");b||c.data("bs.tab",b=new d(this)),"string"==typeof a&&b[a]()})},e.fn.tab.Constructor=d,e.fn.tab.noConflict=function(){return e.fn.tab=g,this},e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(a){a.preventDefault(),e(this).tab("show")})}(jQuery),+function(e){var d=function(b,a){this.options=e.extend({},d.DEFAULTS,a),this.$window=e(window).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(b),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};d.RESET="affix affix-top affix-bottom",d.DEFAULTS={offset:0},d.prototype.getPinnedOffset=function(){if(this.pinnedOffset){return this.pinnedOffset}this.$element.removeClass(d.RESET).addClass("affix");var b=this.$window.scrollTop(),h=this.$element.offset();return this.pinnedOffset=h.top-b},d.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},d.prototype.checkPosition=function(){if(this.$element.is(":visible")){var r=e(document).height(),q=this.$window.scrollTop(),p=this.$element.offset(),o=this.options.offset,n=o.top,m=o.bottom;"top"==this.affixed&&(p.top+=q),"object"!=typeof o&&(m=n=o),"function"==typeof n&&(n=o.top(this.$element)),"function"==typeof m&&(m=o.bottom(this.$element));var l=null!=this.unpin&&q+this.unpin<=p.top?!1:null!=m&&p.top+this.$element.height()>=r-m?"bottom":null!=n&&n>=q?"top":!1;if(this.affixed!==l){this.unpin&&this.$element.css("top","");var b="affix"+(l?"-"+l:""),a=e.Event(b+".bs.affix");this.$element.trigger(a),a.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(d.RESET).addClass(b).trigger(e.Event(b.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:r-m-this.$element.height()}))}}};var g=e.fn.affix;e.fn.affix=function(a){return this.each(function(){var h=e(this),c=h.data("bs.affix"),b="object"==typeof a&&a;c||h.data("bs.affix",c=new d(this,b)),"string"==typeof a&&c[a]()})},e.fn.affix.Constructor=d,e.fn.affix.noConflict=function(){return e.fn.affix=g,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var a=e(this),h=a.data();h.offset=h.offset||{},h.offsetBottom&&(h.offset.bottom=h.offsetBottom),h.offsetTop&&(h.offset.top=h.offsetTop),a.affix(h)})})}(jQuery);
/*! jQuery Mobile v1.4.0 | Copyright 2010, 2013 jQuery Foundation, Inc. | jquery.org/license */
(function(b,a,c){typeof define=="function"&&define.amd?define(["jquery"],function(d){return c(d,b,a),d.mobile}):c(b.jQuery,b,a)})(this,document,function(c,a,d,b){(function(g,h){g.extend(g.support,{orientation:"orientation" in a&&"onorientationchange" in a})})(c),function(l){l.event.special.throttledresize={setup:function(){l(this).bind("resize",p)},teardown:function(){l(this).unbind("resize",p)}};var h=250,p=function(){j=(new Date).getTime(),m=j-k,m>=h?(k=j,l(this).trigger("throttledresize")):(g&&clearTimeout(g),g=setTimeout(p,h-m))},k=0,g,j,m}(c),function(w,A){function j(){var h=B();h!==k&&(k=h,g.trigger(n))}var g=w(A),n="orientationchange",B,k,z,y,v={0:!0,180:!0},m,x,q;if(w.support.orientation){m=A.innerWidth||g.width(),x=A.innerHeight||g.height(),q=50,z=m>x&&m-x>q,y=v[A.orientation];if(z&&y||!z&&!y){v={"-90":!0,90:!0}}}w.event.special.orientationchange=w.extend({},w.event.special.orientationchange,{setup:function(){if(w.support.orientation&&!w.event.special.orientationchange.disabled){return !1}k=B(),g.bind("throttledresize",j)},teardown:function(){if(w.support.orientation&&!w.event.special.orientationchange.disabled){return !1}g.unbind("throttledresize",j)},add:function(i){var h=i.handler;i.handler=function(l){return l.orientation=B(),h.apply(this,arguments)}}}),w.event.special.orientationchange.orientation=B=function(){var h=!0,e=d.documentElement;return w.support.orientation?h=v[A.orientation]:h=e&&e.clientWidth/e.clientHeight<1.1,h?"portrait":"landscape"},w.fn[n]=function(h){return h?this.bind(n,h):this.trigger(n)},w.attrFn&&(w.attrFn[n]=!0)}(c,this),function(aC,am,at,ao){function G(g){while(g&&typeof g.originalEvent!="undefined"){g=g.originalEvent}return g}function W(y,j){var m=y.type,A,g,w,k,u,q,e,r,x;y=aC.Event(y),y.type=j,A=y.originalEvent,g=aC.event.props,m.search(/^(mouse|click)/)>-1&&(g=aB);if(A){for(e=g.length,k;e;){k=g[--e],y[k]=A[k]}}m.search(/mouse(down|up)|click/)>-1&&!y.which&&(y.which=1);if(m.search(/^touch/)!==-1){w=G(A),m=w.touches,u=w.changedTouches,q=m&&m.length?m[0]:u&&u.length?u[0]:ao;if(q){for(r=0,x=al.length;r<x;r++){k=al[r],y[k]=q[k]}}}return y}function ae(e){var i={},h,g;while(e){h=aC.data(e,ay);for(g in h){h[g]&&(i[g]=i.hasVirtualBinding=!0)}e=e.parentNode}return i}function aw(e,h){var g;while(e){g=aC.data(e,ay);if(g&&(!h||g[h])){return e}e=e.parentNode}return null}function Y(){aA=!1}function ag(){aA=!0}function V(){ac=0,ak.length=0,au=!1,ag()}function X(){Y()}function aH(){ad(),aE=setTimeout(function(){aE=0,V()},aC.vmouse.resetTimerDuration)}function ad(){aE&&(clearTimeout(aE),aE=0)}function Q(g,j,h){var e;if(h&&h[g]||!h&&aw(j.target,g)){e=W(j,g),aC(j.target).trigger(e)}return e}function aa(e){var h=aC.data(e.target,an),g;!au&&(!ac||ac!==h)&&(g=Q("v"+e.type,e),g&&(g.isDefaultPrevented()&&e.preventDefault(),g.isPropagationStopped()&&e.stopPropagation(),g.isImmediatePropagationStopped()&&e.stopImmediatePropagation()))}function af(g){var k=G(g).touches,h,e,j;k&&k.length===1&&(h=g.target,e=ae(h),e.hasVirtualBinding&&(ac=aj++,aC.data(h,an,ac),ad(),X(),aD=!1,j=G(g).touches[0],az=j.pageX,aq=j.pageY,Q("vmouseover",g,e),Q("vmousedown",g,e)))}function ax(g){if(aA){return}aD||Q("vmousecancel",g,ae(g.target)),aD=!0,aH()}function ab(g){if(aA){return}var k=G(g).touches[0],j=aD,e=aC.vmouse.moveDistanceThreshold,h=ae(g.target);aD=aD||Math.abs(k.pageX-az)>e||Math.abs(k.pageY-aq)>e,aD&&!j&&Q("vmousecancel",g,h),Q("vmousemove",g,h),aH()}function Z(i){if(aA){return}ag();var g=ae(i.target),j,h;Q("vmouseup",i,g),aD||(j=Q("vclick",i,g),j&&j.isDefaultPrevented()&&(h=G(i).changedTouches[0],ak.push({touchID:ac,x:h.clientX,y:h.clientY}),au=!0)),Q("vmouseout",i,g),aD=!1,aH()}function ap(e){var h=aC.data(e,ay),g;if(h){for(g in h){if(h[g]){return !0}}}return !1}function K(){}function z(e){var g=e.substr(1);return{setup:function(){ap(this)||aC.data(this,ay,{});var h=aC.data(this,ay);h[e]=!0,av[e]=(av[e]||0)+1,av[e]===1&&aF.bind(g,aa),aC(this).bind(g,K),ah&&(av.touchstart=(av.touchstart||0)+1,av.touchstart===1&&aF.bind("touchstart",af).bind("touchend",Z).bind("touchmove",ab).bind("scroll",ax))},teardown:function(){--av[e],av[e]||aF.unbind(g,aa),ah&&(--av.touchstart,av.touchstart||aF.unbind("touchstart",af).unbind("touchmove",ab).unbind("touchend",Z).unbind("scroll",ax));var i=aC(this),h=aC.data(this,ay);h&&(h[e]=!1),i.unbind(g,K),ap(this)||i.removeData(ay)}}}var ay="virtualMouseBindings",an="virtualTouchID",ar="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),al="clientX clientY pageX pageY screenX screenY".split(" "),aG=aC.event.mouseHooks?aC.event.mouseHooks.props:[],aB=aC.event.props.concat(aG),av={},aE=0,az=0,aq=0,aD=!1,ak=[],au=!1,aA=!1,ah="addEventListener" in at,aF=aC(at),aj=1,ac=0,J,ai;aC.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(ai=0;ai<ar.length;ai++){aC.event.special[ar[ai]]=z(ar[ai])}ah&&at.addEventListener("click",function(s){var h=ak.length,e=s.target,k,g,q,p,m,j;if(h){k=s.clientX,g=s.clientY,J=aC.vmouse.clickDistanceThreshold,q=e;while(q){for(p=0;p<h;p++){m=ak[p],j=0;if(q===e&&Math.abs(m.x-k)<J&&Math.abs(m.y-g)<J||aC.data(q,an)===m.touchID){s.preventDefault(),s.stopPropagation();return}}q=q.parentNode}}},!0)}(c,a,d),function(g){g.mobile={}}(c),function(i,g){var h={touch:"ontouchend" in d};i.mobile.support=i.mobile.support||{},i.extend(i.support,h),i.extend(i.mobile.support,h)}(c),function(n,v,g){function j(l,s,o){var e=o.type;o.type=s,n.event.dispatch.call(l,o),o.type=e}var k=n(d),w=n.mobile.support.touch,h="touchmove scroll",q=w?"touchstart":"mousedown",p=w?"touchend":"mouseup",m=w?"touchmove":"mousemove";n.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,i){n.fn[i]=function(l){return l?this.bind(i,l):this.trigger(i)},n.attrFn&&(n.attrFn[i]=!0)}),n.event.special.scrollstart={enabled:!0,setup:function(){function o(i,r){u=r,j(l,u?"scrollstart":"scrollstop",i)}var l=this,x=n(l),u,e;x.bind(h,function(i){if(!n.event.special.scrollstart.enabled){return}u||o(i,!0),clearTimeout(e),e=setTimeout(function(){o(i,!1)},50)})},teardown:function(){n(this).unbind(h)}},n.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var e=this,l=n(e),i=!1;l.bind("vmousedown",function(x){function r(){clearTimeout(t)}function y(){r(),l.unbind("vclick",A).unbind("vmouseup",r),k.unbind("vmousecancel",y)}function A(o){y(),!i&&z===o.target?j(e,"tap",o):i&&o.stopPropagation()}i=!1;if(x.which&&x.which!==1){return !1}var z=x.target,t;l.bind("vmouseup",r).bind("vclick",A),k.bind("vmousecancel",y),t=setTimeout(function(){n.event.special.tap.emitTapOnTaphold||(i=!0),j(e,"taphold",n.Event("taphold",{target:z}))},n.event.special.tap.tapholdThreshold)})},teardown:function(){n(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),k.unbind("vmousecancel")}},n.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1000,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,start:function(e){var i=e.originalEvent.touches?e.originalEvent.touches[0]:e;return{time:(new Date).getTime(),coords:[i.pageX,i.pageY],origin:n(e.target)}},stop:function(l){var i=l.originalEvent.touches?l.originalEvent.touches[0]:l;return{time:(new Date).getTime(),coords:[i.pageX,i.pageY]}},handleSwipe:function(l,x,u,e){if(x.time-l.time<n.event.special.swipe.durationThreshold&&Math.abs(l.coords[0]-x.coords[0])>n.event.special.swipe.horizontalDistanceThreshold&&Math.abs(l.coords[1]-x.coords[1])<n.event.special.swipe.verticalDistanceThreshold){var o=l.coords[0]>x.coords[0]?"swipeleft":"swiperight";return j(u,"swipe",n.Event("swipe",{target:e,swipestart:l,swipestop:x})),j(u,o,n.Event(o,{target:e,swipestart:l,swipestop:x})),!0}return !1},setup:function(){var e=this,i=n(e);i.bind(q,function(A){function t(l){if(!z){return}y=n.event.special.swipe.stop(l),x||(x=n.event.special.swipe.handleSwipe(z,y,e,B)),Math.abs(z.coords[0]-y.coords[0])>n.event.special.swipe.scrollSupressionThreshold&&l.preventDefault()}var y,z=n.event.special.swipe.start(A),B=A.target,x=!1;i.bind(m,t).one(p,function(){x=!0,i.unbind(m,t)})})},teardown:function(){n(this).unbind(q).unbind(m).unbind(p)}},n.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(e,i){n.event.special[e]={setup:function(){n(this).bind(i,n.noop)},teardown:function(){n(this).unbind(i)}}})}(c,this),function(h,g,i){h.extend(h.mobile,{version:"1.4.0",subPageUrlKey:"ui-page",hideUrlBar:!0,keepNative:":jqmData(role='none'), :jqmData(role='nojs')",activePageClass:"ui-page-active",activeBtnClass:"ui-btn-active",focusClass:"ui-focus",ajaxEnabled:!0,hashListeningEnabled:!0,linkBindingEnabled:!0,defaultPageTransition:"fade",maxTransitionWidth:!1,minScrollBack:0,defaultDialogTransition:"pop",pageLoadErrorMessage:"Error Loading Page",pageLoadErrorMessageTheme:"a",phonegapNavigationEnabled:!1,autoInitializePage:!0,pushStateEnabled:!0,ignoreContentEnabled:!1,buttonMarkup:{hoverDelay:200},dynamicBaseEnabled:!0,pageContainer:h(),allowCrossDomainPages:!1,dialogHashKey:"&ui-state=dialog"})}(c,this),function(l,h,p){var k={},g=l.find,j=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,m=/:jqmData\(([^)]*)\)/g;l.extend(l.mobile,{ns:"",getAttribute:function(o,s){var q;o=o.jquery?o[0]:o,o&&o.getAttribute&&(q=o.getAttribute("data-"+l.mobile.ns+s));try{q=q==="true"?!0:q==="false"?!1:q==="null"?null:+q+""===q?+q:j.test(q)?JSON.parse(q):q}catch(e){}return q},nsNormalizeDict:k,nsNormalize:function(e){return k[e]||(k[e]=l.camelCase(l.mobile.ns+e))},closestPageData:function(i){return i.closest(":jqmData(role='page'), :jqmData(role='dialog')").data("mobile-page")}}),l.fn.jqmData=function(n,o){var e;return typeof n!="undefined"&&(n&&(n=l.mobile.nsNormalize(n)),arguments.length<2||o===p?e=this.data(n):e=this.data(n,o)),e},l.jqmData=function(o,s,q){var e;return typeof s!="undefined"&&(e=l.data(o,s?l.mobile.nsNormalize(s):s,q)),e},l.fn.jqmRemoveData=function(e){return this.removeData(l.mobile.nsNormalize(e))},l.jqmRemoveData=function(e,i){return l.removeData(e,l.mobile.nsNormalize(i))},l.find=function(e,q,o,i){return e.indexOf(":jqmData")>-1&&(e=e.replace(m,"[data-"+(l.mobile.ns||"")+"$1]")),g.call(this,e,q,o,i)},l.extend(l.find,g)}(c,this),function(l,h){function j(p,w){var v,o,q,e=p.nodeName.toLowerCase();return"area"===e?(v=p.parentNode,o=v.name,!p.href||!o||v.nodeName.toLowerCase()!=="map"?!1:(q=l("img[usemap=#"+o+"]")[0],!!q&&m(q))):(/input|select|textarea|button|object/.test(e)?!p.disabled:"a"===e?p.href||w:w)&&m(p)}function m(e){return l.expr.filters.visible(e)&&!l(e).parents().addBack().filter(function(){return l.css(this,"visibility")==="hidden"}).length}var k=0,g=/^ui-id-\d+$/;l.ui=l.ui||{},l.extend(l.ui,{version:"c0ab71056b936627e8a7821f03c044aec6280a40",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),l.fn.extend({focus:function(e){return function(o,i){return typeof o=="number"?this.each(function(){var n=this;setTimeout(function(){l(n).focus(),i&&i.call(n)},o)}):e.apply(this,arguments)}}(l.fn.focus),scrollParent:function(){var e;return l.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?e=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(l.css(this,"position"))&&/(auto|scroll)/.test(l.css(this,"overflow")+l.css(this,"overflow-y")+l.css(this,"overflow-x"))}).eq(0):e=this.parents().filter(function(){return/(auto|scroll)/.test(l.css(this,"overflow")+l.css(this,"overflow-y")+l.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?l(this[0].ownerDocument||d):e},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++k)})},removeUniqueId:function(){return this.each(function(){g.test(this.id)&&l(this).removeAttr("id")})}}),l.extend(l.expr[":"],{data:l.expr.createPseudo?l.expr.createPseudo(function(e){return function(i){return !!l.data(i,e)}}):function(e,o,i){return !!l.data(e,i[3])},focusable:function(e){return j(e,!isNaN(l.attr(e,"tabindex")))},tabbable:function(e){var o=l.attr(e,"tabindex"),i=isNaN(o);return(i||o>=0)&&j(e,!i)}}),l("<a>").outerWidth(1).jquery||l.each(["Width","Height"],function(w,t){function e(i,x,u,o){return l.each(p,function(){x-=parseFloat(l.css(i,"padding"+this))||0,u&&(x-=parseFloat(l.css(i,"border"+this+"Width"))||0),o&&(x-=parseFloat(l.css(i,"margin"+this))||0)}),x}var p=t==="Width"?["Left","Right"]:["Top","Bottom"],q=t.toLowerCase(),v={innerWidth:l.fn.innerWidth,innerHeight:l.fn.innerHeight,outerWidth:l.fn.outerWidth,outerHeight:l.fn.outerHeight};l.fn["inner"+t]=function(i){return i===h?v["inner"+t].call(this):this.each(function(){l(this).css(q,e(this,i)+"px")})},l.fn["outer"+t]=function(i,o){return typeof i!="number"?v["outer"+t].call(this,i):this.each(function(){l(this).css(q,e(this,i,!0,o)+"px")})}}),l.fn.addBack||(l.fn.addBack=function(i){return this.add(i==null?this.prevObject:this.prevObject.filter(i))}),l("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(l.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,l.camelCase(i)):e.call(this)}}(l.fn.removeData)),l.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),l.support.selectstart="onselectstart" in d.createElement("div"),l.fn.extend({disableSelection:function(){return this.bind((l.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(i){i.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(p){if(p!==h){return this.css("zIndex",p)}if(this.length){var e=l(this[0]),n,q;while(e.length&&e[0]!==d){n=e.css("position");if(n==="absolute"||n==="relative"||n==="fixed"){q=parseInt(e.css("zIndex"),10);if(!isNaN(q)&&q!==0){return q}}e=e.parent()}}return 0}}),l.ui.plugin={add:function(o,u,q){var e,p=l.ui[o].prototype;for(e in q){p.plugins[e]=p.plugins[e]||[],p.plugins[e].push([u,q[e]])}},call:function(v,p,w,u){var o,q=v.plugins[p];if(!q){return}if(!u&&(!v.element[0].parentNode||v.element[0].parentNode.nodeType===11)){return}for(o=0;o<q.length;o++){v.options[q[o][0]]&&q[o][1].apply(v.element,w)}}}}(c),function(i,g,h){i.extend(i.mobile,{window:i(g),document:i(d),keyCode:i.ui.keyCode,behaviors:{},silentScroll:function(e){i.type(e)!=="number"&&(e=i.mobile.defaultHomeScroll),i.event.special.scrollstart.enabled=!1,setTimeout(function(){g.scrollTo(0,e),i.mobile.document.trigger("silentscroll",{x:0,y:e})},20),setTimeout(function(){i.event.special.scrollstart.enabled=!0},150)},getClosestBaseUrl:function(e){var k=i(e).closest(".ui-page").jqmData("url"),j=i.mobile.path.documentBase.hrefNoHash;if(!i.mobile.dynamicBaseEnabled||!k||!i.mobile.path.isPath(k)){k=j}return i.mobile.path.makeUrlAbsolute(k,j)},removeActiveLinkClass:function(e){!!i.mobile.activeClickedLink&&(!i.mobile.activeClickedLink.closest("."+i.mobile.activePageClass).length||e)&&i.mobile.activeClickedLink.removeClass(i.mobile.activeBtnClass),i.mobile.activeClickedLink=null},getInheritedTheme:function(p,k){var u=p[0],m="",j=/ui-(bar|body|overlay)-([a-z])\b/,l,q;while(u){l=u.className||"";if(l&&(q=j.exec(l))&&(m=q[2])){break}u=u.parentNode}return m||k||"a"},enhanceable:function(j){return this.haveParents(j,"enhance")},hijackable:function(j){return this.haveParents(j,"ajax")},haveParents:function(v,k){if(!i.mobile.ignoreContentEnabled){return v}var e=v.length,l=i(),w,j,q,p,m;for(p=0;p<e;p++){j=v.eq(p),q=!1,w=v[p];while(w){m=w.getAttribute?w.getAttribute("data-"+i.mobile.ns+k):"";if(m==="false"){q=!0;break}w=w.parentNode}q||(l=l.add(j))}return l},getScreenHeight:function(){return g.innerHeight||i.mobile.window.height()},resetActivePageHeight:function(j){var l=i("."+i.mobile.activePageClass),k=l.height(),e=l.outerHeight(!0);j=typeof j=="number"?j:i.mobile.getScreenHeight(),l.css("min-height",j-(e-k))},loading:function(){var e=this.loading._widget||i(i.mobile.loader.prototype.defaultHtml).loader(),j=e.loader.apply(e,arguments);return this.loading._widget=e,j}}),i.addDependents=function(j,l){var k=i(j),e=k.jqmData("dependents")||i();k.jqmData("dependents",i(e).add(l))},i.fn.extend({removeWithDependents:function(){i.removeWithDependents(this)},enhanceWithin:function(){var j,l={},k=i.mobile.page.prototype.keepNativeSelector(),e=this;i.mobile.nojs&&i.mobile.nojs(this),i.mobile.links&&i.mobile.links(this),i.mobile.degradeInputsWithin&&i.mobile.degradeInputsWithin(this),i.fn.buttonMarkup&&this.find(i.fn.buttonMarkup.initSelector).not(k).jqmEnhanceable().buttonMarkup(),i.fn.fieldcontain&&this.find(":jqmData(role='fieldcontain')").not(k).jqmEnhanceable().fieldcontain(),i.each(i.mobile.widgets,function(m,n){if(n.initSelector){var p=i.mobile.enhanceable(e.find(n.initSelector));p.length>0&&(p=p.not(k)),p.length>0&&(l[n.prototype.widgetName]=p)}});for(j in l){l[j][j]()}return this},addDependents:function(e){i.addDependents(this,e)},getEncodedText:function(){return i("<a>").text(this.text()).html()},jqmEnhanceable:function(){return i.mobile.enhanceable(this)},jqmHijackable:function(){return i.mobile.hijackable(this)}}),i.removeWithDependents=function(e){var j=i(e);(j.jqmData("dependents")||i()).remove(),j.remove()},i.addDependents=function(j,l){var k=i(j),e=k.jqmData("dependents")||i();k.jqmData("dependents",i(e).add(l))},i.find.matches=function(e,j){return i.find(e,null,null,j)},i.find.matchesSelector=function(e,j){return i.find(j,null,null,[e]).length>0}}(c,this),function(h,g){a.matchMedia=a.matchMedia||function(p,k){var u,m=p.documentElement,j=m.firstElementChild||m.firstChild,l=p.createElement("body"),q=p.createElement("div");return q.id="mq-test-1",q.style.cssText="position:absolute;top:-100em",l.style.background="none",l.appendChild(q),function(i){return q.innerHTML='&shy;<style media="'+i+'"> #mq-test-1 { width: 42px; }</style>',m.insertBefore(l,j),u=q.offsetWidth===42,m.removeChild(l),{matches:u,media:i}}}(d),h.mobile.media=function(i){return a.matchMedia(i).matches}}(c)});!function(a){"object"==typeof exports?module.exports=a():"function"==typeof define&&define.amd?define(a):"undefined"!=typeof window?window.proj4=a():"undefined"!=typeof global?global.proj4=a():"undefined"!=typeof self&&(self.proj4=a())}(function(){var d,b,a;return(function c(g,l,j){function h(p,m){if(!l[p]){if(!g[p]){var i=typeof require=="function"&&require;if(!m&&i){return i(p,!0)}if(e){return e(p,!0)}throw new Error("Cannot find module '"+p+"'")}var n=l[p]={exports:{}};g[p][0].call(n.exports,function(o){var q=g[p][1][o];return h(q?q:o)},n,n.exports,c,g,l,j)}return l[p].exports}var e=typeof require=="function"&&require;for(var k=0;k<j.length;k++){h(j[k])}return h})({1:[function(h,i,g){var e=h("mgrs");function j(k,n,m){if(!(this instanceof j)){return new j(k,n,m)}if(Array.isArray(k)){this.x=k[0];this.y=k[1];this.z=k[2]||0}else{if(typeof k==="object"){this.x=k.x;this.y=k.y;this.z=k.z||0}else{if(typeof k==="string"&&typeof n==="undefined"){var l=k.split(",");this.x=parseFloat(l[0],10);this.y=parseFloat(l[1],10);this.z=parseFloat(l[2],10)||0}else{this.x=k;this.y=n;this.z=m||0}}}this.clone=function(){return new j(this.x,this.y,this.z)};this.toArray=function(){if(this.z){return[this.x,this.y,this.z]}else{return[this.x,this.y]}};this.toString=function(){if(this.z){return"x="+this.x+",y="+this.y+",z="+this.z}else{return"x="+this.x+",y="+this.y}};this.toShortString=function(){if(this.z){return this.x+","+this.y+","+this.z}else{return this.x+","+this.y}}}j.fromMGRS=function(k){return new j(e.toPoint(k))};j.prototype.toMGRS=function(k){return e.forward([this.x,this.y],k)};i.exports=j},{mgrs:66}],2:[function(h,i,g){var e=h("./parseCode");var m=h("./extend");var l=h("./projections");var j=h("./deriveConstants");function k(q,r){if(!(this instanceof k)){return new k(q)}r=r||function(s){if(s){throw s}};var o=e(q);if(typeof o!=="object"){r(q);return}var n=j(o);var p=k.projections.get(n.projName);if(p){m(this,n);m(this,p);this.init();r(null,this)}else{r(q)}}k.projections=l;k.projections.start();i.exports=k},{"./deriveConstants":31,"./extend":32,"./parseCode":35,"./projections":37}],3:[function(g,h,e){h.exports=function(n,p,m){var l=m.x,r=m.y,j=m.z||0;var o,q,k;for(k=0;k<3;k++){if(p&&k===2&&m.z===undefined){continue}if(k===0){o=l;q="x"}else{if(k===1){o=r;q="y"}else{o=j;q="z"}}switch(n.axis[k]){case"e":m[q]=o;break;case"w":m[q]=-o;break;case"n":m[q]=o;break;case"s":m[q]=-o;break;case"u":if(m[q]!==undefined){m.z=o}break;case"d":if(m[q]!==undefined){m.z=-o}break;default:return null}}return m}},{}],4:[function(i,j,g){var h=Math.PI/2;var e=i("./sign");j.exports=function(k){return(Math.abs(k)<h)?k:(k-(e(k)*Math.PI))}},{"./sign":21}],5:[function(h,i,g){var j=Math.PI*2;var e=h("./sign");i.exports=function(k){return(Math.abs(k)<Math.PI)?k:(k-(e(k)*j))}},{"./sign":21}],6:[function(g,h,e){h.exports=function(i){if(Math.abs(i)>1){i=(i>1)?1:-1}return Math.asin(i)}},{}],7:[function(g,h,e){h.exports=function(i){return(1-0.25*i*(1+i/16*(3+1.25*i)))}},{}],8:[function(g,h,e){h.exports=function(i){return(0.375*i*(1+0.25*i*(1+0.46875*i)))}},{}],9:[function(g,h,e){h.exports=function(i){return(0.05859375*i*i*(1+0.75*i))}},{}],10:[function(g,h,e){h.exports=function(i){return(i*i*i*(35/3072))}},{}],11:[function(g,h,e){h.exports=function(i,l,k){var j=l*k;return i/Math.sqrt(1-j*j)}},{}],12:[function(g,h,e){h.exports=function(q,p,o,n,m){var l;var j;l=q/p;for(var k=0;k<15;k++){j=(q-(p*l-o*Math.sin(2*l)+n*Math.sin(4*l)-m*Math.sin(6*l)))/(p-2*o*Math.cos(2*l)+4*n*Math.cos(4*l)-6*m*Math.cos(6*l));l+=j;if(Math.abs(j)<=1e-10){return l}}return NaN}},{}],13:[function(h,i,e){var g=Math.PI/2;i.exports=function(l,j){var s=1-(1-l*l)/(2*l)*Math.log((1-l)/(1+l));if(Math.abs(Math.abs(j)-s)<0.000001){if(j<0){return(-1*g)}else{return g}}var p=Math.asin(0.5*j);var n;var r;var o;var k;for(var m=0;m<30;m++){r=Math.sin(p);o=Math.cos(p);k=l*r;n=Math.pow(1-k*k,2)/(2*o)*(j/(1-l*l)-r/(1-k*k)+0.5/l*Math.log((1-k)/(1+k)));p+=n;if(Math.abs(n)<=1e-10){return p}}return NaN}},{}],14:[function(g,h,e){h.exports=function(m,l,k,j,i){return(m*i-l*Math.sin(2*i)+k*Math.sin(4*i)-j*Math.sin(6*i))}},{}],15:[function(g,h,e){h.exports=function(k,j,l){var i=k*j;return l/(Math.sqrt(1-i*i))}},{}],16:[function(h,i,e){var g=Math.PI/2;i.exports=function(p,o){var n=0.5*p;var j,k;var m=g-2*Math.atan(o);for(var l=0;l<=15;l++){j=p*Math.sin(m);k=g-2*Math.atan(o*(Math.pow(((1-j)/(1+j)),n)))-m;m+=k;if(Math.abs(k)<=1e-10){return m}}return -9999}},{}],17:[function(j,h,l){var s=1;var r=0.25;var p=0.046875;var o=0.01953125;var n=0.01068115234375;var t=0.75;var i=0.46875;var g=0.013020833333333334;var e=0.007120768229166667;var m=0.3645833333333333;var k=0.005696614583333333;var q=0.3076171875;h.exports=function(w){var u=[];u[0]=s-w*(r+w*(p+w*(o+w*n)));u[1]=w*(t-w*(p+w*(o+w*n)));var v=w*w;u[2]=v*(i-w*(g+w*e));v*=w;u[3]=v*(m-w*k);u[4]=v*w*q;return u}},{}],18:[function(h,i,e){var k=h("./pj_mlfn");var g=1e-10;var j=20;i.exports=function(l,u,n){var m=1/(1-u);var r=l;for(var p=j;p;--p){var q=Math.sin(r);var o=1-u*q*q;o=(k(r,q,Math.cos(r),n)-l)*(o*Math.sqrt(o))*m;r-=o;if(Math.abs(o)<g){return r}}return r}},{"./pj_mlfn":19}],19:[function(g,h,e){h.exports=function(l,i,k,j){k*=i;i*=i;return(j[0]*l-k*(j[1]+i*(j[2]+i*(j[3]+i*j[4]))))}},{}],20:[function(g,h,e){h.exports=function(k,j){var i;if(k>1e-7){i=k*j;return((1-k*k)*(j/(1-i*i)-(0.5/k)*Math.log((1-i)/(1+i))))}else{return(2*j)}}},{}],21:[function(g,h,e){h.exports=function(i){return i<0?-1:1}},{}],22:[function(g,h,e){h.exports=function(i,j){return(Math.pow((1-i)/(1+i),j))}},{}],23:[function(h,i,e){var g=Math.PI/2;i.exports=function(n,m,l){var j=n*l;var k=0.5*n;j=Math.pow(((1-j)/(1+j)),k);return(Math.tan(0.5*(g-m))/j)}},{}],24:[function(g,h,e){e.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};e.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};e.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};e.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};e.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};e.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};e.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};e.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"};e.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};e.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};e.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};e.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};e.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};e.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};e.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"}},{}],25:[function(g,h,e){e.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};e.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};e.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};e.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};e.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"};e.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};e.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};e.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"};e.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};e.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};e.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};e.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"};e.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};e.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"};e.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."};e.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"};e.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};e.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};e.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"};e.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"};e.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"};e.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"};e.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"};e.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};e.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};e.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};e.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};e.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};e.hough={a:6378270,rf:297,ellipseName:"Hough"};e.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};e.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};e.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};e.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};e.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"};e.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};e.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};e.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"};e.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"};e.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};e.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};e.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};e.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};e.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],26:[function(g,h,e){e.greenwich=0;e.lisbon=-9.131906111111;e.paris=2.337229166667;e.bogota=-74.080916666667;e.madrid=-3.687938888889;e.rome=12.452333333333;e.bern=7.439583333333;e.jakarta=106.807719444444;e.ferro=-17.666666666667;e.brussels=4.367975;e.stockholm=18.058277777778;e.athens=23.7163375;e.oslo=10.722916666667},{}],27:[function(i,g,k){var o=i("./Point");var j=i("./Proj");var h=i("./transform");var e=j("WGS84");function m(s,r,q){var p;if(Array.isArray(q)){p=h(s,r,o(q));if(q.length===3){return[p.x,p.y,p.z]}else{return[p.x,p.y]}}else{return h(s,r,q)}}function n(p){if(p instanceof j){return p}if(p.oProj){return p.oProj}return j(p)}function l(q,p,t){q=n(q);var s=false;var r;if(typeof p==="undefined"){p=q;q=e;s=true}else{if(typeof p.x!=="undefined"||Array.isArray(p)){t=p;p=q;q=e;s=true}}p=n(p);if(t){return m(q,p,t)}else{r={forward:function(u){return m(q,p,u)},inverse:function(u){return m(p,q,u)}};if(s){r.oProj=p}return r}}g.exports=l},{"./Point":1,"./Proj":2,"./transform":63}],28:[function(g,e,i){var k=Math.PI/2;var l=1;var r=2;var h=3;var j=4;var o=5;var q=0.00000484813681109536;var p=1.0026;var n=0.3826834323650898;var m=function(t){if(!(this instanceof m)){return new m(t)}this.datum_type=j;if(!t){return}if(t.datumCode&&t.datumCode==="none"){this.datum_type=o}if(t.datum_params){for(var s=0;s<t.datum_params.length;s++){t.datum_params[s]=parseFloat(t.datum_params[s])}if(t.datum_params[0]!==0||t.datum_params[1]!==0||t.datum_params[2]!==0){this.datum_type=l}if(t.datum_params.length>3){if(t.datum_params[3]!==0||t.datum_params[4]!==0||t.datum_params[5]!==0||t.datum_params[6]!==0){this.datum_type=r;t.datum_params[3]*=q;t.datum_params[4]*=q;t.datum_params[5]*=q;t.datum_params[6]=(t.datum_params[6]/1000000)+1}}}this.datum_type=t.grids?h:this.datum_type;this.a=t.a;this.b=t.b;this.es=t.es;this.ep2=t.ep2;this.datum_params=t.datum_params;if(this.datum_type===h){this.grids=t.grids}};m.prototype={compare_datums:function(s){if(this.datum_type!==s.datum_type){return false}else{if(this.a!==s.a||Math.abs(this.es-s.es)>5e-11){return false}else{if(this.datum_type===l){return(this.datum_params[0]===s.datum_params[0]&&this.datum_params[1]===s.datum_params[1]&&this.datum_params[2]===s.datum_params[2])}else{if(this.datum_type===r){return(this.datum_params[0]===s.datum_params[0]&&this.datum_params[1]===s.datum_params[1]&&this.datum_params[2]===s.datum_params[2]&&this.datum_params[3]===s.datum_params[3]&&this.datum_params[4]===s.datum_params[4]&&this.datum_params[5]===s.datum_params[5]&&this.datum_params[6]===s.datum_params[6])}else{if(this.datum_type===h||s.datum_type===h){return this.nadgrids===s.nadgrids}else{return true}}}}}},geodetic_to_geocentric:function(u){var D=u.x;var z=u.y;var v=u.z?u.z:0;var w;var t;var s;var B=0;var C;var A;var y;var x;if(z<-k&&z>-1.001*k){z=-k}else{if(z>k&&z<1.001*k){z=k}else{if((z<-k)||(z>k)){return null}}}if(D>Math.PI){D-=(2*Math.PI)}A=Math.sin(z);x=Math.cos(z);y=A*A;C=this.a/(Math.sqrt(1-this.es*y));w=(C+v)*x*Math.cos(D);t=(C+v)*x*Math.sin(D);s=((C*(1-this.es))+v)*A;u.x=w;u.y=t;u.z=s;return B},geocentric_to_geodetic:function(K){var R=1e-12;var M=(R*R);var x=30;var D;var z;var s;var F;var t;var E;var C;var Q;var O;var B;var I;var H;var w;var N;var y=K.x;var v=K.y;var u=K.z?K.z:0;var A;var J;var G;w=false;D=Math.sqrt(y*y+v*v);z=Math.sqrt(y*y+v*v+u*u);if(D/this.a<R){w=true;A=0;if(z/this.a<R){J=k;G=-this.b;return}}else{A=Math.atan2(v,y)}s=u/z;F=D/z;t=1/Math.sqrt(1-this.es*(2-this.es)*F*F);Q=F*(1-this.es)*t;O=s*t;N=0;do{N++;C=this.a/Math.sqrt(1-this.es*O*O);G=D*Q+u*O-C*(1-this.es*O*O);E=this.es*C/(C+G);t=1/Math.sqrt(1-E*(2-E)*F*F);B=F*(1-E)*t;I=s*t;H=I*Q-B*O;Q=B;O=I}while(H*H>M&&N<x);J=Math.atan(I/Math.abs(B));K.x=A;K.y=J;K.z=G;return K},geocentric_to_geodetic_noniter:function(J){var v=J.x;var u=J.y;var s=J.z?J.z:0;var y;var I;var D;var w;var F;var H;var E;var B;var z;var A;var N;var x;var M;var K;var G;var C;var t;v=parseFloat(v);u=parseFloat(u);s=parseFloat(s);t=false;if(v!==0){y=Math.atan2(u,v)}else{if(u>0){y=k}else{if(u<0){y=-k}else{t=true;y=0;if(s>0){I=k}else{if(s<0){I=-k}else{I=k;D=-this.b;return}}}}}F=v*v+u*u;w=Math.sqrt(F);H=s*p;B=Math.sqrt(H*H+F);A=H/B;x=w/B;N=A*A*A;E=s+this.b*this.ep2*N;C=w-this.a*this.es*x*x*x;z=Math.sqrt(E*E+C*C);M=E/z;K=C/z;G=this.a/Math.sqrt(1-this.es*M*M);if(K>=n){D=w/K-G}else{if(K<=-n){D=w/-K-G}else{D=s/M+G*(this.es-1)}}if(t===false){I=Math.atan(M/K)}J.x=y;J.y=I;J.z=D;return J},geocentric_to_wgs84:function(t){if(this.datum_type===l){t.x+=this.datum_params[0];t.y+=this.datum_params[1];t.z+=this.datum_params[2]}else{if(this.datum_type===r){var x=this.datum_params[0];var v=this.datum_params[1];var A=this.datum_params[2];var w=this.datum_params[3];var B=this.datum_params[4];var z=this.datum_params[5];var y=this.datum_params[6];var u=y*(t.x-z*t.y+B*t.z)+x;var s=y*(z*t.x+t.y-w*t.z)+v;var C=y*(-B*t.x+w*t.y+t.z)+A;t.x=u;t.y=s;t.z=C}}},geocentric_from_wgs84:function(u){if(this.datum_type===l){u.x-=this.datum_params[0];u.y-=this.datum_params[1];u.z-=this.datum_params[2]}else{if(this.datum_type===r){var y=this.datum_params[0];var v=this.datum_params[1];var B=this.datum_params[2];var x=this.datum_params[3];var C=this.datum_params[4];var A=this.datum_params[5];var z=this.datum_params[6];var w=(u.x-y)/z;var t=(u.y-v)/z;var s=(u.z-B)/z;u.x=w+A*t-C*s;u.y=-A*w+t+x*s;u.z=C*w-x*t+s}}}};e.exports=m},{}],29:[function(g,e,i){var j=1;var m=2;var h=3;var l=5;var k=6378137;var n=0.006694379990141316;e.exports=function(p,x,y){var w,t,r;function s(A){return(A===j||A===m)}if(p.compare_datums(x)){return y}if(p.datum_type===l||x.datum_type===l){return y}var v=p.a;var o=p.es;var q=x.a;var z=x.es;var u=p.datum_type;if(u===h){if(this.apply_gridshift(p,0,y)===0){p.a=k;p.es=n}else{if(!p.datum_params){p.a=v;p.es=p.es;return y}w=1;for(t=0,r=p.datum_params.length;t<r;t++){w*=p.datum_params[t]}if(w===0){p.a=v;p.es=p.es;return y}if(p.datum_params.length>3){u=m}else{u=j}}}if(x.datum_type===h){x.a=k;x.es=n}if(p.es!==x.es||p.a!==x.a||s(u)||s(x.datum_type)){p.geodetic_to_geocentric(y);if(s(p.datum_type)){p.geocentric_to_wgs84(y)}if(s(x.datum_type)){x.geocentric_from_wgs84(y)}x.geocentric_to_geodetic(y)}if(x.datum_type===h){this.apply_gridshift(x,1,y)}p.a=v;p.es=o;x.a=q;x.es=z;return y}},{}],30:[function(i,j,h){var l=i("./global");var g=i("./projString");var k=i("./wkt");function e(m){var n=this;if(arguments.length===2){if(arguments[1][0]==="+"){e[m]=g(arguments[1])}else{e[m]=k(arguments[1])}}else{if(arguments.length===1){if(Array.isArray(m)){return m.map(function(o){if(Array.isArray(o)){e.apply(n,o)}else{e(o)}})}else{if(typeof m==="string"){}else{if("EPSG" in m){e["EPSG:"+m.EPSG]=m}else{if("ESRI" in m){e["ESRI:"+m.ESRI]=m}else{if("IAU2000" in m){e["IAU2000:"+m.IAU2000]=m}else{console.log(m)}}}}}return}}}l(e);j.exports=e},{"./global":33,"./projString":36,"./wkt":65}],31:[function(g,e,i){var k=g("./constants/Datum");var m=g("./constants/Ellipsoid");var l=g("./extend");var n=g("./datum");var h=1e-10;var j=0.16666666666666666;var p=0.04722222222222222;var o=0.022156084656084655;e.exports=function(q){if(q.datumCode&&q.datumCode!=="none"){var r=k[q.datumCode];if(r){q.datum_params=r.towgs84?r.towgs84.split(","):null;q.ellps=r.ellipse;q.datumName=r.datumName?r.datumName:q.datumCode}}if(!q.a){var s=m[q.ellps]?m[q.ellps]:m.WGS84;l(q,s)}if(q.rf&&!q.b){q.b=(1-1/q.rf)*q.a}if(q.rf===0||Math.abs(q.a-q.b)<h){q.sphere=true;q.b=q.a}q.a2=q.a*q.a;q.b2=q.b*q.b;q.es=(q.a2-q.b2)/q.a2;q.e=Math.sqrt(q.es);if(q.R_A){q.a*=1-q.es*(j+q.es*(p+q.es*o));q.a2=q.a*q.a;q.b2=q.b*q.b;q.es=0}q.ep2=(q.a2-q.b2)/q.b2;if(!q.k0){q.k0=1}if(!q.axis){q.axis="enu"}q.datum=n(q);return q}},{"./constants/Datum":24,"./constants/Ellipsoid":25,"./datum":28,"./extend":32}],32:[function(g,h,e){h.exports=function(i,l){i=i||{};var k,j;if(!l){return i}for(j in l){k=l[j];if(k!==undefined){i[j]=k}}return i}},{}],33:[function(g,h,e){h.exports=function(i){i("WGS84","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees");i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");i["EPSG:3785"]=i["EPSG:3857"];i.GOOGLE=i["EPSG:3857"];i["EPSG:900913"]=i["EPSG:3857"];i["EPSG:102113"]=i["EPSG:3857"]}},{}],34:[function(h,i,g){var e=h("./core");e.defaultDatum="WGS84";e.Proj=h("./Proj");e.WGS84=new e.Proj("WGS84");e.Point=h("./Point");e.defs=h("./defs");e.transform=h("./transform");e.mgrs=h("mgrs");e.version=h("./version");h("./includedProjections")(e);i.exports=e},{"./Point":1,"./Proj":2,"./core":27,"./defs":30,"./includedProjections":"gWUPNW","./transform":63,"./version":64,mgrs:66}],35:[function(i,g,k){var l=i("./defs");var m=i("./wkt");var e=i("./projString");function h(q){return typeof q==="string"}function p(q){return q in l}function o(r){var q=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];return q.reduce(function(t,s){return t+1+r.indexOf(s)},0)}function n(q){return q[0]==="+"}function j(q){if(h(q)){if(p(q)){return l[q]}else{if(o(q)){return m(q)}else{if(n(q)){return e(q)}}}}else{return q}}g.exports=j},{"./defs":30,"./projString":36,"./wkt":65}],36:[function(g,h,e){var j=0.017453292519943295;var i=g("./constants/PrimeMeridian");h.exports=function(o){var k={};var m={};o.split("+").map(function(r){return r.trim()}).filter(function(r){return r}).forEach(function(r){var s=r.split("=");s.push(true);m[s[0].toLowerCase()]=s[1]});var p,n,l;var q={proj:"projName",datum:"datumCode",rf:function(r){k.rf=parseFloat(r,10)},lat_0:function(r){k.lat0=r*j},lat_1:function(r){k.lat1=r*j},lat_2:function(r){k.lat2=r*j},lat_ts:function(r){k.lat_ts=r*j},lon_0:function(r){k.long0=r*j},lon_1:function(r){k.long1=r*j},lon_2:function(r){k.long2=r*j},alpha:function(r){k.alpha=parseFloat(r)*j},lonc:function(r){k.longc=r*j},x_0:function(r){k.x0=parseFloat(r,10)},y_0:function(r){k.y0=parseFloat(r,10)},k_0:function(r){k.k0=parseFloat(r,10)},k:function(r){k.k0=parseFloat(r,10)},r_a:function(){k.R_A=true},zone:function(r){k.zone=parseInt(r,10)},south:function(){k.utmSouth=true},towgs84:function(r){k.datum_params=r.split(",").map(function(s){return parseFloat(s,10)})},to_meter:function(r){k.to_meter=parseFloat(r,10)},from_greenwich:function(r){k.from_greenwich=r*j},pm:function(r){k.from_greenwich=(i[r]?i[r]:parseFloat(r,10))*j},nadgrids:function(r){if(r==="@null"){k.datumCode="none"}else{k.nadgrids=r}},axis:function(r){var s="ewnsud";if(r.length===3&&s.indexOf(r.substr(0,1))!==-1&&s.indexOf(r.substr(1,1))!==-1&&s.indexOf(r.substr(2,1))!==-1){k.axis=r}}};for(p in m){n=m[p];if(p in q){l=q[p];if(typeof l==="function"){l(n)}else{k[l]=n}}else{k[p]=n}}return k}},{"./constants/PrimeMeridian":26}],37:[function(g,i,e){var h=[g("./projections/merc"),g("./projections/longlat")];var k={};var l=[];function j(o,n){var m=l.length;if(!o.names){console.log(n);return true}l[m]=o;o.names.forEach(function(p){k[p.toLowerCase()]=m});return this}e.add=j;e.get=function(m){if(!m){return false}var o=m.toLowerCase();if(typeof k[o]!=="undefined"&&l[k[o]]){return l[k[o]]}};e.start=function(){h.forEach(j)}},{"./projections/longlat":49,"./projections/merc":50}],38:[function(k,l,h){var j=1e-10;var m=k("../common/msfnz");var e=k("../common/qsfnz");var i=k("../common/adjust_lon");var g=k("../common/asinz");h.init=function(){if(Math.abs(this.lat1+this.lat2)<j){return}this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e3=Math.sqrt(this.es);this.sin_po=Math.sin(this.lat1);this.cos_po=Math.cos(this.lat1);this.t1=this.sin_po;this.con=this.sin_po;this.ms1=m(this.e3,this.sin_po,this.cos_po);this.qs1=e(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat2);this.cos_po=Math.cos(this.lat2);this.t2=this.sin_po;this.ms2=m(this.e3,this.sin_po,this.cos_po);this.qs2=e(this.e3,this.sin_po,this.cos_po);this.sin_po=Math.sin(this.lat0);this.cos_po=Math.cos(this.lat0);this.t3=this.sin_po;this.qs0=e(this.e3,this.sin_po,this.cos_po);if(Math.abs(this.lat1-this.lat2)>j){this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1)}else{this.ns0=this.con}this.c=this.ms1*this.ms1+this.ns0*this.qs1;this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0};h.forward=function(s){var t=s.x;var r=s.y;this.sin_phi=Math.sin(r);this.cos_phi=Math.cos(r);var o=e(this.e3,this.sin_phi,this.cos_phi);var v=this.a*Math.sqrt(this.c-this.ns0*o)/this.ns0;var q=this.ns0*i(t-this.long0);var n=v*Math.sin(q)+this.x0;var u=this.rh-v*Math.cos(q)+this.y0;s.x=n;s.y=u;return s};h.inverse=function(s){var u,n,o,q,t,r;s.x-=this.x0;s.y=this.rh-s.y+this.y0;if(this.ns0>=0){u=Math.sqrt(s.x*s.x+s.y*s.y);o=1}else{u=-Math.sqrt(s.x*s.x+s.y*s.y);o=-1}q=0;if(u!==0){q=Math.atan2(o*s.x,o*s.y)}o=u*this.ns0/this.a;if(this.sphere){r=Math.asin((this.c-o*o)/(2*this.ns0))}else{n=(this.c-o*o)/this.ns0;r=this.phi1z(this.e3,n)}t=i(q/this.ns0+this.long0);s.x=t;s.y=r;return s};h.phi1z=function(r,w){var n,s,p,q,u;var v=g(0.5*w);if(r<j){return v}var o=r*r;for(var t=1;t<=25;t++){n=Math.sin(v);s=Math.cos(v);p=r*n;q=1-p*p;u=0.5*q*q/s*(w/(1-o)-n/q+0.5/r*Math.log((1-p)/(1+p)));v=v+u;if(Math.abs(u)<=1e-7){return v}}return null};h.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/msfnz":15,"../common/qsfnz":20}],39:[function(i,g,k){var s=i("../common/adjust_lon");var n=Math.PI/2;var j=1e-10;var p=i("../common/mlfn");var r=i("../common/e0fn");var e=i("../common/e1fn");var h=i("../common/e2fn");var l=i("../common/e3fn");var o=i("../common/gN");var q=i("../common/asinz");var m=i("../common/imlfn");k.init=function(){this.sin_p12=Math.sin(this.lat0);this.cos_p12=Math.cos(this.lat0)};k.forward=function(Q){var A=Q.x;var C=Q.y;var J=Math.sin(Q.y);var T=Math.cos(Q.y);var z=s(A-this.long0);var I,F,E,D,Y,X,R,V,B,U,O,N,M,S,x,W,v,K,P,y,w,u,t;if(this.sphere){if(Math.abs(this.sin_p12-1)<=j){Q.x=this.x0+this.a*(n-C)*Math.sin(z);Q.y=this.y0-this.a*(n-C)*Math.cos(z);return Q}else{if(Math.abs(this.sin_p12+1)<=j){Q.x=this.x0+this.a*(n+C)*Math.sin(z);Q.y=this.y0+this.a*(n+C)*Math.cos(z);return Q}else{K=this.sin_p12*J+this.cos_p12*T*Math.cos(z);W=Math.acos(K);v=W/Math.sin(W);Q.x=this.x0+this.a*v*T*Math.sin(z);Q.y=this.y0+this.a*v*(this.cos_p12*J-this.sin_p12*T*Math.cos(z));return Q}}}else{I=r(this.es);F=e(this.es);E=h(this.es);D=l(this.es);if(Math.abs(this.sin_p12-1)<=j){Y=this.a*p(I,F,E,D,n);X=this.a*p(I,F,E,D,C);Q.x=this.x0+(Y-X)*Math.sin(z);Q.y=this.y0-(Y-X)*Math.cos(z);return Q}else{if(Math.abs(this.sin_p12+1)<=j){Y=this.a*p(I,F,E,D,n);X=this.a*p(I,F,E,D,C);Q.x=this.x0+(Y+X)*Math.sin(z);Q.y=this.y0+(Y+X)*Math.cos(z);return Q}else{R=J/T;V=o(this.a,this.e,this.sin_p12);B=o(this.a,this.e,J);U=Math.atan((1-this.es)*R+this.es*V*this.sin_p12/(B*T));O=Math.atan2(Math.sin(z),this.cos_p12*Math.tan(U)-this.sin_p12*Math.cos(z));if(O===0){P=Math.asin(this.cos_p12*Math.sin(U)-this.sin_p12*Math.cos(U))}else{if(Math.abs(Math.abs(O)-Math.PI)<=j){P=-Math.asin(this.cos_p12*Math.sin(U)-this.sin_p12*Math.cos(U))}else{P=Math.asin(Math.sin(z)*Math.cos(U)/Math.sin(O))}}N=this.e*this.sin_p12/Math.sqrt(1-this.es);M=this.e*this.cos_p12*Math.cos(O)/Math.sqrt(1-this.es);S=N*M;x=M*M;y=P*P;w=y*P;u=w*P;t=u*P;W=V*P*(1-y*x*(1-x)/6+w/8*S*(1-2*x)+u/120*(x*(4-7*x)-3*N*N*(1-7*x))-t/48*S);Q.x=this.x0+W*Math.sin(O);Q.y=this.y0+W*Math.cos(O);return Q}}}};k.inverse=function(S){S.x-=this.x0;S.y-=this.y0;var Q,I,t,T,u,w,v,G,E,y,x,X,H,K,V,N,U,W,R,P,O,C,J;if(this.sphere){Q=Math.sqrt(S.x*S.x+S.y*S.y);if(Q>(2*n*this.a)){return}I=Q/this.a;t=Math.sin(I);T=Math.cos(I);u=this.long0;if(Math.abs(Q)<=j){w=this.lat0}else{w=q(T*this.sin_p12+(S.y*t*this.cos_p12)/Q);v=Math.abs(this.lat0)-n;if(Math.abs(v)<=j){if(this.lat0>=0){u=s(this.long0+Math.atan2(S.x,-S.y))}else{u=s(this.long0-Math.atan2(-S.x,S.y))}}else{u=s(this.long0+Math.atan2(S.x*t,Q*this.cos_p12*T-S.y*this.sin_p12*t))}}S.x=u;S.y=w;return S}else{G=r(this.es);E=e(this.es);y=h(this.es);x=l(this.es);if(Math.abs(this.sin_p12-1)<=j){X=this.a*p(G,E,y,x,n);Q=Math.sqrt(S.x*S.x+S.y*S.y);H=X-Q;w=m(H/this.a,G,E,y,x);u=s(this.long0+Math.atan2(S.x,-1*S.y));S.x=u;S.y=w;return S}else{if(Math.abs(this.sin_p12+1)<=j){X=this.a*p(G,E,y,x,n);Q=Math.sqrt(S.x*S.x+S.y*S.y);H=Q-X;w=m(H/this.a,G,E,y,x);u=s(this.long0+Math.atan2(S.x,S.y));S.x=u;S.y=w;return S}else{Q=Math.sqrt(S.x*S.x+S.y*S.y);N=Math.atan2(S.x,S.y);K=o(this.a,this.e,this.sin_p12);U=Math.cos(N);W=this.e*this.cos_p12*U;R=-W*W/(1-this.es);P=3*this.es*(1-R)*this.sin_p12*this.cos_p12*U/(1-this.es);O=Q/K;C=O-R*(1+R)*Math.pow(O,3)/6-P*(1+3*R)*Math.pow(O,4)/24;J=1-R*C*C/2-O*C*C*C/6;V=Math.asin(this.sin_p12*Math.cos(C)+this.cos_p12*Math.sin(C)*U);u=s(this.long0+Math.asin(Math.sin(N)*Math.sin(C)/Math.cos(V)));w=Math.atan((1-this.es*J*this.sin_p12/Math.sin(V))*Math.tan(V)/(1-this.es));S.x=u;S.y=w;return S}}}};k.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],40:[function(i,g,k){var q=i("../common/mlfn");var r=i("../common/e0fn");var e=i("../common/e1fn");var h=i("../common/e2fn");var l=i("../common/e3fn");var p=i("../common/gN");var s=i("../common/adjust_lon");var m=i("../common/adjust_lat");var n=i("../common/imlfn");var o=Math.PI/2;var j=1e-10;k.init=function(){if(!this.sphere){this.e0=r(this.es);this.e1=e(this.es);this.e2=h(this.es);this.e3=l(this.es);this.ml0=this.a*q(this.e0,this.e1,this.e2,this.e3,this.lat0)}};k.forward=function(v){var E,D;var H=v.x;var C=v.y;H=s(H-this.long0);if(this.sphere){E=this.a*Math.asin(Math.cos(C)*Math.sin(H));D=this.a*(Math.atan2(Math.tan(C),Math.cos(H))-this.lat0)}else{var t=Math.sin(C);var z=Math.cos(C);var u=p(this.a,this.e,t);var G=Math.tan(C)*Math.tan(C);var B=H*Math.cos(C);var w=B*B;var F=this.es*z*z/(1-this.es);var A=this.a*q(this.e0,this.e1,this.e2,this.e3,C);E=u*B*(1-w*G*(1/6-(8-G+8*F)*w/120));D=A-this.ml0+u*t/z*w*(0.5+(5-G+6*F)*w/24)}v.x=E+this.x0;v.y=D+this.y0;return v};k.inverse=function(u){u.x-=this.x0;u.y-=this.y0;var D=u.x/this.a;var B=u.y/this.a;var A,H;if(this.sphere){var F=B+this.lat0;A=Math.asin(Math.sin(F)*Math.cos(D));H=Math.atan2(Math.tan(D),Math.cos(F))}else{var G=this.ml0/this.a+B;var C=n(G,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(C)-o)<=j){u.x=this.long0;u.y=o;if(B<0){u.y*=-1}return u}var v=p(this.a,this.e,Math.sin(C));var t=v*v*v/this.a/this.a*(1-this.es);var z=Math.pow(Math.tan(C),2);var w=D*this.a/v;var E=w*w;A=C-v*Math.tan(C)/t*w*w*(0.5-(1+3*z)*w*w/24);H=w*(1-E*(z/3+(1+3*z)*z*E/15))/Math.cos(C)}u.x=s(H+this.long0);u.y=m(A);return u};k.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],41:[function(i,j,g){var h=i("../common/adjust_lon");var e=i("../common/qsfnz");var l=i("../common/msfnz");var k=i("../common/iqsfnz");g.init=function(){if(!this.sphere){this.k0=l(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))}};g.forward=function(r){var s=r.x;var q=r.y;var n,t;var o=h(s-this.long0);if(this.sphere){n=this.x0+this.a*o*Math.cos(this.lat_ts);t=this.y0+this.a*Math.sin(q)/Math.cos(this.lat_ts)}else{var m=e(this.e,Math.sin(q));n=this.x0+this.a*this.k0*o;t=this.y0+this.a*m*0.5/this.k0}r.x=n;r.y=t;return r};g.inverse=function(n){n.x-=this.x0;n.y-=this.y0;var o,m;if(this.sphere){o=h(this.long0+(n.x/this.a)/Math.cos(this.lat_ts));m=Math.asin((n.y/this.a)*Math.cos(this.lat_ts))}else{m=k(this.e,2*n.y*this.k0/this.a);o=h(this.long0+n.x/(this.a*this.k0))}n.x=o;n.y=m;return n};g.names=["cea"]},{"../common/adjust_lon":5,"../common/iqsfnz":13,"../common/msfnz":15,"../common/qsfnz":20}],42:[function(i,j,g){var h=i("../common/adjust_lon");var e=i("../common/adjust_lat");g.init=function(){this.x0=this.x0||0;this.y0=this.y0||0;this.lat0=this.lat0||0;this.long0=this.long0||0;this.lat_ts=this.lat_ts||0;this.title=this.title||"Equidistant Cylindrical (Plate Carre)";this.rc=Math.cos(this.lat_ts)};g.forward=function(n){var o=n.x;var m=n.y;var l=h(o-this.long0);var k=e(m-this.lat0);n.x=this.x0+(this.a*l*this.rc);n.y=this.y0+(this.a*k);return n};g.inverse=function(l){var k=l.x;var m=l.y;l.x=h(this.long0+((k-this.x0)/(this.a*this.rc)));l.y=e(this.lat0+((m-this.y0)/(this.a)));return l};g.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5}],43:[function(j,h,l){var q=j("../common/e0fn");var e=j("../common/e1fn");var i=j("../common/e2fn");var m=j("../common/e3fn");var g=j("../common/msfnz");var p=j("../common/mlfn");var r=j("../common/adjust_lon");var n=j("../common/adjust_lat");var o=j("../common/imlfn");var k=1e-10;l.init=function(){if(Math.abs(this.lat1+this.lat2)<k){return}this.lat2=this.lat2||this.lat1;this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=q(this.es);this.e1=e(this.es);this.e2=i(this.es);this.e3=m(this.es);this.sinphi=Math.sin(this.lat1);this.cosphi=Math.cos(this.lat1);this.ms1=g(this.e,this.sinphi,this.cosphi);this.ml1=p(this.e0,this.e1,this.e2,this.e3,this.lat1);if(Math.abs(this.lat1-this.lat2)<k){this.ns=this.sinphi}else{this.sinphi=Math.sin(this.lat2);this.cosphi=Math.cos(this.lat2);this.ms2=g(this.e,this.sinphi,this.cosphi);this.ml2=p(this.e0,this.e1,this.e2,this.e3,this.lat2);this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)}this.g=this.ml1+this.ms1/this.ns;this.ml0=p(this.e0,this.e1,this.e2,this.e3,this.lat0);this.rh=this.a*(this.g-this.ml0)};l.forward=function(v){var w=v.x;var u=v.y;var B;if(this.sphere){B=this.a*(this.g-u)}else{var A=p(this.e0,this.e1,this.e2,this.e3,u);B=this.a*(this.g-A)}var t=this.ns*r(w-this.long0);var s=this.x0+B*Math.sin(t);var z=this.y0+this.rh-B*Math.cos(t);v.x=s;v.y=z;return v};l.inverse=function(v){v.x-=this.x0;v.y=this.rh-v.y+this.y0;var s,y,u,w;if(this.ns>=0){y=Math.sqrt(v.x*v.x+v.y*v.y);s=1}else{y=-Math.sqrt(v.x*v.x+v.y*v.y);s=-1}var t=0;if(y!==0){t=Math.atan2(s*v.x,s*v.y)}if(this.sphere){w=r(this.long0+t/this.ns);u=n(this.g-y/this.a);v.x=w;v.y=u;return v}else{var x=this.g-y/this.a;u=o(x,this.e0,this.e1,this.e2,this.e3);w=r(this.long0+t/this.ns);v.x=w;v.y=u;return v}};l.names=["Equidistant_Conic","eqdc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/imlfn":12,"../common/mlfn":14,"../common/msfnz":15}],44:[function(i,j,g){var l=Math.PI/4;var e=i("../common/srat");var h=Math.PI/2;var k=20;g.init=function(){var m=Math.sin(this.lat0);var n=Math.cos(this.lat0);n*=n;this.rc=Math.sqrt(1-this.es)/(1-this.es*m*m);this.C=Math.sqrt(1+this.es*n*n/(1-this.es));this.phic0=Math.asin(m/this.C);this.ratexp=0.5*this.C*this.e;this.K=Math.tan(0.5*this.phic0+l)/(Math.pow(Math.tan(0.5*this.lat0+l),this.C)*e(this.e*m,this.ratexp))};g.forward=function(n){var o=n.x;var m=n.y;n.y=2*Math.atan(this.K*Math.pow(Math.tan(0.5*m+l),this.C)*e(this.e*Math.sin(m),this.ratexp))-h;n.x=this.C*o;return n};g.inverse=function(r){var q=1e-14;var s=r.x/this.C;var o=r.y;var m=Math.pow(Math.tan(0.5*o+l)/this.K,1/this.C);for(var n=k;n>0;--n){o=2*Math.atan(m*e(this.e*Math.sin(r.y),-0.5*this.e))-h;if(Math.abs(o-r.y)<q){break}r.y=o}if(!n){return null}r.x=s;r.y=o;return r};g.names=["gauss"]},{"../common/srat":22}],45:[function(j,k,g){var i=j("../common/adjust_lon");var h=1e-10;var e=j("../common/asinz");g.init=function(){this.sin_p14=Math.sin(this.lat0);this.cos_p14=Math.cos(this.lat0);this.infinity_dist=1000*this.a;this.rc=1};g.forward=function(n){var l,o;var w;var v;var q;var r;var u,t;var m=n.x;var s=n.y;w=i(m-this.long0);l=Math.sin(s);o=Math.cos(s);v=Math.cos(w);r=this.sin_p14*l+this.cos_p14*o*v;q=1;if((r>0)||(Math.abs(r)<=h)){u=this.x0+this.a*q*o*Math.sin(w)/r;t=this.y0+this.a*q*(this.cos_p14*l-this.sin_p14*o*v)/r}else{u=this.x0+this.infinity_dist*o*Math.sin(w);t=this.y0+this.infinity_dist*(this.cos_p14*l-this.sin_p14*o*v)}n.x=u;n.y=t;return n};g.inverse=function(q){var l;var m,n;var s;var r,o;q.x=(q.x-this.x0)/this.a;q.y=(q.y-this.y0)/this.a;q.x/=this.k0;q.y/=this.k0;if((l=Math.sqrt(q.x*q.x+q.y*q.y))){s=Math.atan2(l,this.rc);m=Math.sin(s);n=Math.cos(s);o=e(n*this.sin_p14+(q.y*m*this.cos_p14)/l);r=Math.atan2(q.x*m,l*this.cos_p14*n-q.y*this.sin_p14*m);r=i(this.long0+r)}else{o=this.phic0;r=0}q.x=r;q.y=o;return q};g.names=["gnom"]},{"../common/adjust_lon":5,"../common/asinz":6}],46:[function(h,i,e){var g=h("../common/adjust_lon");e.init=function(){this.a=6377397.155;this.es=0.006674372230614;this.e=Math.sqrt(this.es);if(!this.lat0){this.lat0=0.863937979737193}if(!this.long0){this.long0=0.7417649320975901-0.308341501185665}if(!this.k0){this.k0=0.9999}this.s45=0.785398163397448;this.s90=2*this.s45;this.fi0=this.lat0;this.e2=this.es;this.e=Math.sqrt(this.e2);this.alfa=Math.sqrt(1+(this.e2*Math.pow(Math.cos(this.fi0),4))/(1-this.e2));this.uq=1.04216856380474;this.u0=Math.asin(Math.sin(this.fi0)/this.alfa);this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2);this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g;this.k1=this.k0;this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2));this.s0=1.37008346281555;this.n=Math.sin(this.s0);this.ro0=this.k1*this.n0/Math.tan(this.s0);this.ad=this.s90-this.uq};e.forward=function(l){var n,t,k,v,q,w,o;var j=l.x;var r=l.y;var m=g(j-this.long0);n=Math.pow(((1+this.e*Math.sin(r))/(1-this.e*Math.sin(r))),(this.alfa*this.e/2));t=2*(Math.atan(this.k*Math.pow(Math.tan(r/2+this.s45),this.alfa)/n)-this.s45);k=-m*this.alfa;v=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(k));q=Math.asin(Math.cos(t)*Math.sin(k)/Math.cos(v));w=this.n*q;o=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(v/2+this.s45),this.n);l.y=o*Math.cos(w)/1;l.x=o*Math.sin(w)/1;if(!this.czech){l.y*=-1;l.x*=-1}return(l)};e.inverse=function(k){var t,j,v,o,w,m,n;var r;var l=k.x;k.x=k.y;k.y=l;if(!this.czech){k.y*=-1;k.x*=-1}m=Math.sqrt(k.x*k.x+k.y*k.y);w=Math.atan2(k.y,k.x);o=w/Math.sin(this.s0);v=2*(Math.atan(Math.pow(this.ro0/m,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45);t=Math.asin(Math.cos(this.ad)*Math.sin(v)-Math.sin(this.ad)*Math.cos(v)*Math.cos(o));j=Math.asin(Math.cos(v)*Math.sin(o)/Math.cos(t));k.x=this.long0-j/this.alfa;n=t;r=0;var q=0;do{k.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(n))/(1-this.e*Math.sin(n)),this.e/2))-this.s45);if(Math.abs(n-k.y)<1e-10){r=1}n=k.y;q+=1}while(r===0&&q<15);if(q>=15){return null}return(k)};e.names=["Krovak","krovak"]},{"../common/adjust_lon":5}],47:[function(k,l,g){var j=Math.PI/2;var m=Math.PI/4;var i=1e-10;var e=k("../common/qsfnz");var h=k("../common/adjust_lon");g.S_POLE=1;g.N_POLE=2;g.EQUIT=3;g.OBLIQ=4;g.init=function(){var n=Math.abs(this.lat0);if(Math.abs(n-j)<i){this.mode=this.lat0<0?this.S_POLE:this.N_POLE}else{if(Math.abs(n)<i){this.mode=this.EQUIT}else{this.mode=this.OBLIQ}}if(this.es>0){var o;this.qp=e(this.e,1);this.mmf=0.5/(1-this.es);this.apa=this.authset(this.es);switch(this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(0.5*this.qp);this.dd=1/this.rq;this.xmf=1;this.ymf=0.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(0.5*this.qp);o=Math.sin(this.lat0);this.sinb1=e(this.e,o)/this.qp;this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1);this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*o*o)*this.rq*this.cosb1);this.ymf=(this.xmf=this.rq)/this.dd;this.xmf*=this.dd;break}}else{if(this.mode===this.OBLIQ){this.sinph0=Math.sin(this.lat0);this.cosph0=Math.cos(this.lat0)}}};g.forward=function(s){var C,A,B,v,o,r,t,n,z,u;var D=s.x;var w=s.y;D=h(D-this.long0);if(this.sphere){o=Math.sin(w);u=Math.cos(w);B=Math.cos(D);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){A=(this.mode===this.EQUIT)?1+u*B:1+this.sinph0*o+this.cosph0*u*B;if(A<=i){return null}A=Math.sqrt(2/A);C=A*u*Math.sin(D);A*=(this.mode===this.EQUIT)?o:this.cosph0*o-this.sinph0*u*B}else{if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE){B=-B}if(Math.abs(w+this.phi0)<i){return null}A=m-w*0.5;A=2*((this.mode===this.S_POLE)?Math.cos(A):Math.sin(A));C=A*Math.sin(D);A*=B}}}else{t=0;n=0;z=0;B=Math.cos(D);v=Math.sin(D);o=Math.sin(w);r=e(this.e,o);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){t=r/this.qp;n=Math.sqrt(1-t*t)}switch(this.mode){case this.OBLIQ:z=1+this.sinb1*t+this.cosb1*n*B;break;case this.EQUIT:z=1+n*B;break;case this.N_POLE:z=j+w;r=this.qp-r;break;case this.S_POLE:z=w-j;r=this.qp+r;break}if(Math.abs(z)<i){return null}switch(this.mode){case this.OBLIQ:case this.EQUIT:z=Math.sqrt(2/z);if(this.mode===this.OBLIQ){A=this.ymf*z*(this.cosb1*t-this.sinb1*n*B)}else{A=(z=Math.sqrt(2/(1+n*B)))*t*this.ymf}C=this.xmf*z*n*v;break;case this.N_POLE:case this.S_POLE:if(r>=0){C=(z=Math.sqrt(r))*v;A=B*((this.mode===this.S_POLE)?z:-z)}else{C=A=0}break}}s.x=this.a*C+this.x0;s.y=this.a*A+this.y0;return s};g.inverse=function(o){o.x-=this.x0;o.y-=this.y0;var w=o.x/this.a;var u=o.y/this.a;var D,t,A,s,n,v,C;if(this.sphere){var B=0,z,r=0;z=Math.sqrt(w*w+u*u);t=z*0.5;if(t>1){return null}t=2*Math.asin(t);if(this.mode===this.OBLIQ||this.mode===this.EQUIT){r=Math.sin(t);B=Math.cos(t)}switch(this.mode){case this.EQUIT:t=(Math.abs(z)<=i)?0:Math.asin(u*r/z);w*=r;u=B*z;break;case this.OBLIQ:t=(Math.abs(z)<=i)?this.phi0:Math.asin(B*this.sinph0+u*r*this.cosph0/z);w*=r*this.cosph0;u=(B-Math.sin(t)*this.sinph0)*z;break;case this.N_POLE:u=-u;t=j-t;break;case this.S_POLE:t-=j;break}D=(u===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ))?0:Math.atan2(w,u)}else{C=0;if(this.mode===this.OBLIQ||this.mode===this.EQUIT){w/=this.dd;u*=this.dd;v=Math.sqrt(w*w+u*u);if(v<i){o.x=0;o.y=this.phi0;return o}s=2*Math.asin(0.5*v/this.rq);A=Math.cos(s);w*=(s=Math.sin(s));if(this.mode===this.OBLIQ){C=A*this.sinb1+u*s*this.cosb1/v;n=this.qp*C;u=v*this.cosb1*A-u*this.sinb1*s}else{C=u*s/v;n=this.qp*C;u=v*A}}else{if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE){u=-u}n=(w*w+u*u);if(!n){o.x=0;o.y=this.phi0;return o}C=1-n/this.qp;if(this.mode===this.S_POLE){C=-C}}}D=Math.atan2(w,u);t=this.authlat(Math.asin(C),this.apa)}o.x=h(this.long0+D);o.y=t;return o};g.P00=0.3333333333333333;g.P01=0.17222222222222222;g.P02=0.10257936507936508;g.P10=0.06388888888888888;g.P11=0.0664021164021164;g.P20=0.016415012942191543;g.authset=function(o){var n;var p=[];p[0]=o*this.P00;n=o*o;p[0]+=n*this.P01;p[1]=n*this.P10;n*=o;p[0]+=n*this.P02;p[1]+=n*this.P11;p[2]=n*this.P20;return p};g.authlat=function(o,p){var n=o+o;return(o+p[0]*Math.sin(n)+p[1]*Math.sin(n+n)+p[2]*Math.sin(n+n+n))};g.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common/adjust_lon":5,"../common/qsfnz":20}],48:[function(j,g,l){var k=1e-10;var e=j("../common/msfnz");var m=j("../common/tsfnz");var n=Math.PI/2;var h=j("../common/sign");var o=j("../common/adjust_lon");var i=j("../common/phi2z");l.init=function(){if(!this.lat2){this.lat2=this.lat1}if(!this.k0){this.k0=1}if(Math.abs(this.lat1+this.lat2)<k){return}var y=this.b/this.a;this.e=Math.sqrt(1-y*y);var v=Math.sin(this.lat1);var t=Math.cos(this.lat1);var x=e(this.e,v,t);var q=m(this.e,this.lat1,v);var u=Math.sin(this.lat2);var s=Math.cos(this.lat2);var w=e(this.e,u,s);var p=m(this.e,this.lat2,u);var r=m(this.e,this.lat0,Math.sin(this.lat0));if(Math.abs(this.lat1-this.lat2)>k){this.ns=Math.log(x/w)/Math.log(q/p)}else{this.ns=v}if(isNaN(this.ns)){this.ns=v}this.f0=x/(this.ns*Math.pow(q,this.ns));this.rh=this.a*this.f0*Math.pow(r,this.ns);if(!this.title){this.title="Lambert Conformal Conic"}};l.forward=function(u){var v=u.x;var t=u.y;if(Math.abs(2*Math.abs(t)-Math.PI)<=k){t=h(t)*(n-2*k)}var q=Math.abs(Math.abs(t)-n);var s,w;if(q>k){s=m(this.e,t,Math.sin(t));w=this.a*this.f0*Math.pow(s,this.ns)}else{q=t*this.ns;if(q<=0){return null}w=0}var r=this.ns*o(v-this.long0);u.x=this.k0*(w*Math.sin(r))+this.x0;u.y=this.k0*(this.rh-w*Math.cos(r))+this.y0;return u};l.inverse=function(r){var u,s,v;var w,q;var A=(r.x-this.x0)/this.k0;var z=(this.rh-(r.y-this.y0)/this.k0);if(this.ns>0){u=Math.sqrt(A*A+z*z);s=1}else{u=-Math.sqrt(A*A+z*z);s=-1}var t=0;if(u!==0){t=Math.atan2((s*A),(s*z))}if((u!==0)||(this.ns>0)){s=1/this.ns;v=Math.pow((u/(this.a*this.f0)),s);w=i(this.e,v);if(w===-9999){return null}}else{w=-n}q=o(t/this.ns+this.long0);r.x=q;r.y=w;return r};l.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":23}],49:[function(h,i,g){g.init=function(){};function e(j){return j}g.forward=e;g.inverse=e;g.names=["longlat","identity"]},{}],50:[function(i,g,l){var e=i("../common/msfnz");var o=Math.PI/2;var k=1e-10;var m=57.29577951308232;var p=i("../common/adjust_lon");var j=Math.PI/4;var n=i("../common/tsfnz");var h=i("../common/phi2z");l.init=function(){var q=this.b/this.a;this.es=1-q*q;if(!("x0" in this)){this.x0=0}if(!("y0" in this)){this.y0=0}this.e=Math.sqrt(this.es);if(this.lat_ts){if(this.sphere){this.k0=Math.cos(this.lat_ts)}else{this.k0=e(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))}}else{if(!this.k0){if(this.k){this.k0=this.k}else{this.k0=1}}}};l.forward=function(u){var v=u.x;var t=u.y;if(t*m>90&&t*m<-90&&v*m>180&&v*m<-180){return null}var q,w;if(Math.abs(Math.abs(t)-o)<=k){return null}else{if(this.sphere){q=this.x0+this.a*this.k0*p(v-this.long0);w=this.y0+this.a*this.k0*Math.log(Math.tan(j+0.5*t))}else{var s=Math.sin(t);var r=n(this.e,t,s);q=this.x0+this.a*this.k0*p(v-this.long0);w=this.y0-this.a*this.k0*Math.log(r)}u.x=q;u.y=w;return u}};l.inverse=function(t){var q=t.x-this.x0;var v=t.y-this.y0;var u,s;if(this.sphere){s=o-2*Math.atan(Math.exp(-v/(this.a*this.k0)))}else{var r=Math.exp(-v/(this.a*this.k0));s=h(this.e,r);if(s===-9999){return null}}u=p(this.long0+q/(this.a*this.k0));t.x=u;t.y=s;return t};l.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/tsfnz":23}],51:[function(h,i,e){var g=h("../common/adjust_lon");e.init=function(){};e.forward=function(m){var n=m.x;var l=m.y;var k=g(n-this.long0);var j=this.x0+this.a*k;var o=this.y0+this.a*Math.log(Math.tan((Math.PI/4)+(l/2.5)))*1.25;m.x=j;m.y=o;return m};e.inverse=function(k){k.x-=this.x0;k.y-=this.y0;var l=g(this.long0+k.x/this.a);var j=2.5*(Math.atan(Math.exp(0.8*k.y/this.a))-Math.PI/4);k.x=l;k.y=j;return k};e.names=["Miller_Cylindrical","mill"]},{"../common/adjust_lon":5}],52:[function(i,j,e){var h=i("../common/adjust_lon");var g=1e-10;e.init=function(){};e.forward=function(m){var k=m.x;var s=m.y;var q=h(k-this.long0);var o=s;var n=Math.PI*Math.sin(s);for(var r=0;true;r++){var l=-(o+Math.sin(o)-n)/(1+Math.cos(o));o+=l;if(Math.abs(l)<g){break}}o/=2;if(Math.PI/2-Math.abs(s)<g){q=0}var u=0.900316316158*this.a*q*Math.cos(o)+this.x0;var t=1.4142135623731*this.a*Math.sin(o)+this.y0;m.x=u;m.y=t;return m};e.inverse=function(n){var l;var k;n.x-=this.x0;n.y-=this.y0;k=n.y/(1.4142135623731*this.a);if(Math.abs(k)>0.999999999999){k=0.999999999999}l=Math.asin(k);var o=h(this.long0+(n.x/(0.900316316158*this.a*Math.cos(l))));if(o<(-Math.PI)){o=-Math.PI}if(o>Math.PI){o=Math.PI}k=(2*l+Math.sin(2*l))/Math.PI;if(Math.abs(k)>1){k=1}var m=Math.asin(k);n.x=o;n.y=m;return n};e.names=["Mollweide","moll"]},{"../common/adjust_lon":5}],53:[function(g,h,e){var i=0.00000484813681109536;e.iterations=1;e.init=function(){this.A=[];this.A[1]=0.6399175073;this.A[2]=-0.1358797613;this.A[3]=0.063294409;this.A[4]=-0.02526853;this.A[5]=0.0117879;this.A[6]=-0.0055161;this.A[7]=0.0026906;this.A[8]=-0.001333;this.A[9]=0.00067;this.A[10]=-0.00034;this.B_re=[];this.B_im=[];this.B_re[1]=0.7557853228;this.B_im[1]=0;this.B_re[2]=0.249204646;this.B_im[2]=0.003371507;this.B_re[3]=-0.001541739;this.B_im[3]=0.04105856;this.B_re[4]=-0.10162907;this.B_im[4]=0.01727609;this.B_re[5]=-0.26623489;this.B_im[5]=-0.36249218;this.B_re[6]=-0.6870983;this.B_im[6]=-1.1651967;this.C_re=[];this.C_im=[];this.C_re[1]=1.3231270439;this.C_im[1]=0;this.C_re[2]=-0.577245789;this.C_im[2]=-0.007809598;this.C_re[3]=0.508307513;this.C_im[3]=-0.112208952;this.C_re[4]=-0.15094762;this.C_im[4]=0.18200602;this.C_re[5]=1.01418179;this.C_im[5]=1.64497696;this.C_re[6]=1.9660549;this.C_im[6]=2.5127645;this.D=[];this.D[1]=1.5627014243;this.D[2]=0.5185406398;this.D[3]=-0.03333098;this.D[4]=-0.1052906;this.D[5]=-0.0368594;this.D[6]=0.007317;this.D[7]=0.0122;this.D[8]=0.00394;this.D[9]=-0.0013};e.forward=function(x){var y;var m=x.x;var r=x.y;var k=r-this.lat0;var B=m-this.long0;var C=k/i*0.00001;var t=B;var s=1;var A=0;for(y=1;y<=10;y++){s=s*C;A=A+this.A[y]*s}var q=A;var j=t;var v=1;var o=0;var z;var w;var u=0;var l=0;for(y=1;y<=6;y++){z=v*q-o*j;w=o*q+v*j;v=z;o=w;u=u+this.B_re[y]*v-this.B_im[y]*o;l=l+this.B_im[y]*v+this.B_re[y]*o}x.x=(l*this.a)+this.x0;x.y=(u*this.a)+this.y0;return x};e.inverse=function(E){var F;var B=E.x;var A=E.y;var K=B-this.x0;var I=A-this.y0;var z=I/this.a;var o=K/this.a;var t=1;var R=0;var q;var O;var u=0;var j=0;for(F=1;F<=6;F++){q=t*z-R*o;O=R*z+t*o;t=q;R=O;u=u+this.C_re[F]*t-this.C_im[F]*R;j=j+this.C_im[F]*t+this.C_re[F]*R}for(var J=0;J<this.iterations;J++){var C=u;var s=j;var H;var D;var l=z;var N=o;for(F=2;F<=6;F++){H=C*u-s*j;D=s*u+C*j;C=H;s=D;l=l+(F-1)*(this.B_re[F]*C-this.B_im[F]*s);N=N+(F-1)*(this.B_im[F]*C+this.B_re[F]*s)}C=1;s=0;var k=this.B_re[1];var M=this.B_im[1];for(F=2;F<=6;F++){H=C*u-s*j;D=s*u+C*j;C=H;s=D;k=k+F*(this.B_re[F]*C-this.B_im[F]*s);M=M+F*(this.B_im[F]*C+this.B_re[F]*s)}var m=k*k+M*M;u=(l*k+N*M)/m;j=(N*k-l*M)/m}var G=u;var w=j;var P=1;var Q=0;for(F=1;F<=9;F++){P=P*G;Q=Q+this.D[F]*P}var v=this.lat0+(Q*i*100000);var r=this.long0+w;E.x=r;E.y=v;return E};e.names=["New_Zealand_Map_Grid","nzmg"]},{}],54:[function(h,e,k){var l=h("../common/tsfnz");var n=h("../common/adjust_lon");var g=h("../common/phi2z");var m=Math.PI/2;var i=Math.PI/4;var j=1e-10;k.init=function(){this.no_off=this.no_off||false;this.no_rot=this.no_rot||false;if(isNaN(this.k0)){this.k0=1}var r=Math.sin(this.lat0);var v=Math.cos(this.lat0);var s=this.e*r;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(v,4));this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-s*s);var A=l(this.e,this.lat0,r);var z=this.bl/v*Math.sqrt((1-this.es)/(1-s*s));if(z*z<1){z=1}var C;var x;if(!isNaN(this.longc)){if(this.lat0>=0){C=z+Math.sqrt(z*z-1)}else{C=z-Math.sqrt(z*z-1)}this.el=C*Math.pow(A,this.bl);x=0.5*(C-1/C);this.gamma0=Math.asin(Math.sin(this.alpha)/z);this.long0=this.longc-Math.asin(x*Math.tan(this.gamma0))/this.bl}else{var y=l(this.e,this.lat1,Math.sin(this.lat1));var w=l(this.e,this.lat2,Math.sin(this.lat2));if(this.lat0>=0){this.el=(z+Math.sqrt(z*z-1))*Math.pow(A,this.bl)}else{this.el=(z-Math.sqrt(z*z-1))*Math.pow(A,this.bl)}var q=Math.pow(y,this.bl);var B=Math.pow(w,this.bl);C=this.el/q;x=0.5*(C-1/C);var u=(this.el*this.el-B*q)/(this.el*this.el+B*q);var t=(B-q)/(B+q);var o=n(this.long1-this.long2);this.long0=0.5*(this.long1+this.long2)-Math.atan(u*Math.tan(0.5*this.bl*(o))/t)/this.bl;this.long0=n(this.long0);var p=n(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*(p))/x);this.alpha=Math.asin(z*Math.sin(this.gamma0))}if(this.no_off){this.uc=0}else{if(this.lat0>=0){this.uc=this.al/this.bl*Math.atan2(Math.sqrt(z*z-1),Math.cos(this.alpha))}else{this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(z*z-1),Math.cos(this.alpha))}}};k.forward=function(q){var o=q.x;var x=q.y;var C=n(o-this.long0);var v,z;var r;if(Math.abs(Math.abs(x)-m)<=j){if(x>0){r=-1}else{r=1}z=this.al/this.bl*Math.log(Math.tan(i+r*this.gamma0*0.5));v=-1*r*m*this.al/this.bl}else{var A=l(this.e,x,Math.sin(x));var B=this.el/Math.pow(A,this.bl);var u=0.5*(B-1/B);var y=0.5*(B+1/B);var s=Math.sin(this.bl*(C));var w=(u*Math.sin(this.gamma0)-s*Math.cos(this.gamma0))/y;if(Math.abs(Math.abs(w)-1)<=j){z=Number.POSITIVE_INFINITY}else{z=0.5*this.al*Math.log((1-w)/(1+w))/this.bl}if(Math.abs(Math.cos(this.bl*(C)))<=j){v=this.al*this.bl*(C)}else{v=this.al*Math.atan2(u*Math.cos(this.gamma0)+s*Math.sin(this.gamma0),Math.cos(this.bl*C))/this.bl}}if(this.no_rot){q.x=this.x0+v;q.y=this.y0+z}else{v-=this.uc;q.x=this.x0+z*Math.cos(this.alpha)+v*Math.sin(this.alpha);q.y=this.y0+v*Math.cos(this.alpha)-z*Math.sin(this.alpha)}return q};k.inverse=function(q){var s,x;if(this.no_rot){x=q.y-this.y0;s=q.x-this.x0}else{x=(q.x-this.x0)*Math.cos(this.alpha)-(q.y-this.y0)*Math.sin(this.alpha);s=(q.y-this.y0)*Math.cos(this.alpha)+(q.x-this.x0)*Math.sin(this.alpha);s+=this.uc}var w=Math.exp(-1*this.bl*x/this.al);var r=0.5*(w-1/w);var v=0.5*(w+1/w);var o=Math.sin(this.bl*s/this.al);var t=(o*Math.cos(this.gamma0)+r*Math.sin(this.gamma0))/v;var u=Math.pow(this.el/Math.sqrt((1+t)/(1-t)),1/this.bl);if(Math.abs(t-1)<j){q.x=this.long0;q.y=m}else{if(Math.abs(t+1)<j){q.x=this.long0;q.y=-1*m}else{q.y=g(this.e,u);q.x=n(this.long0-Math.atan2(r*Math.cos(this.gamma0)-o*Math.sin(this.gamma0),Math.cos(this.bl*s/this.al))/this.bl)}}return q};k.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common/adjust_lon":5,"../common/phi2z":16,"../common/tsfnz":23}],55:[function(i,g,k){var q=i("../common/e0fn");var e=i("../common/e1fn");var h=i("../common/e2fn");var l=i("../common/e3fn");var r=i("../common/adjust_lon");var m=i("../common/adjust_lat");var p=i("../common/mlfn");var j=1e-10;var o=i("../common/gN");var n=20;k.init=function(){this.temp=this.b/this.a;this.es=1-Math.pow(this.temp,2);this.e=Math.sqrt(this.es);this.e0=q(this.es);this.e1=e(this.es);this.e2=h(this.es);this.e3=l(this.es);this.ml0=this.a*p(this.e0,this.e1,this.e2,this.e3,this.lat0)};k.forward=function(z){var A=z.x;var w=z.y;var s,B,u;var v=r(A-this.long0);u=v*Math.sin(w);if(this.sphere){if(Math.abs(w)<=j){s=this.a*v;B=-1*this.a*this.lat0}else{s=this.a*Math.sin(u)/Math.tan(w);B=this.a*(m(w-this.lat0)+(1-Math.cos(u))/Math.tan(w))}}else{if(Math.abs(w)<=j){s=this.a*v;B=-1*this.ml0}else{var t=o(this.a,this.e,Math.sin(w))/Math.tan(w);s=t*Math.sin(u);B=this.a*p(this.e0,this.e1,this.e2,this.e3,w)-this.ml0+t*(1-Math.cos(u))}}z.x=s+this.x0;z.y=B+this.y0;return z};k.inverse=function(v){var t,E,G,F,A;var C,w;var D,B;G=v.x-this.x0;F=v.y-this.y0;if(this.sphere){if(Math.abs(F+this.a*this.lat0)<=j){t=r(G/this.a+this.long0);E=0}else{C=this.lat0+F/this.a;w=G*G/this.a/this.a+C*C;D=C;var s;for(A=n;A;--A){s=Math.tan(D);B=-1*(C*(D*s+1)-D-0.5*(D*D+w)*s)/((D-C)/s-1);D+=B;if(Math.abs(B)<=j){E=D;break}}t=r(this.long0+(Math.asin(G*Math.tan(D)/this.a))/Math.sin(E))}}else{if(Math.abs(F+this.ml0)<=j){E=0;t=r(this.long0+G/this.a)}else{C=(this.ml0+F)/this.a;w=G*G/this.a/this.a+C*C;D=C;var I,z,J,H;var u;for(A=n;A;--A){u=this.e*Math.sin(D);I=Math.sqrt(1-u*u)*Math.tan(D);z=this.a*p(this.e0,this.e1,this.e2,this.e3,D);J=this.e0-2*this.e1*Math.cos(2*D)+4*this.e2*Math.cos(4*D)-6*this.e3*Math.cos(6*D);H=z/this.a;B=(C*(I*H+1)-H-0.5*I*(H*H+w))/(this.es*Math.sin(2*D)*(H*H+w-2*C*H)/(4*I)+(C-H)*(I*J-2/Math.sin(2*D))-J);D-=B;if(Math.abs(B)<=j){E=D;break}}I=Math.sqrt(1-this.es*Math.pow(Math.sin(E),2))*Math.tan(E);t=r(this.long0+Math.asin(G*I/this.a)/Math.sin(E))}}v.x=t;v.y=E;return v};k.names=["Polyconic","poly"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/mlfn":14}],56:[function(g,e,j){var q=g("../common/adjust_lon");var k=g("../common/adjust_lat");var h=g("../common/pj_enfn");var o=20;var m=g("../common/pj_mlfn");var n=g("../common/pj_inv_mlfn");var l=Math.PI/2;var i=1e-10;var p=g("../common/asinz");j.init=function(){if(!this.sphere){this.en=h(this.es)}else{this.n=1;this.m=0;this.es=0;this.C_y=Math.sqrt((this.m+1)/this.n);this.C_x=this.C_y/(this.m+1)}};j.forward=function(t){var C,B;var r=t.x;var A=t.y;r=q(r-this.long0);if(this.sphere){if(!this.m){A=this.n!==1?Math.asin(this.n*Math.sin(A)):A}else{var v=this.n*Math.sin(A);for(var w=o;w;--w){var u=(this.m*A+Math.sin(A)-v)/(this.m+Math.cos(A));A-=u;if(Math.abs(u)<i){break}}}C=this.a*this.C_x*r*(this.m+Math.cos(A));B=this.a*this.C_y*A}else{var D=Math.sin(A);var z=Math.cos(A);B=this.a*m(A,D,z,this.en);C=this.a*r*z/Math.sqrt(1-this.es*D*D)}t.x=C;t.y=B;return t};j.inverse=function(v){var u,r,w,t;v.x-=this.x0;w=v.x/this.a;v.y-=this.y0;u=v.y/this.a;if(this.sphere){u/=this.C_y;w=w/(this.C_x*(this.m+Math.cos(u)));if(this.m){u=p((this.m*u+Math.sin(u))/this.n)}else{if(this.n!==1){u=p(Math.sin(u)/this.n)}}w=q(w+this.long0);u=k(u)}else{u=n(v.y/this.a,this.es,this.en);t=Math.abs(u);if(t<l){t=Math.sin(u);r=this.long0+v.x*Math.sqrt(1-this.es*t*t)/(this.a*Math.cos(u));w=q(r)}else{if((t-i)<l){w=this.long0}}}v.x=w;v.y=u;return v};j.names=["Sinusoidal","sinu"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/asinz":6,"../common/pj_enfn":17,"../common/pj_inv_mlfn":18,"../common/pj_mlfn":19}],57:[function(g,h,e){e.init=function(){var i=this.lat0;this.lambda0=this.long0;var l=Math.sin(i);var r=this.a;var j=this.rf;var k=1/j;var q=2*k-Math.pow(k,2);var o=this.e=Math.sqrt(q);this.R=this.k0*r*Math.sqrt(1-q)/(1-q*Math.pow(l,2));this.alpha=Math.sqrt(1+q/(1-q)*Math.pow(Math.cos(i),4));this.b0=Math.asin(l/this.alpha);var p=Math.log(Math.tan(Math.PI/4+this.b0/2));var n=Math.log(Math.tan(Math.PI/4+i/2));var m=Math.log((1+o*l)/(1-o*l));this.K=p-this.alpha*n+this.alpha*o/2*m};e.forward=function(m){var q=Math.log(Math.tan(Math.PI/4-m.y/2));var n=this.e/2*Math.log((1+this.e*Math.sin(m.y))/(1-this.e*Math.sin(m.y)));var k=-this.alpha*(q+n)+this.K;var i=2*(Math.atan(Math.exp(k))-Math.PI/4);var j=this.alpha*(m.x-this.lambda0);var o=Math.atan(Math.sin(j)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(j)));var l=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(j));m.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0;m.x=this.R*o+this.x0;return m};e.inverse=function(k){var j=k.x-this.x0;var l=k.y-this.y0;var t=j/this.R;var m=2*(Math.atan(Math.exp(l/this.R))-Math.PI/4);var r=Math.asin(Math.cos(this.b0)*Math.sin(m)+Math.sin(this.b0)*Math.cos(m)*Math.cos(t));var s=Math.atan(Math.sin(t)/(Math.cos(this.b0)*Math.cos(t)-Math.sin(this.b0)*Math.tan(m)));var q=this.lambda0+s/this.alpha;var o=0;var u=r;var i=-1000;var n=0;while(Math.abs(u-i)>1e-7){if(++n>20){return}o=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2));i=u;u=2*Math.atan(Math.exp(o))-Math.PI/2}k.x=q;k.y=u;return k};e.names=["somerc"]},{}],58:[function(j,g,l){var n=Math.PI/2;var k=1e-10;var h=j("../common/sign");var e=j("../common/msfnz");var m=j("../common/tsfnz");var i=j("../common/phi2z");var o=j("../common/adjust_lon");l.ssfn_=function(p,r,q){r*=q;return(Math.tan(0.5*(n+p))*Math.pow((1-r)/(1+r),0.5*q))};l.init=function(){this.coslat0=Math.cos(this.lat0);this.sinlat0=Math.sin(this.lat0);if(this.sphere){if(this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=k){this.k0=0.5*(1+h(this.lat0)*Math.sin(this.lat_ts))}}else{if(Math.abs(this.coslat0)<=k){if(this.lat0>0){this.con=1}else{this.con=-1}}this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e));if(this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=k){this.k0=0.5*this.cons*e(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/m(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))}this.ms1=e(this.e,this.sinlat0,this.coslat0);this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-n;this.cosX0=Math.cos(this.X0);this.sinX0=Math.sin(this.X0)}};l.forward=function(r){var q=r.x;var y=r.y;var s=Math.sin(y);var v=Math.cos(y);var u,t,z,w,x,B;var C=o(q-this.long0);if(Math.abs(Math.abs(q-this.long0)-Math.PI)<=k&&Math.abs(y+this.lat0)<=k){r.x=NaN;r.y=NaN;return r}if(this.sphere){u=2*this.k0/(1+this.sinlat0*s+this.coslat0*v*Math.cos(C));r.x=this.a*u*v*Math.sin(C)+this.x0;r.y=this.a*u*(this.coslat0*s-this.sinlat0*v*Math.cos(C))+this.y0;return r}else{t=2*Math.atan(this.ssfn_(y,s,this.e))-n;w=Math.cos(t);z=Math.sin(t);if(Math.abs(this.coslat0)<=k){x=m(this.e,y*this.con,this.con*s);B=2*this.a*this.k0*x/this.cons;r.x=this.x0+B*Math.sin(q-this.long0);r.y=this.y0-this.con*B*Math.cos(q-this.long0);return r}else{if(Math.abs(this.sinlat0)<k){u=2*this.a*this.k0/(1+w*Math.cos(C));r.y=u*z}else{u=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*z+this.cosX0*w*Math.cos(C)));r.y=u*(this.cosX0*z-this.sinX0*w*Math.cos(C))+this.y0}}r.x=u*w*Math.sin(C)+this.x0}return r};l.inverse=function(u){u.x-=this.x0;u.y-=this.y0;var v,t,r,s,x;var q=Math.sqrt(u.x*u.x+u.y*u.y);if(this.sphere){var w=2*Math.atan(q/(0.5*this.a*this.k0));v=this.long0;t=this.lat0;if(q<=k){u.x=v;u.y=t;return u}t=Math.asin(Math.cos(w)*this.sinlat0+u.y*Math.sin(w)*this.coslat0/q);if(Math.abs(this.coslat0)<k){if(this.lat0>0){v=o(this.long0+Math.atan2(u.x,-1*u.y))}else{v=o(this.long0+Math.atan2(u.x,u.y))}}else{v=o(this.long0+Math.atan2(u.x*Math.sin(w),q*this.coslat0*Math.cos(w)-u.y*this.sinlat0*Math.sin(w)))}u.x=v;u.y=t;return u}else{if(Math.abs(this.coslat0)<=k){if(q<=k){t=this.lat0;v=this.long0;u.x=v;u.y=t;return u}u.x*=this.con;u.y*=this.con;r=q*this.cons/(2*this.a*this.k0);t=this.con*i(this.e,r);v=this.con*o(this.con*this.long0+Math.atan2(u.x,-1*u.y))}else{s=2*Math.atan(q*this.cosX0/(2*this.a*this.k0*this.ms1));v=this.long0;if(q<=k){x=this.X0}else{x=Math.asin(Math.cos(s)*this.sinX0+u.y*Math.sin(s)*this.cosX0/q);v=o(this.long0+Math.atan2(u.x*Math.sin(s),q*this.cosX0*Math.cos(s)-u.y*this.sinX0*Math.sin(s)))}t=-1*i(this.e,Math.tan(0.5*(n+x)))}}u.x=v;u.y=t;return u};l.names=["stere"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":23}],59:[function(h,i,e){var j=h("./gauss");var g=h("../common/adjust_lon");e.init=function(){j.init.apply(this);if(!this.rc){return}this.sinc0=Math.sin(this.phic0);this.cosc0=Math.cos(this.phic0);this.R2=2*this.rc;if(!this.title){this.title="Oblique Stereographic Alternative"}};e.forward=function(q){var m,n,o,l;q.x=g(q.x-this.long0);j.forward.apply(this,[q]);m=Math.sin(q.y);n=Math.cos(q.y);o=Math.cos(q.x);l=this.k0*this.R2/(1+this.sinc0*m+this.cosc0*n*o);q.x=l*n*Math.sin(q.x);q.y=l*(this.cosc0*m-this.sinc0*n*o);q.x=this.a*q.x+this.x0;q.y=this.a*q.y+this.y0;return q};e.inverse=function(o){var l,m,q,n,k;o.x=(o.x-this.x0)/this.a;o.y=(o.y-this.y0)/this.a;o.x/=this.k0;o.y/=this.k0;if((k=Math.sqrt(o.x*o.x+o.y*o.y))){var r=2*Math.atan2(k,this.R2);l=Math.sin(r);m=Math.cos(r);n=Math.asin(m*this.sinc0+o.y*l*this.cosc0/k);q=Math.atan2(o.x*l,k*this.cosc0*m-o.y*this.sinc0*l)}else{n=this.phic0;q=0}o.x=q;o.y=n;j.inverse.apply(this,[o]);o.x=g(o.x+this.long0);return o};e.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common/adjust_lon":5,"./gauss":44}],60:[function(j,g,l){var q=j("../common/e0fn");var e=j("../common/e1fn");var i=j("../common/e2fn");var m=j("../common/e3fn");var o=j("../common/mlfn");var r=j("../common/adjust_lon");var n=Math.PI/2;var k=1e-10;var h=j("../common/sign");var p=j("../common/asinz");l.init=function(){this.e0=q(this.es);this.e1=e(this.es);this.e2=i(this.es);this.e3=m(this.es);this.ml0=this.a*o(this.e0,this.e1,this.e2,this.e3,this.lat0)};l.forward=function(u){var s=u.x;var F=u.y;var z=r(s-this.long0);var v;var K,I;var J=Math.sin(F);var D=Math.cos(F);if(this.sphere){var H=D*Math.sin(z);if((Math.abs(Math.abs(H)-1))<1e-10){return(93)}else{K=0.5*this.a*this.k0*Math.log((1+H)/(1-H));v=Math.acos(D*Math.cos(z)/Math.sqrt(1-H*H));if(F<0){v=-v}I=this.a*this.k0*(v-this.lat0)}}else{var C=D*z;var B=Math.pow(C,2);var E=this.ep2*Math.pow(D,2);var G=Math.tan(F);var M=Math.pow(G,2);v=1-this.es*Math.pow(J,2);var w=this.a/Math.sqrt(v);var A=this.a*o(this.e0,this.e1,this.e2,this.e3,F);K=this.k0*w*C*(1+B/6*(1-M+E+B/20*(5-18*M+Math.pow(M,2)+72*E-58*this.ep2)))+this.x0;I=this.k0*(A-this.ml0+w*G*(B*(0.5+B/24*(5-M+9*E+4*Math.pow(E,2)+B/30*(61-58*M+Math.pow(M,2)+600*E-330*this.ep2)))))+this.y0}u.x=K;u.y=I;return u};l.inverse=function(J){var z,v;var T;var M;var C=6;var B,w;if(this.sphere){var P=Math.exp(J.x/(this.a*this.k0));var O=0.5*(P-1/P);var R=this.lat0+J.y/(this.a*this.k0);var N=Math.cos(R);z=Math.sqrt((1-N*N)/(1+O*O));B=p(z);if(R<0){B=-B}if((O===0)&&(N===0)){w=this.long0}else{w=r(Math.atan2(O,N)+this.long0)}}else{var E=J.x-this.x0;var D=J.y-this.y0;z=(this.ml0+D/this.k0)/this.a;v=z;for(M=0;true;M++){T=((z+this.e1*Math.sin(2*v)-this.e2*Math.sin(4*v)+this.e3*Math.sin(6*v))/this.e0)-v;v+=T;if(Math.abs(T)<=k){break}if(M>=C){return(95)}}if(Math.abs(v)<n){var u=Math.sin(v);var U=Math.cos(v);var F=Math.tan(v);var S=this.ep2*Math.pow(U,2);var A=Math.pow(S,2);var G=Math.pow(F,2);var s=Math.pow(G,2);z=1-this.es*Math.pow(u,2);var K=this.a/Math.sqrt(z);var H=K*(1-this.es)/z;var Q=E/(K*this.k0);var I=Math.pow(Q,2);B=v-(K*F*I/H)*(0.5-I/24*(5+3*G+10*S-4*A-9*this.ep2-I/30*(61+90*G+298*S+45*s-252*this.ep2-3*A)));w=r(this.long0+(Q*(1-I/6*(1+2*G+S-I/20*(5-2*S+28*G-3*A+8*this.ep2+24*s)))/U))}else{B=n*h(D);w=this.long0}}J.x=w;J.y=B;return J};l.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/mlfn":14,"../common/sign":21}],61:[function(g,h,e){var j=0.017453292519943295;var i=g("./tmerc");e.dependsOn="tmerc";e.init=function(){if(!this.zone){return}this.lat0=0;this.long0=((6*Math.abs(this.zone))-183)*j;this.x0=500000;this.y0=this.utmSouth?10000000:0;this.k0=0.9996;i.init.apply(this);this.forward=i.forward;this.inverse=i.inverse};e.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":60}],62:[function(k,l,g){var j=k("../common/adjust_lon");var i=Math.PI/2;var h=1e-10;var e=k("../common/asinz");g.init=function(){this.R=this.a};g.forward=function(s){var o=s.x;var D=s.y;var H=j(o-this.long0);var G,E;if(Math.abs(D)<=h){G=this.x0+this.R*H;E=this.y0}var u=e(2*Math.abs(D/Math.PI));if((Math.abs(H)<=h)||(Math.abs(Math.abs(D)-i)<=h)){G=this.x0;if(D>=0){E=this.y0+Math.PI*this.R*Math.tan(0.5*u)}else{E=this.y0+Math.PI*this.R*-Math.tan(0.5*u)}}var B=0.5*Math.abs((Math.PI/H)-(H/Math.PI));var t=B*B;var C=Math.sin(u);var A=Math.cos(u);var z=A/(C+A-1);var w=z*z;var v=z*(2/C-1);var F=v*v;var r=Math.PI*this.R*(B*(z-F)+Math.sqrt(t*(z-F)*(z-F)-(F+t)*(w-F)))/(F+t);if(H<0){r=-r}G=this.x0+r;var n=t+z;r=Math.PI*this.R*(v*n-B*Math.sqrt((F+t)*(t+1)-n*n))/(F+t);if(D>=0){E=this.y0+r}else{E=this.y0-r}s.x=G;s.y=E;return s};g.inverse=function(r){var n,x;var m,w,A,u,t,s;var q;var z;var o;var y;var v;r.x-=this.x0;r.y-=this.y0;o=Math.PI*this.R;m=r.x/o;w=r.y/o;A=m*m+w*w;u=-Math.abs(w)*(1+A);t=u-2*w*w+m*m;s=-2*u+1+2*w*w+A*A;v=w*w/s+(2*t*t*t/s/s/s-9*u*t/s/s)/27;q=(u-t*t/3/s)/s;z=2*Math.sqrt(-q/3);o=((3*v)/q)/z;if(Math.abs(o)>1){if(o>=0){o=1}else{o=-1}}y=Math.acos(o)/3;if(r.y>=0){x=(-z*Math.cos(y+Math.PI/3)-t/3/s)*Math.PI}else{x=-(-z*Math.cos(y+Math.PI/3)-t/3/s)*Math.PI}if(Math.abs(m)<h){n=this.long0}else{n=j(this.long0+Math.PI*(A-1+Math.sqrt(1+2*(m*m-w*w)+A*A))/2/m)}r.x=n;r.y=x;return r};g.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common/adjust_lon":5,"../common/asinz":6}],63:[function(h,e,k){var o=0.017453292519943295;var l=57.29577951308232;var n=1;var p=2;var j=h("./datum_transform");var m=h("./adjust_axis");var i=h("./Proj");e.exports=function g(u,s,q){var t;function r(w,v){return((w.datum.datum_type===n||w.datum.datum_type===p)&&v.datumCode!=="WGS84")}if(u.datum&&s.datum&&(r(u,s)||r(s,u))){t=new i("WGS84");g(u,t,q);u=t}if(u.axis!=="enu"){m(u,false,q)}if(u.projName==="longlat"){q.x*=o;q.y*=o}else{if(u.to_meter){q.x*=u.to_meter;q.y*=u.to_meter}u.inverse(q)}if(u.from_greenwich){q.x+=u.from_greenwich}q=j(u.datum,s.datum,q);if(s.from_greenwich){q.x-=s.from_greenwich}if(s.projName==="longlat"){q.x*=l;q.y*=l}else{s.forward(q);if(s.to_meter){q.x/=s.to_meter;q.y/=s.to_meter}}if(s.axis!=="enu"){m(s,true,q)}return q}},{"./Proj":2,"./adjust_axis":3,"./datum_transform":29}],64:[function(g,h,e){h.exports="2.1.0"},{}],65:[function(h,e,k){var m=0.017453292519943295;var l=h("./extend");function o(r,q,p){r[q]=p.map(function(s){var t={};g(s,t);return t}).reduce(function(t,s){return l(t,s)},{})}function g(p,r){var q;if(!Array.isArray(p)){r[p]=true;return}else{q=p.shift();if(q==="PARAMETER"){q=p.shift()}if(p.length===1){if(Array.isArray(p[0])){r[q]={};g(p[0],r[q])}else{r[q]=p[0]}}else{if(!p.length){r[q]=true}else{if(q==="TOWGS84"){r[q]=p}else{r[q]={};if(["UNIT","PRIMEM","VERT_DATUM"].indexOf(q)>-1){r[q]={name:p[0].toLowerCase(),convert:p[1]};if(p.length===3){r[q].auth=p[2]}}else{if(q==="SPHEROID"){r[q]={name:p[0],a:p[1],rf:p[2]};if(p.length===4){r[q].auth=p[3]}}else{if(["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(q)>-1){p[0]=["name",p[0]];o(r,q,p)}else{if(p.every(function(s){return Array.isArray(s)})){o(r,q,p)}else{g(p,r[q])}}}}}}}}}function i(r,s){var p=s[0];var q=s[1];if(!(p in r)&&(q in r)){r[p]=r[q];if(s.length===3){r[p]=s[2](r[p])}}}function j(p){return p*m}function n(r){if(r.type==="GEOGCS"){r.projName="longlat"}else{if(r.type==="LOCAL_CS"){r.projName="identity";r.local=true}else{if(typeof r.PROJECTION==="object"){r.projName=Object.keys(r.PROJECTION)[0]}else{r.projName=r.PROJECTION}}}if(r.UNIT){r.units=r.UNIT.name.toLowerCase();if(r.units==="metre"){r.units="meter"}if(r.UNIT.convert){r.to_meter=parseFloat(r.UNIT.convert,10)}}if(r.GEOGCS){if(r.GEOGCS.DATUM){r.datumCode=r.GEOGCS.DATUM.name.toLowerCase()}else{r.datumCode=r.GEOGCS.name.toLowerCase()}if(r.datumCode.slice(0,2)==="d_"){r.datumCode=r.datumCode.slice(2)}if(r.datumCode==="new_zealand_geodetic_datum_1949"||r.datumCode==="new_zealand_1949"){r.datumCode="nzgd49"}if(r.datumCode==="wgs_1984"){if(r.PROJECTION==="Mercator_Auxiliary_Sphere"){r.sphere=true}r.datumCode="wgs84"}if(r.datumCode.slice(-6)==="_ferro"){r.datumCode=r.datumCode.slice(0,-6)}if(r.datumCode.slice(-8)==="_jakarta"){r.datumCode=r.datumCode.slice(0,-8)}if(r.GEOGCS.DATUM&&r.GEOGCS.DATUM.SPHEROID){r.ellps=r.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk");if(r.ellps.toLowerCase().slice(0,13)==="international"){r.ellps="intl"}r.a=r.GEOGCS.DATUM.SPHEROID.a;r.rf=parseFloat(r.GEOGCS.DATUM.SPHEROID.rf,10)}}if(r.b&&!isFinite(r.b)){r.b=r.a}function q(t){var u=r.to_meter||1;return parseFloat(t,10)*u}var p=function(t){return i(r,t)};var s=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",j],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",j],["x0","false_easting",q],["y0","false_northing",q],["long0","central_meridian",j],["lat0","latitude_of_origin",j],["lat0","standard_parallel_1",j],["lat1","standard_parallel_1",j],["lat2","standard_parallel_2",j],["alpha","azimuth",j],["srsCode","name"]];s.forEach(p);if(!r.long0&&r.longc&&(r.PROJECTION==="Albers_Conic_Equal_Area"||r.PROJECTION==="Lambert_Azimuthal_Equal_Area")){r.long0=r.longc}}e.exports=function(t,q){var p=JSON.parse((","+t).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]'));var s=p.shift();var r=p.shift();p.unshift(["name",r]);p.unshift(["type",s]);p.unshift("output");var u={};g(p,u);n(u.output);return l(q,u.output)}},{"./extend":32}],66:[function(p,h,D){var r=6;var s="AJSAJS";var C="AFAFAF";var x=65;var q=73;var o=79;var k=86;var i=90;D.forward=function(E,A){A=A||5;return m(z({lat:E[1],lon:E[0]}),A)};D.inverse=function(A){var E=y(u(A.toUpperCase()));return[E.left,E.bottom,E.right,E.top]};D.toPoint=function(E){var A=D.inverse(E);return[(A[2]+A[0])/2,(A[3]+A[1])/2]};function j(A){return(A*(Math.PI/180))}function g(A){return(180*(A/Math.PI))}function z(O){var R=O.lat;var aa=O.lon;var Y=6378137;var X=0.00669438;var K=0.9996;var V;var G;var I,H,Q,S,J;var P=j(R);var W=j(aa);var Z;var U;U=Math.floor((aa+180)/6)+1;if(aa===180){U=60}if(R>=56&&R<64&&aa>=3&&aa<12){U=32}if(R>=72&&R<84){if(aa>=0&&aa<9){U=31}else{if(aa>=9&&aa<21){U=33}else{if(aa>=21&&aa<33){U=35}else{if(aa>=33&&aa<42){U=37}}}}}V=(U-1)*6-180+3;Z=j(V);G=(X)/(1-X);I=Y/Math.sqrt(1-X*Math.sin(P)*Math.sin(P));H=Math.tan(P)*Math.tan(P);Q=G*Math.cos(P)*Math.cos(P);S=Math.cos(P)*(W-Z);J=Y*((1-X/4-3*X*X/64-5*X*X*X/256)*P-(3*X/8+3*X*X/32+45*X*X*X/1024)*Math.sin(2*P)+(15*X*X/256+45*X*X*X/1024)*Math.sin(4*P)-(35*X*X*X/3072)*Math.sin(6*P));var F=(K*I*(S+(1-H+Q)*S*S*S/6+(5-18*H+H*H+72*Q-58*G)*S*S*S*S*S/120)+500000);var E=(K*(J+I*Math.tan(P)*(S*S/2+(5-H+9*Q+4*Q*Q)*S*S*S*S/24+(61-58*H+H*H+600*Q-330*G)*S*S*S*S*S*S/720)));if(R<0){E+=10000000}return{northing:Math.round(E),easting:Math.round(F),zoneNumber:U,zoneLetter:e(R)}}function y(ac){var A=ac.northing;var F=ac.easting;var E=ac.zoneLetter;var I=ac.zoneNumber;if(I<0||I>60){return null}var O=0.9996;var ad=6378137;var aa=0.00669438;var G;var K=(1-Math.sqrt(1-aa))/(1+Math.sqrt(1-aa));var S,T,Y,ab,U,N;var X;var V,Z;var Q=F-500000;var P=A;if(E<"N"){P-=10000000}X=(I-1)*6-180+3;G=(aa)/(1-aa);N=P/O;V=N/(ad*(1-aa/4-3*aa*aa/64-5*aa*aa*aa/256));Z=V+(3*K/2-27*K*K*K/32)*Math.sin(2*V)+(21*K*K/16-55*K*K*K*K/32)*Math.sin(4*V)+(151*K*K*K/96)*Math.sin(6*V);S=ad/Math.sqrt(1-aa*Math.sin(Z)*Math.sin(Z));T=Math.tan(Z)*Math.tan(Z);Y=G*Math.cos(Z)*Math.cos(Z);ab=ad*(1-aa)/Math.pow(1-aa*Math.sin(Z)*Math.sin(Z),1.5);U=Q/(S*O);var J=Z-(S*Math.tan(Z)/ab)*(U*U/2-(5+3*T+10*Y-4*Y*Y-9*G)*U*U*U*U/24+(61+90*T+298*Y+45*T*T-252*G-3*Y*Y)*U*U*U*U*U*U/720);J=g(J);var H=(U-(1+2*T+Y)*U*U*U/6+(5-2*Y+28*T-3*Y*Y+8*G+24*T*T)*U*U*U*U*U/120)/Math.cos(Z);H=X+g(H);var R;if(ac.accuracy){var W=y({northing:ac.northing+ac.accuracy,easting:ac.easting+ac.accuracy,zoneLetter:ac.zoneLetter,zoneNumber:ac.zoneNumber});R={top:W.lat,right:W.lon,bottom:J,left:H}}else{R={lat:J,lon:H}}return R}function e(A){var E="Z";if((84>=A)&&(A>=72)){E="X"}else{if((72>A)&&(A>=64)){E="W"}else{if((64>A)&&(A>=56)){E="V"}else{if((56>A)&&(A>=48)){E="U"}else{if((48>A)&&(A>=40)){E="T"}else{if((40>A)&&(A>=32)){E="S"}else{if((32>A)&&(A>=24)){E="R"}else{if((24>A)&&(A>=16)){E="Q"}else{if((16>A)&&(A>=8)){E="P"}else{if((8>A)&&(A>=0)){E="N"}else{if((0>A)&&(A>=-8)){E="M"}else{if((-8>A)&&(A>=-16)){E="L"}else{if((-16>A)&&(A>=-24)){E="K"}else{if((-24>A)&&(A>=-32)){E="J"}else{if((-32>A)&&(A>=-40)){E="H"}else{if((-40>A)&&(A>=-48)){E="G"}else{if((-48>A)&&(A>=-56)){E="F"}else{if((-56>A)&&(A>=-64)){E="E"}else{if((-64>A)&&(A>=-72)){E="D"}else{if((-72>A)&&(A>=-80)){E="C"}}}}}}}}}}}}}}}}}}}}return E}function m(A,F){var G=""+A.easting,E=""+A.northing;return A.zoneNumber+A.zoneLetter+w(A.easting,A.northing,A.zoneNumber)+G.substr(G.length-5,F)+E.substr(E.length-5,F)}function w(I,H,G){var A=n(G);var E=Math.floor(I/100000);var F=Math.floor(H/100000)%20;return B(E,F,A)}function n(E){var A=E%r;if(A===0){A=r}return A}function B(F,N,G){var I=G-1;var H=s.charCodeAt(I);var K=C.charCodeAt(I);var A=H+F-1;var J=K+N;var M=false;if(A>i){A=A-i+x-1;M=true}if(A===q||(H<q&&A>q)||((A>q||H<q)&&M)){A++}if(A===o||(H<o&&A>o)||((A>o||H<o)&&M)){A++;if(A===q){A++}}if(A>i){A=A-i+x-1}if(J>k){J=J-k+x-1;M=true}else{M=false}if(((J===q)||((K<q)&&(J>q)))||(((J>q)||(K<q))&&M)){J++}if(((J===o)||((K<o)&&(J>o)))||(((J>o)||(K<o))&&M)){J++;if(J===q){J++}}if(J>k){J=J-k+x-1}var E=String.fromCharCode(A)+String.fromCharCode(J);return E}function u(Q){if(Q&&Q.length===0){throw ("MGRSPoint coverting from nothing")}var G=Q.length;var A=null;var E="";var H;var T=0;while(!(/[A-Z]/).test(H=Q.charAt(T))){if(T>=2){throw ("MGRSPoint bad conversion from: "+Q)}E+=H;T++}var I=parseInt(E,10);if(T===0||T+3>G){throw ("MGRSPoint bad conversion from: "+Q)}var F=Q.charAt(T++);if(F<="A"||F==="B"||F==="Y"||F>="Z"||F==="I"||F==="O"){throw ("MGRSPoint zone letter "+F+" not handled: "+Q)}A=Q.substring(T,T+=2);var P=n(I);var K=t(A.charAt(0),P);var M=l(A.charAt(1),P);while(M<v(F)){M+=2000000}var O=G-T;if(O%2!==0){throw ("MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+Q)}var R=O/2;var X=0;var V=0;var N,W,J,U,S;if(R>0){N=100000/Math.pow(10,R);W=Q.substring(T,T+R);X=parseFloat(W)*N;J=Q.substring(T+R);V=parseFloat(J)*N}U=X+K;S=V+M;return{easting:U,northing:S,zoneLetter:F,zoneNumber:I,accuracy:N}}function t(F,H){var G=s.charCodeAt(H-1);var A=100000;var E=false;while(G!==F.charCodeAt(0)){G++;if(G===q){G++}if(G===o){G++}if(G>i){if(E){throw ("Bad character: "+F)}G=x;E=true}A+=100000}return A}function l(H,G){if(H>"V"){throw ("MGRSPoint given invalid Northing "+H)}var F=C.charCodeAt(G-1);var A=0;var E=false;while(F!==H.charCodeAt(0)){F++;if(F===q){F++}if(F===o){F++}if(F>k){if(E){throw ("Bad character: "+H)}F=x;E=true}A+=100000}return A}function v(A){var E;switch(A){case"C":E=1100000;break;case"D":E=2000000;break;case"E":E=2800000;break;case"F":E=3700000;break;case"G":E=4600000;break;case"H":E=5500000;break;case"J":E=6400000;break;case"K":E=7300000;break;case"L":E=8200000;break;case"M":E=9100000;break;case"N":E=0;break;case"P":E=800000;break;case"Q":E=1700000;break;case"R":E=2600000;break;case"S":E=3500000;break;case"T":E=4400000;break;case"U":E=5300000;break;case"V":E=6200000;break;case"W":E=7000000;break;case"X":E=7900000;break;default:E=-1}if(E>=0){return E}else{throw ("Invalid zone letter: "+A)}}},{}],"./includedProjections":[function(g,h,e){h.exports=g("gWUPNW")},{}],gWUPNW:[function(g,i,e){var h=[g("./lib/projections/tmerc"),g("./lib/projections/utm"),g("./lib/projections/sterea"),g("./lib/projections/stere"),g("./lib/projections/somerc"),g("./lib/projections/omerc"),g("./lib/projections/lcc"),g("./lib/projections/krovak"),g("./lib/projections/cass"),g("./lib/projections/laea"),g("./lib/projections/aea"),g("./lib/projections/gnom"),g("./lib/projections/cea"),g("./lib/projections/eqc"),g("./lib/projections/poly"),g("./lib/projections/nzmg"),g("./lib/projections/mill"),g("./lib/projections/sinu"),g("./lib/projections/moll"),g("./lib/projections/eqdc"),g("./lib/projections/vandg"),g("./lib/projections/aeqd")];i.exports=function(j){h.forEach(function(k){j.Proj.projections.add(k)})}},{"./lib/projections/aea":38,"./lib/projections/aeqd":39,"./lib/projections/cass":40,"./lib/projections/cea":41,"./lib/projections/eqc":42,"./lib/projections/eqdc":43,"./lib/projections/gnom":45,"./lib/projections/krovak":46,"./lib/projections/laea":47,"./lib/projections/lcc":48,"./lib/projections/mill":51,"./lib/projections/moll":52,"./lib/projections/nzmg":53,"./lib/projections/omerc":54,"./lib/projections/poly":55,"./lib/projections/sinu":56,"./lib/projections/somerc":57,"./lib/projections/stere":58,"./lib/projections/sterea":59,"./lib/projections/tmerc":60,"./lib/projections/utm":61,"./lib/projections/vandg":62}]},{},[34])(34)});(function(d,b,h){var e=d.L,a={};a.version="0.7.1";if(typeof module==="object"&&typeof module.exports==="object"){module.exports=a}else{if(typeof define==="function"&&define.amd){define(a)}}a.noConflict=function(){d.L=e;return this};d.L=a;a.Util={extend:function(n){var m=Array.prototype.slice.call(arguments,1),o,l,k,p;for(l=0,k=m.length;l<k;l++){p=m[l]||{};for(o in p){if(p.hasOwnProperty(o)){n[o]=p[o]}}}return n},bind:function(j,k){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return j.apply(k,i||arguments)}},stamp:(function(){var j=0,i="_leaflet_id";return function(k){k[i]=k[i]||++j;return k[i]}}()),invokeEach:function(m,n,l){var k,j;if(typeof m==="object"){j=Array.prototype.slice.call(arguments,3);for(k in m){n.apply(l,[k,m[k]].concat(j))}return true}return false},limitExecByInterval:function(l,n,k){var j,m;return function i(){var o=arguments;if(j){m=true;return}j=true;setTimeout(function(){j=false;if(m){i.apply(k,o);m=false}},n);l.apply(k,o)}},falseFn:function(){return false},formatNum:function(i,k){var j=Math.pow(10,k||5);return Math.round(i*j)/j},trim:function(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")},splitWords:function(i){return a.Util.trim(i).split(/\s+/)},setOptions:function(j,i){j.options=a.extend({},j.options,i);return j.options},getParamString:function(m,j,k){var n=[];for(var l in m){n.push(encodeURIComponent(k?l.toUpperCase():l)+"="+encodeURIComponent(m[l]))}return((!j||j.indexOf("?")===-1)?"?":"&")+n.join("&")},template:function(j,i){return j.replace(/\{ *([\w_]+) *\}/g,function(m,k){var l=i[k];if(l===h){throw new Error("No value provided for variable "+m)}else{if(typeof l==="function"){l=l(i)}}return l})},isArray:Array.isArray||function(i){return(Object.prototype.toString.call(i)==="[object Array]")},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="};(function(){function l(n){var o,p,q=["webkit","moz","o","ms"];for(o=0;o<q.length&&!p;o++){p=d[q[o]+n]}return p}var m=0;function j(n){var p=+new Date(),o=Math.max(0,16-(p-m));m=p+o;return d.setTimeout(n,o)}var i=d.requestAnimationFrame||l("RequestAnimationFrame")||j;var k=d.cancelAnimationFrame||l("CancelAnimationFrame")||l("CancelRequestAnimationFrame")||function(n){d.clearTimeout(n)};a.Util.requestAnimFrame=function(q,p,n,o){q=a.bind(q,p);if(n&&i===j){q()}else{return i.call(d,q,o)}};a.Util.cancelAnimFrame=function(n){if(n){k.call(d,n)}}}());a.extend=a.Util.extend;a.bind=a.Util.bind;a.stamp=a.Util.stamp;a.setOptions=a.Util.setOptions;a.Class=function(){};a.Class.extend=function(l){var o=function(){if(this.initialize){this.initialize.apply(this,arguments)}if(this._initHooks){this.callInitHooks()}};var n=function(){};n.prototype=this.prototype;var m=new n();m.constructor=o;o.prototype=m;for(var j in this){if(this.hasOwnProperty(j)&&j!=="prototype"){o[j]=this[j]}}if(l.statics){a.extend(o,l.statics);delete l.statics}if(l.includes){a.Util.extend.apply(null,[m].concat(l.includes));delete l.includes}if(l.options&&m.options){l.options=a.extend({},m.options,l.options)}a.extend(m,l);m._initHooks=[];var k=this;o.__super__=k.prototype;m.callInitHooks=function(){if(this._initHooksCalled){return}if(k.prototype.callInitHooks){k.prototype.callInitHooks.call(this)}this._initHooksCalled=true;for(var q=0,p=m._initHooks.length;q<p;q++){m._initHooks[q].call(this)}};return o};a.Class.include=function(i){a.extend(this.prototype,i)};a.Class.mergeOptions=function(i){a.extend(this.prototype.options,i)};a.Class.addInitHook=function(j){var i=Array.prototype.slice.call(arguments,1);var k=typeof j==="function"?j:function(){this[j].apply(this,i)};this.prototype._initHooks=this.prototype._initHooks||[];this.prototype._initHooks.push(k)};var g="_leaflet_events";a.Mixin={};a.Mixin.Events={addEventListener:function(o,t,k){if(a.Util.invokeEach(o,this.addEventListener,this,t,k)){return this}var u=this[g]=this[g]||{},n=k&&k!==this&&a.stamp(k),m,p,j,s,l,r,q;o=a.Util.splitWords(o);for(m=0,p=o.length;m<p;m++){j={action:t,context:k||this};s=o[m];if(n){l=s+"_idx";r=l+"_len";q=u[l]=u[l]||{};if(!q[n]){q[n]=[];u[r]=(u[r]||0)+1}q[n].push(j)}else{u[s]=u[s]||[];u[s].push(j)}}return this},hasEventListeners:function(j){var i=this[g];return !!i&&((j in i&&i[j].length>0)||(j+"_idx" in i&&i[j+"_idx_len"]>0))},removeEventListener:function(q,w,k){if(!this[g]){return this}if(!q){return this.clearAllEventListeners()}if(a.Util.invokeEach(q,this.removeEventListener,this,w,k)){return this}var x=this[g],o=k&&k!==this&&a.stamp(k),n,r,v,u,l,m,t,s,p;q=a.Util.splitWords(q);for(n=0,r=q.length;n<r;n++){v=q[n];m=v+"_idx";t=m+"_len";s=x[m];if(!w){delete x[v];delete x[m];delete x[t]}else{u=o&&s?s[o]:x[v];if(u){for(l=u.length-1;l>=0;l--){if((u[l].action===w)&&(!k||(u[l].context===k))){p=u.splice(l,1);p[0].action=a.Util.falseFn}}if(k&&s&&(u.length===0)){delete s[o];x[t]--}}}}return this},clearAllEventListeners:function(){delete this[g];return this},fireEvent:function(p,k){if(!this.hasEventListeners(p)){return this}var j=a.Util.extend({},k,{type:p,target:this});var r=this[g],q,l,n,o,m;if(r[p]){q=r[p].slice();for(l=0,n=q.length;l<n;l++){q[l].action.call(q[l].context,j)}}o=r[p+"_idx"];for(m in o){q=o[m].slice();if(q){for(l=0,n=q.length;l<n;l++){q[l].action.call(q[l].context,j)}}}return this},addOneTimeEventListener:function(j,l,i){if(a.Util.invokeEach(j,this.addOneTimeEventListener,this,l,i)){return this}var k=a.bind(function(){this.removeEventListener(j,l,i).removeEventListener(j,k,i)},this);return this.addEventListener(j,l,i).addEventListener(j,k,i)}};a.Mixin.Events.on=a.Mixin.Events.addEventListener;a.Mixin.Events.off=a.Mixin.Events.removeEventListener;a.Mixin.Events.once=a.Mixin.Events.addOneTimeEventListener;a.Mixin.Events.fire=a.Mixin.Events.fireEvent;(function(){var u="ActiveXObject" in d,z=u&&!b.addEventListener,y=navigator.userAgent.toLowerCase(),i=y.indexOf("webkit")!==-1,t=y.indexOf("chrome")!==-1,k=y.indexOf("phantom")!==-1,A=y.indexOf("android")!==-1,s=y.search("android [23]")!==-1,q=y.indexOf("gecko")!==-1,m=typeof orientation!==h+"",l=d.navigator&&d.navigator.msPointerEnabled&&d.navigator.msMaxTouchPoints&&!d.PointerEvent,v=(d.PointerEvent&&d.navigator.pointerEnabled&&d.navigator.maxTouchPoints)||l,j=("devicePixelRatio" in d&&d.devicePixelRatio>1)||("matchMedia" in d&&d.matchMedia("(min-resolution:144dpi)")&&d.matchMedia("(min-resolution:144dpi)").matches),B=b.documentElement,w=u&&("transition" in B.style),r=("WebKitCSSMatrix" in d)&&("m11" in new d.WebKitCSSMatrix())&&!s,o="MozPerspective" in B.style,x="OTransition" in B.style,p=!d.L_DISABLE_3D&&(w||r||o||x)&&!k;var n=!d.L_NO_TOUCH&&!k&&(function(){var D="ontouchstart";if(v||(D in B)){return true}var E=b.createElement("div"),C=false;if(!E.setAttribute){return false}E.setAttribute(D,"return;");if(typeof E[D]==="function"){C=true}E.removeAttribute(D);E=null;return C}());a.Browser={ie:u,ielt9:z,webkit:i,gecko:q&&!i&&!d.opera&&!u,android:A,android23:s,chrome:t,ie3d:w,webkit3d:r,gecko3d:o,opera3d:x,any3d:p,mobile:m,mobileWebkit:m&&i,mobileWebkit3d:m&&r,mobileOpera:m&&d.opera,touch:n,msPointer:l,pointer:v,retina:j}}());a.Point=function(i,k,j){this.x=(j?Math.round(i):i);this.y=(j?Math.round(k):k)};a.Point.prototype={clone:function(){return new a.Point(this.x,this.y)},add:function(i){return this.clone()._add(a.point(i))},_add:function(i){this.x+=i.x;this.y+=i.y;return this},subtract:function(i){return this.clone()._subtract(a.point(i))},_subtract:function(i){this.x-=i.x;this.y-=i.y;return this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){this.x/=i;this.y/=i;return this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){this.x*=i;this.y*=i;return this},round:function(){return this.clone()._round()},_round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this},floor:function(){return this.clone()._floor()},_floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},distanceTo:function(j){j=a.point(j);var i=j.x-this.x,k=j.y-this.y;return Math.sqrt(i*i+k*k)},equals:function(i){i=a.point(i);return i.x===this.x&&i.y===this.y},contains:function(i){i=a.point(i);return Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+a.Util.formatNum(this.x)+", "+a.Util.formatNum(this.y)+")"}};a.point=function(i,k,j){if(i instanceof a.Point){return i}if(a.Util.isArray(i)){return new a.Point(i[0],i[1])}if(i===h||i===null){return i}return new a.Point(i,k,j)};a.Bounds=function(l,k){if(!l){return}var n=k?[l,k]:l;for(var m=0,j=n.length;m<j;m++){this.extend(n[m])}};a.Bounds.prototype={extend:function(i){i=a.point(i);if(!this.min&&!this.max){this.min=i.clone();this.max=i.clone()}else{this.min.x=Math.min(i.x,this.min.x);this.max.x=Math.max(i.x,this.max.x);this.min.y=Math.min(i.y,this.min.y);this.max.y=Math.max(i.y,this.max.y)}return this},getCenter:function(i){return new a.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return new a.Point(this.min.x,this.max.y)},getTopRight:function(){return new a.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(k){var j,i;if(typeof k[0]==="number"||k instanceof a.Point){k=a.point(k)}else{k=a.bounds(k)}if(k instanceof a.Bounds){j=k.min;i=k.max}else{j=i=k}return(j.x>=this.min.x)&&(i.x<=this.max.x)&&(j.y>=this.min.y)&&(i.y<=this.max.y)},intersects:function(n){n=a.bounds(n);var l=this.min,i=this.max,m=n.min,j=n.max,k=(j.x>=l.x)&&(m.x<=i.x),o=(j.y>=l.y)&&(m.y<=i.y);return k&&o},isValid:function(){return !!(this.min&&this.max)}};a.bounds=function(j,i){if(!j||j instanceof a.Bounds){return j}return new a.Bounds(j,i)};a.Transformation=function(j,i,l,k){this._a=j;this._b=i;this._c=l;this._d=k};a.Transformation.prototype={transform:function(i,j){return this._transform(i.clone(),j)},_transform:function(i,j){j=j||1;i.x=j*(this._a*i.x+this._b);i.y=j*(this._c*i.y+this._d);return i},untransform:function(i,j){j=j||1;return new a.Point((i.x/j-this._b)/this._a,(i.y/j-this._d)/this._c)}};a.DomUtil={get:function(i){return(typeof i==="string"?b.getElementById(i):i)},getStyle:function(k,j){var l=k.style[j];if(!l&&k.currentStyle){l=k.currentStyle[j]}if((!l||l==="auto")&&b.defaultView){var i=b.defaultView.getComputedStyle(k,null);l=i?i[j]:null}return l==="auto"?null:l},getViewportOffset:function(n){var q=0,m=0,l=n,o=b.body,k=b.documentElement,p;do{q+=l.offsetTop||0;m+=l.offsetLeft||0;q+=parseInt(a.DomUtil.getStyle(l,"borderTopWidth"),10)||0;m+=parseInt(a.DomUtil.getStyle(l,"borderLeftWidth"),10)||0;p=a.DomUtil.getStyle(l,"position");if(l.offsetParent===o&&p==="absolute"){break}if(p==="fixed"){q+=o.scrollTop||k.scrollTop||0;m+=o.scrollLeft||k.scrollLeft||0;break}if(p==="relative"&&!l.offsetLeft){var j=a.DomUtil.getStyle(l,"width"),s=a.DomUtil.getStyle(l,"max-width"),i=l.getBoundingClientRect();if(j!=="none"||s!=="none"){m+=i.left+l.clientLeft}q+=i.top+(o.scrollTop||k.scrollTop||0);break}l=l.offsetParent}while(l);l=n;do{if(l===o){break}q-=l.scrollTop||0;m-=l.scrollLeft||0;l=l.parentNode}while(l);return new a.Point(m,q)},documentIsLtr:function(){if(!a.DomUtil._docIsLtrCached){a.DomUtil._docIsLtrCached=true;a.DomUtil._docIsLtr=a.DomUtil.getStyle(b.body,"direction")==="ltr"}return a.DomUtil._docIsLtr},create:function(j,l,i){var k=b.createElement(j);k.className=l;if(i){i.appendChild(k)}return k},hasClass:function(k,i){if(k.classList!==h){return k.classList.contains(i)}var j=a.DomUtil._getClass(k);return j.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(j)},addClass:function(o,k){if(o.classList!==h){var m=a.Util.splitWords(k);for(var l=0,j=m.length;l<j;l++){o.classList.add(m[l])}}else{if(!a.DomUtil.hasClass(o,k)){var n=a.DomUtil._getClass(o);a.DomUtil._setClass(o,(n?n+" ":"")+k)}}},removeClass:function(j,i){if(j.classList!==h){j.classList.remove(i)}else{a.DomUtil._setClass(j,a.Util.trim((" "+a.DomUtil._getClass(j)+" ").replace(" "+i+" "," ")))}},_setClass:function(j,i){if(j.className.baseVal===h){j.className=i}else{j.className.baseVal=i}},_getClass:function(i){return i.className.baseVal===h?i.className:i.className.baseVal},setOpacity:function(k,l){if("opacity" in k.style){k.style.opacity=l}else{if("filter" in k.style){var j=false,i="DXImageTransform.Microsoft.Alpha";try{j=k.filters.item(i)}catch(m){if(l===1){return}}l=Math.round(l*100);if(j){j.Enabled=(l!==100);j.Opacity=l}else{k.style.filter+=" progid:"+i+"(opacity="+l+")"}}}},testProp:function(l){var k=b.documentElement.style;for(var j=0;j<l.length;j++){if(l[j] in k){return l[j]}}return false},getTranslateString:function(i){var k=a.Browser.webkit3d,j="translate"+(k?"3d":"")+"(",l=(k?",0":"")+")";return j+i.x+"px,"+i.y+"px"+l},getScaleString:function(k,i){var l=a.DomUtil.getTranslateString(i.add(i.multiplyBy(-1*k))),j=" scale("+k+") ";return l+j},setPosition:function(k,i,j){k._leaflet_pos=i;if(!j&&a.Browser.any3d){k.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(i)}else{k.style.left=i.x+"px";k.style.top=i.y+"px"}},getPosition:function(i){return i._leaflet_pos}};a.DomUtil.TRANSFORM=a.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]);a.DomUtil.TRANSITION=a.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);a.DomUtil.TRANSITION_END=a.DomUtil.TRANSITION==="webkitTransition"||a.DomUtil.TRANSITION==="OTransition"?a.DomUtil.TRANSITION+"End":"transitionend";(function(){if("onselectstart" in b){a.extend(a.DomUtil,{disableTextSelection:function(){a.DomEvent.on(d,"selectstart",a.DomEvent.preventDefault)},enableTextSelection:function(){a.DomEvent.off(d,"selectstart",a.DomEvent.preventDefault)}})}else{var i=a.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);a.extend(a.DomUtil,{disableTextSelection:function(){if(i){var j=b.documentElement.style;this._userSelect=j[i];j[i]="none"}},enableTextSelection:function(){if(i){b.documentElement.style[i]=this._userSelect;delete this._userSelect}}})}a.extend(a.DomUtil,{disableImageDrag:function(){a.DomEvent.on(d,"dragstart",a.DomEvent.preventDefault)},enableImageDrag:function(){a.DomEvent.off(d,"dragstart",a.DomEvent.preventDefault)}})})();a.LatLng=function(k,i,j){k=parseFloat(k);i=parseFloat(i);if(isNaN(k)||isNaN(i)){throw new Error("Invalid LatLng object: ("+k+", "+i+")")}this.lat=k;this.lng=i;if(j!==h){this.alt=parseFloat(j)}};a.extend(a.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9});a.LatLng.prototype={equals:function(j){if(!j){return false}j=a.latLng(j);var i=Math.max(Math.abs(this.lat-j.lat),Math.abs(this.lng-j.lng));return i<=a.LatLng.MAX_MARGIN},toString:function(i){return"LatLng("+a.Util.formatNum(this.lat,i)+", "+a.Util.formatNum(this.lng,i)+")"},distanceTo:function(p){p=a.latLng(p);var o=6378137,l=a.LatLng.DEG_TO_RAD,q=(p.lat-this.lat)*l,i=(p.lng-this.lng)*l,n=this.lat*l,k=p.lat*l,m=Math.sin(q/2),j=Math.sin(i/2);var r=m*m+j*j*Math.cos(n)*Math.cos(k);return o*2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))},wrap:function(j,i){var k=this.lng;j=j||-180;i=i||180;k=(k+i)%(i-j)+(k<j||k===i?i:j);return new a.LatLng(this.lat,k)}};a.latLng=function(j,i){if(j instanceof a.LatLng){return j}if(a.Util.isArray(j)){if(typeof j[0]==="number"||typeof j[0]==="string"){return new a.LatLng(j[0],j[1],j[2])}else{return null}}if(j===h||j===null){return j}if(typeof j==="object"&&"lat" in j){return new a.LatLng(j.lat,"lng" in j?j.lng:j.lon)}if(i===h){return null}return new a.LatLng(j,i)};a.LatLngBounds=function(n,l){if(!n){return}var k=l?[n,l]:n;for(var m=0,j=k.length;m<j;m++){this.extend(k[m])}};a.LatLngBounds.prototype={extend:function(j){if(!j){return this}var i=a.latLng(j);if(i!==null){j=i}else{j=a.latLngBounds(j)}if(j instanceof a.LatLng){if(!this._southWest&&!this._northEast){this._southWest=new a.LatLng(j.lat,j.lng);this._northEast=new a.LatLng(j.lat,j.lng)}else{this._southWest.lat=Math.min(j.lat,this._southWest.lat);this._southWest.lng=Math.min(j.lng,this._southWest.lng);this._northEast.lat=Math.max(j.lat,this._northEast.lat);this._northEast.lng=Math.max(j.lng,this._northEast.lng)}}else{if(j instanceof a.LatLngBounds){this.extend(j._southWest);this.extend(j._northEast)}}return this},pad:function(l){var j=this._southWest,m=this._northEast,i=Math.abs(j.lat-m.lat)*l,k=Math.abs(j.lng-m.lng)*l;return new a.LatLngBounds(new a.LatLng(j.lat-i,j.lng-k),new a.LatLng(m.lat+i,m.lng+k))},getCenter:function(){return new a.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new a.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new a.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(m){if(typeof m[0]==="number"||m instanceof a.LatLng){m=a.latLng(m)}else{m=a.latLngBounds(m)}var i=this._southWest,l=this._northEast,j,k;if(m instanceof a.LatLngBounds){j=m.getSouthWest();k=m.getNorthEast()}else{j=k=m}return(j.lat>=i.lat)&&(k.lat<=l.lat)&&(j.lng>=i.lng)&&(k.lng<=l.lng)},intersects:function(l){l=a.latLngBounds(l);var i=this._southWest,o=this._northEast,j=l.getSouthWest(),n=l.getNorthEast(),m=(n.lat>=i.lat)&&(j.lat<=o.lat),k=(n.lng>=i.lng)&&(j.lng<=o.lng);return m&&k},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i){if(!i){return false}i=a.latLngBounds(i);return this._southWest.equals(i.getSouthWest())&&this._northEast.equals(i.getNorthEast())},isValid:function(){return !!(this._southWest&&this._northEast)}};a.latLngBounds=function(j,i){if(!j||j instanceof a.LatLngBounds){return j}return new a.LatLngBounds(j,i)};a.Projection={};a.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(n){var l=a.LatLng.DEG_TO_RAD,j=this.MAX_LATITUDE,k=Math.max(Math.min(j,n.lat),-j),i=n.lng*l,m=k*l;m=Math.log(Math.tan((Math.PI/4)+(m/2)));return new a.Point(i,m)},unproject:function(i){var l=a.LatLng.RAD_TO_DEG,j=i.x*l,k=(2*Math.atan(Math.exp(i.y))-(Math.PI/2))*l;return new a.LatLng(k,j)}};a.Projection.LonLat={project:function(i){return new a.Point(i.lng,i.lat)},unproject:function(i){return new a.LatLng(i.y,i.x)}};a.CRS={latLngToPoint:function(l,j){var i=this.projection.project(l),k=this.scale(j);return this.transformation._transform(i,k)},pointToLatLng:function(i,k){var l=this.scale(k),j=this.transformation.untransform(i,l);return this.projection.unproject(j)},project:function(i){return this.projection.project(i)},scale:function(i){return 256*Math.pow(2,i)},getSize:function(j){var i=this.scale(j);return a.point(i,i)}};a.CRS.Simple=a.extend({},a.CRS,{projection:a.Projection.LonLat,transformation:new a.Transformation(1,0,-1,0),scale:function(i){return Math.pow(2,i)}});a.CRS.EPSG3857=a.extend({},a.CRS,{code:"EPSG:3857",projection:a.Projection.SphericalMercator,transformation:new a.Transformation(0.5/Math.PI,0.5,-0.5/Math.PI,0.5),project:function(k){var j=this.projection.project(k),i=6378137;return j.multiplyBy(i)}});a.CRS.EPSG900913=a.extend({},a.CRS.EPSG3857,{code:"EPSG:900913"});a.CRS.EPSG4326=a.extend({},a.CRS,{code:"EPSG:4326",projection:a.Projection.LonLat,transformation:new a.Transformation(1/360,0.5,-1/360,0.5)});a.Map=a.Class.extend({includes:a.Mixin.Events,options:{crs:a.CRS.EPSG3857,fadeAnimation:a.DomUtil.TRANSITION&&!a.Browser.android23,trackResize:true,markerZoomAnimation:a.DomUtil.TRANSITION&&a.Browser.any3d},initialize:function(j,i){i=a.setOptions(this,i);this._initContainer(j);this._initLayout();this._onResize=a.bind(this._onResize,this);this._initEvents();if(i.maxBounds){this.setMaxBounds(i.maxBounds)}if(i.center&&i.zoom!==h){this.setView(a.latLng(i.center),i.zoom,{reset:true})}this._handlers=[];this._layers={};this._zoomBoundLayers={};this._tileLayersNum=0;this.callInitHooks();this._addLayers(i.layers)},setView:function(i,j){j=j===h?this.getZoom():j;this._resetView(a.latLng(i),this._limitZoom(j));return this},setZoom:function(j,i){if(!this._loaded){this._zoom=this._limitZoom(j);return this}return this.setView(this.getCenter(),j,{zoom:i})},zoomIn:function(j,i){return this.setZoom(this._zoom+(j||1),i)},zoomOut:function(j,i){return this.setZoom(this._zoom-(j||1),i)},setZoomAround:function(p,n,m){var o=this.getZoomScale(n),l=this.getSize().divideBy(2),k=p instanceof a.Point?p:this.latLngToContainerPoint(p),i=k.subtract(l).multiplyBy(1-1/o),j=this.containerPointToLatLng(l.add(i));return this.setView(j,n,{zoom:m})},fitBounds:function(j,q){q=q||{};j=j.getBounds?j.getBounds():a.latLngBounds(j);var l=a.point(q.paddingTopLeft||q.padding||[0,0]),k=a.point(q.paddingBottomRight||q.padding||[0,0]),p=this.getBoundsZoom(j,false,l.add(k)),n=k.subtract(l).divideBy(2),o=this.project(j.getSouthWest(),p),m=this.project(j.getNorthEast(),p),i=this.unproject(o.add(m).divideBy(2).add(n),p);p=q&&q.maxZoom?Math.min(q.maxZoom,p):p;return this.setView(i,p,q)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,j){return this.setView(i,this._zoom,{pan:j})},panBy:function(i){this.fire("movestart");this._rawPanBy(a.point(i));this.fire("move");return this.fire("moveend")},setMaxBounds:function(i){i=a.latLngBounds(i);this.options.maxBounds=i;if(!i){return this.off("moveend",this._panInsideMaxBounds,this)}if(this._loaded){this._panInsideMaxBounds()}return this.on("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(l,k){var i=this.getCenter(),j=this._limitCenter(i,this._zoom,l);if(i.equals(j)){return this}return this.panTo(j,k)},addLayer:function(i){var j=a.stamp(i);if(this._layers[j]){return this}this._layers[j]=i;if(i.options&&(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))){this._zoomBoundLayers[j]=i;this._updateZoomLevels()}if(this.options.zoomAnimation&&a.TileLayer&&(i instanceof a.TileLayer)){this._tileLayersNum++;this._tileLayersToLoad++;i.on("load",this._onTileLayerLoad,this)}if(this._loaded){this._layerAdd(i)}return this},removeLayer:function(i){var j=a.stamp(i);if(!this._layers[j]){return this}if(this._loaded){i.onRemove(this)}delete this._layers[j];if(this._loaded){this.fire("layerremove",{layer:i})}if(this._zoomBoundLayers[j]){delete this._zoomBoundLayers[j];this._updateZoomLevels()}if(this.options.zoomAnimation&&a.TileLayer&&(i instanceof a.TileLayer)){this._tileLayersNum--;this._tileLayersToLoad--;i.off("load",this._onTileLayerLoad,this)}return this},hasLayer:function(i){if(!i){return false}return(a.stamp(i) in this._layers)},eachLayer:function(l,k){for(var j in this._layers){l.call(k,this._layers[j])}return this},invalidateSize:function(k){if(!this._loaded){return this}k=a.extend({animate:false,pan:true},k===true?{animate:true}:k);var l=this.getSize();this._sizeChanged=true;this._initialCenter=null;var j=this.getSize(),n=l.divideBy(2).round(),i=j.divideBy(2).round(),m=n.subtract(i);if(!m.x&&!m.y){return this}if(k.animate&&k.pan){this.panBy(m)}else{if(k.pan){this._rawPanBy(m)}this.fire("move");if(k.debounceMoveend){clearTimeout(this._sizeTimer);this._sizeTimer=setTimeout(a.bind(this.fire,this,"moveend"),200)}else{this.fire("moveend")}}return this.fire("resize",{oldSize:l,newSize:j})},addHandler:function(i,k){if(!k){return this}var j=this[i]=new k(this);this._handlers.push(j);if(this.options[i]){j.enable()}return this},remove:function(){if(this._loaded){this.fire("unload")}this._initEvents("off");try{delete this._container._leaflet}catch(i){this._container._leaflet=h}this._clearPanes();if(this._clearControlPos){this._clearControlPos()}this._clearHandlers();return this},getCenter:function(){this._checkIfLoaded();if(this._initialCenter&&!this._moved()){return this._initialCenter}return this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var j=this.getPixelBounds(),i=this.unproject(j.getBottomLeft()),k=this.unproject(j.getTopRight());return new a.LatLngBounds(i,k)},getMinZoom:function(){return this.options.minZoom===h?(this._layersMinZoom===h?0:this._layersMinZoom):this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===h?(this._layersMaxZoom===h?Infinity:this._layersMaxZoom):this.options.maxZoom},getBoundsZoom:function(i,j,n){i=a.latLngBounds(i);var p=this.getMinZoom()-(j?1:0),o=this.getMaxZoom(),r=this.getSize(),l=i.getNorthWest(),m=i.getSouthEast(),k=true,q;n=a.point(n||[0,0]);do{p++;q=this.project(m,p).subtract(this.project(l,p)).add(n);k=!j?r.contains(q):q.x<r.x||q.y<r.y}while(k&&p<=o);if(k&&j){return null}return j?p:p-1},getSize:function(){if(!this._size||this._sizeChanged){this._size=new a.Point(this._container.clientWidth,this._container.clientHeight);this._sizeChanged=false}return this._size.clone()},getPixelBounds:function(){var i=this._getTopLeftPoint();return new a.Bounds(i,i.add(this.getSize()))},getPixelOrigin:function(){this._checkIfLoaded();return this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(j){var i=this.options.crs;return i.scale(j)/i.scale(this._zoom)},getScaleZoom:function(i){return this._zoom+(Math.log(i)/Math.LN2)},project:function(j,i){i=i===h?this._zoom:i;return this.options.crs.latLngToPoint(a.latLng(j),i)},unproject:function(i,j){j=j===h?this._zoom:j;return this.options.crs.pointToLatLng(a.point(i),j)},layerPointToLatLng:function(i){var j=a.point(i).add(this.getPixelOrigin());return this.unproject(j)},latLngToLayerPoint:function(j){var i=this.project(a.latLng(j))._round();return i._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(i){return a.point(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return a.point(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var j=this.containerPointToLayerPoint(a.point(i));return this.layerPointToLatLng(j)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(a.latLng(i)))},mouseEventToContainerPoint:function(i){return a.DomEvent.getMousePosition(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(j){var i=this._container=a.DomUtil.get(j);if(!i){throw new Error("Map container not found.")}else{if(i._leaflet){throw new Error("Map container is already initialized.")}}i._leaflet=true},_initLayout:function(){var j=this._container;a.DomUtil.addClass(j,"leaflet-container"+(a.Browser.touch?" leaflet-touch":"")+(a.Browser.retina?" leaflet-retina":"")+(a.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var i=a.DomUtil.getStyle(j,"position");if(i!=="absolute"&&i!=="relative"&&i!=="fixed"){j.style.position="relative"}this._initPanes();if(this._initControlPos){this._initControlPos()}},_initPanes:function(){var j=this._panes={};this._mapPane=j.mapPane=this._createPane("leaflet-map-pane",this._container);this._tilePane=j.tilePane=this._createPane("leaflet-tile-pane",this._mapPane);j.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane);j.shadowPane=this._createPane("leaflet-shadow-pane");j.overlayPane=this._createPane("leaflet-overlay-pane");j.markerPane=this._createPane("leaflet-marker-pane");j.popupPane=this._createPane("leaflet-popup-pane");var i=" leaflet-zoom-hide";if(!this.options.markerZoomAnimation){a.DomUtil.addClass(j.markerPane,i);a.DomUtil.addClass(j.shadowPane,i);a.DomUtil.addClass(j.popupPane,i)}},_createPane:function(j,i){return a.DomUtil.create("div",j,i||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(l){l=l?(a.Util.isArray(l)?l:[l]):[];for(var k=0,j=l.length;k<j;k++){this.addLayer(l[k])}},_resetView:function(k,m,j,l){var i=(this._zoom!==m);if(!l){this.fire("movestart");if(i){this.fire("zoomstart")}}this._zoom=m;this._initialCenter=k;this._initialTopLeftPoint=this._getNewTopLeftPoint(k);if(!j){a.DomUtil.setPosition(this._mapPane,new a.Point(0,0))}else{this._initialTopLeftPoint._add(this._getMapPanePos())}this._tileLayersToLoad=this._tileLayersNum;var n=!this._loaded;this._loaded=true;if(n){this.fire("load");this.eachLayer(this._layerAdd,this)}this.fire("viewreset",{hard:!j});this.fire("move");if(i||l){this.fire("zoomend")}this.fire("moveend",{hard:!j})},_rawPanBy:function(i){a.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var l,n=Infinity,j=-Infinity,m=this._getZoomSpan();for(l in this._zoomBoundLayers){var k=this._zoomBoundLayers[l];if(!isNaN(k.options.minZoom)){n=Math.min(n,k.options.minZoom)}if(!isNaN(k.options.maxZoom)){j=Math.max(j,k.options.maxZoom)}}if(l===h){this._layersMaxZoom=this._layersMinZoom=h}else{this._layersMaxZoom=j;this._layersMinZoom=n}if(m!==this._getZoomSpan()){this.fire("zoomlevelschange")}},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded){throw new Error("Set map center and zoom first.")}},_initEvents:function(k){if(!a.DomEvent){return}k=k||"on";a.DomEvent[k](this._container,"click",this._onMouseClick,this);var m=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"],l,j;for(l=0,j=m.length;l<j;l++){a.DomEvent[k](this._container,m[l],this._fireMouseEvent,this)}if(this.options.trackResize){a.DomEvent[k](d,"resize",this._onResize,this)}},_onResize:function(){a.Util.cancelAnimFrame(this._resizeRequest);this._resizeRequest=a.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:true})},this,false,this._container)},_onMouseClick:function(i){if(!this._loaded||(!i._simulated&&((this.dragging&&this.dragging.moved())||(this.boxZoom&&this.boxZoom.moved())))||a.DomEvent._skipped(i)){return}this.fire("preclick");this._fireMouseEvent(i)},_fireMouseEvent:function(l){if(!this._loaded||a.DomEvent._skipped(l)){return}var k=l.type;k=(k==="mouseenter"?"mouseover":(k==="mouseleave"?"mouseout":k));if(!this.hasEventListeners(k)){return}if(k==="contextmenu"){a.DomEvent.preventDefault(l)}var j=this.mouseEventToContainerPoint(l),i=this.containerPointToLayerPoint(j),m=this.layerPointToLatLng(i);this.fire(k,{latlng:m,layerPoint:i,containerPoint:j,originalEvent:l})},_onTileLayerLoad:function(){this._tileLayersToLoad--;if(this._tileLayersNum&&!this._tileLayersToLoad){this.fire("tilelayersload")}},_clearHandlers:function(){for(var k=0,j=this._handlers.length;k<j;k++){this._handlers[k].disable()}},whenReady:function(j,i){if(this._loaded){j.call(i||this,this)}else{this.on("load",j,i)}return this},_layerAdd:function(i){i.onAdd(this);this.fire("layeradd",{layer:i})},_getMapPanePos:function(){return a.DomUtil.getPosition(this._mapPane)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(i,k){var j=this.getSize()._divideBy(2);return this.project(i,k)._subtract(j)._round()},_latLngToNewLayerPoint:function(l,j,i){var k=this._getNewTopLeftPoint(i,j).add(this._getMapPanePos());return this.project(l,j)._subtract(k)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,l,k){if(!k){return i}var o=this.project(i,l),j=this.getSize().divideBy(2),m=new a.Bounds(o.subtract(j),o.add(j)),n=this._getBoundsOffset(m,k,l);return this.unproject(o.add(n),l)},_limitOffset:function(l,i){if(!i){return l}var k=this.getPixelBounds(),j=new a.Bounds(k.min.add(l),k.max.add(l));return l.add(this._getBoundsOffset(j,i))},_getBoundsOffset:function(l,j,n){var m=this.project(j.getNorthWest(),n).subtract(l.min),o=this.project(j.getSouthEast(),n).subtract(l.max),k=this._rebound(m.x,-o.x),i=this._rebound(m.y,-o.y);return new a.Point(k,i)},_rebound:function(j,i){return j+i>0?Math.round(j-i)/2:Math.max(0,Math.ceil(j))-Math.max(0,Math.floor(i))},_limitZoom:function(k){var j=this.getMinZoom(),i=this.getMaxZoom();return Math.max(j,Math.min(i,k))}});a.map=function(j,i){return new a.Map(j,i)};a.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(k){var p=a.LatLng.DEG_TO_RAD,t=this.MAX_LATITUDE,q=Math.max(Math.min(t,k.lat),-t),i=this.R_MAJOR,l=this.R_MINOR,u=k.lng*p*i,s=q*p,n=l/i,m=Math.sqrt(1-n*n),j=m*Math.sin(s);j=Math.pow((1-j)/(1+j),m*0.5);var o=Math.tan(0.5*((Math.PI*0.5)-s))/j;s=-i*Math.log(o);return new a.Point(u,s)},unproject:function(w){var t=a.LatLng.RAD_TO_DEG,j=this.R_MAJOR,l=this.R_MINOR,v=w.x*t/j,p=l/j,m=Math.sqrt(1-(p*p)),u=Math.exp(-w.y/j),s=(Math.PI/2)-2*Math.atan(u),n=15,x=1e-7,o=n,q=0.1,k;while((Math.abs(q)>x)&&(--o>0)){k=m*Math.sin(s);q=(Math.PI/2)-2*Math.atan(u*Math.pow((1-k)/(1+k),0.5*m))-s;s+=q}return new a.LatLng(s*t,v)}};a.CRS.EPSG3395=a.extend({},a.CRS,{code:"EPSG:3395",projection:a.Projection.Mercator,transformation:(function(){var i=a.Projection.Mercator,j=i.R_MAJOR,k=0.5/(Math.PI*j);return new a.Transformation(k,0.5,-k,0.5)}())});a.TileLayer=a.Class.extend({includes:a.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:a.Browser.mobile,updateWhenIdle:a.Browser.mobile},initialize:function(k,j){j=a.setOptions(this,j);if(j.detectRetina&&a.Browser.retina&&j.maxZoom>0){j.tileSize=Math.floor(j.tileSize/2);j.zoomOffset++;if(j.minZoom>0){j.minZoom--}this.options.maxZoom--}if(j.bounds){j.bounds=a.latLngBounds(j.bounds)}this._url=k;var i=this.options.subdomains;if(typeof i==="string"){this.options.subdomains=i.split("")}},onAdd:function(i){this._map=i;this._animated=i._zoomAnimated;this._initContainer();i.on({viewreset:this._reset,moveend:this._update},this);if(this._animated){i.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this)}if(!this.options.updateWhenIdle){this._limitedUpdate=a.Util.limitExecByInterval(this._update,150,this);i.on("move",this._limitedUpdate,this)}this._reset();this._update()},addTo:function(i){i.addLayer(this);return this},onRemove:function(i){this._container.parentNode.removeChild(this._container);i.off({viewreset:this._reset,moveend:this._update},this);if(this._animated){i.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this)}if(!this.options.updateWhenIdle){i.off("move",this._limitedUpdate,this)}this._container=null;this._map=null},bringToFront:function(){var i=this._map._panes.tilePane;if(this._container){i.appendChild(this._container);this._setAutoZIndex(i,Math.max)}return this},bringToBack:function(){var i=this._map._panes.tilePane;if(this._container){i.insertBefore(this._container,i.firstChild);this._setAutoZIndex(i,Math.min)}return this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(i){this.options.opacity=i;if(this._map){this._updateOpacity()}return this},setZIndex:function(i){this.options.zIndex=i;this._updateZIndex();return this},setUrl:function(i,j){this._url=i;if(!j){this.redraw()}return this},redraw:function(){if(this._map){this._reset({hard:true});this._update()}return this},_updateZIndex:function(){if(this._container&&this.options.zIndex!==h){this._container.style.zIndex=this.options.zIndex}},_setAutoZIndex:function(p,m){var n=p.children,l=-m(Infinity,-Infinity),o,k,j;for(k=0,j=n.length;k<j;k++){if(n[k]!==this._container){o=parseInt(n[k].style.zIndex,10);if(!isNaN(o)){l=m(l,o)}}}this.options.zIndex=this._container.style.zIndex=(isFinite(l)?l:0)+m(1,-1)},_updateOpacity:function(){var k,j=this._tiles;if(a.Browser.ielt9){for(k in j){a.DomUtil.setOpacity(j[k],this.options.opacity)}}else{a.DomUtil.setOpacity(this._container,this.options.opacity)}},_initContainer:function(){var i=this._map._panes.tilePane;if(!this._container){this._container=a.DomUtil.create("div","leaflet-layer");this._updateZIndex();if(this._animated){var j="leaflet-tile-container";this._bgBuffer=a.DomUtil.create("div",j,this._container);this._tileContainer=a.DomUtil.create("div",j,this._container)}else{this._tileContainer=this._container}i.appendChild(this._container);if(this.options.opacity<1){this._updateOpacity()}}},_reset:function(j){for(var i in this._tiles){this.fire("tileunload",{tile:this._tiles[i]})}this._tiles={};this._tilesToLoad=0;if(this.options.reuseTiles){this._unusedTiles=[]}this._tileContainer.innerHTML="";if(this._animated&&j&&j.hard){this._clearBgBuffer()}this._initContainer()},_getTileSize:function(){var l=this._map,j=l.getZoom()+this.options.zoomOffset,i=this.options.maxNativeZoom,k=this.options.tileSize;if(i&&j>i){k=Math.round(l.getZoomScale(j)/l.getZoomScale(i)*k)}return k},_update:function(){if(!this._map){return}var m=this._map,j=m.getPixelBounds(),i=m.getZoom(),k=this._getTileSize();if(i>this.options.maxZoom||i<this.options.minZoom){return}var l=a.bounds(j.min.divideBy(k)._floor(),j.max.divideBy(k)._floor());this._addTilesFromCenterOut(l);if(this.options.unloadInvisibleTiles||this.options.reuseTiles){this._removeOtherTiles(l)}},_addTilesFromCenterOut:function(q){var m=[],l=q.getCenter();var o,p,k;for(o=q.min.y;o<=q.max.y;o++){for(p=q.min.x;p<=q.max.x;p++){k=new a.Point(p,o);if(this._tileShouldBeLoaded(k)){m.push(k)}}}var r=m.length;if(r===0){return}m.sort(function(j,i){return j.distanceTo(l)-i.distanceTo(l)});var n=b.createDocumentFragment();if(!this._tilesToLoad){this.fire("loading")}this._tilesToLoad+=r;for(p=0;p<r;p++){this._addTile(m[p],n)}this._tileContainer.appendChild(n)},_tileShouldBeLoaded:function(n){if((n.x+":"+n.y) in this._tiles){return false}var m=this.options;if(!m.continuousWorld){var k=this._getWrapTileNum();if((m.noWrap&&(n.x<0||n.x>=k.x))||n.y<0||n.y>=k.y){return false}}if(m.bounds){var p=m.tileSize,l=n.multiplyBy(p),i=l.add([p,p]),j=this._map.unproject(l),o=this._map.unproject(i);if(!m.continuousWorld&&!m.noWrap){j=j.wrap();o=o.wrap()}if(!m.bounds.intersects([j,o])){return false}}return true},_removeOtherTiles:function(l){var k,i,m,j;for(j in this._tiles){k=j.split(":");i=parseInt(k[0],10);m=parseInt(k[1],10);if(i<l.min.x||i>l.max.x||m<l.min.y||m>l.max.y){this._removeTile(j)}}},_removeTile:function(i){var j=this._tiles[i];this.fire("tileunload",{tile:j,url:j.src});if(this.options.reuseTiles){a.DomUtil.removeClass(j,"leaflet-tile-loaded");this._unusedTiles.push(j)}else{if(j.parentNode===this._tileContainer){this._tileContainer.removeChild(j)}}if(!a.Browser.android){j.onload=null;j.src=a.Util.emptyImageUrl}delete this._tiles[i]},_addTile:function(k,i){var j=this._getTilePos(k);var l=this._getTile();a.DomUtil.setPosition(l,j,a.Browser.chrome);this._tiles[k.x+":"+k.y]=l;this._loadTile(l,k);if(l.parentNode!==this._tileContainer){i.appendChild(l)}},_getZoomForUrl:function(){var i=this.options,j=this._map.getZoom();if(i.zoomReverse){j=i.maxZoom-j}j+=i.zoomOffset;return i.maxNativeZoom?Math.min(j,i.maxNativeZoom):j},_getTilePos:function(j){var i=this._map.getPixelOrigin(),k=this._getTileSize();return j.multiplyBy(k).subtract(i)},getTileUrl:function(i){return a.Util.template(this._url,a.extend({s:this._getSubdomain(i),z:i.z,x:i.x,y:i.y},this.options))},_getWrapTileNum:function(){var i=this._map.options.crs,j=i.getSize(this._map.getZoom());return j.divideBy(this.options.tileSize)},_adjustTilePoint:function(j){var i=this._getWrapTileNum();if(!this.options.continuousWorld&&!this.options.noWrap){j.x=((j.x%i.x)+i.x)%i.x}if(this.options.tms){j.y=i.y-j.y-1}j.z=this._getZoomForUrl()},_getSubdomain:function(j){var i=Math.abs(j.x+j.y)%this.options.subdomains.length;return this.options.subdomains[i]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var i=this._unusedTiles.pop();this._resetTile(i);return i}return this._createTile()},_resetTile:function(){},_createTile:function(){var i=a.DomUtil.create("img","leaflet-tile");i.style.width=i.style.height=this._getTileSize()+"px";i.galleryimg="no";i.onselectstart=i.onmousemove=a.Util.falseFn;if(a.Browser.ielt9&&this.options.opacity!==h){a.DomUtil.setOpacity(i,this.options.opacity)}if(a.Browser.mobileWebkit3d){i.style.WebkitBackfaceVisibility="hidden"}return i},_loadTile:function(j,i){j._layer=this;j.onload=this._tileOnLoad;j.onerror=this._tileOnError;this._adjustTilePoint(i);j.src=this.getTileUrl(i);this.fire("tileloadstart",{tile:j,url:j.src})},_tileLoaded:function(){this._tilesToLoad--;if(this._animated){a.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated")}if(!this._tilesToLoad){this.fire("load");if(this._animated){clearTimeout(this._clearBgBufferTimer);this._clearBgBufferTimer=setTimeout(a.bind(this._clearBgBuffer,this),500)}}},_tileOnLoad:function(){var i=this._layer;if(this.src!==a.Util.emptyImageUrl){a.DomUtil.addClass(this,"leaflet-tile-loaded");i.fire("tileload",{tile:this,url:this.src})}i._tileLoaded()},_tileOnError:function(){var i=this._layer;i.fire("tileerror",{tile:this,url:this.src});var j=i.options.errorTileUrl;if(j){this.src=j}i._tileLoaded()}});a.tileLayer=function(j,i){return new a.TileLayer(j,i)};a.TileLayer.WMS=a.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:false},initialize:function(l,k){this._url=l;var j=a.extend({},this.defaultWmsParams),n=k.tileSize||this.options.tileSize;if(k.detectRetina&&a.Browser.retina){j.width=j.height=n*2}else{j.width=j.height=n}for(var m in k){if(!this.options.hasOwnProperty(m)&&m!=="crs"){j[m]=k[m]}}this.wmsParams=j;a.setOptions(this,k)},onAdd:function(i){this._crs=this.options.crs||i.options.crs;this._wmsVersion=parseFloat(this.wmsParams.version);var j=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[j]=this._crs.code;a.TileLayer.prototype.onAdd.call(this,i)},getTileUrl:function(k){var j=this._map,q=this.options.tileSize,p=k.multiplyBy(q),n=p.add([q,q]),l=this._crs.project(j.unproject(p,k.z)),m=this._crs.project(j.unproject(n,k.z)),o=this._wmsVersion>=1.3&&this._crs===a.CRS.EPSG4326?[m.y,l.x,l.y,m.x].join(","):[l.x,m.y,m.x,l.y].join(","),i=a.Util.template(this._url,{s:this._getSubdomain(k)});return i+a.Util.getParamString(this.wmsParams,i,true)+"&BBOX="+o},setParams:function(j,i){a.extend(this.wmsParams,j);if(!i){this.redraw()}return this}});a.tileLayer.wms=function(j,i){return new a.TileLayer.WMS(j,i)};a.TileLayer.Canvas=a.TileLayer.extend({options:{async:false},initialize:function(i){a.setOptions(this,i)},redraw:function(){if(this._map){this._reset({hard:true});this._update()}for(var j in this._tiles){this._redrawTile(this._tiles[j])}return this},_redrawTile:function(i){this.drawTile(i,i._tilePoint,this._map._zoom)},_createTile:function(){var i=a.DomUtil.create("canvas","leaflet-tile");i.width=i.height=this.options.tileSize;i.onselectstart=i.onmousemove=a.Util.falseFn;return i},_loadTile:function(j,i){j._layer=this;j._tilePoint=i;this._redrawTile(j);if(!this.options.async){this.tileDrawn(j)}},drawTile:function(){},tileDrawn:function(i){this._tileOnLoad.call(i)}});a.tileLayer.canvas=function(i){return new a.TileLayer.Canvas(i)};a.ImageOverlay=a.Class.extend({includes:a.Mixin.Events,options:{opacity:1},initialize:function(j,k,i){this._url=j;this._bounds=a.latLngBounds(k);a.setOptions(this,i)},onAdd:function(i){this._map=i;if(!this._image){this._initImage()}i._panes.overlayPane.appendChild(this._image);i.on("viewreset",this._reset,this);if(i.options.zoomAnimation&&a.Browser.any3d){i.on("zoomanim",this._animateZoom,this)}this._reset()},onRemove:function(i){i.getPanes().overlayPane.removeChild(this._image);i.off("viewreset",this._reset,this);if(i.options.zoomAnimation){i.off("zoomanim",this._animateZoom,this)}},addTo:function(i){i.addLayer(this);return this},setOpacity:function(i){this.options.opacity=i;this._updateOpacity();return this},bringToFront:function(){if(this._image){this._map._panes.overlayPane.appendChild(this._image)}return this},bringToBack:function(){var i=this._map._panes.overlayPane;if(this._image){i.insertBefore(this._image,i.firstChild)}return this},setUrl:function(i){this._url=i;this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=a.DomUtil.create("img","leaflet-image-layer");if(this._map.options.zoomAnimation&&a.Browser.any3d){a.DomUtil.addClass(this._image,"leaflet-zoom-animated")}else{a.DomUtil.addClass(this._image,"leaflet-zoom-hide")}this._updateOpacity();a.extend(this._image,{galleryimg:"no",onselectstart:a.Util.falseFn,onmousemove:a.Util.falseFn,onload:a.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(m){var i=this._map,k=this._image,j=i.getZoomScale(m.zoom),l=this._bounds.getNorthWest(),n=this._bounds.getSouthEast(),p=i._latLngToNewLayerPoint(l,m.zoom,m.center),q=i._latLngToNewLayerPoint(n,m.zoom,m.center)._subtract(p),o=p._add(q._multiplyBy((1/2)*(1-1/j)));k.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(o)+" scale("+j+") "},_reset:function(){var k=this._image,j=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(j);a.DomUtil.setPosition(k,j);k.style.width=i.x+"px";k.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){a.DomUtil.setOpacity(this._image,this.options.opacity)}});a.imageOverlay=function(j,k,i){return new a.ImageOverlay(j,k,i)};a.Icon=a.Class.extend({options:{className:""},initialize:function(i){a.setOptions(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(j,k){var l=this._getIconUrl(j);if(!l){if(j==="icon"){throw new Error("iconUrl not set in Icon options (see the docs).")}return null}var i;if(!k||k.tagName!=="IMG"){i=this._createImg(l)}else{i=this._createImg(l,k)}this._setIconStyles(i,j);return i},_setIconStyles:function(i,l){var k=this.options,m=a.point(k[l+"Size"]),j;if(l==="shadow"){j=a.point(k.shadowAnchor||k.iconAnchor)}else{j=a.point(k.iconAnchor)}if(!j&&m){j=m.divideBy(2,true)}i.className="leaflet-marker-"+l+" "+k.className;if(j){i.style.marginLeft=(-j.x)+"px";i.style.marginTop=(-j.y)+"px"}if(m){i.style.width=m.x+"px";i.style.height=m.y+"px"}},_createImg:function(j,i){i=i||b.createElement("img");i.src=j;return i},_getIconUrl:function(i){if(a.Browser.retina&&this.options[i+"RetinaUrl"]){return this.options[i+"RetinaUrl"]}return this.options[i+"Url"]}});a.icon=function(i){return new a.Icon(i)};a.Icon.Default=a.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(i){var j=i+"Url";if(this.options[j]){return this.options[j]}if(a.Browser.retina&&i==="icon"){i+="-2x"}var k=a.Icon.Default.imagePath;if(!k){throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.")}return k+"/marker-"+i+".png"}});a.Icon.Default.imagePath=(function(){var k=b.getElementsByTagName("script"),m=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;var l,j,p,n,o;for(l=0,j=k.length;l<j;l++){p=k[l].src;n=p.match(m);if(n){o=p.split(m)[0];return(o?o+"/":"")+"images"}}}());a.Marker=a.Class.extend({includes:a.Mixin.Events,options:{icon:new a.Icon.Default(),title:"",alt:"",clickable:true,draggable:false,keyboard:true,zIndexOffset:0,opacity:1,riseOnHover:false,riseOffset:250},initialize:function(j,i){a.setOptions(this,i);this._latlng=a.latLng(j)},onAdd:function(i){this._map=i;i.on("viewreset",this.update,this);this._initIcon();this.update();this.fire("add");if(i.options.zoomAnimation&&i.options.markerZoomAnimation){i.on("zoomanim",this._animateZoom,this)}},addTo:function(i){i.addLayer(this);return this},onRemove:function(i){if(this.dragging){this.dragging.disable()}this._removeIcon();this._removeShadow();this.fire("remove");i.off({viewreset:this.update,zoomanim:this._animateZoom},this);this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(i){this._latlng=a.latLng(i);this.update();return this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(i){this.options.zIndexOffset=i;this.update();return this},setIcon:function(i){this.options.icon=i;if(this._map){this._initIcon();this.update()}if(this._popup){this.bindPopup(this._popup)}return this},update:function(){if(this._icon){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var p=this.options,i=this._map,l=(i.options.zoomAnimation&&i.options.markerZoomAnimation),k=l?"leaflet-zoom-animated":"leaflet-zoom-hide";var o=p.icon.createIcon(this._icon),m=false;if(o!==this._icon){if(this._icon){this._removeIcon()}m=true;if(p.title){o.title=p.title}if(p.alt){o.alt=p.alt}}a.DomUtil.addClass(o,k);if(p.keyboard){o.tabIndex="0"}this._icon=o;this._initInteraction();if(p.riseOnHover){a.DomEvent.on(o,"mouseover",this._bringToFront,this).on(o,"mouseout",this._resetZIndex,this)}var q=p.icon.createShadow(this._shadow),j=false;if(q!==this._shadow){this._removeShadow();j=true}if(q){a.DomUtil.addClass(q,k)}this._shadow=q;if(p.opacity<1){this._updateOpacity()}var n=this._map._panes;if(m){n.markerPane.appendChild(this._icon)}if(q&&j){n.shadowPane.appendChild(this._shadow)}},_removeIcon:function(){if(this.options.riseOnHover){a.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex)}this._map._panes.markerPane.removeChild(this._icon);this._icon=null},_removeShadow:function(){if(this._shadow){this._map._panes.shadowPane.removeChild(this._shadow)}this._shadow=null},_setPos:function(i){a.DomUtil.setPosition(this._icon,i);if(this._shadow){a.DomUtil.setPosition(this._shadow,i)}this._zIndex=i.y+this.options.zIndexOffset;this._resetZIndex()},_updateZIndex:function(i){this._icon.style.zIndex=this._zIndex+i},_animateZoom:function(i){var j=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(j)},_initInteraction:function(){if(!this.options.clickable){return}var l=this._icon,k=["dblclick","mousedown","mouseover","mouseout","contextmenu"];a.DomUtil.addClass(l,"leaflet-clickable");a.DomEvent.on(l,"click",this._onMouseClick,this);a.DomEvent.on(l,"keypress",this._onKeyPress,this);for(var j=0;j<k.length;j++){a.DomEvent.on(l,k[j],this._fireMouseEvent,this)}if(a.Handler.MarkerDrag){this.dragging=new a.Handler.MarkerDrag(this);if(this.options.draggable){this.dragging.enable()}}},_onMouseClick:function(j){var i=this.dragging&&this.dragging.moved();if(this.hasEventListeners(j.type)||i){a.DomEvent.stopPropagation(j)}if(i){return}if((!this.dragging||!this.dragging._enabled)&&this._map.dragging&&this._map.dragging.moved()){return}this.fire(j.type,{originalEvent:j,latlng:this._latlng})},_onKeyPress:function(i){if(i.keyCode===13){this.fire("click",{originalEvent:i,latlng:this._latlng})}},_fireMouseEvent:function(i){this.fire(i.type,{originalEvent:i,latlng:this._latlng});if(i.type==="contextmenu"&&this.hasEventListeners(i.type)){a.DomEvent.preventDefault(i)}if(i.type!=="mousedown"){a.DomEvent.stopPropagation(i)}else{a.DomEvent.preventDefault(i)}},setOpacity:function(i){this.options.opacity=i;if(this._map){this._updateOpacity()}return this},_updateOpacity:function(){a.DomUtil.setOpacity(this._icon,this.options.opacity);if(this._shadow){a.DomUtil.setOpacity(this._shadow,this.options.opacity)}},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}});a.marker=function(j,i){return new a.Marker(j,i)};a.DivIcon=a.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:false},createIcon:function(j){var k=(j&&j.tagName==="DIV")?j:b.createElement("div"),i=this.options;if(i.html!==false){k.innerHTML=i.html}else{k.innerHTML=""}if(i.bgPos){k.style.backgroundPosition=(-i.bgPos.x)+"px "+(-i.bgPos.y)+"px"}this._setIconStyles(k,"icon");return k},createShadow:function(){return null}});a.divIcon=function(i){return new a.DivIcon(i)};a.Map.mergeOptions({closePopupOnClick:true});a.Popup=a.Class.extend({includes:a.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:true,closeButton:true,offset:[0,7],autoPanPadding:[5,5],keepInView:false,className:"",zoomAnimation:true},initialize:function(i,j){a.setOptions(this,i);this._source=j;this._animated=a.Browser.any3d&&this.options.zoomAnimation;this._isOpen=false},onAdd:function(j){this._map=j;if(!this._container){this._initLayout()}var i=j.options.fadeAnimation;if(i){a.DomUtil.setOpacity(this._container,0)}j._panes.popupPane.appendChild(this._container);j.on(this._getEvents(),this);this.update();if(i){a.DomUtil.setOpacity(this._container,1)}this.fire("open");j.fire("popupopen",{popup:this});if(this._source){this._source.fire("popupopen",{popup:this})}},addTo:function(i){i.addLayer(this);return this},openOn:function(i){i.openPopup(this);return this},onRemove:function(i){i._panes.popupPane.removeChild(this._container);a.Util.falseFn(this._container.offsetWidth);i.off(this._getEvents(),this);if(i.options.fadeAnimation){a.DomUtil.setOpacity(this._container,0)}this._map=null;this.fire("close");i.fire("popupclose",{popup:this});if(this._source){this._source.fire("popupclose",{popup:this})}},getLatLng:function(){return this._latlng},setLatLng:function(i){this._latlng=a.latLng(i);if(this._map){this._updatePosition();this._adjustPan()}return this},getContent:function(){return this._content},setContent:function(i){this._content=i;this.update();return this},update:function(){if(!this._map){return}this._container.style.visibility="hidden";this._updateContent();this._updateLayout();this._updatePosition();this._container.style.visibility="";this._adjustPan()},_getEvents:function(){var i={viewreset:this._updatePosition};if(this._animated){i.zoomanim=this._zoomAnimation}if("closeOnClick" in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick){i.preclick=this._close}if(this.options.keepInView){i.moveend=this._adjustPan}return i},_close:function(){if(this._map){this._map.closePopup(this)}},_initLayout:function(){var k="leaflet-popup",l=k+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),i=this._container=a.DomUtil.create("div",l),j;if(this.options.closeButton){j=this._closeButton=a.DomUtil.create("a",k+"-close-button",i);j.href="#close";j.innerHTML="&#215;";a.DomEvent.disableClickPropagation(j);a.DomEvent.on(j,"click",this._onCloseButtonClick,this)}var m=this._wrapper=a.DomUtil.create("div",k+"-content-wrapper",i);a.DomEvent.disableClickPropagation(m);this._contentNode=a.DomUtil.create("div",k+"-content",m);a.DomEvent.disableScrollPropagation(this._contentNode);a.DomEvent.on(m,"contextmenu",a.DomEvent.stopPropagation);this._tipContainer=a.DomUtil.create("div",k+"-tip-container",i);this._tip=a.DomUtil.create("div",k+"-tip",this._tipContainer)},_updateContent:function(){if(!this._content){return}if(typeof this._content==="string"){this._contentNode.innerHTML=this._content}else{while(this._contentNode.hasChildNodes()){this._contentNode.removeChild(this._contentNode.firstChild)}this._contentNode.appendChild(this._content)}this.fire("contentupdate")},_updateLayout:function(){var j=this._contentNode,l=j.style;l.width="";l.whiteSpace="nowrap";var k=j.offsetWidth;k=Math.min(k,this.options.maxWidth);k=Math.max(k,this.options.minWidth);l.width=(k+1)+"px";l.whiteSpace="";l.height="";var i=j.offsetHeight,m=this.options.maxHeight,n="leaflet-popup-scrolled";if(m&&i>m){l.height=m+"px";a.DomUtil.addClass(j,n)}else{a.DomUtil.removeClass(j,n)}this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(!this._map){return}var k=this._map.latLngToLayerPoint(this._latlng),i=this._animated,j=a.point(this.options.offset);if(i){a.DomUtil.setPosition(this._container,k)}this._containerBottom=-j.y-(i?0:k.y);this._containerLeft=-Math.round(this._containerWidth/2)+j.x+(i?0:k.x);this._container.style.bottom=this._containerBottom+"px";this._container.style.left=this._containerLeft+"px"},_zoomAnimation:function(i){var j=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);a.DomUtil.setPosition(this._container,j)},_adjustPan:function(){if(!this.options.autoPan){return}var j=this._map,s=this._container.offsetHeight,o=this._containerWidth,m=new a.Point(this._containerLeft,-s-this._containerBottom);if(this._animated){m._add(a.DomUtil.getPosition(this._container))}var l=j.layerPointToContainerPoint(m),n=a.point(this.options.autoPanPadding),k=a.point(this.options.autoPanPaddingTopLeft||n),i=a.point(this.options.autoPanPaddingBottomRight||n),r=j.getSize(),q=0,p=0;if(l.x+o+i.x>r.x){q=l.x+o-r.x+i.x}if(l.x-q-k.x<0){q=l.x-k.x}if(l.y+s+i.y>r.y){p=l.y+s-r.y+i.y}if(l.y-p-k.y<0){p=l.y-k.y}if(q||p){j.fire("autopanstart").panBy([q,p])}},_onCloseButtonClick:function(i){this._close();a.DomEvent.stop(i)}});a.popup=function(i,j){return new a.Popup(i,j)};a.Map.include({openPopup:function(i,l,j){this.closePopup();if(!(i instanceof a.Popup)){var k=i;i=new a.Popup(j).setLatLng(l).setContent(k)}i._isOpen=true;this._popup=i;return this.addLayer(i)},closePopup:function(i){if(!i||i===this._popup){i=this._popup;this._popup=null}if(i){this.removeLayer(i);i._isOpen=false}return this}});a.Marker.include({openPopup:function(){if(this._popup&&this._map&&!this._map.hasLayer(this._popup)){this._popup.setLatLng(this._latlng);this._map.openPopup(this._popup)}return this},closePopup:function(){if(this._popup){this._popup._close()}return this},togglePopup:function(){if(this._popup){if(this._popup._isOpen){this.closePopup()}else{this.openPopup()}}return this},bindPopup:function(k,j){var i=a.point(this.options.icon.options.popupAnchor||[0,0]);i=i.add(a.Popup.prototype.options.offset);if(j&&j.offset){i=i.add(j.offset)}j=a.extend({offset:i},j);if(!this._popupHandlersAdded){this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this);this._popupHandlersAdded=true}if(k instanceof a.Popup){a.setOptions(k,j);this._popup=k}else{this._popup=new a.Popup(j,this).setContent(k)}return this},setPopupContent:function(i){if(this._popup){this._popup.setContent(i)}return this},unbindPopup:function(){if(this._popup){this._popup=null;this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this);this._popupHandlersAdded=false}return this},getPopup:function(){return this._popup},_movePopup:function(i){this._popup.setLatLng(i.latlng)}});a.LayerGroup=a.Class.extend({initialize:function(l){this._layers={};var k,j;if(l){for(k=0,j=l.length;k<j;k++){this.addLayer(l[k])}}},addLayer:function(i){var j=this.getLayerId(i);this._layers[j]=i;if(this._map){this._map.addLayer(i)}return this},removeLayer:function(i){var j=i in this._layers?i:this.getLayerId(i);if(this._map&&this._layers[j]){this._map.removeLayer(this._layers[j])}delete this._layers[j];return this},hasLayer:function(i){if(!i){return false}return(i in this._layers||this.getLayerId(i) in this._layers)},clearLayers:function(){this.eachLayer(this.removeLayer,this);return this},invoke:function(j){var k=Array.prototype.slice.call(arguments,1),m,l;for(m in this._layers){l=this._layers[m];if(l[j]){l[j].apply(l,k)}}return this},onAdd:function(i){this._map=i;this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i);this._map=null},addTo:function(i){i.addLayer(this);return this},eachLayer:function(l,k){for(var j in this._layers){l.call(k,this._layers[j])}return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var k=[];for(var j in this._layers){k.push(this._layers[j])}return k},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return a.stamp(i)}});a.layerGroup=function(i){return new a.LayerGroup(i)};a.FeatureGroup=a.LayerGroup.extend({includes:a.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(i){if(this.hasLayer(i)){return this}if("on" in i){i.on(a.FeatureGroup.EVENTS,this._propagateEvent,this)}a.LayerGroup.prototype.addLayer.call(this,i);if(this._popupContent&&i.bindPopup){i.bindPopup(this._popupContent,this._popupOptions)}return this.fire("layeradd",{layer:i})},removeLayer:function(i){if(!this.hasLayer(i)){return this}if(i in this._layers){i=this._layers[i]}i.off(a.FeatureGroup.EVENTS,this._propagateEvent,this);a.LayerGroup.prototype.removeLayer.call(this,i);if(this._popupContent){this.invoke("unbindPopup")}return this.fire("layerremove",{layer:i})},bindPopup:function(j,i){this._popupContent=j;this._popupOptions=i;return this.invoke("bindPopup",j,i)},openPopup:function(j){for(var i in this._layers){this._layers[i].openPopup(j);break}return this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new a.LatLngBounds();this.eachLayer(function(j){i.extend(j instanceof a.Marker?j.getLatLng():j.getBounds())});return i},_propagateEvent:function(i){i=a.extend({layer:i.target,target:this},i);this.fire(i.type,i)}});a.featureGroup=function(i){return new a.FeatureGroup(i)};a.Path=a.Class.extend({includes:[a.Mixin.Events],statics:{CLIP_PADDING:(function(){var i=a.Browser.mobile?1280:2000,j=(i/Math.max(d.outerWidth,d.outerHeight)-1)/2;return Math.max(0,Math.min(0.5,j))})()},options:{stroke:true,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:0.5,fill:false,fillColor:null,fillOpacity:0.2,clickable:true},initialize:function(i){a.setOptions(this,i)},onAdd:function(i){this._map=i;if(!this._container){this._initElements();this._initEvents()}this.projectLatlngs();this._updatePath();if(this._container){this._map._pathRoot.appendChild(this._container)}this.fire("add");i.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(i){i.addLayer(this);return this},onRemove:function(i){i._pathRoot.removeChild(this._container);this.fire("remove");this._map=null;if(a.Browser.vml){this._container=null;this._stroke=null;this._fill=null}i.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(i){a.setOptions(this,i);if(this._container){this._updateStyle()}return this},redraw:function(){if(this._map){this.projectLatlngs();this._updatePath()}return this}});a.Map.include({_updatePathViewport:function(){var m=a.Path.CLIP_PADDING,l=this.getSize(),j=a.DomUtil.getPosition(this._mapPane),k=j.multiplyBy(-1)._subtract(l.multiplyBy(m)._round()),i=k.add(l.multiplyBy(1+m*2)._round());this._pathViewport=new a.Bounds(k,i)}});a.Path.SVG_NS="http://www.w3.org/2000/svg";a.Browser.svg=!!(b.createElementNS&&b.createElementNS(a.Path.SVG_NS,"svg").createSVGRect);a.Path=a.Path.extend({statics:{SVG:a.Browser.svg},bringToFront:function(){var i=this._map._pathRoot,j=this._container;if(j&&i.lastChild!==j){i.appendChild(j)}return this},bringToBack:function(){var i=this._map._pathRoot,j=this._container,k=i.firstChild;if(j&&k!==j){i.insertBefore(j,k)}return this},getPathString:function(){},_createElement:function(i){return b.createElementNS(a.Path.SVG_NS,i)},_initElements:function(){this._map._initPathRoot();this._initPath();this._initStyle()},_initPath:function(){this._container=this._createElement("g");this._path=this._createElement("path");if(this.options.className){a.DomUtil.addClass(this._path,this.options.className)}this._container.appendChild(this._path)},_initStyle:function(){if(this.options.stroke){this._path.setAttribute("stroke-linejoin","round");this._path.setAttribute("stroke-linecap","round")}if(this.options.fill){this._path.setAttribute("fill-rule","evenodd")}if(this.options.pointerEvents){this._path.setAttribute("pointer-events",this.options.pointerEvents)}if(!this.options.clickable&&!this.options.pointerEvents){this._path.setAttribute("pointer-events","none")}this._updateStyle()},_updateStyle:function(){if(this.options.stroke){this._path.setAttribute("stroke",this.options.color);this._path.setAttribute("stroke-opacity",this.options.opacity);this._path.setAttribute("stroke-width",this.options.weight);if(this.options.dashArray){this._path.setAttribute("stroke-dasharray",this.options.dashArray)}else{this._path.removeAttribute("stroke-dasharray")}if(this.options.lineCap){this._path.setAttribute("stroke-linecap",this.options.lineCap)}if(this.options.lineJoin){this._path.setAttribute("stroke-linejoin",this.options.lineJoin)}}else{this._path.setAttribute("stroke","none")}if(this.options.fill){this._path.setAttribute("fill",this.options.fillColor||this.options.color);this._path.setAttribute("fill-opacity",this.options.fillOpacity)}else{this._path.setAttribute("fill","none")}},_updatePath:function(){var i=this.getPathString();if(!i){i="M0 0"}this._path.setAttribute("d",i)},_initEvents:function(){if(this.options.clickable){if(a.Browser.svg||!a.Browser.vml){a.DomUtil.addClass(this._path,"leaflet-clickable")}a.DomEvent.on(this._container,"click",this._onMouseClick,this);var k=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"];for(var j=0;j<k.length;j++){a.DomEvent.on(this._container,k[j],this._fireMouseEvent,this)}}},_onMouseClick:function(i){if(this._map.dragging&&this._map.dragging.moved()){return}this._fireMouseEvent(i)},_fireMouseEvent:function(l){if(!this.hasEventListeners(l.type)){return}var k=this._map,j=k.mouseEventToContainerPoint(l),i=k.containerPointToLayerPoint(j),m=k.layerPointToLatLng(i);this.fire(l.type,{latlng:m,layerPoint:i,containerPoint:j,originalEvent:l});if(l.type==="contextmenu"){a.DomEvent.preventDefault(l)}if(l.type!=="mousemove"){a.DomEvent.stopPropagation(l)}}});a.Map.include({_initPathRoot:function(){if(!this._pathRoot){this._pathRoot=a.Path.prototype._createElement("svg");this._panes.overlayPane.appendChild(this._pathRoot);if(this.options.zoomAnimation&&a.Browser.any3d){a.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated");this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})}else{a.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide")}this.on("moveend",this._updateSvgViewport);this._updateSvgViewport()}},_animatePathZoom:function(i){var k=this.getZoomScale(i.zoom),j=this._getCenterOffset(i.center)._multiplyBy(-k)._add(this._pathViewport.min);this._pathRoot.style[a.DomUtil.TRANSFORM]=a.DomUtil.getTranslateString(j)+" scale("+k+") ";this._pathZooming=true},_endPathZoom:function(){this._pathZooming=false},_updateSvgViewport:function(){if(this._pathZooming){return}this._updatePathViewport();var l=this._pathViewport,m=l.min,j=l.max,n=j.x-m.x,i=j.y-m.y,k=this._pathRoot,o=this._panes.overlayPane;if(a.Browser.mobileWebkit){o.removeChild(k)}a.DomUtil.setPosition(k,m);k.setAttribute("width",n);k.setAttribute("height",i);k.setAttribute("viewBox",[m.x,m.y,n,i].join(" "));if(a.Browser.mobileWebkit){o.appendChild(k)}}});a.Path.include({bindPopup:function(j,i){if(j instanceof a.Popup){this._popup=j}else{if(!this._popup||i){this._popup=new a.Popup(i,this)}this._popup.setContent(j)}if(!this._popupHandlersAdded){this.on("click",this._openPopup,this).on("remove",this.closePopup,this);this._popupHandlersAdded=true}return this},unbindPopup:function(){if(this._popup){this._popup=null;this.off("click",this._openPopup).off("remove",this.closePopup);this._popupHandlersAdded=false}return this},openPopup:function(i){if(this._popup){i=i||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)];this._openPopup({latlng:i})}return this},closePopup:function(){if(this._popup){this._popup._close()}return this},_openPopup:function(i){this._popup.setLatLng(i.latlng);this._map.openPopup(this._popup)}});a.Browser.vml=!a.Browser.svg&&(function(){try{var k=b.createElement("div");k.innerHTML='<v:shape adj="1"/>';var i=k.firstChild;i.style.behavior="url(#default#VML)";return i&&(typeof i.adj==="object")}catch(j){return false}}());a.Path=a.Browser.svg||!a.Browser.vml?a.Path:a.Path.extend({statics:{VML:true,CLIP_PADDING:0.02},_createElement:(function(){try{b.namespaces.add("lvml","urn:schemas-microsoft-com:vml");return function(j){return b.createElement("<lvml:"+j+' class="lvml">')}}catch(i){return function(j){return b.createElement("<"+j+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}()),_initPath:function(){var i=this._container=this._createElement("shape");a.DomUtil.addClass(i,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:""));if(this.options.clickable){a.DomUtil.addClass(i,"leaflet-clickable")}i.coordsize="1 1";this._path=this._createElement("path");i.appendChild(this._path);this._map._pathRoot.appendChild(i)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var l=this._stroke,k=this._fill,j=this.options,i=this._container;i.stroked=j.stroke;i.filled=j.fill;if(j.stroke){if(!l){l=this._stroke=this._createElement("stroke");l.endcap="round";i.appendChild(l)}l.weight=j.weight+"px";l.color=j.color;l.opacity=j.opacity;if(j.dashArray){l.dashStyle=a.Util.isArray(j.dashArray)?j.dashArray.join(" "):j.dashArray.replace(/( *, *)/g," ")}else{l.dashStyle=""}if(j.lineCap){l.endcap=j.lineCap.replace("butt","flat")}if(j.lineJoin){l.joinstyle=j.lineJoin}}else{if(l){i.removeChild(l);this._stroke=null}}if(j.fill){if(!k){k=this._fill=this._createElement("fill");i.appendChild(k)}k.color=j.fillColor||j.color;k.opacity=j.fillOpacity}else{if(k){i.removeChild(k);this._fill=null}}},_updatePath:function(){var i=this._container.style;i.display="none";this._path.v=this.getPathString()+" ";i.display=""}});a.Map.include(a.Browser.svg||!a.Browser.vml?{}:{_initPathRoot:function(){if(this._pathRoot){return}var i=this._pathRoot=b.createElement("div");i.className="leaflet-vml-container";this._panes.overlayPane.appendChild(i);this.on("moveend",this._updatePathViewport);this._updatePathViewport()}});a.Browser.canvas=(function(){return !!b.createElement("canvas").getContext}());a.Path=(a.Path.SVG&&!d.L_PREFER_CANVAS)||!a.Browser.canvas?a.Path:a.Path.extend({statics:{CANVAS:true,SVG:false},redraw:function(){if(this._map){this.projectLatlngs();this._requestUpdate()}return this},setStyle:function(i){a.setOptions(this,i);if(this._map){this._updateStyle();this._requestUpdate()}return this},onRemove:function(i){i.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this);if(this.options.clickable){this._map.off("click",this._onClick,this);this._map.off("mousemove",this._onMouseMove,this)}this._requestUpdate();this._map=null},_requestUpdate:function(){if(this._map&&!a.Path._updateRequest){a.Path._updateRequest=a.Util.requestAnimFrame(this._fireMapMoveEnd,this._map)}},_fireMapMoveEnd:function(){a.Path._updateRequest=null;this.fire("moveend")},_initElements:function(){this._map._initPathRoot();this._ctx=this._map._canvasCtx},_updateStyle:function(){var i=this.options;if(i.stroke){this._ctx.lineWidth=i.weight;this._ctx.strokeStyle=i.color}if(i.fill){this._ctx.fillStyle=i.fillColor||i.color}},_drawPath:function(){var p,o,l,m,k,n;this._ctx.beginPath();for(p=0,l=this._parts.length;p<l;p++){for(o=0,m=this._parts[p].length;o<m;o++){k=this._parts[p][o];n=(o===0?"move":"line")+"To";this._ctx[n](k.x,k.y)}if(this instanceof a.Polygon){this._ctx.closePath()}}},_checkIfEmpty:function(){return !this._parts.length},_updatePath:function(){if(this._checkIfEmpty()){return}var i=this._ctx,j=this.options;this._drawPath();i.save();this._updateStyle();if(j.fill){i.globalAlpha=j.fillOpacity;i.fill()}if(j.stroke){i.globalAlpha=j.opacity;i.stroke()}i.restore()},_initEvents:function(){if(this.options.clickable){this._map.on("mousemove",this._onMouseMove,this);this._map.on("click",this._onClick,this)}},_onClick:function(i){if(this._containsPoint(i.layerPoint)){this.fire("click",i)}},_onMouseMove:function(i){if(!this._map||this._map._animatingZoom){return}if(this._containsPoint(i.layerPoint)){this._ctx.canvas.style.cursor="pointer";this._mouseInside=true;this.fire("mouseover",i)}else{if(this._mouseInside){this._ctx.canvas.style.cursor="";this._mouseInside=false;this.fire("mouseout",i)}}}});a.Map.include((a.Path.SVG&&!d.L_PREFER_CANVAS)||!a.Browser.canvas?{}:{_initPathRoot:function(){var j=this._pathRoot,i;if(!j){j=this._pathRoot=b.createElement("canvas");j.style.position="absolute";i=this._canvasCtx=j.getContext("2d");i.lineCap="round";i.lineJoin="round";this._panes.overlayPane.appendChild(j);if(this.options.zoomAnimation){this._pathRoot.className="leaflet-zoom-animated";this.on("zoomanim",this._animatePathZoom);this.on("zoomend",this._endPathZoom)}this.on("moveend",this._updateCanvasViewport);this._updateCanvasViewport()}},_updateCanvasViewport:function(){if(this._pathZooming){return}this._updatePathViewport();var j=this._pathViewport,l=j.min,k=j.max.subtract(l),i=this._pathRoot;a.DomUtil.setPosition(i,l);i.width=k.x;i.height=k.y;i.getContext("2d").translate(-l.x,-l.y)}});a.LineUtil={simplify:function(k,i){if(!i||!k.length){return k.slice()}var j=i*i;k=this._reducePoints(k,j);k=this._simplifyDP(k,j);return k},pointToSegmentDistance:function(j,k,i){return Math.sqrt(this._sqClosestPointOnSegment(j,k,i,true))},closestPointOnSegment:function(j,k,i){return this._sqClosestPointOnSegment(j,k,i)},_simplifyDP:function(n,k){var j=n.length,m=typeof Uint8Array!==h+""?Uint8Array:Array,p=new m(j);p[0]=p[j-1]=1;this._simplifyDPStep(n,p,k,0,j-1);var l,o=[];for(l=0;l<j;l++){if(p[l]){o.push(n[l])}}return o},_simplifyDPStep:function(r,k,j,o,q){var l=0,p,m,n;for(m=o+1;m<=q-1;m++){n=this._sqClosestPointOnSegment(r[m],r[o],r[q],true);if(n>l){p=m;l=n}}if(l>j){k[p]=1;this._simplifyDPStep(r,k,j,o,p);this._simplifyDPStep(r,k,j,p,q)}},_reducePoints:function(m,k){var o=[m[0]];for(var l=1,n=0,j=m.length;l<j;l++){if(this._sqDist(m[l],m[n])>k){o.push(m[l]);n=l}}if(n<j-1){o.push(m[j-1])}return o},clipSegment:function(q,o,i,r){var m=r?this._lastCode:this._getBitCode(q,i),k=this._getBitCode(o,i),l,j,n;this._lastCode=k;while(true){if(!(m|k)){return[q,o]}else{if(m&k){return false}else{l=m||k;j=this._getEdgeIntersection(q,o,l,i);n=this._getBitCode(j,i);if(l===m){q=j;m=n}else{o=j;k=n}}}}},_getEdgeIntersection:function(l,j,p,o){var m=j.x-l.x,k=j.y-l.y,n=o.min,i=o.max;if(p&8){return new a.Point(l.x+m*(i.y-l.y)/k,i.y)}else{if(p&4){return new a.Point(l.x+m*(n.y-l.y)/k,n.y)}else{if(p&2){return new a.Point(i.x,l.y+k*(i.x-l.x)/m)}else{if(p&1){return new a.Point(n.x,l.y+k*(n.x-l.x)/m)}}}}},_getBitCode:function(k,j){var i=0;if(k.x<j.min.x){i|=1}else{if(k.x>j.max.x){i|=2}}if(k.y<j.min.y){i|=4}else{if(k.y>j.max.y){i|=8}}return i},_sqDist:function(l,k){var j=k.x-l.x,i=k.y-l.y;return j*j+i*i},_sqClosestPointOnSegment:function(j,o,n,k){var m=o.x,l=o.y,s=n.x-m,r=n.y-l,i=s*s+r*r,q;if(i>0){q=((j.x-m)*s+(j.y-l)*r)/i;if(q>1){m=n.x;l=n.y}else{if(q>0){m+=s*q;l+=r*q}}}s=j.x-m;r=j.y-l;return k?s*s+r*r:new a.Point(m,l)}};a.Polyline=a.Path.extend({initialize:function(i,j){a.Path.prototype.initialize.call(this,j);this._latlngs=this._convertLatLngs(i)},options:{smoothFactor:1,noClip:false},projectLatlngs:function(){this._originalPoints=[];for(var k=0,j=this._latlngs.length;k<j;k++){this._originalPoints[k]=this._map.latLngToLayerPoint(this._latlngs[k])}},getPathString:function(){for(var k=0,j=this._parts.length,l="";k<j;k++){l+=this._getPathPartStr(this._parts[k])}return l},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){this._latlngs=this._convertLatLngs(i);return this.redraw()},addLatLng:function(i){this._latlngs.push(a.latLng(i));return this.redraw()},spliceLatLngs:function(){var i=[].splice.apply(this._latlngs,arguments);this._convertLatLngs(this._latlngs,true);this.redraw();return i},closestLayerPoint:function(k){var t=Infinity,l=this._parts,v,u,r=null;for(var m=0,w=l.length;m<w;m++){var s=l[m];for(var n=1,q=s.length;n<q;n++){v=s[n-1];u=s[n];var o=a.LineUtil._sqClosestPointOnSegment(k,v,u,true);if(o<t){t=o;r=a.LineUtil._sqClosestPointOnSegment(k,v,u)}}}if(r){r.distance=Math.sqrt(t)}return r},getBounds:function(){return new a.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(k,l){var m,j,n=l?k:[];for(m=0,j=k.length;m<j;m++){if(a.Util.isArray(k[m])&&typeof k[m][0]!=="number"){return}n[m]=a.latLng(k[m])}return n},_initEvents:function(){a.Path.prototype._initEvents.call(this)},_getPathPartStr:function(m){var k=a.Path.VML;for(var l=0,i=m.length,o="",n;l<i;l++){n=m[l];if(k){n._round()}o+=(l?"L":"M")+n.x+" "+n.y}return o},_clipPoints:function(){var o=this._originalPoints,j=o.length,n,m,p;if(this.options.noClip){this._parts=[o];return}this._parts=[];var q=this._parts,l=this._map._pathViewport,r=a.LineUtil;for(n=0,m=0;n<j-1;n++){p=r.clipSegment(o[n],o[n+1],l,n);if(!p){continue}q[m]=q[m]||[];q[m].push(p[0]);if((p[1]!==o[n+1])||(n===j-2)){q[m].push(p[1]);m++}}},_simplifyPoints:function(){var l=this._parts,m=a.LineUtil;for(var k=0,j=l.length;k<j;k++){l[k]=m.simplify(l[k],this.options.smoothFactor)}},_updatePath:function(){if(!this._map){return}this._clipPoints();this._simplifyPoints();a.Path.prototype._updatePath.call(this)}});a.polyline=function(i,j){return new a.Polyline(i,j)};a.PolyUtil={};a.PolyUtil.clipPolygon=function(y,l){var v,s=[1,4,2,8],t,r,q,x,w,u,n,m,o=a.LineUtil;for(t=0,u=y.length;t<u;t++){y[t]._code=o._getBitCode(y[t],l)}for(q=0;q<4;q++){n=s[q];v=[];for(t=0,u=y.length,r=u-1;t<u;r=t++){x=y[t];w=y[r];if(!(x._code&n)){if(w._code&n){m=o._getEdgeIntersection(w,x,n,l);m._code=o._getBitCode(m,l);v.push(m)}v.push(x)}else{if(!(w._code&n)){m=o._getEdgeIntersection(w,x,n,l);m._code=o._getBitCode(m,l);v.push(m)}}}y=v}return y};a.Polygon=a.Polyline.extend({options:{fill:true},initialize:function(i,j){a.Polyline.prototype.initialize.call(this,i,j);this._initWithHoles(i)},_initWithHoles:function(k){var l,j,m;if(k&&a.Util.isArray(k[0])&&(typeof k[0][0]!=="number")){this._latlngs=this._convertLatLngs(k[0]);this._holes=k.slice(1);for(l=0,j=this._holes.length;l<j;l++){m=this._holes[l]=this._convertLatLngs(this._holes[l]);if(m[0].equals(m[m.length-1])){m.pop()}}}k=this._latlngs;if(k.length>=2&&k[0].equals(k[k.length-1])){k.pop()}},projectLatlngs:function(){a.Polyline.prototype.projectLatlngs.call(this);this._holePoints=[];if(!this._holes){return}var n,m,k,l;for(n=0,k=this._holes.length;n<k;n++){this._holePoints[n]=[];for(m=0,l=this._holes[n].length;m<l;m++){this._holePoints[n][m]=this._map.latLngToLayerPoint(this._holes[n][m])}}},setLatLngs:function(i){if(i&&a.Util.isArray(i[0])&&(typeof i[0][0]!=="number")){this._initWithHoles(i);return this.redraw()}else{return a.Polyline.prototype.setLatLngs.call(this,i)}},_clipPoints:function(){var m=this._originalPoints,n=[];this._parts=[m].concat(this._holePoints);if(this.options.noClip){return}for(var l=0,k=this._parts.length;l<k;l++){var j=a.PolyUtil.clipPolygon(this._parts[l],this._map._pathViewport);if(j.length){n.push(j)}}this._parts=n},_getPathPartStr:function(i){var j=a.Polyline.prototype._getPathPartStr.call(this,i);return j+(a.Browser.svg?"z":"x")}});a.polygon=function(i,j){return new a.Polygon(i,j)};(function(){function i(j){return a.FeatureGroup.extend({initialize:function(k,l){this._layers={};this._options=l;this.setLatLngs(k)},setLatLngs:function(l){var m=0,k=l.length;this.eachLayer(function(n){if(m<k){n.setLatLngs(l[m++])}else{this.removeLayer(n)}},this);while(m<k){this.addLayer(new j(l[m++],this._options))}return this},getLatLngs:function(){var k=[];this.eachLayer(function(l){k.push(l.getLatLngs())});return k}})}a.MultiPolyline=i(a.Polyline);a.MultiPolygon=i(a.Polygon);a.multiPolyline=function(j,k){return new a.MultiPolyline(j,k)};a.multiPolygon=function(j,k){return new a.MultiPolygon(j,k)}}());a.Rectangle=a.Polygon.extend({initialize:function(j,i){a.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(j),i)},setBounds:function(i){this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){i=a.latLngBounds(i);return[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});a.rectangle=function(j,i){return new a.Rectangle(j,i)};a.Circle=a.Path.extend({initialize:function(k,i,j){a.Path.prototype.initialize.call(this,j);this._latlng=a.latLng(k);this._mRadius=i},options:{fill:true},setLatLng:function(i){this._latlng=a.latLng(i);return this.redraw()},setRadius:function(i){this._mRadius=i;return this.redraw()},projectLatlngs:function(){var k=this._getLngRadius(),j=this._latlng,i=this._map.latLngToLayerPoint([j.lat,j.lng-k]);this._point=this._map.latLngToLayerPoint(j);this._radius=Math.max(this._point.x-i.x,1)},getBounds:function(){var k=this._getLngRadius(),i=(this._mRadius/40075017)*360,j=this._latlng;return new a.LatLngBounds([j.lat-i,j.lng-k],[j.lat+i,j.lng+k])},getLatLng:function(){return this._latlng},getPathString:function(){var j=this._point,i=this._radius;if(this._checkIfEmpty()){return""}if(a.Browser.svg){return"M"+j.x+","+(j.y-i)+"A"+i+","+i+",0,1,1,"+(j.x-0.1)+","+(j.y-i)+" z"}else{j._round();i=Math.round(i);return"AL "+j.x+","+j.y+" "+i+","+i+" 0,"+(65535*360)}},getRadius:function(){return this._mRadius},_getLatRadius:function(){return(this._mRadius/40075017)*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(a.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map){return false}var i=this._map._pathViewport,j=this._radius,k=this._point;return k.x-j>i.max.x||k.y-j>i.max.y||k.x+j<i.min.x||k.y+j<i.min.y}});a.circle=function(k,i,j){return new a.Circle(k,i,j)};a.CircleMarker=a.Circle.extend({options:{radius:10,weight:2},initialize:function(j,i){a.Circle.prototype.initialize.call(this,j,null,i);this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){a.Circle.prototype._updateStyle.call(this);this.setRadius(this.options.radius)},setLatLng:function(i){a.Circle.prototype.setLatLng.call(this,i);if(this._popup&&this._popup._isOpen){this._popup.setLatLng(i)}return this},setRadius:function(i){this.options.radius=this._radius=i;return this.redraw()},getRadius:function(){return this._radius}});a.circleMarker=function(j,i){return new a.CircleMarker(j,i)};a.Polyline.include(!a.Path.CANVAS?{}:{_containsPoint:function(l,s){var r,q,n,t,o,u,m,v=this.options.weight/2;if(a.Browser.touch){v+=10}for(r=0,t=this._parts.length;r<t;r++){m=this._parts[r];for(q=0,o=m.length,n=o-1;q<o;n=q++){if(!s&&(q===0)){continue}u=a.LineUtil.pointToSegmentDistance(l,m[n],m[q]);if(u<=v){return true}}}return false}});a.Polygon.include(!a.Path.CANVAS?{}:{_containsPoint:function(l){var n=false,m,v,u,s,r,q,t,o;if(a.Polyline.prototype._containsPoint.call(this,l,true)){return true}for(s=0,t=this._parts.length;s<t;s++){m=this._parts[s];for(r=0,o=m.length,q=o-1;r<o;q=r++){v=m[r];u=m[q];if(((v.y>l.y)!==(u.y>l.y))&&(l.x<(u.x-v.x)*(l.y-v.y)/(u.y-v.y)+v.x)){n=!n}}}return n}});a.Circle.include(!a.Path.CANVAS?{}:{_drawPath:function(){var i=this._point;this._ctx.beginPath();this._ctx.arc(i.x,i.y,this._radius,0,Math.PI*2,false)},_containsPoint:function(k){var j=this._point,i=this.options.stroke?this.options.weight/2:0;return(k.distanceTo(j)<=this._radius+i)}});a.CircleMarker.include(!a.Path.CANVAS?{}:{_updateStyle:function(){a.Path.prototype._updateStyle.call(this)}});a.GeoJSON=a.FeatureGroup.extend({initialize:function(j,i){a.setOptions(this,i);this._layers={};if(j){this.addData(j)}},addData:function(l){var p=a.Util.isArray(l)?l:l.features,o,j,n;if(p){for(o=0,j=p.length;o<j;o++){n=p[o];if(n.geometries||n.geometry||n.features||n.coordinates){this.addData(p[o])}}return this}var k=this.options;if(k.filter&&!k.filter(l)){return}var m=a.GeoJSON.geometryToLayer(l,k.pointToLayer,k.coordsToLatLng,k);m.feature=a.GeoJSON.asFeature(l);m.defaultOptions=m.options;this.resetStyle(m);if(k.onEachFeature){k.onEachFeature(l,m)}return this.addLayer(m)},resetStyle:function(i){var j=this.options.style;if(j){a.Util.extend(i.options,i.defaultOptions);this._setLayerStyle(i,j)}},setStyle:function(i){this.eachLayer(function(j){this._setLayerStyle(j,i)},this)},_setLayerStyle:function(i,j){if(typeof j==="function"){j=j(i.feature)}if(i.setStyle){i.setStyle(j)}}});a.extend(a.GeoJSON,{geometryToLayer:function(k,l,m,q){var s=k.type==="Feature"?k.geometry:k,t=s.coordinates,p=[],n,j,o,r;m=m||this.coordsToLatLng;switch(s.type){case"Point":n=m(t);return l?l(k,n):new a.Marker(n);case"MultiPoint":for(o=0,r=t.length;o<r;o++){n=m(t[o]);p.push(l?l(k,n):new a.Marker(n))}return new a.FeatureGroup(p);case"LineString":j=this.coordsToLatLngs(t,0,m);return new a.Polyline(j,q);case"Polygon":if(t.length===2&&!t[1].length){throw new Error("Invalid GeoJSON object.")}j=this.coordsToLatLngs(t,1,m);return new a.Polygon(j,q);case"MultiLineString":j=this.coordsToLatLngs(t,1,m);return new a.MultiPolyline(j,q);case"MultiPolygon":j=this.coordsToLatLngs(t,2,m);return new a.MultiPolygon(j,q);case"GeometryCollection":for(o=0,r=s.geometries.length;o<r;o++){p.push(this.geometryToLayer({geometry:s.geometries[o],type:"Feature",properties:k.properties},l,m,q))}return new a.FeatureGroup(p);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(i){return new a.LatLng(i[1],i[0],i[2])},coordsToLatLngs:function(n,m,p){var o,l,k,j=[];for(l=0,k=n.length;l<k;l++){o=m?this.coordsToLatLngs(n[l],m-1,p):(p||this.coordsToLatLng)(n[l]);j.push(o)}return j},latLngToCoords:function(j){var i=[j.lng,j.lat];if(j.alt!==h){i.push(j.alt)}return i},latLngsToCoords:function(m){var l=[];for(var k=0,j=m.length;k<j;k++){l.push(a.GeoJSON.latLngToCoords(m[k]))}return l},getFeature:function(j,i){return j.feature?a.extend({},j.feature,{geometry:i}):a.GeoJSON.asFeature(i)},asFeature:function(i){if(i.type==="Feature"){return i}return{type:"Feature",properties:{},geometry:i}}});var c={toGeoJSON:function(){return a.GeoJSON.getFeature(this,{type:"Point",coordinates:a.GeoJSON.latLngToCoords(this.getLatLng())})}};a.Marker.include(c);a.Circle.include(c);a.CircleMarker.include(c);a.Polyline.include({toGeoJSON:function(){return a.GeoJSON.getFeature(this,{type:"LineString",coordinates:a.GeoJSON.latLngsToCoords(this.getLatLngs())})}});a.Polygon.include({toGeoJSON:function(){var m=[a.GeoJSON.latLngsToCoords(this.getLatLngs())],k,j,l;m[0].push(m[0][0]);if(this._holes){for(k=0,j=this._holes.length;k<j;k++){l=a.GeoJSON.latLngsToCoords(this._holes[k]);l.push(l[0]);m.push(l)}}return a.GeoJSON.getFeature(this,{type:"Polygon",coordinates:m})}});(function(){function i(j){return function(){var k=[];this.eachLayer(function(l){k.push(l.toGeoJSON().geometry.coordinates)});return a.GeoJSON.getFeature(this,{type:j,coordinates:k})}}a.MultiPolyline.include({toGeoJSON:i("MultiLineString")});a.MultiPolygon.include({toGeoJSON:i("MultiPolygon")});a.LayerGroup.include({toGeoJSON:function(){var m=this.feature&&this.feature.geometry,l=[],k;if(m&&m.type==="MultiPoint"){return i("MultiPoint").call(this)}var j=m&&m.type==="GeometryCollection";this.eachLayer(function(n){if(n.toGeoJSON){k=n.toGeoJSON();l.push(j?k.geometry:a.GeoJSON.asFeature(k))}});if(j){return a.GeoJSON.getFeature(this,{geometries:l,type:"GeometryCollection"})}return{type:"FeatureCollection",features:l}}})}());a.geoJson=function(j,i){return new a.GeoJSON(j,i)};a.DomEvent={addListener:function(l,n,o,j){var i=a.stamp(o),p="_leaflet_"+n+i,q,m,k;if(l[p]){return this}q=function(r){return o.call(j||l,r||a.DomEvent._getEvent())};if(a.Browser.pointer&&n.indexOf("touch")===0){return this.addPointerListener(l,n,q,i)}if(a.Browser.touch&&(n==="dblclick")&&this.addDoubleTapListener){this.addDoubleTapListener(l,q,i)}if("addEventListener" in l){if(n==="mousewheel"){l.addEventListener("DOMMouseScroll",q,false);l.addEventListener(n,q,false)}else{if((n==="mouseenter")||(n==="mouseleave")){m=q;k=(n==="mouseenter"?"mouseover":"mouseout");q=function(r){if(!a.DomEvent._checkMouse(l,r)){return}return m(r)};l.addEventListener(k,q,false)}else{if(n==="click"&&a.Browser.android){m=q;q=function(r){return a.DomEvent._filterClick(r,m)};l.addEventListener(n,q,false)}else{l.addEventListener(n,q,false)}}}}else{if("attachEvent" in l){l.attachEvent("on"+n,q)}}l[p]=q;return this},removeListener:function(m,l,k){var n=a.stamp(k),i="_leaflet_"+l+n,j=m[i];if(!j){return this}if(a.Browser.pointer&&l.indexOf("touch")===0){this.removePointerListener(m,l,n)}else{if(a.Browser.touch&&(l==="dblclick")&&this.removeDoubleTapListener){this.removeDoubleTapListener(m,n)}else{if("removeEventListener" in m){if(l==="mousewheel"){m.removeEventListener("DOMMouseScroll",j,false);m.removeEventListener(l,j,false)}else{if((l==="mouseenter")||(l==="mouseleave")){m.removeEventListener((l==="mouseenter"?"mouseover":"mouseout"),j,false)}else{m.removeEventListener(l,j,false)}}}else{if("detachEvent" in m){m.detachEvent("on"+l,j)}}}}m[i]=null;return this},stopPropagation:function(i){if(i.stopPropagation){i.stopPropagation()}else{i.cancelBubble=true}a.DomEvent._skipped(i);return this},disableScrollPropagation:function(j){var i=a.DomEvent.stopPropagation;return a.DomEvent.on(j,"mousewheel",i).on(j,"MozMousePixelScroll",i)},disableClickPropagation:function(l){var k=a.DomEvent.stopPropagation;for(var j=a.Draggable.START.length-1;j>=0;j--){a.DomEvent.on(l,a.Draggable.START[j],k)}return a.DomEvent.on(l,"click",a.DomEvent._fakeStop).on(l,"dblclick",k)},preventDefault:function(i){if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}return this},stop:function(i){return a.DomEvent.preventDefault(i).stopPropagation(i)},getMousePosition:function(m,i){var l=b.body,j=b.documentElement,r=a.DomUtil.documentIsLtr()?(m.pageX?m.pageX-l.scrollLeft-j.scrollLeft:m.clientX):(a.Browser.gecko?m.pageX-l.scrollLeft-j.scrollLeft:m.pageX?m.pageX-l.scrollLeft+j.scrollLeft:m.clientX),o=m.pageY?m.pageY-l.scrollTop-j.scrollTop:m.clientY,p=new a.Point(r,o);if(!i){return p}var q=i.getBoundingClientRect(),k=q.left-i.clientLeft,n=q.top-i.clientTop;return p._subtract(new a.Point(k,n))},getWheelDelta:function(i){var j=0;if(i.wheelDelta){j=i.wheelDelta/120}if(i.detail){j=-i.detail/3}return j},_skipEvents:{},_fakeStop:function(i){a.DomEvent._skipEvents[i.type]=true},_skipped:function(j){var i=this._skipEvents[j.type];this._skipEvents[j.type]=false;return i},_checkMouse:function(i,l){var k=l.relatedTarget;if(!k){return true}try{while(k&&(k!==i)){k=k.parentNode}}catch(j){return false}return(k!==i)},_getEvent:function(){var j=d.event;if(!j){var i=arguments.callee.caller;while(i){j=i["arguments"][0];if(j&&d.Event===j.constructor){break}i=i.caller}}return j},_filterClick:function(l,k){var j=(l.timeStamp||l.originalEvent.timeStamp),i=a.DomEvent._lastClick&&(j-a.DomEvent._lastClick);if((i&&i>100&&i<1000)||(l.target._simulatedClick&&!l._simulated)){a.DomEvent.stop(l);return}a.DomEvent._lastClick=j;return k(l)}};a.DomEvent.on=a.DomEvent.addListener;a.DomEvent.off=a.DomEvent.removeListener;a.Draggable=a.Class.extend({includes:a.Mixin.Events,statics:{START:a.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(i,j){this._element=i;this._dragStartTarget=j||i},enable:function(){if(this._enabled){return}for(var j=a.Draggable.START.length-1;j>=0;j--){a.DomEvent.on(this._dragStartTarget,a.Draggable.START[j],this._onDown,this)}this._enabled=true},disable:function(){if(!this._enabled){return}for(var j=a.Draggable.START.length-1;j>=0;j--){a.DomEvent.off(this._dragStartTarget,a.Draggable.START[j],this._onDown,this)}this._enabled=false;this._moved=false},_onDown:function(i){this._moved=false;if(i.shiftKey||((i.which!==1)&&(i.button!==1)&&!i.touches)){return}a.DomEvent.stopPropagation(i);if(a.Draggable._disabled){return}a.DomUtil.disableImageDrag();a.DomUtil.disableTextSelection();if(this._moving){return}var j=i.touches?i.touches[0]:i;this._startPoint=new a.Point(j.clientX,j.clientY);this._startPos=this._newPos=a.DomUtil.getPosition(this._element);a.DomEvent.on(b,a.Draggable.MOVE[i.type],this._onMove,this).on(b,a.Draggable.END[i.type],this._onUp,this)},_onMove:function(j){if(j.touches&&j.touches.length>1){this._moved=true;return}var l=(j.touches&&j.touches.length===1?j.touches[0]:j),i=new a.Point(l.clientX,l.clientY),k=i.subtract(this._startPoint);if(!k.x&&!k.y){return}a.DomEvent.preventDefault(j);if(!this._moved){this.fire("dragstart");this._moved=true;this._startPos=a.DomUtil.getPosition(this._element).subtract(k);a.DomUtil.addClass(b.body,"leaflet-dragging");a.DomUtil.addClass((j.target||j.srcElement),"leaflet-drag-target")}this._newPos=this._startPos.add(k);this._moving=true;a.Util.cancelAnimFrame(this._animRequest);this._animRequest=a.Util.requestAnimFrame(this._updatePosition,this,true,this._dragStartTarget)},_updatePosition:function(){this.fire("predrag");a.DomUtil.setPosition(this._element,this._newPos);this.fire("drag")},_onUp:function(k){a.DomUtil.removeClass(b.body,"leaflet-dragging");a.DomUtil.removeClass((k.target||k.srcElement),"leaflet-drag-target");for(var j in a.Draggable.MOVE){a.DomEvent.off(b,a.Draggable.MOVE[j],this._onMove).off(b,a.Draggable.END[j],this._onUp)}a.DomUtil.enableImageDrag();a.DomUtil.enableTextSelection();if(this._moved&&this._moving){a.Util.cancelAnimFrame(this._animRequest);this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})}this._moving=false}});a.Handler=a.Class.extend({initialize:function(i){this._map=i},enable:function(){if(this._enabled){return}this._enabled=true;this.addHooks()},disable:function(){if(!this._enabled){return}this._enabled=false;this.removeHooks()},enabled:function(){return !!this._enabled}});a.Map.mergeOptions({dragging:true,inertia:!a.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,inertiaThreshold:a.Browser.touch?32:18,easeLinearity:0.25,worldCopyJump:false});a.Map.Drag=a.Handler.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new a.Draggable(i._mapPane,i._container);this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this);if(i.options.worldCopyJump){this._draggable.on("predrag",this._onPreDrag,this);i.on("viewreset",this._onViewReset,this);i.whenReady(this._onViewReset,this)}}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var i=this._map;if(i._panAnim){i._panAnim.stop()}i.fire("movestart").fire("dragstart");if(i.options.inertia){this._positions=[];this._times=[]}},_onDrag:function(){if(this._map.options.inertia){var i=this._lastTime=+new Date(),j=this._lastPos=this._draggable._newPos;this._positions.push(j);this._times.push(i);if(i-this._times[0]>200){this._positions.shift();this._times.shift()}}this._map.fire("move").fire("drag")},_onViewReset:function(){var j=this._map.getSize()._divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(j).x;this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var o=this._worldWidth,n=Math.round(o/2),j=this._initialWorldOffset,i=this._draggable._newPos.x,l=(i-n+j)%o+n-j,k=(i+n+j)%o-n-j,m=Math.abs(l+j)<Math.abs(k+j)?l:k;this._draggable._newPos.x=m},_onDragEnd:function(r){var j=this._map,v=j.options,q=+new Date()-this._lastTime,i=!v.inertia||q>v.inertiaThreshold||!this._positions[0];j.fire("dragend",r);if(i){j.fire("moveend")}else{var s=this._lastPos.subtract(this._positions[0]),o=(this._lastTime+q-this._times[0])/1000,n=v.easeLinearity,m=s.multiplyBy(n/o),l=m.distanceTo([0,0]),u=Math.min(v.inertiaMaxSpeed,l),t=m.multiplyBy(u/l),k=u/(v.inertiaDeceleration*n),p=t.multiplyBy(-k/2).round();if(!p.x||!p.y){j.fire("moveend")}else{p=j._limitOffset(p,j.options.maxBounds);a.Util.requestAnimFrame(function(){j.panBy(p,{duration:k,easeLinearity:n,noMoveStart:true})})}}}});a.Map.addInitHook("addHandler","dragging",a.Map.Drag);a.Map.mergeOptions({doubleClickZoom:true});a.Map.DoubleClickZoom=a.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(k){var j=this._map,i=j.getZoom()+(k.originalEvent.shiftKey?-1:1);if(j.options.doubleClickZoom==="center"){j.setZoom(i)}else{j.setZoomAround(k.containerPoint,i)}}});a.Map.addInitHook("addHandler","doubleClickZoom",a.Map.DoubleClickZoom);a.Map.mergeOptions({scrollWheelZoom:true});a.Map.ScrollWheelZoom=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this);a.DomEvent.on(this._map._container,"MozMousePixelScroll",a.DomEvent.preventDefault);this._delta=0},removeHooks:function(){a.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll);a.DomEvent.off(this._map._container,"MozMousePixelScroll",a.DomEvent.preventDefault)},_onWheelScroll:function(j){var k=a.DomEvent.getWheelDelta(j);this._delta+=k;this._lastMousePos=this._map.mouseEventToContainerPoint(j);if(!this._startTime){this._startTime=+new Date()}var i=Math.max(40-(+new Date()-this._startTime),0);clearTimeout(this._timer);this._timer=setTimeout(a.bind(this._performZoom,this),i);a.DomEvent.preventDefault(j);a.DomEvent.stopPropagation(j)},_performZoom:function(){var j=this._map,k=this._delta,i=j.getZoom();k=k>0?Math.ceil(k):Math.floor(k);k=Math.max(Math.min(k,4),-4);k=j._limitZoom(i+k)-i;this._delta=0;this._startTime=null;if(!k){return}if(j.options.scrollWheelZoom==="center"){j.setZoom(i+k)}else{j.setZoomAround(this._lastMousePos,i+k)}}});a.Map.addInitHook("addHandler","scrollWheelZoom",a.Map.ScrollWheelZoom);a.extend(a.DomEvent,{_touchstart:a.Browser.msPointer?"MSPointerDown":a.Browser.pointer?"pointerdown":"touchstart",_touchend:a.Browser.msPointer?"MSPointerUp":a.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(n,v,i){var u,q=false,o=250,m,k="_leaflet_",p=this._touchstart,t=this._touchend,s=[];function l(y){var x;if(a.Browser.pointer){s.push(y.pointerId);x=s.length}else{x=y.touches.length}if(x>1){return}var w=Date.now(),z=w-(u||w);m=y.touches?y.touches[0]:y;q=(z>0&&z<=o);u=w}function r(z){if(a.Browser.pointer){var x=s.indexOf(z.pointerId);if(x===-1){return}s.splice(x,1)}if(q){if(a.Browser.pointer){var w={},A;for(var y in m){A=m[y];if(typeof A==="function"){w[y]=A.bind(m)}else{w[y]=A}}m=w}m.type="dblclick";v(m);u=null}}n[k+p+i]=l;n[k+t+i]=r;var j=a.Browser.pointer?b.documentElement:n;n.addEventListener(p,l,false);j.addEventListener(t,r,false);if(a.Browser.pointer){j.addEventListener(a.DomEvent.POINTER_CANCEL,r,false)}return this},removeDoubleTapListener:function(j,k){var i="_leaflet_";j.removeEventListener(this._touchstart,j[i+this._touchstart+k],false);(a.Browser.pointer?b.documentElement:j).removeEventListener(this._touchend,j[i+this._touchend+k],false);if(a.Browser.pointer){b.documentElement.removeEventListener(a.DomEvent.POINTER_CANCEL,j[i+this._touchend+k],false)}return this}});a.extend(a.DomEvent,{POINTER_DOWN:a.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:a.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:a.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:a.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:false,addPointerListener:function(k,j,i,l){switch(j){case"touchstart":return this.addPointerListenerStart(k,j,i,l);case"touchend":return this.addPointerListenerEnd(k,j,i,l);case"touchmove":return this.addPointerListenerMove(k,j,i,l);default:throw"Unknown touch event type"}},addPointerListenerStart:function(o,m,l,p){var n="_leaflet_",j=this._pointers;var i=function(s){a.DomEvent.preventDefault(s);var r=false;for(var q=0;q<j.length;q++){if(j[q].pointerId===s.pointerId){r=true;break}}if(!r){j.push(s)}s.touches=j.slice();s.changedTouches=[s];l(s)};o[n+"touchstart"+p]=i;o.addEventListener(this.POINTER_DOWN,i,false);if(!this._pointerDocumentListener){var k=function(r){for(var q=0;q<j.length;q++){if(j[q].pointerId===r.pointerId){j.splice(q,1);break}}};b.documentElement.addEventListener(this.POINTER_UP,k,false);b.documentElement.addEventListener(this.POINTER_CANCEL,k,false);this._pointerDocumentListener=true}return this},addPointerListenerMove:function(n,k,j,o){var m="_leaflet_",l=this._pointers;function i(q){if((q.pointerType===q.MSPOINTER_TYPE_MOUSE||q.pointerType==="mouse")&&q.buttons===0){return}for(var p=0;p<l.length;p++){if(l[p].pointerId===q.pointerId){l[p]=q;break}}q.touches=l.slice();q.changedTouches=[q];j(q)}n[m+"touchmove"+o]=i;n.addEventListener(this.POINTER_MOVE,i,false);return this},addPointerListenerEnd:function(n,k,j,o){var m="_leaflet_",l=this._pointers;var i=function(q){for(var p=0;p<l.length;p++){if(l[p].pointerId===q.pointerId){l.splice(p,1);break}}q.touches=l.slice();q.changedTouches=[q];j(q)};n[m+"touchend"+o]=i;n.addEventListener(this.POINTER_UP,i,false);n.addEventListener(this.POINTER_CANCEL,i,false);return this},removePointerListener:function(l,j,m){var k="_leaflet_",i=l[k+j+m];switch(j){case"touchstart":l.removeEventListener(this.POINTER_DOWN,i,false);break;case"touchmove":l.removeEventListener(this.POINTER_MOVE,i,false);break;case"touchend":l.removeEventListener(this.POINTER_UP,i,false);l.removeEventListener(this.POINTER_CANCEL,i,false);break}return this}});a.Map.mergeOptions({touchZoom:a.Browser.touch&&!a.Browser.android23,bounceAtZoomLimits:true});a.Map.TouchZoom=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){a.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var k=this._map;if(!l.touches||l.touches.length!==2||k._animatingZoom||this._zooming){return}var m=k.mouseEventToLayerPoint(l.touches[0]),j=k.mouseEventToLayerPoint(l.touches[1]),i=k._getCenterLayerPoint();this._startCenter=m.add(j)._divideBy(2);this._startDist=m.distanceTo(j);this._moved=false;this._zooming=true;this._centerOffset=i.subtract(this._startCenter);if(k._panAnim){k._panAnim.stop()}a.DomEvent.on(b,"touchmove",this._onTouchMove,this).on(b,"touchend",this._onTouchEnd,this);a.DomEvent.preventDefault(l)},_onTouchMove:function(k){var j=this._map;if(!k.touches||k.touches.length!==2||!this._zooming){return}var l=j.mouseEventToLayerPoint(k.touches[0]),i=j.mouseEventToLayerPoint(k.touches[1]);this._scale=l.distanceTo(i)/this._startDist;this._delta=l._add(i)._divideBy(2)._subtract(this._startCenter);if(this._scale===1){return}if(!j.options.bounceAtZoomLimits){if((j.getZoom()===j.getMinZoom()&&this._scale<1)||(j.getZoom()===j.getMaxZoom()&&this._scale>1)){return}}if(!this._moved){a.DomUtil.addClass(j._mapPane,"leaflet-touching");j.fire("movestart").fire("zoomstart");this._moved=true}a.Util.cancelAnimFrame(this._animRequest);this._animRequest=a.Util.requestAnimFrame(this._updateOnMove,this,true,this._map._container);a.DomEvent.preventDefault(k)},_updateOnMove:function(){var l=this._map,j=this._getScaleOrigin(),i=l.layerPointToLatLng(j),k=l.getScaleZoom(this._scale);l._animateZoom(i,k,this._startCenter,this._scale,this._delta)},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=false;return}var o=this._map;this._zooming=false;a.DomUtil.removeClass(o._mapPane,"leaflet-touching");a.Util.cancelAnimFrame(this._animRequest);a.DomEvent.off(b,"touchmove",this._onTouchMove).off(b,"touchend",this._onTouchEnd);var k=this._getScaleOrigin(),j=o.layerPointToLatLng(k),n=o.getZoom(),i=o.getScaleZoom(this._scale)-n,l=(i>0?Math.ceil(i):Math.floor(i)),m=o._limitZoom(n+l),p=o.getZoomScale(m)/this._scale;o._animateZoom(j,m,k,p)},_getScaleOrigin:function(){var i=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(i)}});a.Map.addInitHook("addHandler","touchZoom",a.Map.TouchZoom);a.Map.mergeOptions({tap:true,tapTolerance:15});a.Map.Tap=a.Handler.extend({addHooks:function(){a.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){a.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(j){if(!j.touches){return}a.DomEvent.preventDefault(j);this._fireClick=true;if(j.touches.length>1){this._fireClick=false;clearTimeout(this._holdTimeout);return}var k=j.touches[0],i=k.target;this._startPos=this._newPos=new a.Point(k.clientX,k.clientY);if(i.tagName&&i.tagName.toLowerCase()==="a"){a.DomUtil.addClass(i,"leaflet-active")}this._holdTimeout=setTimeout(a.bind(function(){if(this._isTapValid()){this._fireClick=false;this._onUp();this._simulateEvent("contextmenu",k)}},this),1000);a.DomEvent.on(b,"touchmove",this._onMove,this).on(b,"touchend",this._onUp,this)},_onUp:function(j){clearTimeout(this._holdTimeout);a.DomEvent.off(b,"touchmove",this._onMove,this).off(b,"touchend",this._onUp,this);if(this._fireClick&&j&&j.changedTouches){var k=j.changedTouches[0],i=k.target;if(i&&i.tagName&&i.tagName.toLowerCase()==="a"){a.DomUtil.removeClass(i,"leaflet-active")}if(this._isTapValid()){this._simulateEvent("click",k)}}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(i){var j=i.touches[0];this._newPos=new a.Point(j.clientX,j.clientY)},_simulateEvent:function(i,k){var j=b.createEvent("MouseEvents");j._simulated=true;k.target._simulatedClick=true;j.initMouseEvent(i,true,true,d,1,k.screenX,k.screenY,k.clientX,k.clientY,false,false,false,false,0,null);k.target.dispatchEvent(j)}});if(a.Browser.touch&&!a.Browser.pointer){a.Map.addInitHook("addHandler","tap",a.Map.Tap)}a.Map.mergeOptions({boxZoom:true});a.Map.BoxZoom=a.Handler.extend({initialize:function(i){this._map=i;this._container=i._container;this._pane=i._panes.overlayPane;this._moved=false},addHooks:function(){a.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){a.DomEvent.off(this._container,"mousedown",this._onMouseDown);this._moved=false},moved:function(){return this._moved},_onMouseDown:function(i){this._moved=false;if(!i.shiftKey||((i.which!==1)&&(i.button!==1))){return false}a.DomUtil.disableTextSelection();a.DomUtil.disableImageDrag();this._startLayerPoint=this._map.mouseEventToLayerPoint(i);a.DomEvent.on(b,"mousemove",this._onMouseMove,this).on(b,"mouseup",this._onMouseUp,this).on(b,"keydown",this._onKeyDown,this)},_onMouseMove:function(m){if(!this._moved){this._box=a.DomUtil.create("div","leaflet-zoom-box",this._pane);a.DomUtil.setPosition(this._box,this._startLayerPoint);this._container.style.cursor="crosshair";this._map.fire("boxzoomstart")}var l=this._startLayerPoint,k=this._box,i=this._map.mouseEventToLayerPoint(m),n=i.subtract(l),j=new a.Point(Math.min(i.x,l.x),Math.min(i.y,l.y));a.DomUtil.setPosition(k,j);this._moved=true;k.style.width=(Math.max(0,Math.abs(n.x)-4))+"px";k.style.height=(Math.max(0,Math.abs(n.y)-4))+"px"},_finish:function(){if(this._moved){this._pane.removeChild(this._box);this._container.style.cursor=""}a.DomUtil.enableTextSelection();a.DomUtil.enableImageDrag();a.DomEvent.off(b,"mousemove",this._onMouseMove).off(b,"mouseup",this._onMouseUp).off(b,"keydown",this._onKeyDown)},_onMouseUp:function(l){this._finish();var k=this._map,i=k.mouseEventToLayerPoint(l);if(this._startLayerPoint.equals(i)){return}var j=new a.LatLngBounds(k.layerPointToLatLng(this._startLayerPoint),k.layerPointToLatLng(i));k.fitBounds(j);k.fire("boxzoomend",{boxZoomBounds:j})},_onKeyDown:function(i){if(i.keyCode===27){this._finish()}}});a.Map.addInitHook("addHandler","boxZoom",a.Map.BoxZoom);a.Map.mergeOptions({keyboard:true,keyboardPanOffset:80,keyboardZoomOffset:1});a.Map.Keyboard=a.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(i){this._map=i;this._setPanOffset(i.options.keyboardPanOffset);this._setZoomOffset(i.options.keyboardZoomOffset)},addHooks:function(){var i=this._map._container;if(i.tabIndex===-1){i.tabIndex="0"}a.DomEvent.on(i,"focus",this._onFocus,this).on(i,"blur",this._onBlur,this).on(i,"mousedown",this._onMouseDown,this);this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var i=this._map._container;a.DomEvent.off(i,"focus",this._onFocus,this).off(i,"blur",this._onBlur,this).off(i,"mousedown",this._onMouseDown,this);this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(this._focused){return}var i=b.body,l=b.documentElement,k=i.scrollTop||l.scrollTop,j=i.scrollLeft||l.scrollLeft;this._map._container.focus();d.scrollTo(j,k)},_onFocus:function(){this._focused=true;this._map.fire("focus")},_onBlur:function(){this._focused=false;this._map.fire("blur")},_setPanOffset:function(n){var m=this._panKeys={},k=this.keyCodes,l,j;for(l=0,j=k.left.length;l<j;l++){m[k.left[l]]=[-1*n,0]}for(l=0,j=k.right.length;l<j;l++){m[k.right[l]]=[n,0]}for(l=0,j=k.down.length;l<j;l++){m[k.down[l]]=[0,n]}for(l=0,j=k.up.length;l<j;l++){m[k.up[l]]=[0,-1*n]}},_setZoomOffset:function(n){var m=this._zoomKeys={},k=this.keyCodes,l,j;for(l=0,j=k.zoomIn.length;l<j;l++){m[k.zoomIn[l]]=n}for(l=0,j=k.zoomOut.length;l<j;l++){m[k.zoomOut[l]]=-n}},_addHooks:function(){a.DomEvent.on(b,"keydown",this._onKeyDown,this)},_removeHooks:function(){a.DomEvent.off(b,"keydown",this._onKeyDown,this)},_onKeyDown:function(k){var i=k.keyCode,j=this._map;if(i in this._panKeys){if(j._panAnim&&j._panAnim._inProgress){return}j.panBy(this._panKeys[i]);if(j.options.maxBounds){j.panInsideBounds(j.options.maxBounds)}}else{if(i in this._zoomKeys){j.setZoom(j.getZoom()+this._zoomKeys[i])}else{return}}a.DomEvent.stop(k)}});a.Map.addInitHook("addHandler","keyboard",a.Map.Keyboard);a.Handler.MarkerDrag=a.Handler.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;if(!this._draggable){this._draggable=new a.Draggable(i,i)}this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this);this._draggable.enable();a.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this);this._draggable.disable();a.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var i=this._marker,l=i._shadow,j=a.DomUtil.getPosition(i._icon),k=i._map.layerPointToLatLng(j);if(l){a.DomUtil.setPosition(l,j)}i._latlng=k;i.fire("move",{latlng:k}).fire("drag")},_onDragEnd:function(i){this._marker.fire("moveend").fire("dragend",i)}});a.Control=a.Class.extend({options:{position:"topright"},initialize:function(i){a.setOptions(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var j=this._map;if(j){j.removeControl(this)}this.options.position=i;if(j){j.addControl(this)}return this},getContainer:function(){return this._container},addTo:function(k){this._map=k;var i=this._container=this.onAdd(k),l=this.getPosition(),j=k._controlCorners[l];a.DomUtil.addClass(i,"leaflet-control");if(l.indexOf("bottom")!==-1){j.insertBefore(i,j.firstChild)}else{j.appendChild(i)}return this},removeFrom:function(j){var k=this.getPosition(),i=j._controlCorners[k];i.removeChild(this._container);this._map=null;if(this.onRemove){this.onRemove(j)}return this},_refocusOnMap:function(){if(this._map){this._map.getContainer().focus()}}});a.control=function(i){return new a.Control(i)};a.Map.include({addControl:function(i){i.addTo(this);return this},removeControl:function(i){i.removeFrom(this);return this},_initControlPos:function(){var k=this._controlCorners={},j="leaflet-",i=this._controlContainer=a.DomUtil.create("div",j+"control-container",this._container);function m(n,o){var l=j+n+" "+j+o;k[n+o]=a.DomUtil.create("div",l,i)}m("top","left");m("top","right");m("bottom","left");m("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}});a.Control.Zoom=a.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(j){var k="leaflet-control-zoom",i=a.DomUtil.create("div",k+" leaflet-bar");this._map=j;this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,k+"-in",i,this._zoomIn,this);this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,k+"-out",i,this._zoomOut,this);this._updateDisabled();j.on("zoomend zoomlevelschange",this._updateDisabled,this);return i},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(i){this._map.zoomIn(i.shiftKey?3:1)},_zoomOut:function(i){this._map.zoomOut(i.shiftKey?3:1)},_createButton:function(l,p,n,i,m,k){var o=a.DomUtil.create("a",n,i);o.innerHTML=l;o.href="#";o.title=p;var j=a.DomEvent.stopPropagation;a.DomEvent.on(o,"click",j).on(o,"mousedown",j).on(o,"dblclick",j).on(o,"click",a.DomEvent.preventDefault).on(o,"click",m,k).on(o,"click",this._refocusOnMap,k);return o},_updateDisabled:function(){var j=this._map,i="leaflet-disabled";a.DomUtil.removeClass(this._zoomInButton,i);a.DomUtil.removeClass(this._zoomOutButton,i);if(j._zoom===j.getMinZoom()){a.DomUtil.addClass(this._zoomOutButton,i)}if(j._zoom===j.getMaxZoom()){a.DomUtil.addClass(this._zoomInButton,i)}}});a.Map.mergeOptions({zoomControl:true});a.Map.addInitHook(function(){if(this.options.zoomControl){this.zoomControl=new a.Control.Zoom();this.addControl(this.zoomControl)}});a.control.zoom=function(i){return new a.Control.Zoom(i)};a.Control.Attribution=a.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(i){a.setOptions(this,i);this._attributions={}},onAdd:function(k){this._container=a.DomUtil.create("div","leaflet-control-attribution");a.DomEvent.disableClickPropagation(this._container);for(var j in k._layers){if(k._layers[j].getAttribution){this.addAttribution(k._layers[j].getAttribution())}}k.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this);this._update();return this._container},onRemove:function(i){i.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(i){this.options.prefix=i;this._update();return this},addAttribution:function(i){if(!i){return}if(!this._attributions[i]){this._attributions[i]=0}this._attributions[i]++;this._update();return this},removeAttribution:function(i){if(!i){return}if(this._attributions[i]){this._attributions[i]--;this._update()}return this},_update:function(){if(!this._map){return}var l=[];for(var j in this._attributions){if(this._attributions[j]){l.push(j)}}var k=[];if(this.options.prefix){k.push(this.options.prefix)}if(l.length){k.push(l.join(", "))}this._container.innerHTML=k.join(" | ")},_onLayerAdd:function(i){if(i.layer.getAttribution){this.addAttribution(i.layer.getAttribution())}},_onLayerRemove:function(i){if(i.layer.getAttribution){this.removeAttribution(i.layer.getAttribution())}}});a.Map.mergeOptions({attributionControl:true});a.Map.addInitHook(function(){if(this.options.attributionControl){this.attributionControl=(new a.Control.Attribution()).addTo(this)}});a.control.attribution=function(i){return new a.Control.Attribution(i)};a.Control.Scale=a.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:true,imperial:true,updateWhenIdle:false},onAdd:function(l){this._map=l;var k="leaflet-control-scale",i=a.DomUtil.create("div",k),j=this.options;this._addScales(j,k,i);l.on(j.updateWhenIdle?"moveend":"move",this._update,this);l.whenReady(this._update,this);return i},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(j,k,i){if(j.metric){this._mScale=a.DomUtil.create("div",k+"-line",i)}if(j.imperial){this._iScale=a.DomUtil.create("div",k+"-line",i)}},_update:function(){var l=this._map.getBounds(),m=l.getCenter().lat,k=6378137*Math.PI*Math.cos(m*Math.PI/180),o=k*(l.getNorthEast().lng-l.getSouthWest().lng)/180,j=this._map.getSize(),i=this.options,n=0;if(j.x>0){n=o*(i.maxWidth/j.x)}this._updateScales(i,n)},_updateScales:function(i,j){if(i.metric&&j){this._updateMetric(j)}if(i.imperial&&j){this._updateImperial(j)}},_updateMetric:function(j){var i=this._getRoundNum(j);this._mScale.style.width=this._getScaleWidth(i/j)+"px";this._mScale.innerHTML=i<1000?i+" m":(i/1000)+" km"},_updateImperial:function(m){var l=m*3.2808399,n=this._iScale,k,j,i;if(l>5280){k=l/5280;j=this._getRoundNum(k);n.style.width=this._getScaleWidth(j/k)+"px";n.innerHTML=j+" mi"}else{i=this._getRoundNum(l);n.style.width=this._getScaleWidth(i/l)+"px";n.innerHTML=i+" ft"}},_getScaleWidth:function(i){return Math.round(this.options.maxWidth*i)-10},_getRoundNum:function(j){var i=Math.pow(10,(Math.floor(j)+"").length-1),k=j/i;k=k>=10?10:k>=5?5:k>=3?3:k>=2?2:1;return i*k}});a.control.scale=function(i){return new a.Control.Scale(i)};a.Control.Layers=a.Control.extend({options:{collapsed:true,position:"topright",autoZIndex:true},initialize:function(m,l,j){a.setOptions(this,j);this._layers={};this._lastZIndex=0;this._handlingClick=false;for(var k in m){this._addLayer(m[k],k)}for(k in l){this._addLayer(l[k],k,true)}},onAdd:function(i){this._initLayout();this._update();i.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this);return this._container},onRemove:function(i){i.off("layeradd",this._onLayerChange).off("layerremove",this._onLayerChange)},addBaseLayer:function(j,i){this._addLayer(j,i);this._update();return this},addOverlay:function(j,i){this._addLayer(j,i,true);this._update();return this},removeLayer:function(i){var j=a.stamp(i);delete this._layers[j];this._update();return this},_initLayout:function(){var j="leaflet-control-layers",i=this._container=a.DomUtil.create("div",j);i.setAttribute("aria-haspopup",true);if(!a.Browser.touch){a.DomEvent.disableClickPropagation(i).disableScrollPropagation(i)}else{a.DomEvent.on(i,"click",a.DomEvent.stopPropagation)}var l=this._form=a.DomUtil.create("form",j+"-list");if(this.options.collapsed){if(!a.Browser.android){a.DomEvent.on(i,"mouseover",this._expand,this).on(i,"mouseout",this._collapse,this)}var k=this._layersLink=a.DomUtil.create("a",j+"-toggle",i);k.href="#";k.title="Layers";if(a.Browser.touch){a.DomEvent.on(k,"click",a.DomEvent.stop).on(k,"click",this._expand,this)}else{a.DomEvent.on(k,"focus",this._expand,this)}a.DomEvent.on(l,"click",function(){setTimeout(a.bind(this._onInputClick,this),0)},this);this._map.on("click",this._collapse,this)}else{this._expand()}this._baseLayersList=a.DomUtil.create("div",j+"-base",l);this._separator=a.DomUtil.create("div",j+"-separator",l);this._overlaysList=a.DomUtil.create("div",j+"-overlays",l);i.appendChild(l)},_addLayer:function(k,j,i){var l=a.stamp(k);this._layers[l]={layer:k,name:j,overlay:i};if(this.options.autoZIndex&&k.setZIndex){this._lastZIndex++;k.setZIndex(this._lastZIndex)}},_update:function(){if(!this._container){return}this._baseLayersList.innerHTML="";this._overlaysList.innerHTML="";var j=false,l=false,k,m;for(k in this._layers){m=this._layers[k];this._addItem(m);l=l||m.overlay;j=j||!m.overlay}this._separator.style.display=l&&j?"":"none"},_onLayerChange:function(k){var j=this._layers[a.stamp(k.layer)];if(!j){return}if(!this._handlingClick){this._update()}var i=j.overlay?(k.type==="layeradd"?"overlayadd":"overlayremove"):(k.type==="layeradd"?"baselayerchange":null);if(i){this._map.fire(i,j)}},_createRadioElement:function(i,l){var k='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"';if(l){k+=' checked="checked"'}k+="/>";var j=b.createElement("div");j.innerHTML=k;return j.firstChild},_addItem:function(n){var l=b.createElement("label"),j,m=this._map.hasLayer(n.layer);if(n.overlay){j=b.createElement("input");j.type="checkbox";j.className="leaflet-control-layers-selector";j.defaultChecked=m}else{j=this._createRadioElement("leaflet-base-layers",m)}j.layerId=a.stamp(n.layer);a.DomEvent.on(j,"click",this._onInputClick,this);var k=b.createElement("span");k.innerHTML=" "+n.name;l.appendChild(j);l.appendChild(k);var i=n.overlay?this._overlaysList:this._baseLayersList;i.appendChild(l);return l},_onInputClick:function(){var l,k,n,j=this._form.getElementsByTagName("input"),m=j.length;this._handlingClick=true;for(l=0;l<m;l++){k=j[l];n=this._layers[k.layerId];if(k.checked&&!this._map.hasLayer(n.layer)){this._map.addLayer(n.layer)}else{if(!k.checked&&this._map.hasLayer(n.layer)){this._map.removeLayer(n.layer)}}}this._handlingClick=false;this._refocusOnMap()},_expand:function(){a.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}});a.control.layers=function(k,j,i){return new a.Control.Layers(k,j,i)};a.PosAnimation=a.Class.extend({includes:a.Mixin.Events,run:function(j,i,k,l){this.stop();this._el=j;this._inProgress=true;this._newPos=i;this.fire("start");j.style[a.DomUtil.TRANSITION]="all "+(k||0.25)+"s cubic-bezier(0,0,"+(l||0.5)+",1)";a.DomEvent.on(j,a.DomUtil.TRANSITION_END,this._onTransitionEnd,this);a.DomUtil.setPosition(j,i);a.Util.falseFn(j.offsetWidth);this._stepTimer=setInterval(a.bind(this._onStep,this),50)},stop:function(){if(!this._inProgress){return}a.DomUtil.setPosition(this._el,this._getPos());this._onTransitionEnd();a.Util.falseFn(this._el.offsetWidth)},_onStep:function(){var i=this._getPos();if(!i){this._onTransitionEnd();return}this._el._leaflet_pos=i;this.fire("step")},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var m,l,k,j=this._el,i=d.getComputedStyle(j);if(a.Browser.any3d){k=i[a.DomUtil.TRANSFORM].match(this._transformRe);if(!k){return}m=parseFloat(k[1]);l=parseFloat(k[2])}else{m=parseFloat(i.left);l=parseFloat(i.top)}return new a.Point(m,l,true)},_onTransitionEnd:function(){a.DomEvent.off(this._el,a.DomUtil.TRANSITION_END,this._onTransitionEnd,this);if(!this._inProgress){return}this._inProgress=false;this._el.style[a.DomUtil.TRANSITION]="";this._el._leaflet_pos=this._newPos;clearInterval(this._stepTimer);this.fire("step").fire("end")}});a.Map.include({setView:function(i,l,j){l=l===h?this._zoom:this._limitZoom(l);i=this._limitCenter(a.latLng(i),l,this.options.maxBounds);j=j||{};if(this._panAnim){this._panAnim.stop()}if(this._loaded&&!j.reset&&j!==true){if(j.animate!==h){j.zoom=a.extend({animate:j.animate},j.zoom);j.pan=a.extend({animate:j.animate},j.pan)}var k=(this._zoom!==l)?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,l,j.zoom):this._tryAnimatedPan(i,j.pan);if(k){clearTimeout(this._sizeTimer);return this}}this._resetView(i,l);return this},panBy:function(k,i){k=a.point(k).round();i=i||{};if(!k.x&&!k.y){return this}if(!this._panAnim){this._panAnim=new a.PosAnimation();this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)}if(!i.noMoveStart){this.fire("movestart")}if(i.animate!==false){a.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");var j=this._getMapPanePos().subtract(k);this._panAnim.run(this._mapPane,j,i.duration||0.25,i.easeLinearity)}else{this._rawPanBy(k);this.fire("move").fire("moveend")}return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){a.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim");this.fire("moveend")},_tryAnimatedPan:function(i,j){var k=this._getCenterOffset(i)._floor();if((j&&j.animate)!==true&&!this.getSize().contains(k)){return false}this.panBy(k,j);return true}});a.PosAnimation=a.DomUtil.TRANSITION?a.PosAnimation:a.PosAnimation.extend({run:function(j,i,k,l){this.stop();this._el=j;this._inProgress=true;this._duration=k||0.25;this._easeOutPower=1/Math.max(l||0.5,0.2);this._startPos=a.DomUtil.getPosition(j);this._offset=i.subtract(this._startPos);this._startTime=+new Date();this.fire("start");this._animate()},stop:function(){if(!this._inProgress){return}this._step();this._complete()},_animate:function(){this._animId=a.Util.requestAnimFrame(this._animate,this);this._step()},_step:function(){var i=(+new Date())-this._startTime,j=this._duration*1000;if(i<j){this._runFrame(this._easeOut(i/j))}else{this._runFrame(1);this._complete()}},_runFrame:function(i){var j=this._startPos.add(this._offset.multiplyBy(i));a.DomUtil.setPosition(this._el,j);this.fire("step")},_complete:function(){a.Util.cancelAnimFrame(this._animId);this._inProgress=false;this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}});a.Map.mergeOptions({zoomAnimation:true,zoomAnimationThreshold:4});if(a.DomUtil.TRANSITION){a.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&a.DomUtil.TRANSITION&&a.Browser.any3d&&!a.Browser.android23&&!a.Browser.mobileOpera;if(this._zoomAnimated){a.DomEvent.on(this._mapPane,a.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}})}a.Map.include(!a.DomUtil.TRANSITION?{}:{_catchTransitionEnd:function(i){if(this._animatingZoom&&i.propertyName.indexOf("transform")>=0){this._onZoomTransitionEnd()}},_nothingToAnimate:function(){return !this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,l,k){if(this._animatingZoom){return true}k=k||{};if(!this._zoomAnimated||k.animate===false||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold){return false}var n=this.getZoomScale(l),m=this._getCenterOffset(i)._divideBy(1-1/n),j=this._getCenterLayerPoint()._add(m);if(k.animate!==true&&!this.getSize().contains(m)){return false}this.fire("movestart").fire("zoomstart");this._animateZoom(i,l,j,n,null,true);return true},_animateZoom:function(i,l,k,m,n,j){this._animatingZoom=true;a.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim");this._animateToCenter=i;this._animateToZoom=l;if(a.Draggable){a.Draggable._disabled=true}this.fire("zoomanim",{center:i,zoom:l,origin:k,scale:m,delta:n,backwards:j})},_onZoomTransitionEnd:function(){this._animatingZoom=false;a.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim");this._resetView(this._animateToCenter,this._animateToZoom,true,true);if(a.Draggable){a.Draggable._disabled=false}}});a.TileLayer.include({_animateZoom:function(m){if(!this._animating){this._animating=true;this._prepareBgBuffer()}var k=this._bgBuffer,i=a.DomUtil.TRANSFORM,j=m.delta?a.DomUtil.getTranslateString(m.delta):k.style[i],l=a.DomUtil.getScaleString(m.scale,m.origin);k.style[i]=m.backwards?l+" "+j:j+" "+l},_endZoomAnim:function(){var j=this._tileContainer,i=this._bgBuffer;j.style.visibility="";j.parentNode.appendChild(j);a.Util.falseFn(i.offsetWidth);this._animating=false},_clearBgBuffer:function(){var i=this._map;if(i&&!i._animatingZoom&&!i.touchZoom._zooming){this._bgBuffer.innerHTML="";this._bgBuffer.style[a.DomUtil.TRANSFORM]=""}},_prepareBgBuffer:function(){var k=this._tileContainer,j=this._bgBuffer;var i=this._getLoadedTilesPercentage(j),l=this._getLoadedTilesPercentage(k);if(j&&i>0.5&&l<0.5){k.style.visibility="hidden";this._stopLoadingImages(k);return}j.style.visibility="hidden";j.style[a.DomUtil.TRANSFORM]="";this._tileContainer=j;j=this._bgBuffer=k;this._stopLoadingImages(j);clearTimeout(this._clearBgBufferTimer)},_getLoadedTilesPercentage:function(k){var l=k.getElementsByTagName("img"),m,j,n=0;for(m=0,j=l.length;m<j;m++){if(l[m].complete){n++}}return n/j},_stopLoadingImages:function(k){var l=Array.prototype.slice.call(k.getElementsByTagName("img")),m,j,n;for(m=0,j=l.length;m<j;m++){n=l[m];if(!n.complete){n.onload=a.Util.falseFn;n.onerror=a.Util.falseFn;n.src=a.Util.emptyImageUrl;n.parentNode.removeChild(n)}}}});a.Map.include({_defaultLocateOptions:{watch:false,setView:false,maxZoom:Infinity,timeout:10000,maximumAge:0,enableHighAccuracy:false},locate:function(i){i=this._locateOptions=a.extend(this._defaultLocateOptions,i);if(!navigator.geolocation){this._handleGeolocationError({code:0,message:"Geolocation not supported."});return this}var k=a.bind(this._handleGeolocationResponse,this),j=a.bind(this._handleGeolocationError,this);if(i.watch){this._locationWatchId=navigator.geolocation.watchPosition(k,j,i)}else{navigator.geolocation.getCurrentPosition(k,j,i)}return this},stopLocate:function(){if(navigator.geolocation){navigator.geolocation.clearWatch(this._locationWatchId)}if(this._locateOptions){this._locateOptions.setView=false}return this},_handleGeolocationError:function(i){var k=i.code,j=i.message||(k===1?"permission denied":(k===2?"position unavailable":"timeout"));if(this._locateOptions.setView&&!this._loaded){this.fitWorld()}this.fire("locationerror",{code:k,message:"Geolocation error: "+j+"."})},_handleGeolocationResponse:function(p){var o=p.coords.latitude,r=p.coords.longitude,k=new a.LatLng(o,r),q=180*p.coords.accuracy/40075017,l=q/Math.cos(a.LatLng.DEG_TO_RAD*o),j=a.latLngBounds([o-q,r-l],[o+q,r+l]),t=this._locateOptions;if(t.setView){var s=Math.min(this.getBoundsZoom(j),t.maxZoom);this.setView(k,s)}var n={latlng:k,bounds:j,timestamp:p.timestamp};for(var m in p.coords){if(typeof p.coords[m]==="number"){n[m]=p.coords[m]}}this.fire("locationfound",n)}})}(window,document));!function(d,c){"object"==typeof exports?module.exports=c():"function"==typeof define&&define.amd?define(c):d.Spinner=c()}(this,function(){function F(g,e){var i,h=document.createElement(g||"div");for(i in e){h[i]=e[i]}return h}function E(e){for(var d=1,g=arguments.length;g>d;d++){e.appendChild(arguments[d])}return e}function D(H,G,p,o){var n=["opacity",G,~~(100*H),p,o].join("-"),m=0.01+p/o*100,l=Math.max(1-(1-H)/G*(100-m),H),k=v.substring(0,v.indexOf("Animation")).toLowerCase(),j=k&&"-"+k+"-"||"";return t[n]||(s.insertRule("@"+j+"keyframes "+n+"{0%{opacity:"+l+"}"+m+"%{opacity:"+H+"}"+(m+0.01)+"%{opacity:1}"+(m+G)%100+"%{opacity:"+H+"}100%{opacity:"+l+"}}",s.cssRules.length),t[n]=1),n}function C(h,g){var k,j,i=h.style;for(g=g.charAt(0).toUpperCase()+g.slice(1),j=0;j<u.length;j++){if(k=u[j]+g,void 0!==i[k]){return k}}return void 0!==i[g]?g:void 0}function B(e,d){for(var g in d){e.style[C(e,g)||g]=d[g]}return e}function A(g){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var h in i){void 0===g[h]&&(g[h]=i[h])}}return g}function z(d){for(var c={x:d.offsetLeft,y:d.offsetTop};d=d.offsetParent;){c.x+=d.offsetLeft,c.y+=d.offsetTop}return c}function y(d,c){return"string"==typeof d?d:d[c%d.length]}function x(b){return"undefined"==typeof this?new x(b):(this.opts=A(b||{},x.defaults,r),void 0)}function w(){function a(d,e){return F("<"+d+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}s.addRule(".spin-vml","behavior:url(#default#VML)"),x.prototype.lines=function(H,G){function p(){return B(a("group",{coordsize:e+" "+e,coordorigin:-h+" "+-h}),{width:e,height:e})}function o(d,k,j){E(b,E(B(p(),{rotation:360/G.lines*d+"deg",left:~~k}),E(B(a("roundrect",{arcsize:G.corners}),{width:h,height:G.width,left:G.radius,top:-G.width>>1,filter:j}),a("fill",{color:y(G.color,d),opacity:G.opacity}),a("stroke",{opacity:0}))))}var n,h=G.length+G.width,e=2*h,c=2*-(G.width+G.length)+"px",b=B(p(),{position:"absolute",top:c,left:c});if(G.shadow){for(n=1;n<=G.lines;n++){o(n,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)")}}for(n=1;n<=G.lines;n++){o(n)}return E(H,b)},x.prototype.opacity=function(h,g,k,j){var i=h.firstChild;j=j.shadow&&j.lines||0,i&&g+j<i.childNodes.length&&(i=i.childNodes[g+j],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=k))}}var v,u=["webkit","Moz","ms","O"],t={},s=function(){var a=F("style",{type:"text/css"});return E(document.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),r={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:0.25,fps:20,zIndex:2000000000,className:"spinner",top:"auto",left:"auto",position:"relative"};x.defaults={},A(x.prototype,{spin:function(Q){this.stop();var P,O,N=this,M=N.opts,K=N.el=B(F(0,{className:M.className}),{position:M.position,width:0,zIndex:M.zIndex}),J=M.radius+M.length+M.width;if(Q&&(Q.insertBefore(K,Q.firstChild||null),O=z(Q),P=z(K),B(K,{left:("auto"==M.left?O.x-P.x+(Q.offsetWidth>>1):parseInt(M.left,10)+J)+"px",top:("auto"==M.top?O.y-P.y+(Q.offsetHeight>>1):parseInt(M.top,10)+J)+"px"})),K.setAttribute("role","progressbar"),N.lines(K,N.opts),!v){var I,H=0,G=(M.lines-1)*(1-M.direction)/2,k=M.fps,g=k/M.speed,e=(1-M.opacity)/(g*M.trail/100),a=g/M.lines;!function R(){H++;for(var b=0;b<M.lines;b++){I=Math.max(1-(H+(M.lines-b)*a)%g*e,M.opacity),N.opacity(K,b*M.direction+G,I,M)}N.timeout=N.el&&setTimeout(R,~~(1000/k))}()}return N},stop:function(){var b=this.el;return b&&(clearTimeout(this.timeout),b.parentNode&&b.parentNode.removeChild(b),this.el=void 0),this},lines:function(k,h){function e(d,g){return B(F(),{position:"absolute",width:h.length+h.width+"px",height:h.width+"px",background:d,boxShadow:g,transformOrigin:"left",transform:"rotate("+~~(360/h.lines*b+h.rotate)+"deg) translate("+h.radius+"px,0)",borderRadius:(h.corners*h.width>>1)+"px"})}for(var c,b=0,a=(h.lines-1)*(1-h.direction)/2;b<h.lines;b++){c=B(F(),{position:"absolute",top:1+~(h.width/2)+"px",transform:h.hwaccel?"translate3d(0,0,0)":"",opacity:h.opacity,animation:v&&D(h.opacity,h.trail,a+b*h.direction,h.lines)+" "+1/h.speed+"s linear infinite"}),h.shadow&&E(c,B(e("#000","0 0 4px #000"),{top:"2px"})),E(k,E(c,e(y(h.color,b),"0 0 1px rgba(0,0,0,.1)")))}return k},opacity:function(e,d,g){d<e.childNodes.length&&(e.childNodes[d].style.opacity=g)}});var q=B(F("group"),{behavior:"url(#default#VML)"});return !C(q,"transform")&&q.adj?w():v=C(q,"animation"),x});if(window.jQuery){(function(a){a.extend({xml2json:function(h,b){if(!h){return{}}function e(l,k){if(!l){return null}var o="",n=null,r=null;var q=l.nodeType,s=i(l.localName||l.nodeName);var p=l.text||l.nodeValue||"";if(l.childNodes){if(l.childNodes.length>0){a.each(l.childNodes,function(x,w){var u=w.nodeType,v=i(w.localName||w.nodeName);var t=w.text||w.nodeValue||"";if(u==8){return}else{if(u==3||u==4||!v){if(t.match(/^\s+$/)){return}o+=t.replace(/^\s+/,"").replace(/\s+$/,"")}else{n=n||{};if(n[v]){if(!n[v].length){n[v]=d(n[v])}n[v]=d(n[v]);n[v][n[v].length]=e(w,true);n[v].length=n[v].length}else{n[v]=e(w)}}}})}}if(l.attributes){if(l.attributes.length>0){r={};n=n||{};a.each(l.attributes,function(v,u){var w=i(u.name),t=u.value;r[w]=t;if(n[w]){n[cnn]=d(n[cnn]);n[w][n[w].length]=t;n[w].length=n[w].length}else{n[w]=t}})}}if(n){n=a.extend((o!=""?new String(o):{}),n||{});o=(n.text)?([n.text||""]).concat([o]):o;if(o){n.text=o}o=""}var m=n||o;if(b){if(o){m={}}o=m.text||o||"";if(o){m.text=o}if(!k){m=d(m)}}return m}var i=function(k){return String(k||"").replace(/-/g,"_")};function j(k){var l=/^((-)?([0-9]+)(([\.\,]{0,1})([0-9]+))?$)/;return(typeof k=="number")||l.test(String((k&&typeof k=="string")?jQuery.trim(k):""))}var d=function(k){if(!a.isArray(k)){k=[k]}k.length=k.length;return k};if(typeof h=="string"){h=a.text2xml(h)}if(!h.nodeType){return}if(h.nodeType==3||h.nodeType==4){return h.nodeValue}var c=(h.nodeType==9)?h.documentElement:h;var g=e(c,true);h=null;c=null;return g},text2xml:function(b){return a.parseXML(b)}})})(jQuery);
/*!
 * Add to Homescreen v2.0.1 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
}var addToHome=(function(o){var j=o.navigator,k="platform" in j&&(/iphone|ipod|ipad/gi).test(j.platform),y,p,A,D,e,z=0,v=0,x=0,g,b,E,a,m,l,n,d={autostart:true,returningVisitor:true,animationIn:"drop",animationOut:"fade",startDelay:100,lifespan:15000,bottomOffset:14,expire:0,message:"",touchIcon:false,arrow:true,hookOnLoad:true,iterations:100},r={ca_es:"Per instal·lar aquesta aplicació al vostre %device premeu %icon i llavors <strong>Afegir a pantalla d'inici</strong>.",cs_cz:"Pro instalaci aplikace na Váš %device, stiskněte %icon a v nabídce <strong>Přidat na plochu</strong>.",da_dk:"Tilføj denne side til din %device: tryk på %icon og derefter <strong>Føj til hjemmeskærm</strong>.",de_de:"Installieren Sie diese App auf Ihrem %device: %icon antippen und dann <strong>Zum Home-Bildschirm</strong>.",el_gr:"Εγκαταστήσετε αυτήν την Εφαρμογή στήν συσκευή σας %device: %icon μετά πατάτε <strong>Προσθήκη σε Αφετηρία</strong>.",en_us:"Install this web app on your %device: tap %icon and then <strong>Add to Home Screen</strong>.",es_es:"Para instalar esta app en su %device, pulse %icon y seleccione <strong>Añadir a pantalla de inicio</strong>.",fi_fi:"Asenna tämä web-sovellus laitteeseesi %device: paina %icon ja sen jälkeen valitse <strong>Lisää Koti-valikkoon</strong>.",fr_fr:"Ajoutez cette application sur votre %device en cliquant sur %icon, puis <strong>Ajouter à l'écran d'accueil</strong>.",he_il:'<span dir="rtl">התקן אפליקציה זו על ה-%device שלך: הקש %icon ואז <strong>הוסף למסך הבית</strong>.</span>',hu_hu:"Telepítse ezt a web-alkalmazást az Ön %device-jára: nyomjon a %icon-ra majd a <strong>Főképernyőhöz adás</strong> gombra.",it_it:"Installa questa applicazione sul tuo %device: premi su %icon e poi <strong>Aggiungi a Home</strong>.",ja_jp:"このウェブアプリをあなたの%deviceにインストールするには%iconをタップして<strong>ホーム画面に追加</strong>を選んでください。",ko_kr:'%device에 웹앱을 설치하려면 %icon을 터치 후 "홈화면에 추가"를 선택하세요',nb_no:"Installer denne appen på din %device: trykk på %icon og deretter <strong>Legg til på Hjem-skjerm</strong>",nl_nl:"Installeer deze webapp op uw %device: tik %icon en dan <strong>Zet in beginscherm</strong>.",pl_pl:"Aby zainstalować tę aplikacje na %device: naciśnij %icon a następnie <strong>Dodaj jako ikonę</strong>.",pt_br:"Instale este web app em seu %device: aperte %icon e selecione <strong>Adicionar à Tela Inicio</strong>.",pt_pt:"Para instalar esta aplicação no seu %device, prima o %icon e depois o <strong>Adicionar ao ecrã principal</strong>.",ru_ru:"Установите это веб-приложение на ваш %device: нажмите %icon, затем <strong>Добавить в «Домой»</strong>.",sv_se:"Lägg till denna webbapplikation på din %device: tryck på %icon och därefter <strong>Lägg till på hemskärmen</strong>.",th_th:"ติดตั้งเว็บแอพฯ นี้บน %device ของคุณ: แตะ %icon และ <strong>เพิ่มที่หน้าจอโฮม</strong>",tr_tr:"%device için bu uygulamayı kurduktan sonra %icon simgesine dokunarak <strong>Ana Ekrana Ekle</strong>yin.",zh_cn:"您可以将此应用程式安装到您的 %device 上。请按 %icon 然后点选<strong>添加至主屏幕</strong>。",zh_tw:"您可以將此應用程式安裝到您的 %device 上。請按 %icon 然後點選<strong>加入主畫面螢幕</strong>。"};function u(){if(!k){return}var w=Date.now(),F;if(o.addToHomeConfig){for(F in o.addToHomeConfig){d[F]=o.addToHomeConfig[F]}}if(!d.autostart){d.hookOnLoad=false}y=(/ipad/gi).test(j.platform);p=o.devicePixelRatio&&o.devicePixelRatio>1;A=j.appVersion.match(/Safari/gi);D=j.standalone;e=j.appVersion.match(/OS (\d+_\d+)/i);e=e[1]?+e[1].replace("_","."):0;x=+o.localStorage.getItem("addToHome");b=o.sessionStorage.getItem("addToHomeSession");E=d.returningVisitor?x&&x+28*24*60*60*1000>w:true;if(!x){x=w}g=E&&x<=w;if(d.hookOnLoad){o.addEventListener("load",t,false)}else{if(!d.hookOnLoad&&d.autostart){t()}}}function t(){o.removeEventListener("load",t,false);if(!E){o.localStorage.setItem("addToHome",Date.now())}else{if(d.expire&&g){o.localStorage.setItem("addToHome",Date.now()+d.expire*60000)}}if(!m&&(!A||!g||b||D||!E)){return}var J=d.touchIcon?document.querySelectorAll("head link[rel=apple-touch-icon],head link[rel=apple-touch-icon-precomposed]"):[],K,H="",G,w=j.platform.split(" ")[0],M=j.language.replace("-","_"),I,F;a=document.createElement("div");a.id="addToHomeScreen";a.style.cssText+="left:-9999px;-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0;-webkit-transform:translate3d(0,0,0);position:"+(e<5?"absolute":"fixed");if(d.message in r){M=d.message;d.message=""}if(d.message===""){d.message=M in r?r[M]:r.en_us}if(J.length){for(I=0,F=J.length;I<F;I++){K=J[I].getAttribute("sizes");if(K){if(p&&K=="114x114"){H=J[I].href;break}}else{H=J[I].href}}H='<span style="background-image:url('+H+')" class="addToHomeTouchIcon"></span>'}a.className=(y?"addToHomeIpad":"addToHomeIphone")+(H?" addToHomeWide":"");a.innerHTML=H+d.message.replace("%device",w).replace("%icon",e>=4.2?'<span class="addToHomeShare"></span>':'<span class="addToHomePlus">+</span>')+(d.arrow?'<span class="addToHomeArrow"></span>':"")+'<span class="addToHomeClose">\u00D7</span>';document.body.appendChild(a);G=a.querySelector(".addToHomeClose");if(G){G.addEventListener("click",h,false)}setTimeout(C,d.startDelay)}function C(){var F,w=160;if(y){if(e<5){v=o.scrollY;z=o.scrollX;w=208}a.style.top=v+d.bottomOffset+"px";a.style.left=z+w-Math.round(a.offsetWidth/2)+"px";switch(d.animationIn){case"drop":F="0.6s";a.style.webkitTransform="translate3d(0,"+-(o.scrollY+d.bottomOffset+a.offsetHeight)+"px,0)";break;case"bubble":F="0.6s";a.style.opacity="0";a.style.webkitTransform="translate3d(0,"+(v+50)+"px,0)";break;default:F="1s";a.style.opacity="0"}}else{v=o.innerHeight+o.scrollY;if(e<5){z=Math.round((o.innerWidth-a.offsetWidth)/2)+o.scrollX;a.style.left=z+"px";a.style.top=v-a.offsetHeight-d.bottomOffset+"px"}else{a.style.left="50%";a.style.marginLeft=-Math.round(a.offsetWidth/2)+"px";a.style.bottom=d.bottomOffset+"px"}switch(d.animationIn){case"drop":F="1s";a.style.webkitTransform="translate3d(0,"+-(v+d.bottomOffset)+"px,0)";break;case"bubble":F="0.6s";a.style.webkitTransform="translate3d(0,"+(a.offsetHeight+d.bottomOffset+50)+"px,0)";break;default:F="1s";a.style.opacity="0"}}a.offsetHeight;a.style.webkitTransitionDuration=F;a.style.opacity="1";a.style.webkitTransform="translate3d(0,0,0)";a.addEventListener("webkitTransitionEnd",i,false);n=setTimeout(q,d.lifespan)}function s(w){if(!k||a){return}m=w;t()}function q(){clearInterval(l);clearTimeout(n);n=null;var H=0,I=0,F="1",G="0",w=a.querySelector(".addToHomeClose");if(w){w.removeEventListener("click",q,false)}if(e<5){H=y?o.scrollY-v:o.scrollY+o.innerHeight-v;I=y?o.scrollX-z:o.scrollX+Math.round((o.innerWidth-a.offsetWidth)/2)-z}a.style.webkitTransitionProperty="-webkit-transform,opacity";switch(d.animationOut){case"drop":if(y){G="0.4s";F="0";H=H+50}else{G="0.6s";H=H+a.offsetHeight+d.bottomOffset+50}break;case"bubble":if(y){G="0.8s";H=H-a.offsetHeight-d.bottomOffset-50}else{G="0.4s";F="0";H=H-50}break;default:G="0.8s";F="0"}a.addEventListener("webkitTransitionEnd",i,false);a.style.opacity=F;a.style.webkitTransitionDuration=G;a.style.webkitTransform="translate3d("+I+"px,"+H+"px,0)"}function h(){o.sessionStorage.setItem("addToHomeSession","1");b=true;q()}function i(){a.removeEventListener("webkitTransitionEnd",i,false);a.style.webkitTransitionProperty="-webkit-transform";a.style.webkitTransitionDuration="0.2s";if(!n){a.parentNode.removeChild(a);a=null;return}if(e<5&&n){l=setInterval(c,d.iterations)}}function c(){var w=new WebKitCSSMatrix(o.getComputedStyle(a,null).webkitTransform),F=y?o.scrollY-v:o.scrollY+o.innerHeight-v,G=y?o.scrollX-z:o.scrollX+Math.round((o.innerWidth-a.offsetWidth)/2)-z;if(F==w.m42&&G==w.m41){return}a.style.webkitTransform="translate3d("+G+"px,"+F+"px,0)"}function B(){o.localStorage.removeItem("addToHome");o.sessionStorage.removeItem("addToHomeSession")}u();return{show:s,close:q,reset:B}})(this);
/*!
 * typeahead.js 0.10.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013 Twitter, Inc. and other contributors; Licensed MIT
 */
!function(H){var G={isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(b){return !b||/^\s*$/.test(b)},escapeRegExChars:function(b){return b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(b){return"string"==typeof b},isNumber:function(b){return"number"==typeof b},isArray:H.isArray,isFunction:H.isFunction,isObject:H.isPlainObject,isUndefined:function(b){return"undefined"==typeof b},bind:H.proxy,each:function(a,g){function e(d,c){return g(c,d)}H.each(a,e)},map:H.map,filter:H.grep,every:function(a,g){var e=!0;return a?(H.each(a,function(b,c){return(e=g.call(null,c,b,a))?void 0:!1}),!!e):e},some:function(a,g){var e=!1;return a?(H.each(a,function(b,c){return(e=g.call(null,c,b,a))?!1:void 0}),!!e):e},mixin:H.extend,getUniqueId:function(){var b=0;return function(){return b++}}(),templatify:function(a){function d(){return String(a)}return H.isFunction(a)?a:d},defer:function(b){setTimeout(b,0)},debounce:function(h,g,k){var j,i;return function(){var d,c,b=this,a=arguments;return d=function(){j=null,k||(i=h.apply(b,a))},c=k&&!j,clearTimeout(j),j=setTimeout(d,g),c&&(i=h.apply(b,a)),i}},throttle:function(j,i){var p,o,n,m,l,k;return l=0,k=function(){l=new Date,n=null,m=j.apply(p,o)},function(){var b=new Date,a=i-(b-l);return p=this,o=arguments,0>=a?(clearTimeout(n),n=null,l=b,m=j.apply(p,o)):n||(n=setTimeout(k,a)),m}},noop:function(){}},F="0.10.1",E=function(){function b(c){this.maxSize=c||100,this.size=0,this.hash={},this.list=new g}function g(){this.head=this.tail=null}function e(d,c){this.key=d,this.val=c,this.prev=this.next=null}return G.mixin(b.prototype,{set:function(h,d){var j,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key]),(j=this.hash[h])?(j.val=d,this.list.moveToFront(j)):(j=new e(h,d),this.list.add(j),this.hash[h]=j,this.size++)},get:function(d){var c=this.hash[d];return c?(this.list.moveToFront(c),c.val):void 0}}),G.mixin(g.prototype,{add:function(c){this.head&&(c.next=this.head,this.head.prev=c),this.head=c,this.tail=this.tail||c},remove:function(c){c.prev?c.prev.next=c.next:this.head=c.next,c.next?c.next.prev=c.prev:this.tail=c.prev},moveToFront:function(c){this.remove(c),this.add(c)}}),b}(this),D=function(){function b(c){this.prefix=["__",c,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+this.prefix)}function n(){return(new Date).getTime()}function m(c){return JSON.stringify(G.isUndefined(c)?null:c)}function l(c){return JSON.parse(c)}var k,j;try{k=window.localStorage,k.setItem("~~~","!"),k.removeItem("~~~")}catch(i){k=null}return j=k&&window.JSON?{_prefix:function(c){return this.prefix+c},_ttlKey:function(c){return this._prefix(c)+this.ttlKey},get:function(c){return this.isExpired(c)&&this.remove(c),l(k.getItem(this._prefix(c)))},set:function(c,h,d){return G.isNumber(d)?k.setItem(this._ttlKey(c),m(n()+d)):k.removeItem(this._ttlKey(c)),k.setItem(this._prefix(c),m(h))},remove:function(c){return k.removeItem(this._ttlKey(c)),k.removeItem(this._prefix(c)),this},clear:function(){var g,e,o=[],h=k.length;for(g=0;h>g;g++){(e=k.key(g)).match(this.keyMatcher)&&o.push(e.replace(this.keyMatcher,""))}for(g=o.length;g--;){this.remove(o[g])}return this},isExpired:function(c){var e=l(k.getItem(this._ttlKey(c)));return G.isNumber(e)&&n()>e?!0:!1}}:{get:G.noop,set:G.noop,remove:G.noop,clear:G.noop,isExpired:G.noop},G.mixin(b.prototype,j),b}(),C=function(){function l(c){c=c||{},this._send=c.transport?k(c.transport):H.ajax,this._get=c.rateLimiter?c.rateLimiter(this._get):this._get}function k(e){return function(o,n){function m(g){G.defer(function(){c.resolve(g)})}function i(g){G.defer(function(){c.reject(g)})}var c=H.Deferred();return e(o,n,m,i),c}}var j=0,d={},b=6,a=new E(10);return l.setMaxPendingRequests=function(c){b=c},l.resetCache=function(){a=new E(10)},G.mixin(l.prototype,{_get:function(h,g,p){function o(c){p&&p(c),a.set(h,c)}function n(){j--,delete d[h],i.onDeckRequestArgs&&(i._get.apply(i,i.onDeckRequestArgs),i.onDeckRequestArgs=null)}var m,i=this;(m=d[h])?m.done(o):b>j?(j++,d[h]=this._send(h,g).done(o).always(n)):this.onDeckRequestArgs=[].slice.call(arguments,0)},get:function(g,m,i){var h;return G.isFunction(m)&&(i=m,m={}),(h=a.get(g))?G.defer(function(){i&&i(h)}):this._get(g,m,i),!!h}}),l}(),B=function(){function j(c){c=c||{},c.datumTokenizer&&c.queryTokenizer||H.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=c.datumTokenizer,this.queryTokenizer=c.queryTokenizer,this.datums=[],this.trie=h()}function i(c){return c=G.filter(c,function(d){return !!d}),c=G.map(c,function(d){return d.toLowerCase()})}function h(){return{ids:[],children:{}}}function b(g){for(var e={},l=[],k=0;k<g.length;k++){e[g[k]]||(e[g[k]]=!0,l.push(g[k]))}return l}function a(k,g){function o(d,c){return d-c}var n=0,m=0,l=[];for(k=k.sort(o),g=g.sort(o);n<k.length&&m<g.length;){k[n]<g[m]?n++:k[n]>g[m]?m++:(l.push(k[n]),n++,m++)}return l}return G.mixin(j.prototype,{bootstrap:function(c){this.datums=c.datums,this.trie=c.trie},add:function(d){var e=this;d=G.isArray(d)?d:[d],G.each(d,function(c){var l,k;l=e.datums.push(c)-1,k=i(e.datumTokenizer(c)),G.each(k,function(n){var m,p,o;for(m=e.trie,p=n.split("");o=p.shift();){m=m.children[o]||(m.children[o]=h()),m.ids.push(l)}})})},get:function(d){var l,k,g=this;return l=i(this.queryTokenizer(d)),G.each(l,function(m){var e,p,o,n;if(k&&0===k.length){return !1}for(e=g.trie,p=m.split("");e&&(o=p.shift());){e=e.children[o]}return e&&0===p.length?(n=e.ids.slice(0),void (k=k?a(k,n):n)):(k=[],!1)}),k?G.map(b(k),function(c){return g.datums[c]}):[]},serialize:function(){return{datums:this.datums,trie:this.trie}}}),j}(),A=function(){function c(d){var e=d.local||null;return G.isFunction(e)&&(e=e.call(null)),e}function b(i){var h,g;return g={url:null,thumbprint:"",ttl:86400000,filter:null,ajax:{}},(h=i.prefetch||null)&&(h=G.isString(h)?{url:h}:h,h=G.mixin(g,h),h.thumbprint=F+h.thumbprint,h.ajax.type=h.ajax.type||"GET",h.ajax.dataType=h.ajax.dataType||"json",!h.url&&H.error("prefetch requires url to be set")),h}function a(l){function k(d){return function(e){return G.debounce(e,d)}}function j(d){return function(e){return G.throttle(e,d)}}var i,h;return h={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(i=l.remote||null)&&(i=G.isString(i)?{url:i}:i,i=G.mixin(h,i),i.rateLimiter=/^throttle$/i.test(i.rateLimitBy)?j(i.rateLimitWait):k(i.rateLimitWait),i.ajax.type=i.ajax.type||"GET",i.ajax.dataType=i.ajax.dataType||"json",delete i.rateLimitBy,delete i.rateLimitWait,!i.url&&H.error("remote requires url to be set")),i}return{local:c,prefetch:b,remote:a}}(),z=(window.Bloodhound=function(){function g(c){c&&(c.local||c.prefetch||c.remote)||H.error("one of local, prefetch, or remote is required"),this.limit=c.limit||5,this.sorter=e(c.sorter),this.dupDetector=c.dupDetector||b,this.local=A.local(c),this.prefetch=A.prefetch(c),this.remote=A.remote(c),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new B({datumTokenizer:c.datumTokenizer,queryTokenizer:c.queryTokenizer}),this.storage=this.cacheKey?new D(this.cacheKey):null}function e(h){function j(c){return c.sort(h)}function i(c){return c}return G.isFunction(h)?j:i}function b(){return !1}var a;return a={data:"data",protocol:"protocol",thumbprint:"thumbprint"},g.tokenizers={whitespace:function(c){return c.split(/\s+/)},nonword:function(c){return c.split(/\W+/)}},G.mixin(g.prototype,{_loadPrefetch:function(h){function l(d){var m;m=h.filter?h.filter(d):d,i.add(m),i._saveToStorage(i.index.serialize(),h.thumbprint,h.ttl)}var k,j,i=this;return(k=this._readFromStorage(h.thumbprint))?(this.index.bootstrap(k),j=H.Deferred().resolve()):j=H.ajax(h.url,h.ajax).done(l),j},_getFromRemote:function(i,h){function m(d){var n=j.remote.filter?j.remote.filter(d):d;h(n)}var l,k,j=this;return i=i||"",k=encodeURIComponent(i),l=this.remote.replace?this.remote.replace(this.remote.url,i):this.remote.url.replace(this.remote.wildcard,k),this.transport.get(l,this.remote.ajax,m)},_saveToStorage:function(h,d,i){this.storage&&(this.storage.set(a.data,h,i),this.storage.set(a.protocol,location.protocol,i),this.storage.set(a.thumbprint,d,i))},_readFromStorage:function(h){var d,i={};return this.storage&&(i.data=this.storage.get(a.data),i.protocol=this.storage.get(a.protocol),i.thumbprint=this.storage.get(a.thumbprint)),d=i.thumbprint!==h||i.protocol!==location.protocol,i.data&&!d?i.data:null},initialize:function(){function h(){i.add(i.local)}var j,i=this;return j=this.prefetch?this._loadPrefetch(this.prefetch):H.Deferred().resolve(),this.local&&j.done(h),this.transport=this.remote?new C(this.remote):null,this.initialize=function(){return j.promise()},j.promise()},add:function(c){this.index.add(c)},get:function(h,m){function l(c){var n=k.slice(0);G.each(c,function(d){var o;return o=G.some(n,function(p){return j.dupDetector(d,p)}),!o&&n.push(d),n.length<j.limit}),m&&m(j.sorter(n))}var k,j=this,i=!1;k=this.index.get(h),k=this.sorter(k).slice(0,this.limit),k.length<this.limit&&this.transport&&(i=this._getFromRemote(h,l)),!i&&m&&m(k)},ttAdapter:function(){return G.bind(this.get,this)}}),g}(),{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion">%BODY%</div>'}),y={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};G.isMsie()&&G.mixin(y.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),G.isMsie()&&G.isMsie()<=7&&G.mixin(y.input,{marginTop:"-1px"});var x=function(){function b(c){c&&c.el||H.error("EventBus initialized without el"),this.$el=H(c.el)}var a="typeahead:";return G.mixin(b.prototype,{trigger:function(d){var c=[].slice.call(arguments,1);this.$el.trigger(a+d,c)}}),b}(),w=function(){function K(h,g,M,j){var i;if(!M){return this}for(g=g.split(l),M=j?m(M,j):M,this._callbacks=this._callbacks||{};i=g.shift();){this._callbacks[i]=this._callbacks[i]||{sync:[],async:[]},this._callbacks[i][h].push(M)}return this}function J(a,g,e){return K.call(this,"async",a,g,e)}function I(a,g,e){return K.call(this,"sync",a,g,e)}function q(d){var c;if(!this._callbacks){return this}for(d=d.split(l);c=d.shift();){delete this._callbacks[c]}return this}function p(i){var h,O,N,M,j;if(!this._callbacks){return this}for(i=i.split(l),N=[].slice.call(arguments,1);(h=i.shift())&&(O=this._callbacks[h]);){M=o(O.sync,this,[h].concat(N)),j=o(O.async,this,[h].concat(N)),M()&&k(j)}return this}function o(g,e,i){function h(){for(var b,a=0;!b&&a<g.length;a+=1){b=g[a].apply(e,i)===!1}return !b}return h}function n(){var b;return b=window.setImmediate?function(c){setImmediate(function(){c()})}:function(c){setTimeout(function(){c()},0)}}function m(d,c){return d.bind?d.bind(c):function(){d.apply(c,[].slice.call(arguments,0))}}var l=/\s+/,k=n();return{onSync:I,onAsync:J,off:q,trigger:p}}(),v=function(b){function g(h,m,l){for(var k,j=[],i=0;i<h.length;i++){j.push(G.escapeRegExChars(h[i]))}return k=l?"\\b("+j.join("|")+")\\b":"("+j.join("|")+")",m?new RegExp(k):new RegExp(k,"i")}var e={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(i){function d(h){var k,j;return(k=a.exec(h.data))&&(wrapperNode=b.createElement(i.tagName),i.className&&(wrapperNode.className=i.className),j=h.splitText(k.index),j.splitText(k[0].length),wrapperNode.appendChild(j.cloneNode(!0)),h.parentNode.replaceChild(wrapperNode,j)),!!k}function c(j,h){for(var m,l=3,k=0;k<j.childNodes.length;k++){m=j.childNodes[k],m.nodeType===l?k+=h(m)?1:0:c(m,h)}}var a;i=G.mixin({},e,i),i.node&&i.pattern&&(i.pattern=G.isArray(i.pattern)?i.pattern:[i.pattern],a=g(i.pattern,i.caseSensitive,i.wordsOnly),c(i.node,d))}}(window.document),u=function(){function j(n){var m,l,k,g,d=this;n=n||{},n.input||H.error("input is missing"),m=G.bind(this._onBlur,this),l=G.bind(this._onFocus,this),k=G.bind(this._onKeydown,this),g=G.bind(this._onInput,this),this.$hint=H(n.hint),this.$input=H(n.input).on("blur.tt",m).on("focus.tt",l).on("keydown.tt",k),0===this.$hint.length&&(this.setHintValue=this.getHintValue=this.clearHint=G.noop),G.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(c){a[c.which||c.keyCode]||G.defer(G.bind(d._onInput,d,c))}):this.$input.on("input.tt",g),this.query=this.$input.val(),this.$overflowHelper=i(this.$input)}function i(c){return H('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"nowrap",fontFamily:c.css("font-family"),fontSize:c.css("font-size"),fontStyle:c.css("font-style"),fontVariant:c.css("font-variant"),fontWeight:c.css("font-weight"),wordSpacing:c.css("word-spacing"),letterSpacing:c.css("letter-spacing"),textIndent:c.css("text-indent"),textRendering:c.css("text-rendering"),textTransform:c.css("text-transform")}).insertAfter(c)}function h(d,c){return j.normalizeQuery(d)===j.normalizeQuery(c)}function b(c){return c.altKey||c.ctrlKey||c.metaKey||c.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},j.normalizeQuery=function(c){return(c||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},G.mixin(j.prototype,w,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(d){var c=a[d.which||d.keyCode];this._managePreventDefault(c,d),c&&this._shouldTrigger(c,d)&&this.trigger(c+"Keyed",d)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(k,g){var n,m,l;switch(k){case"tab":m=this.getHintValue(),l=this.getInputValue(),n=m&&m!==l&&!b(g);break;case"up":case"down":n=!b(g);break;default:n=!1}n&&g.preventDefault()},_shouldTrigger:function(e,d){var g;switch(e){case"tab":g=!b(d);break;default:g=!0}return g},_checkInputValue:function(){var e,d,g;e=this.getInputValue(),d=h(e,this.query),g=d?this.query.length!==e.length:!1,d?g&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query=e)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(c){this.query=c},getInputValue:function(){return this.$input.val()},setInputValue:function(d,c){this.$input.val(d),!c&&this._checkInputValue()},getHintValue:function(){return this.$hint.val()},setHintValue:function(c){this.$hint.val(c)},resetInputValue:function(){this.$input.val(this.query)},clearHint:function(){this.$hint.val("")},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var c=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=c},isCursorAtEnd:function(){var e,k,g;return e=this.$input.val().length,k=this.$input[0].selectionStart,G.isNumber(k)?k===e:document.selection?(g=document.selection.createRange(),g.moveStart("character",-e),e===g.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),j}(),t=function(){function n(d){d=d||{},d.templates=d.templates||{},d.source||H.error("missing source"),d.name&&!j(d.name)&&H.error("invalid dataset name: "+d.name),this.query=null,this.highlight=!!d.highlight,this.name=d.name||G.getUniqueId(),this.source=d.source,this.displayFn=m(d.display||d.displayKey),this.templates=l(d.templates,this.displayFn),this.$el=H(z.dataset.replace("%CLASS%",this.name))}function m(d){function e(c){return c[d]}return d=d||"value",G.isFunction(d)?d:e}function l(e,h){function g(c){return"<p>"+h(c)+"</p>"}return{empty:e.empty&&G.templatify(e.empty),header:e.header&&G.templatify(e.header),footer:e.footer&&G.templatify(e.footer),suggestion:e.suggestion||g}}function j(c){return/^[_a-zA-Z0-9-]+$/.test(c)}var i="ttDataset",b="ttValue",a="ttDatum";return n.extractDatasetName=function(c){return H(c).data(i)},n.extractValue=function(c){return H(c).data(b)},n.extractDatum=function(c){return H(c).data(a)},G.mixin(n.prototype,w,{_render:function(M,J){function q(){return k.templates.empty({query:M,isEmpty:!0})}function h(){function o(p){var P,O,N;return O=k.templates.suggestion(p),N=z.suggestion.replace("%BODY%",O),P=H(N).data(i,k.name).data(b,k.displayFn(p)).data(a,p),P.children().each(function(){H(this).css(y.suggestionChild)}),P}var d,c;return d=H(z.suggestions).css(y.suggestions),c=G.map(J,o),d.append.apply(d,c),k.highlight&&v({node:d[0],pattern:M}),d}function g(){return k.templates.header({query:M,isEmpty:!I})}function K(){return k.templates.footer({query:M,isEmpty:!I})}if(this.$el){var I,k=this;this.$el.empty(),I=J&&J.length,!I&&this.templates.empty?this.$el.html(q()).prepend(k.templates.header?g():null).append(k.templates.footer?K():null):I&&this.$el.html(h()).prepend(k.templates.header?g():null).append(k.templates.footer?K():null),this.trigger("rendered")}},getRoot:function(){return this.$el},update:function(e){function d(c){e===g.query&&g._render(e,c)}var g=this;this.query=e,this.source(e,d)},clear:function(){this._render(this.query||"")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=null}}),n}(),s=function(){function b(l){var k,j,i,d=this;l=l||{},l.menu||H.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=G.map(l.datasets,a),k=G.bind(this._onSuggestionClick,this),j=G.bind(this._onSuggestionMouseEnter,this),i=G.bind(this._onSuggestionMouseLeave,this),this.$menu=H(l.menu).on("click.tt",".tt-suggestion",k).on("mouseenter.tt",".tt-suggestion",j).on("mouseleave.tt",".tt-suggestion",i),G.each(this.datasets,function(c){d.$menu.append(c.getRoot()),c.onSync("rendered",d._onRendered,d)})}function a(c){return new t(c)}return G.mixin(b.prototype,w,{_onSuggestionClick:function(c){this.trigger("suggestionClicked",H(c.currentTarget))},_onSuggestionMouseEnter:function(c){this._removeCursor(),this._setCursor(H(c.currentTarget),!0)},_onSuggestionMouseLeave:function(){this._removeCursor()},_onRendered:function(){function c(d){return d.isEmpty()}this.isEmpty=G.every(this.datasets,c),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function(){return this.$menu.find(".tt-suggestion")},_getCursor:function(){return this.$menu.find(".tt-cursor").first()},_setCursor:function(d,c){d.first().addClass("tt-cursor"),!c&&this.trigger("cursorMoved")},_removeCursor:function(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function(h){var g,k,j,i;if(this.isOpen){if(k=this._getCursor(),g=this._getSuggestions(),this._removeCursor(),j=g.index(k)+h,j=(j+1)%(g.length+1)-1,-1===j){return void this.trigger("cursorRemoved")}-1>j&&(j=g.length-1),this._setCursor(i=g.eq(j)),this._ensureVisible(i)}},_ensureVisible:function(h){var g,k,j,i;g=h.position().top,k=g+h.outerHeight(!0),j=this.$menu.scrollTop(),i=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),0>g?this.$menu.scrollTop(j+g):k>i&&this.$menu.scrollTop(j+(k-i))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function(c){this.$menu.css("ltr"===c?y.ltr:y.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(d){var c=null;return d.length&&(c={raw:t.extractDatum(d),value:t.extractValue(d),datasetName:t.extractDatasetName(d)}),c},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function(d){function e(c){c.update(d)}G.each(this.datasets,e)},empty:function(){function c(d){d.clear()}G.each(this.datasets,c),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){function c(d){d.destroy()}this.$menu.off(".tt"),this.$menu=null,G.each(this.datasets,c)}}),b}(),r=function(){function j(m){var l,k,d;m=m||{},m.input||H.error("missing input"),this.autoselect=!!m.autoselect,this.minLength=G.isNumber(m.minLength)?m.minLength:1,this.$node=i(m.input,m.withHint),l=this.$node.find(".tt-dropdown-menu"),k=this.$node.find(".tt-input"),d=this.$node.find(".tt-hint"),this.eventBus=m.eventBus||new x({el:k}),this.dropdown=new s({menu:l,datasets:m.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new u({input:k,hint:d}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),l.on("mousedown.tt",function(c){G.isMsie()&&G.isMsie()<9&&(k[0].onbeforedeactivate=function(){window.event.returnValue=!1,k[0].onbeforedeactivate=null}),c.preventDefault()})}function i(e,q){var p,o,n,m;p=H(e),o=H(z.wrapper).css(y.wrapper),n=H(z.dropdown).css(y.dropdown),m=p.clone().css(y.hint).css(h(p)),m.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder").prop("disabled",!0).attr({autocomplete:"off",spellcheck:"false"}),p.data(a,{dir:p.attr("dir"),autocomplete:p.attr("autocomplete"),spellcheck:p.attr("spellcheck"),style:p.attr("style")}),p.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(q?y.input:y.inputWithNoHint);try{!p.attr("dir")&&p.attr("dir","auto")}catch(g){}return p.wrap(o).parent().prepend(q?m:null).append(n)}function h(c){return{backgroundAttachment:c.css("background-attachment"),backgroundClip:c.css("background-clip"),backgroundColor:c.css("background-color"),backgroundImage:c.css("background-image"),backgroundOrigin:c.css("background-origin"),backgroundPosition:c.css("background-position"),backgroundRepeat:c.css("background-repeat"),backgroundSize:c.css("background-size")}}function b(d){var e=d.find(".tt-input");G.each(e.data(a),function(c,g){G.isUndefined(c)?e.removeAttr(g):e.attr(g,c)}),e.detach().removeData(a).removeClass("tt-input").insertAfter(d),d.remove()}var a="ttAttrs";return G.mixin(j.prototype,{_onSuggestionClicked:function(e,d){var g;(g=this.dropdown.getDatumForSuggestion(d))&&this._select(g)},_onCursorMoved:function(){var c=this.dropdown.getDatumForCursor();this.input.clearHint(),this.input.setInputValue(c.value,!0),this.eventBus.trigger("cursorchanged",c.raw,c.datasetName)},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function(){this._updateHint()},_onOpened:function(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function(){this.dropdown.empty(),this.dropdown.open()},_onBlurred:function(){this.dropdown.close()},_onEnterKeyed:function(g,e){var l,k;l=this.dropdown.getDatumForCursor(),k=this.dropdown.getDatumForTopSuggestion(),l?(this._select(l),e.preventDefault()):this.autoselect&&k&&(this._select(k),e.preventDefault())},_onTabKeyed:function(e,d){var g;(g=this.dropdown.getDatumForCursor())?(this._select(g),d.preventDefault()):this._autocomplete()},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var c=this.input.getQuery();!this.dropdown.isOpen&&c.length>=this.minLength&&this.dropdown.update(c),this.dropdown.open(),this.dropdown.moveCursorUp()},_onDownKeyed:function(){var c=this.input.getQuery();!this.dropdown.isOpen&&c.length>=this.minLength&&this.dropdown.update(c),this.dropdown.open(),this.dropdown.moveCursorDown()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(d,c){this.input.clearHint(),this.dropdown.empty(),c.length>=this.minLength&&this.dropdown.update(c),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var c;this.dir!==(c=this.input.getLanguageDirection())&&(this.dir=c,this.$node.css("direction",c),this.dropdown.setLanguageDirection(c))},_updateHint:function(){var k,p,o,n,m,l;k=this.dropdown.getDatumForTopSuggestion(),k&&this.dropdown.isVisible()&&!this.input.hasOverflow()&&(p=this.input.getInputValue(),o=u.normalizeQuery(p),n=G.escapeRegExChars(o),m=new RegExp("^(?:"+n+")(.*$)","i"),l=m.exec(k.value),this.input.setHintValue(p+(l?l[1]:"")))},_autocomplete:function(){var e,d,g;e=this.input.getHintValue(),d=this.input.getQuery(),e&&d!==e&&this.input.isCursorAtEnd()&&(g=this.dropdown.getDatumForTopSuggestion(),g&&this.input.setInputValue(g.value),this.eventBus.trigger("autocompleted",g.raw,g.datasetName))},_select:function(c){this.input.clearHint(),this.input.setQuery(c.value),this.input.setInputValue(c.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",c.raw,c.datasetName),this.dropdown.close(),G.defer(G.bind(this.dropdown.empty,this.dropdown))},open:function(){this.dropdown.open()},close:function(){this.dropdown.close()},getQuery:function(){return this.input.getQuery()},setQuery:function(c){this.input.setInputValue(c)},destroy:function(){this.input.destroy(),this.dropdown.destroy(),b(this.$node),this.$node=null}}),j}();!function(){var g,b,a;g=H.fn.typeahead,b="ttTypeahead",a={initialize:function(i,h){function d(){var j,e,c=H(this);G.each(h,function(k){k.highlight=!!i.highlight}),e=new r({input:c,eventBus:j=new x({el:c}),withHint:G.isUndefined(i.hint)?!0:!!i.hint,minLength:i.minLength,autoselect:i.autoselect,datasets:h}),c.data(b,e)}return h=G.isArray(h)?h:[].slice.call(arguments,1),i=i||{},this.each(d)},open:function(){function c(){var d,e=H(this);(d=e.data(b))&&d.open()}return this.each(c)},close:function(){function c(){var d,e=H(this);(d=e.data(b))&&d.close()}return this.each(c)},val:function(d){function i(){var k,j=H(this);(k=j.data(b))&&k.setQuery(d)}function h(j){var e,k;return(e=j.data(b))&&(k=e.getQuery()),k}return arguments.length?this.each(i):h(this.first())},destroy:function(){function c(){var d,e=H(this);(d=e.data(b))&&(d.destroy(),e.removeData(b))}return this.each(c)}},H.fn.typeahead=function(c){return a[c]?a[c].apply(this,[].slice.call(arguments,1)):a.initialize.apply(this,arguments)},H.fn.typeahead.noConflict=function(){return H.fn.typeahead=g,this}}()}(window.jQuery);!function(b){var c=function(e,d){this.$element=b(e),this.options=b.extend({},b.fn.typeahead.defaults,d),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"==typeof this.options.autoSelect?this.options.autoSelect:!0,this.highlighter=this.options.highlighter||this.highlighter,this.updater=this.options.updater||this.updater,this.source=this.options.source,this.$menu=b(this.options.menu),this.shown=!1,this.listen(),this.showHintOnFocus="boolean"==typeof this.options.showHintOnFocus?this.options.showHintOnFocus:!1};c.prototype={constructor:c,select:function(){var d=this.$menu.find(".active").data("value");return(this.autoSelect||d)&&this.$element.val(this.updater(d)).change(),this.hide()},updater:function(d){return d},setSource:function(d){this.source=d},show:function(){var d,e=b.extend({},this.$element.position(),{height:this.$element[0].offsetHeight});return d="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight,this.$menu.insertAfter(this.$element).css({top:e.top+e.height+d,left:e.left}).show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(e){var d;return this.query="undefined"!=typeof e&&null!==e?e:this.$element.val()||"",this.query.length<this.options.minLength?this.shown?this.hide():this:(d=b.isFunction(this.source)?this.source(this.query,b.proxy(this.process,this)):this.source,d?this.process(d):this)},process:function(d){var e=this;return d=b.grep(d,function(g){return e.matcher(g)}),d=this.sorter(d),d.length?"all"==this.options.items||0===this.options.minLength&&!this.$element.val()?this.render(d).show():this.render(d.slice(0,this.options.items)).show():this.shown?this.hide():this},matcher:function(d){return ~d.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(g){for(var i,h=[],e=[],d=[];i=g.shift();){i.toLowerCase().indexOf(this.query.toLowerCase())?~i.indexOf(this.query)?e.push(i):d.push(i):h.push(i)}return h.concat(e,d)},highlighter:function(d){var e=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");return d.replace(new RegExp("("+e+")","ig"),function(g,h){return"<strong>"+h+"</strong>"})},render:function(d){var e=this;return d=b(d).map(function(g,h){return g=b(e.options.item).data("value",h),g.find("a").html(e.highlighter(h)),g[0]}),this.autoSelect&&d.first().addClass("active"),this.$menu.html(d),this},next:function(){var e=this.$menu.find(".active").removeClass("active"),d=e.next();d.length||(d=b(this.$menu.find("li")[0])),d.addClass("active")},prev:function(){var e=this.$menu.find(".active").removeClass("active"),d=e.prev();d.length||(d=this.$menu.find("li").last()),d.addClass("active")},listen:function(){this.$element.on("focus",b.proxy(this.focus,this)).on("blur",b.proxy(this.blur,this)).on("keypress",b.proxy(this.keypress,this)).on("keyup",b.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",b.proxy(this.keydown,this)),this.$menu.on("click",b.proxy(this.click,this)).on("mouseenter","li",b.proxy(this.mouseenter,this)).on("mouseleave","li",b.proxy(this.mouseleave,this))},destroy:function(){this.$element.data("typeahead",null),this.$element.off("focus").off("blur").off("keypress").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove()},eventSupported:function(d){var e=d in this.$element;return e||(this.$element.setAttribute(d,"return;"),e="function"==typeof this.$element[d]),e},move:function(d){if(this.shown){switch(d.keyCode){case 9:case 13:case 27:d.preventDefault();break;case 38:d.preventDefault(),this.prev();break;case 40:d.preventDefault(),this.next()}d.stopPropagation()}},keydown:function(d){this.suppressKeyPressRepeat=~b.inArray(d.keyCode,[40,38,9,13,27]),this.shown||40!=d.keyCode?this.move(d):this.lookup("")},keypress:function(d){this.suppressKeyPressRepeat||this.move(d)},keyup:function(d){switch(d.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}d.stopPropagation(),d.preventDefault()},focus:function(){this.focused||(this.focused=!0,(0===this.options.minLength&&!this.$element.val()||this.options.showHintOnFocus)&&this.lookup())},blur:function(){this.focused=!1,!this.mousedover&&this.shown&&this.hide()},click:function(d){d.stopPropagation(),d.preventDefault(),this.select(),this.$element.focus()},mouseenter:function(d){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),b(d.currentTarget).addClass("active")},mouseleave:function(){this.mousedover=!1,!this.focused&&this.shown&&this.hide()}};var a=b.fn.typeahead;b.fn.typeahead=function(e){var d=arguments;return this.each(function(){var i=b(this),h=i.data("typeahead"),g="object"==typeof e&&e;h||i.data("typeahead",h=new c(this,g)),"string"==typeof e&&(d.length>1?h[e].apply(h,Array.prototype.slice.call(d,1)):h[e]())})},b.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0},b.fn.typeahead.Constructor=c,b.fn.typeahead.noConflict=function(){return b.fn.typeahead=a,this},b(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(){var d=b(this);d.data("typeahead")||d.typeahead(d.data())})}(window.jQuery);
/*!
 * typeahead.js 0.10.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(d){var i={isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(l){return !l||/^\s*$/.test(l)},escapeRegExChars:function(l){return l.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(l){return typeof l==="string"},isNumber:function(l){return typeof l==="number"},isArray:d.isArray,isFunction:d.isFunction,isObject:d.isPlainObject,isUndefined:function(l){return typeof l==="undefined"},bind:d.proxy,each:function(n,l){d.each(n,m);function m(o,p){return l(p,o)}},map:d.map,filter:d.grep,every:function(m,n){var l=true;if(!m){return l}d.each(m,function(o,p){if(!(l=n.call(null,p,o,m))){return false}});return !!l},some:function(m,n){var l=false;if(!m){return l}d.each(m,function(o,p){if(l=n.call(null,p,o,m)){return false}});return !!l},mixin:d.extend,getUniqueId:function(){var l=0;return function(){return l++}}(),templatify:function a(m){return d.isFunction(m)?m:l;function l(){return String(m)}},defer:function(l){setTimeout(l,0)},debounce:function(n,p,m){var o,l;return function(){var t=this,s=arguments,r,q;r=function(){o=null;if(!m){l=n.apply(t,s)}};q=m&&!o;clearTimeout(o);o=setTimeout(r,p);if(q){l=n.apply(t,s)}return l}},throttle:function(q,s){var o,n,r,l,p,m;p=0;m=function(){p=new Date();r=null;l=q.apply(o,n)};return function(){var t=new Date(),u=s-(t-p);o=this;n=arguments;if(u<=0){clearTimeout(r);r=null;p=t;l=q.apply(o,n)}else{if(!r){r=setTimeout(m,u)}}return l}},noop:function(){}};var k="0.10.1";var j=function(p,m){function t(u){this.maxSize=u||100;this.size=0;this.hash={};this.list=new s()}i.mixin(t.prototype,{set:function q(u,x){var w=this.list.tail,v;if(this.size>=this.maxSize){this.list.remove(w);delete this.hash[w.key]}if(v=this.hash[u]){v.val=x;this.list.moveToFront(v)}else{v=new o(u,x);this.list.add(v);this.hash[u]=v;this.size++}},get:function l(u){var v=this.hash[u];if(v){this.list.moveToFront(v);return v.val}}});function s(){this.head=this.tail=null}i.mixin(s.prototype,{add:function r(u){if(this.head){u.next=this.head;this.head.prev=u}this.head=u;this.tail=this.tail||u},remove:function n(u){u.prev?u.prev.next=u.next:this.head=u.next;u.next?u.next.prev=u.prev:this.tail=u.prev},moveToFront:function(u){this.remove(u);this.add(u)}});function o(u,v){this.key=u;this.val=v;this.prev=this.next=null}return t}(this);var g=function(){var l,m;try{l=window.localStorage;l.setItem("~~~","!");l.removeItem("~~~")}catch(q){l=null}function o(s){this.prefix=["__",s,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+this.prefix)}if(l&&window.JSON){m={_prefix:function(s){return this.prefix+s},_ttlKey:function(s){return this._prefix(s)+this.ttlKey},get:function(s){if(this.isExpired(s)){this.remove(s)}return r(l.getItem(this._prefix(s)))},set:function(t,u,s){if(i.isNumber(s)){l.setItem(this._ttlKey(t),p(n()+s))}else{l.removeItem(this._ttlKey(t))}return l.setItem(this._prefix(t),p(u))},remove:function(s){l.removeItem(this._ttlKey(s));l.removeItem(this._prefix(s));return this},clear:function(){var u,t,v=[],s=l.length;for(u=0;u<s;u++){if((t=l.key(u)).match(this.keyMatcher)){v.push(t.replace(this.keyMatcher,""))}}for(u=v.length;u--;){this.remove(v[u])}return this},isExpired:function(t){var s=r(l.getItem(this._ttlKey(t)));return i.isNumber(s)&&n()>s?true:false}}}else{m={get:i.noop,set:i.noop,remove:i.noop,clear:i.noop,isExpired:i.noop}}i.mixin(o.prototype,m);return o;function n(){return new Date().getTime()}function p(s){return JSON.stringify(i.isUndefined(s)?null:s)}function r(s){return JSON.parse(s)}}();var e=function(){var n=0,o={},l=6,r=new j(10);function s(t){t=t||{};this._send=t.transport?p(t.transport):d.ajax;this._get=t.rateLimiter?t.rateLimiter(this._get):this._get}s.setMaxPendingRequests=function m(t){l=t};s.resetCache=function q(){r=new j(10)};i.mixin(s.prototype,{_get:function(w,z,u){var y=this,x;if(x=o[w]){x.done(v)}else{if(n<l){n++;o[w]=this._send(w,z).done(v).always(t)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}}function v(A){u&&u(A);r.set(w,A)}function t(){n--;delete o[w];if(y.onDeckRequestArgs){y._get.apply(y,y.onDeckRequestArgs);y.onDeckRequestArgs=null}}},get:function(u,x,t){var v=this,w;if(i.isFunction(x)){t=x;x={}}if(w=r.get(u)){i.defer(function(){t&&t(w)})}else{this._get(u,x,t)}return !!w}});return s;function p(t){return function u(w,z){var v=d.Deferred();t(w,z,y,x);return v;function y(A){i.defer(function(){v.resolve(A)})}function x(A){i.defer(function(){v.reject(A)})}}}}();var b=function(){function q(t){t=t||{};if(!t.datumTokenizer||!t.queryTokenizer){d.error("datumTokenizer and queryTokenizer are both required")}this.datumTokenizer=t.datumTokenizer;this.queryTokenizer=t.queryTokenizer;this.datums=[];this.trie=n()}i.mixin(q.prototype,{bootstrap:function o(t){this.datums=t.datums;this.trie=t.trie},add:function(u){var t=this;u=i.isArray(u)?u:[u];i.each(u,function(v){var x,w;x=t.datums.push(v)-1;w=l(t.datumTokenizer(v));i.each(w,function(y){var C,B,A,z;C=t.trie;B=y.split("");while(A=B.shift()){C=C.children[A]||(C.children[A]=n());C.ids.push(x)}})})},get:function m(v){var t=this,w,u;w=l(this.queryTokenizer(v));i.each(w,function(x){var B,A,z,y;if(u&&u.length===0){return false}B=t.trie;A=x.split("");while(B&&(z=A.shift())){B=B.children[z]}if(B&&A.length===0){y=B.ids.slice(0);u=u?r(u,y):y}else{u=[];return false}});return u?i.map(s(u),function(x){return t.datums[x]}):[]},serialize:function p(){return{datums:this.datums,trie:this.trie}}});return q;function l(t){t=i.filter(t,function(u){return !!u});t=i.map(t,function(u){return u.toLowerCase()});return t}function n(){return{ids:[],children:{}}}function s(w){var t={},v=[];for(var u=0;u<w.length;u++){if(!t[w[u]]){t[w[u]]=true;v.push(w[u])}}return v}function r(w,u){var t=0,v=0,y=[];w=w.sort(x);u=u.sort(x);while(t<w.length&&v<u.length){if(w[t]<u[v]){t++}else{if(w[t]>u[v]){v++}else{y.push(w[t]);t++;v++}}}return y;function x(A,z){return A-z}}}();var c=function(){return{local:n,prefetch:l,remote:m};function n(q){var p=q.local||null;if(i.isFunction(p)){p=p.call(null)}return p}function l(r){var q,p;p={url:null,thumbprint:"",ttl:24*60*60*1000,filter:null,ajax:{}};if(q=r.prefetch||null){q=i.isString(q)?{url:q}:q;q=i.mixin(p,q);q.thumbprint=k+q.thumbprint;q.ajax.type=q.ajax.type||"GET";q.ajax.dataType=q.ajax.dataType||"json";!q.url&&d.error("prefetch requires url to be set")}return q}function m(t){var r,s;s={url:null,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}};if(r=t.remote||null){r=i.isString(r)?{url:r}:r;r=i.mixin(s,r);r.rateLimiter=/^throttle$/i.test(r.rateLimitBy)?q(r.rateLimitWait):p(r.rateLimitWait);r.ajax.type=r.ajax.type||"GET";r.ajax.dataType=r.ajax.dataType||"json";delete r.rateLimitBy;delete r.rateLimitWait;!r.url&&d.error("remote requires url to be set")}return r;function p(o){return function(u){return i.debounce(u,o)}}function q(o){return function(u){return i.throttle(u,o)}}}}();var h=window.Bloodhound=function(){var y;y={data:"data",protocol:"protocol",thumbprint:"thumbprint"};function t(z){if(!z||!z.local&&!z.prefetch&&!z.remote){d.error("one of local, prefetch, or remote is required")}this.limit=z.limit||5;this.sorter=s(z.sorter);this.dupDetector=z.dupDetector||n;this.local=c.local(z);this.prefetch=c.prefetch(z);this.remote=c.remote(z);this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null;this.index=new b({datumTokenizer:z.datumTokenizer,queryTokenizer:z.queryTokenizer});this.storage=this.cacheKey?new g(this.cacheKey):null}t.tokenizers={whitespace:function p(z){return z.split(/\s+/)},nonword:function r(z){return z.split(/\W+/)}};i.mixin(t.prototype,{_loadPrefetch:function l(D){var A=this,C,z;if(C=this._readFromStorage(D.thumbprint)){this.index.bootstrap(C);z=d.Deferred().resolve()}else{z=d.ajax(D.url,D.ajax).done(B)}return z;function B(F){var E;E=D.filter?D.filter(F):F;A.add(E);A._saveToStorage(A.index.serialize(),D.thumbprint,D.ttl)}},_getFromRemote:function m(E,z){var D=this,B,C;E=E||"";C=encodeURIComponent(E);B=this.remote.replace?this.remote.replace(this.remote.url,E):this.remote.url.replace(this.remote.wildcard,C);return this.transport.get(B,this.remote.ajax,A);function A(G){var F=D.remote.filter?D.remote.filter(G):G;z(F)}},_saveToStorage:function v(B,A,z){if(this.storage){this.storage.set(y.data,B,z);this.storage.set(y.protocol,location.protocol,z);this.storage.set(y.thumbprint,A,z)}},_readFromStorage:function x(A){var z={},B;if(this.storage){z.data=this.storage.get(y.data);z.protocol=this.storage.get(y.protocol);z.thumbprint=this.storage.get(y.thumbprint)}B=z.thumbprint!==A||z.protocol!==location.protocol;return z.data&&!B?z.data:null},initialize:function q(){var C=this,A;A=this.prefetch?this._loadPrefetch(this.prefetch):d.Deferred().resolve();this.local&&A.done(B);this.transport=this.remote?new e(this.remote):null;this.initialize=function z(){return A.promise()};return A.promise();function B(){C.add(C.local)}},add:function w(z){this.index.add(z)},get:function o(D,z){var B=this,C,A=false;C=this.index.get(D);C=this.sorter(C).slice(0,this.limit);if(C.length<this.limit&&this.transport){A=this._getFromRemote(D,E)}!A&&z&&z(C);function E(G){var F=C.slice(0);i.each(G,function(I){var H;H=i.some(F,function(J){return B.dupDetector(I,J)});!H&&F.push(I);return F.length<B.limit});z&&z(B.sorter(F))}},ttAdapter:function u(){return i.bind(this.get,this)}});return t;function s(A){return i.isFunction(A)?z:B;function z(C){return C.sort(A)}function B(C){return C}}function n(){return false}}()})(window.jQuery);var OpenLayers={VERSION_NUMBER:"Release 2.14 dev",singleFile:true,_getScriptLocation:(function(){var g=new RegExp("(^|(.*?\\/))(OpenLayers[^\\/]*?\\.js)(\\?|$)"),e=document.getElementsByTagName("script"),h,b,c="";for(var d=0,a=e.length;d<a;d++){h=e[d].getAttribute("src");if(h){b=h.match(g);if(b){c=b[1];break}}}return(function(){return c})})(),ImgPath:""};OpenLayers.Class=function(){var a=arguments.length;var d=arguments[0];var c=arguments[a-1];var e=typeof c.initialize=="function"?c.initialize:function(){d.prototype.initialize.apply(this,arguments)};if(a>1){var b=[e,d].concat(Array.prototype.slice.call(arguments).slice(1,a-1),c);OpenLayers.inherit.apply(null,b)}else{e.prototype=c}return e};OpenLayers.inherit=function(g,d){var c=function(){};c.prototype=d.prototype;g.prototype=new c;var b,a,e;for(b=2,a=arguments.length;b<a;b++){e=arguments[b];if(typeof e==="function"){e=e.prototype}OpenLayers.Util.extend(g.prototype,e)}};OpenLayers.Util=OpenLayers.Util||{};OpenLayers.Util.extend=function(a,e){a=a||{};if(e){for(var d in e){var c=e[d];if(c!==undefined){a[d]=c}}var b=typeof window.Event=="function"&&e instanceof window.Event;if(!b&&e.hasOwnProperty&&e.hasOwnProperty("toString")){a.toString=e.toString}}return a};OpenLayers.String={startsWith:function(b,a){return(b.indexOf(a)==0)},contains:function(b,a){return(b.indexOf(a)!=-1)},trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(g){var d=g.split("-");var b=d[0];for(var c=1,a=d.length;c<a;c++){var e=d[c];b+=e.charAt(0).toUpperCase()+e.substring(1)}return b},format:function(d,c,a){if(!c){c=window}var b=function(k,e){var j;var h=e.split(/\.+/);for(var g=0;g<h.length;g++){if(g==0){j=c}if(j===undefined){break}j=j[h[g]]}if(typeof j=="function"){j=a?j.apply(null,a):j()}if(typeof j=="undefined"){return"undefined"}else{return j}};return d.replace(OpenLayers.String.tokenRegEx,b)},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(a){return OpenLayers.String.numberRegEx.test(a)},numericIf:function(b,c){var a=b;if(c===true&&b!=null&&b.replace){b=b.replace(/^\s*|\s*$/g,"")}return OpenLayers.String.isNumeric(b)?parseFloat(b):a}};OpenLayers.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(a,c){var b=0;if(c>0){b=parseFloat(a.toPrecision(c))}return b},format:function(c,a,h,j){a=(typeof a!="undefined")?a:0;h=(typeof h!="undefined")?h:OpenLayers.Number.thousandsSeparator;j=(typeof j!="undefined")?j:OpenLayers.Number.decimalSeparator;if(a!=null){c=parseFloat(c.toFixed(a))}var b=c.toString().split(".");if(b.length==1&&a==null){a=0}var d=b[0];if(h){var e=/(-?[0-9]+)([0-9]{3})/;while(e.test(d)){d=d.replace(e,"$1"+h+"$2")}}var g;if(a==0){g=d}else{var i=b.length>1?b[1]:"0";if(a!=null){i=i+new Array(a-i.length+1).join("0")}g=d+j+i}return g},zeroPad:function(b,a,c){var d=b.toString(c||10);while(d.length<a){d="0"+d}return d}};OpenLayers.Function={bind:function(c,b){var a=Array.prototype.slice.apply(arguments,[2]);return function(){var d=a.concat(Array.prototype.slice.apply(arguments,[0]));return c.apply(b,d)}},bindAsEventListener:function(b,a){return function(c){return b.call(a,c||window.event)}},False:function(){return false},True:function(){return true},Void:function(){}};OpenLayers.Array={filter:function(h,g,b){var d=[];if(Array.prototype.filter){d=h.filter(g,b)}else{var a=h.length;if(typeof g!="function"){throw new TypeError()}for(var c=0;c<a;c++){if(c in h){var e=h[c];if(g.call(b,e,c,h)){d.push(e)}}}}return d}};OpenLayers.Bounds=OpenLayers.Class({left:null,bottom:null,right:null,top:null,centerLonLat:null,initialize:function(d,a,b,c){if(OpenLayers.Util.isArray(d)){c=d[3];b=d[2];a=d[1];d=d[0]}if(d!=null){this.left=OpenLayers.Util.toFloat(d)}if(a!=null){this.bottom=OpenLayers.Util.toFloat(a)}if(b!=null){this.right=OpenLayers.Util.toFloat(b)}if(c!=null){this.top=OpenLayers.Util.toFloat(c)}},clone:function(){return new OpenLayers.Bounds(this.left,this.bottom,this.right,this.top)},equals:function(b){var a=false;if(b!=null){a=((this.left==b.left)&&(this.right==b.right)&&(this.top==b.top)&&(this.bottom==b.bottom))}return a},toString:function(){return[this.left,this.bottom,this.right,this.top].join(",")},toArray:function(a){if(a===true){return[this.bottom,this.left,this.top,this.right]}else{return[this.left,this.bottom,this.right,this.top]}},toBBOX:function(b,e){if(b==null){b=6}var h=Math.pow(10,b);var g=Math.round(this.left*h)/h;var d=Math.round(this.bottom*h)/h;var c=Math.round(this.right*h)/h;var a=Math.round(this.top*h)/h;if(e===true){return d+","+g+","+a+","+c}else{return g+","+d+","+c+","+a}},toGeometry:function(){return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(this.left,this.bottom),new OpenLayers.Geometry.Point(this.right,this.bottom),new OpenLayers.Geometry.Point(this.right,this.top),new OpenLayers.Geometry.Point(this.left,this.top)])])},getWidth:function(){return(this.right-this.left)},getHeight:function(){return(this.top-this.bottom)},getSize:function(){return new OpenLayers.Size(this.getWidth(),this.getHeight())},getCenterPixel:function(){return new OpenLayers.Pixel((this.left+this.right)/2,(this.bottom+this.top)/2)},getCenterLonLat:function(){if(!this.centerLonLat){this.centerLonLat=new OpenLayers.LonLat((this.left+this.right)/2,(this.bottom+this.top)/2)}return this.centerLonLat},scale:function(e,c){if(c==null){c=this.getCenterLonLat()}var a,i;if(c.CLASS_NAME=="OpenLayers.LonLat"){a=c.lon;i=c.lat}else{a=c.x;i=c.y}var h=(this.left-a)*e+a;var b=(this.bottom-i)*e+i;var d=(this.right-a)*e+a;var g=(this.top-i)*e+i;return new OpenLayers.Bounds(h,b,d,g)},add:function(a,b){if((a==null)||(b==null)){throw new TypeError("Bounds.add cannot receive null values")}return new OpenLayers.Bounds(this.left+a,this.bottom+b,this.right+a,this.top+b)},extend:function(a){if(a){switch(a.CLASS_NAME){case"OpenLayers.LonLat":this.extendXY(a.lon,a.lat);break;case"OpenLayers.Geometry.Point":this.extendXY(a.x,a.y);break;case"OpenLayers.Bounds":this.centerLonLat=null;if((this.left==null)||(a.left<this.left)){this.left=a.left}if((this.bottom==null)||(a.bottom<this.bottom)){this.bottom=a.bottom}if((this.right==null)||(a.right>this.right)){this.right=a.right}if((this.top==null)||(a.top>this.top)){this.top=a.top}break}}},extendXY:function(a,b){this.centerLonLat=null;if((this.left==null)||(a<this.left)){this.left=a}if((this.bottom==null)||(b<this.bottom)){this.bottom=b}if((this.right==null)||(a>this.right)){this.right=a}if((this.top==null)||(b>this.top)){this.top=b}},containsLonLat:function(g,c){if(typeof c==="boolean"){c={inclusive:c}}c=c||{};var d=this.contains(g.lon,g.lat,c.inclusive),e=c.worldBounds;if(e&&!d){var h=e.getWidth();var a=(e.left+e.right)/2;var b=Math.round((g.lon-a)/h);d=this.containsLonLat({lon:g.lon-b*h,lat:g.lat},{inclusive:c.inclusive})}return d},containsPixel:function(b,a){return this.contains(b.x,b.y,a)},contains:function(b,d,a){if(a==null){a=true}if(b==null||d==null){return false}b=OpenLayers.Util.toFloat(b);d=OpenLayers.Util.toFloat(d);var c=false;if(a){c=((b>=this.left)&&(b<=this.right)&&(d>=this.bottom)&&(d<=this.top))}else{c=((b>this.left)&&(b<this.right)&&(d>this.bottom)&&(d<this.top))}return c},intersectsBounds:function(a,n){if(typeof n==="boolean"){n={inclusive:n}}n=n||{};if(n.worldBounds){var m=this.wrapDateLine(n.worldBounds);a=a.wrapDateLine(n.worldBounds)}else{m=this}if(n.inclusive==null){n.inclusive=true}var i=false;var j=(m.left==a.right||m.right==a.left||m.top==a.bottom||m.bottom==a.top);if(n.inclusive||!j){var k=(((a.bottom>=m.bottom)&&(a.bottom<=m.top))||((m.bottom>=a.bottom)&&(m.bottom<=a.top)));var l=(((a.top>=m.bottom)&&(a.top<=m.top))||((m.top>a.bottom)&&(m.top<a.top)));var d=(((a.left>=m.left)&&(a.left<=m.right))||((m.left>=a.left)&&(m.left<=a.right)));var c=(((a.right>=m.left)&&(a.right<=m.right))||((m.right>=a.left)&&(m.right<=a.right)));i=((k||l)&&(d||c))}if(n.worldBounds&&!i){var h=n.worldBounds;var b=h.getWidth();var g=!h.containsBounds(m);var e=!h.containsBounds(a);if(g&&!e){a=a.add(-b,0);i=m.intersectsBounds(a,{inclusive:n.inclusive})}else{if(e&&!g){m=m.add(-b,0);i=a.intersectsBounds(m,{inclusive:n.inclusive})}}}return i},containsBounds:function(h,b,a){if(b==null){b=false}if(a==null){a=true}var c=this.contains(h.left,h.bottom,a);var d=this.contains(h.right,h.bottom,a);var g=this.contains(h.left,h.top,a);var e=this.contains(h.right,h.top,a);return(b)?(c||d||g||e):(c&&d&&g&&e)},determineQuadrant:function(c){var b="";var a=this.getCenterLonLat();b+=(c.lat<a.lat)?"b":"t";b+=(c.lon<a.lon)?"l":"r";return b},transform:function(d,b){this.centerLonLat=null;var e=OpenLayers.Projection.transform({x:this.left,y:this.bottom},d,b);var a=OpenLayers.Projection.transform({x:this.right,y:this.bottom},d,b);var c=OpenLayers.Projection.transform({x:this.left,y:this.top},d,b);var g=OpenLayers.Projection.transform({x:this.right,y:this.top},d,b);this.left=Math.min(e.x,c.x);this.bottom=Math.min(e.y,a.y);this.right=Math.max(a.x,g.x);this.top=Math.max(c.y,g.y);return this},wrapDateLine:function(a,c){c=c||{};var e=c.leftTolerance||0;var b=c.rightTolerance||0;var h=this.clone();if(a){var d=a.getWidth();while(h.left<a.left&&h.right-b<=a.left){h=h.add(d,0)}while(h.left+e>=a.right&&h.right>a.right){h=h.add(-d,0)}var g=h.left+e;if(g<a.right&&g>a.left&&h.right-b>a.right){h=h.add(-d,0)}}return h},CLASS_NAME:"OpenLayers.Bounds"});OpenLayers.Bounds.fromString=function(c,b){var a=c.split(",");return OpenLayers.Bounds.fromArray(a,b)};OpenLayers.Bounds.fromArray=function(b,a){return a===true?new OpenLayers.Bounds(b[1],b[0],b[3],b[2]):new OpenLayers.Bounds(b[0],b[1],b[2],b[3])};OpenLayers.Bounds.fromSize=function(a){return new OpenLayers.Bounds(0,a.h,a.w,0)};OpenLayers.Bounds.oppositeQuadrant=function(a){var b="";b+=(a.charAt(0)=="t")?"b":"t";b+=(a.charAt(1)=="l")?"r":"l";return b};OpenLayers.Element={visible:function(a){return OpenLayers.Util.getElement(a).style.display!="none"},toggle:function(){for(var c=0,a=arguments.length;c<a;c++){var b=OpenLayers.Util.getElement(arguments[c]);var d=OpenLayers.Element.visible(b)?"none":"";b.style.display=d}},remove:function(a){a=OpenLayers.Util.getElement(a);a.parentNode.removeChild(a)},getHeight:function(a){a=OpenLayers.Util.getElement(a);return a.offsetHeight},hasClass:function(b,a){var c=b.className;return(!!c&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c))},addClass:function(b,a){if(!OpenLayers.Element.hasClass(b,a)){b.className+=(b.className?" ":"")+a}return b},removeClass:function(b,a){var c=b.className;if(c){b.className=OpenLayers.String.trim(c.replace(new RegExp("(^|\\s+)"+a+"(\\s+|$)")," "))}return b},toggleClass:function(b,a){if(OpenLayers.Element.hasClass(b,a)){OpenLayers.Element.removeClass(b,a)}else{OpenLayers.Element.addClass(b,a)}return b},getStyle:function(c,d){c=OpenLayers.Util.getElement(c);var e=null;if(c&&c.style){e=c.style[OpenLayers.String.camelize(d)];if(!e){if(document.defaultView&&document.defaultView.getComputedStyle){var b=document.defaultView.getComputedStyle(c,null);e=b?b.getPropertyValue(d):null}else{if(c.currentStyle){e=c.currentStyle[OpenLayers.String.camelize(d)]}}}var a=["left","top","right","bottom"];if(window.opera&&(OpenLayers.Util.indexOf(a,d)!=-1)&&(OpenLayers.Element.getStyle(c,"position")=="static")){e="auto"}}return e=="auto"?null:e}};OpenLayers.LonLat=OpenLayers.Class({lon:0,lat:0,initialize:function(b,a){if(OpenLayers.Util.isArray(b)){a=b[1];b=b[0]}this.lon=OpenLayers.Util.toFloat(b);this.lat=OpenLayers.Util.toFloat(a)},toString:function(){return("lon="+this.lon+",lat="+this.lat)},toShortString:function(){return(this.lon+", "+this.lat)},clone:function(){return new OpenLayers.LonLat(this.lon,this.lat)},add:function(b,a){if((b==null)||(a==null)){throw new TypeError("LonLat.add cannot receive null values")}return new OpenLayers.LonLat(this.lon+OpenLayers.Util.toFloat(b),this.lat+OpenLayers.Util.toFloat(a))},equals:function(b){var a=false;if(b!=null){a=((this.lon==b.lon&&this.lat==b.lat)||(isNaN(this.lon)&&isNaN(this.lat)&&isNaN(b.lon)&&isNaN(b.lat)))}return a},transform:function(c,b){var a=OpenLayers.Projection.transform({x:this.lon,y:this.lat},c,b);this.lon=a.x;this.lat=a.y;return this},wrapDateLine:function(a){var b=this.clone();if(a){while(b.lon<a.left){b.lon+=a.getWidth()}while(b.lon>a.right){b.lon-=a.getWidth()}}return b},CLASS_NAME:"OpenLayers.LonLat"});OpenLayers.LonLat.fromString=function(b){var a=b.split(",");return new OpenLayers.LonLat(a[0],a[1])};OpenLayers.LonLat.fromArray=function(a){var b=OpenLayers.Util.isArray(a),d=b&&a[0],c=b&&a[1];return new OpenLayers.LonLat(d,c)};OpenLayers.Pixel=OpenLayers.Class({x:0,y:0,initialize:function(a,b){this.x=parseFloat(a);this.y=parseFloat(b)},toString:function(){return("x="+this.x+",y="+this.y)},clone:function(){return new OpenLayers.Pixel(this.x,this.y)},equals:function(a){var b=false;if(a!=null){b=((this.x==a.x&&this.y==a.y)||(isNaN(this.x)&&isNaN(this.y)&&isNaN(a.x)&&isNaN(a.y)))}return b},distanceTo:function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))},add:function(a,b){if((a==null)||(b==null)){throw new TypeError("Pixel.add cannot receive null values")}return new OpenLayers.Pixel(this.x+a,this.y+b)},offset:function(a){var b=this.clone();if(a){b=this.add(a.x,a.y)}return b},CLASS_NAME:"OpenLayers.Pixel"});OpenLayers.Size=OpenLayers.Class({w:0,h:0,initialize:function(a,b){this.w=parseFloat(a);this.h=parseFloat(b)},toString:function(){return("w="+this.w+",h="+this.h)},clone:function(){return new OpenLayers.Size(this.w,this.h)},equals:function(b){var a=false;if(b!=null){a=((this.w==b.w&&this.h==b.h)||(isNaN(this.w)&&isNaN(this.h)&&isNaN(b.w)&&isNaN(b.h)))}return a},CLASS_NAME:"OpenLayers.Size"});OpenLayers.Console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},userError:function(a){alert(a)},assert:function(){},dir:function(){},dirxml:function(){},trace:function(){},group:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){},profile:function(){},profileEnd:function(){},count:function(){},CLASS_NAME:"OpenLayers.Console"};(function(){var b=document.getElementsByTagName("script");for(var c=0,a=b.length;c<a;++c){if(b[c].src.indexOf("firebug.js")!=-1){if(console){OpenLayers.Util.extend(OpenLayers.Console,console);break}}}})();OpenLayers.Lang={code:null,defaultCode:"en",getCode:function(){if(!OpenLayers.Lang.code){OpenLayers.Lang.setCode()}return OpenLayers.Lang.code},setCode:function(b){var d;if(!b){b=(OpenLayers.BROWSER_NAME=="msie")?navigator.userLanguage:navigator.language}var c=b.split("-");c[0]=c[0].toLowerCase();if(typeof OpenLayers.Lang[c[0]]=="object"){d=c[0]}if(c[1]){var a=c[0]+"-"+c[1].toUpperCase();if(typeof OpenLayers.Lang[a]=="object"){d=a}}if(!d){OpenLayers.Console.warn("Failed to find OpenLayers.Lang."+c.join("-")+" dictionary, falling back to default language");d=OpenLayers.Lang.defaultCode}OpenLayers.Lang.code=d},translate:function(b,a){var d=OpenLayers.Lang[OpenLayers.Lang.getCode()];var c=d&&d[b];if(!c){c=b}if(a){c=OpenLayers.String.format(c,a)}return c}};OpenLayers.i18n=OpenLayers.Lang.translate;OpenLayers.Util=OpenLayers.Util||{};OpenLayers.Util.getElement=function(){var d=[];for(var c=0,a=arguments.length;c<a;c++){var b=arguments[c];if(typeof b=="string"){b=document.getElementById(b)}if(arguments.length==1){return b}d.push(b)}return d};OpenLayers.Util.isElement=function(a){return !!(a&&a.nodeType===1)};OpenLayers.Util.isArray=function(b){return(Object.prototype.toString.call(b)==="[object Array]")};OpenLayers.Util.removeItem=function(c,b){for(var a=c.length-1;a>=0;a--){if(c[a]==b){c.splice(a,1)}}return c};OpenLayers.Util.indexOf=function(d,c){if(typeof d.indexOf=="function"){return d.indexOf(c)}else{for(var b=0,a=d.length;b<a;b++){if(d[b]==c){return b}}return -1}};OpenLayers.Util.dotless=/\./g;OpenLayers.Util.modifyDOMElement=function(e,i,d,g,a,c,h,b){if(i){e.id=i.replace(OpenLayers.Util.dotless,"_")}if(d){e.style.left=d.x+"px";e.style.top=d.y+"px"}if(g){e.style.width=g.w+"px";e.style.height=g.h+"px"}if(a){e.style.position=a}if(c){e.style.border=c}if(h){e.style.overflow=h}if(parseFloat(b)>=0&&parseFloat(b)<1){e.style.filter="alpha(opacity="+(b*100)+")";e.style.opacity=b}else{if(parseFloat(b)==1){e.style.filter="";e.style.opacity=""}}};OpenLayers.Util.createDiv=function(a,j,i,g,e,c,b,h){var d=document.createElement("div");if(g){d.style.backgroundImage="url("+g+")"}if(!a){a=OpenLayers.Util.createUniqueID("OpenLayersDiv")}if(!e){e="absolute"}OpenLayers.Util.modifyDOMElement(d,a,j,i,e,c,b,h);return d};OpenLayers.Util.createImage=function(a,j,i,e,d,c,g,k){var b=document.createElement("img");if(!a){a=OpenLayers.Util.createUniqueID("OpenLayersDiv")}if(!d){d="relative"}OpenLayers.Util.modifyDOMElement(b,a,j,i,d,c,null,g);if(k){b.style.display="none";function h(){b.style.display="";OpenLayers.Event.stopObservingElement(b)}OpenLayers.Event.observe(b,"load",h);OpenLayers.Event.observe(b,"error",h)}b.style.alt=a;b.galleryImg="no";if(e){b.src=e}return b};OpenLayers.IMAGE_RELOAD_ATTEMPTS=0;OpenLayers.Util.alphaHackNeeded=null;OpenLayers.Util.alphaHack=function(){if(OpenLayers.Util.alphaHackNeeded==null){var d=navigator.appVersion.split("MSIE");var a=parseFloat(d[1]);var b=false;try{b=!!(document.body.filters)}catch(c){}OpenLayers.Util.alphaHackNeeded=(b&&(a>=5.5)&&(a<7))}return OpenLayers.Util.alphaHackNeeded};OpenLayers.Util.modifyAlphaImageDiv=function(a,b,k,j,h,g,c,d,i){OpenLayers.Util.modifyDOMElement(a,b,k,j,g,null,null,i);var e=a.childNodes[0];if(h){e.src=h}OpenLayers.Util.modifyDOMElement(e,a.id+"_innerImage",null,j,"relative",c);if(OpenLayers.Util.alphaHack()){if(a.style.display!="none"){a.style.display="inline-block"}if(d==null){d="scale"}a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e.src+"', sizingMethod='"+d+"')";if(parseFloat(a.style.opacity)>=0&&parseFloat(a.style.opacity)<1){a.style.filter+=" alpha(opacity="+a.style.opacity*100+")"}e.style.filter="alpha(opacity=0)"}};OpenLayers.Util.createAlphaImageDiv=function(b,k,j,h,g,c,d,i,l){var a=OpenLayers.Util.createDiv();var e=OpenLayers.Util.createImage(null,null,null,null,null,null,null,l);e.className="olAlphaImg";a.appendChild(e);OpenLayers.Util.modifyAlphaImageDiv(a,b,k,j,h,g,c,d,i);return a};OpenLayers.Util.upperCaseObject=function(b){var a={};for(var c in b){a[c.toUpperCase()]=b[c]}return a};OpenLayers.Util.applyDefaults=function(d,c){d=d||{};var b=typeof window.Event=="function"&&c instanceof window.Event;for(var a in c){if(d[a]===undefined||(!b&&c.hasOwnProperty&&c.hasOwnProperty(a)&&!d.hasOwnProperty(a))){d[a]=c[a]}}if(!b&&c&&c.hasOwnProperty&&c.hasOwnProperty("toString")&&!d.hasOwnProperty("toString")){d.toString=c.toString}return d};OpenLayers.Util.getParameterString=function(c){var b=[];for(var i in c){var h=c[i];if((h!=null)&&(typeof h!="function")){var d;if(typeof h=="object"&&h.constructor==Array){var e=[];var j;for(var a=0,g=h.length;a<g;a++){j=h[a];e.push(encodeURIComponent((j===null||j===undefined)?"":j))}d=e.join(",")}else{d=encodeURIComponent(h)}b.push(encodeURIComponent(i)+"="+d)}}return b.join("&")};OpenLayers.Util.urlAppend=function(a,b){var d=a;if(b){var c=(a+" ").split(/[?&]/);d+=(c.pop()===" "?b:c.length?"&"+b:"?"+b)}return d};OpenLayers.Util.getImagesLocation=function(){return OpenLayers.ImgPath||(OpenLayers._getScriptLocation()+"img/")};OpenLayers.Util.getImageLocation=function(a){return OpenLayers.Util.getImagesLocation()+a};OpenLayers.Util.Try=function(){var d=null;for(var c=0,a=arguments.length;c<a;c++){var b=arguments[c];try{d=b();break}catch(g){}}return d};OpenLayers.Util.getXmlNodeValue=function(a){var b=null;OpenLayers.Util.Try(function(){b=a.text;if(!b){b=a.textContent}if(!b){b=a.firstChild.nodeValue}},function(){b=a.textContent});return b};OpenLayers.Util.mouseLeft=function(a,c){var b=(a.relatedTarget)?a.relatedTarget:a.toElement;while(b!=c&&b!=null){b=b.parentNode}return(b!=c)};OpenLayers.Util.DEFAULT_PRECISION=14;OpenLayers.Util.toFloat=function(b,a){if(a==null){a=OpenLayers.Util.DEFAULT_PRECISION}if(typeof b!=="number"){b=parseFloat(b)}return a===0?b:parseFloat(b.toPrecision(a))};OpenLayers.Util.rad=function(a){return a*Math.PI/180};OpenLayers.Util.deg=function(a){return a*180/Math.PI};OpenLayers.Util.VincentyConstants={a:6378137,b:6356752.3142,f:1/298.257223563};OpenLayers.Util.distVincenty=function(g,e){var k=OpenLayers.Util.VincentyConstants;var M=k.a,K=k.b,G=k.f;var n=OpenLayers.Util.rad(e.lon-g.lon);var J=Math.atan((1-G)*Math.tan(OpenLayers.Util.rad(g.lat)));var I=Math.atan((1-G)*Math.tan(OpenLayers.Util.rad(e.lat)));var m=Math.sin(J),i=Math.cos(J);var l=Math.sin(I),h=Math.cos(I);var r=n,o=2*Math.PI;var q=20;while(Math.abs(r-o)>1e-12&&--q>0){var z=Math.sin(r),c=Math.cos(r);var N=Math.sqrt((h*z)*(h*z)+(i*l-m*h*c)*(i*l-m*h*c));if(N==0){return 0}var E=m*l+i*h*c;var y=Math.atan2(N,E);var j=Math.asin(i*h*z/N);var F=Math.cos(j)*Math.cos(j);var p=E-2*m*l/F;var v=G/16*F*(4+G*(4-3*F));o=r;r=n+(1-v)*G*Math.sin(j)*(y+v*N*(p+v*E*(-1+2*p*p)))}if(q==0){return NaN}var u=F*(M*M-K*K)/(K*K);var x=1+u/16384*(4096+u*(-768+u*(320-175*u)));var w=u/1024*(256+u*(-128+u*(74-47*u)));var D=w*N*(p+w/4*(E*(-1+2*p*p)-w/6*p*(-3+4*N*N)*(-3+4*p*p)));var t=K*x*(y-D);var H=t.toFixed(3)/1000;return H};OpenLayers.Util.destinationVincenty=function(l,P,E){var o=OpenLayers.Util;var i=o.VincentyConstants;var Q=i.a,O=i.b,J=i.f;var N=l.lon;var g=l.lat;var q=E;var D=o.rad(P);var G=Math.sin(D);var h=Math.cos(D);var F=(1-J)*Math.tan(o.rad(g));var c=1/Math.sqrt((1+F*F)),j=F*c;var p=Math.atan2(F,h);var y=c*G;var I=1-y*y;var t=I*(Q*Q-O*O)/(O*O);var x=1+t/16384*(4096+t*(-768+t*(320-175*t)));var v=t/1024*(256+t*(-128+t*(74-47*t)));var w=q/(O*x),K=2*Math.PI;while(Math.abs(w-K)>1e-12){var m=Math.cos(2*p+w);var R=Math.sin(w);var H=Math.cos(w);var z=v*R*(m+v/4*(H*(-1+2*m*m)-v/6*m*(-3+4*R*R)*(-3+4*m*m)));K=w;w=q/(O*x)+z}var M=j*R-c*H*h;var d=Math.atan2(j*H+c*R*h,(1-J)*Math.sqrt(y*y+M*M));var n=Math.atan2(R*G,c*H-j*R*h);var r=J/16*I*(4+J*(4-3*I));var k=n-(1-r)*J*y*(w+r*R*(m+r*H*(-1+2*m*m)));var e=Math.atan2(y,-M);return new OpenLayers.LonLat(N+o.deg(k),o.deg(d))};OpenLayers.Util.getParameters=function(b,o){o=o||{};b=(b===null||b===undefined)?window.location.href:b;var a="";if(OpenLayers.String.contains(b,"?")){var c=b.indexOf("?")+1;var g=OpenLayers.String.contains(b,"#")?b.indexOf("#"):b.length;a=b.substring(c,g)}var n={};var d=a.split(/[&;]/);for(var j=0,k=d.length;j<k;++j){var h=d[j].split("=");if(h[0]){var m=h[0];try{m=decodeURIComponent(m)}catch(e){m=unescape(m)}var l=(h[1]||"").replace(/\+/g," ");try{l=decodeURIComponent(l)}catch(e){l=unescape(l)}if(o.splitArgs!==false){l=l.split(",")}if(l.length==1){l=l[0]}n[m]=l}}return n};OpenLayers.Util.lastSeqID=0;OpenLayers.Util.createUniqueID=function(a){if(a==null){a="id_"}else{a=a.replace(OpenLayers.Util.dotless,"_")}OpenLayers.Util.lastSeqID+=1;return a+OpenLayers.Util.lastSeqID};OpenLayers.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.37,km:39370,dd:4374754,yd:36};OpenLayers.INCHES_PER_UNIT["in"]=OpenLayers.INCHES_PER_UNIT.inches;OpenLayers.INCHES_PER_UNIT.degrees=OpenLayers.INCHES_PER_UNIT.dd;OpenLayers.INCHES_PER_UNIT.nmi=1852*OpenLayers.INCHES_PER_UNIT.m;OpenLayers.METERS_PER_INCH=0.0254000508001016;OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{Inch:OpenLayers.INCHES_PER_UNIT.inches,Meter:1/OpenLayers.METERS_PER_INCH,Foot:0.3048006096012192/OpenLayers.METERS_PER_INCH,IFoot:0.3048/OpenLayers.METERS_PER_INCH,ClarkeFoot:0.3047972651151/OpenLayers.METERS_PER_INCH,SearsFoot:0.30479947153867626/OpenLayers.METERS_PER_INCH,GoldCoastFoot:0.3047997101815088/OpenLayers.METERS_PER_INCH,IInch:0.0254/OpenLayers.METERS_PER_INCH,MicroInch:0.0000254/OpenLayers.METERS_PER_INCH,Mil:2.54e-8/OpenLayers.METERS_PER_INCH,Centimeter:0.01/OpenLayers.METERS_PER_INCH,Kilometer:1000/OpenLayers.METERS_PER_INCH,Yard:0.9144018288036576/OpenLayers.METERS_PER_INCH,SearsYard:0.914398414616029/OpenLayers.METERS_PER_INCH,IndianYard:0.9143985307444408/OpenLayers.METERS_PER_INCH,IndianYd37:0.91439523/OpenLayers.METERS_PER_INCH,IndianYd62:0.9143988/OpenLayers.METERS_PER_INCH,IndianYd75:0.9143985/OpenLayers.METERS_PER_INCH,IndianFoot:0.30479951/OpenLayers.METERS_PER_INCH,IndianFt37:0.30479841/OpenLayers.METERS_PER_INCH,IndianFt62:0.3047996/OpenLayers.METERS_PER_INCH,IndianFt75:0.3047995/OpenLayers.METERS_PER_INCH,Mile:1609.3472186944373/OpenLayers.METERS_PER_INCH,IYard:0.9144/OpenLayers.METERS_PER_INCH,IMile:1609.344/OpenLayers.METERS_PER_INCH,NautM:1852/OpenLayers.METERS_PER_INCH,"Lat-66":110943.31648893273/OpenLayers.METERS_PER_INCH,"Lat-83":110946.25736872235/OpenLayers.METERS_PER_INCH,Decimeter:0.1/OpenLayers.METERS_PER_INCH,Millimeter:0.001/OpenLayers.METERS_PER_INCH,Dekameter:10/OpenLayers.METERS_PER_INCH,Decameter:10/OpenLayers.METERS_PER_INCH,Hectometer:100/OpenLayers.METERS_PER_INCH,GermanMeter:1.0000135965/OpenLayers.METERS_PER_INCH,CaGrid:0.999738/OpenLayers.METERS_PER_INCH,ClarkeChain:20.1166194976/OpenLayers.METERS_PER_INCH,GunterChain:20.11684023368047/OpenLayers.METERS_PER_INCH,BenoitChain:20.116782494375872/OpenLayers.METERS_PER_INCH,SearsChain:20.11676512155/OpenLayers.METERS_PER_INCH,ClarkeLink:0.201166194976/OpenLayers.METERS_PER_INCH,GunterLink:0.2011684023368047/OpenLayers.METERS_PER_INCH,BenoitLink:0.20116782494375873/OpenLayers.METERS_PER_INCH,SearsLink:0.2011676512155/OpenLayers.METERS_PER_INCH,Rod:5.02921005842012/OpenLayers.METERS_PER_INCH,IntnlChain:20.1168/OpenLayers.METERS_PER_INCH,IntnlLink:0.201168/OpenLayers.METERS_PER_INCH,Perch:5.02921005842012/OpenLayers.METERS_PER_INCH,Pole:5.02921005842012/OpenLayers.METERS_PER_INCH,Furlong:201.1684023368046/OpenLayers.METERS_PER_INCH,Rood:3.778266898/OpenLayers.METERS_PER_INCH,CapeFoot:0.3047972615/OpenLayers.METERS_PER_INCH,Brealey:375/OpenLayers.METERS_PER_INCH,ModAmFt:0.304812252984506/OpenLayers.METERS_PER_INCH,Fathom:1.8288/OpenLayers.METERS_PER_INCH,"NautM-UK":1853.184/OpenLayers.METERS_PER_INCH,"50kilometers":50000/OpenLayers.METERS_PER_INCH,"150kilometers":150000/OpenLayers.METERS_PER_INCH});OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{mm:OpenLayers.INCHES_PER_UNIT.Meter/1000,cm:OpenLayers.INCHES_PER_UNIT.Meter/100,dm:OpenLayers.INCHES_PER_UNIT.Meter*100,km:OpenLayers.INCHES_PER_UNIT.Meter*1000,kmi:OpenLayers.INCHES_PER_UNIT.nmi,fath:OpenLayers.INCHES_PER_UNIT.Fathom,ch:OpenLayers.INCHES_PER_UNIT.IntnlChain,link:OpenLayers.INCHES_PER_UNIT.IntnlLink,"us-in":OpenLayers.INCHES_PER_UNIT.inches,"us-ft":OpenLayers.INCHES_PER_UNIT.Foot,"us-yd":OpenLayers.INCHES_PER_UNIT.Yard,"us-ch":OpenLayers.INCHES_PER_UNIT.GunterChain,"us-mi":OpenLayers.INCHES_PER_UNIT.Mile,"ind-yd":OpenLayers.INCHES_PER_UNIT.IndianYd37,"ind-ft":OpenLayers.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/OpenLayers.METERS_PER_INCH});OpenLayers.DOTS_PER_INCH=72;OpenLayers.Util.normalizeScale=function(b){var a=(b>1)?(1/b):b;return a};OpenLayers.Util.getResolutionFromScale=function(d,a){var b;if(d){if(a==null){a="degrees"}var c=OpenLayers.Util.normalizeScale(d);b=1/(c*OpenLayers.INCHES_PER_UNIT[a]*OpenLayers.DOTS_PER_INCH)}return b};OpenLayers.Util.getScaleFromResolution=function(b,a){if(a==null){a="degrees"}var c=b*OpenLayers.INCHES_PER_UNIT[a]*OpenLayers.DOTS_PER_INCH;return c};OpenLayers.Util.pagePosition=function(d){var j=[0,0];var i=OpenLayers.Util.getViewportElement();if(!d||d==window||d==i){return j}var g=OpenLayers.IS_GECKO&&document.getBoxObjectFor&&OpenLayers.Element.getStyle(d,"position")=="absolute"&&(d.style.top==""||d.style.left=="");var k=null;var h;if(d.getBoundingClientRect){h=d.getBoundingClientRect();var b=window.pageYOffset||i.scrollTop;var c=window.pageXOffset||i.scrollLeft;j[0]=h.left+c;j[1]=h.top+b}else{if(document.getBoxObjectFor&&!g){h=document.getBoxObjectFor(d);var a=document.getBoxObjectFor(i);j[0]=h.screenX-a.screenX;j[1]=h.screenY-a.screenY}else{j[0]=d.offsetLeft;j[1]=d.offsetTop;k=d.offsetParent;if(k!=d){while(k){j[0]+=k.offsetLeft;j[1]+=k.offsetTop;k=k.offsetParent}}var e=OpenLayers.BROWSER_NAME;if(e=="opera"||(e=="safari"&&OpenLayers.Element.getStyle(d,"position")=="absolute")){j[1]-=document.body.offsetTop}k=d.offsetParent;while(k&&k!=document.body){j[0]-=k.scrollLeft;if(e!="opera"||k.tagName!="TR"){j[1]-=k.scrollTop}k=k.offsetParent}}}return j};OpenLayers.Util.getViewportElement=function(){var a=arguments.callee.viewportElement;if(a==undefined){a=(OpenLayers.BROWSER_NAME=="msie"&&document.compatMode!="CSS1Compat")?document.body:document.documentElement;arguments.callee.viewportElement=a}return a};OpenLayers.Util.isEquivalentUrl=function(g,e,c){c=c||{};OpenLayers.Util.applyDefaults(c,{ignoreCase:true,ignorePort80:true,ignoreHash:true,splitArgs:false});var b=OpenLayers.Util.createUrlObject(g,c);var a=OpenLayers.Util.createUrlObject(e,c);for(var d in b){if(d!=="args"){if(b[d]!=a[d]){return false}}}for(var d in b.args){if(b.args[d]!=a.args[d]){return false}delete a.args[d]}for(var d in a.args){return false}return true};OpenLayers.Util.createUrlObject=function(c,l){l=l||{};if(!(/^\w+:\/\//).test(c)){var h=window.location;var e=h.port?":"+h.port:"";var i=h.protocol+"//"+h.host.split(":").shift()+e;if(c.indexOf("/")===0){c=i+c}else{var g=h.pathname.split("/");g.pop();c=i+g.join("/")+"/"+c}}if(l.ignoreCase){c=c.toLowerCase()}var j=document.createElement("a");j.href=c;var d={};d.host=j.host.split(":").shift();d.protocol=j.protocol;if(l.ignorePort80){d.port=(j.port=="80"||j.port=="0")?"":j.port}else{d.port=(j.port==""||j.port=="0")?"80":j.port}d.hash=(l.ignoreHash||j.hash==="#")?"":j.hash;var b=j.search;if(!b){var k=c.indexOf("?");b=(k!=-1)?c.substr(k):""}d.args=OpenLayers.Util.getParameters(b,{splitArgs:l.splitArgs});d.pathname=(j.pathname.charAt(0)=="/")?j.pathname:"/"+j.pathname;return d};OpenLayers.Util.removeTail=function(b){var c=null;var a=b.indexOf("?");var d=b.indexOf("#");if(a==-1){c=(d!=-1)?b.substr(0,d):b}else{c=(d!=-1)?b.substr(0,Math.min(a,d)):b.substr(0,a)}return c};OpenLayers.IS_GECKO=(function(){var a=navigator.userAgent.toLowerCase();return a.indexOf("webkit")==-1&&a.indexOf("gecko")!=-1})();OpenLayers.CANVAS_SUPPORTED=(function(){var a=document.createElement("canvas");return !!(a.getContext&&a.getContext("2d"))})();OpenLayers.BROWSER_NAME=(function(){var a="";var b=navigator.userAgent.toLowerCase();if(b.indexOf("opera")!=-1){a="opera"}else{if(b.indexOf("msie")!=-1){a="msie"}else{if(b.indexOf("safari")!=-1){a="safari"}else{if(b.indexOf("mozilla")!=-1){if(b.indexOf("firefox")!=-1){a="firefox"}else{a="mozilla"}}}}}return a})();OpenLayers.Util.getBrowserName=function(){return OpenLayers.BROWSER_NAME};OpenLayers.Util.getRenderedDimensions=function(b,p,q){var n,e;var a=document.createElement("div");a.style.visibility="hidden";var o=(q&&q.containerElement)?q.containerElement:document.body;var r=false;var j=null;var m=o;while(m&&m.tagName.toLowerCase()!="body"){var k=OpenLayers.Element.getStyle(m,"position");if(k=="absolute"){r=true;break}else{if(k&&k!="static"){break}}m=m.parentNode}if(r&&(o.clientHeight===0||o.clientWidth===0)){j=document.createElement("div");j.style.visibility="hidden";j.style.position="absolute";j.style.overflow="visible";j.style.width=document.body.clientWidth+"px";j.style.height=document.body.clientHeight+"px";j.appendChild(a)}a.style.position="absolute";if(p){if(p.w){n=p.w;a.style.width=n+"px"}else{if(p.h){e=p.h;a.style.height=e+"px"}}}if(q&&q.displayClass){a.className=q.displayClass}var g=document.createElement("div");g.innerHTML=b;g.style.overflow="visible";if(g.childNodes){for(var d=0,c=g.childNodes.length;d<c;d++){if(!g.childNodes[d].style){continue}g.childNodes[d].style.overflow="visible"}}a.appendChild(g);if(j){o.appendChild(j)}else{o.appendChild(a)}if(!n){n=parseInt(g.scrollWidth);a.style.width=n+"px"}if(!e){e=parseInt(g.scrollHeight)}a.removeChild(g);if(j){j.removeChild(a);o.removeChild(j)}else{o.removeChild(a)}return new OpenLayers.Size(n,e)};OpenLayers.Util.getScrollbarWidth=function(){var c=OpenLayers.Util._scrollbarWidth;if(c==null){var e=null;var d=null;var a=0;var b=0;e=document.createElement("div");e.style.position="absolute";e.style.top="-1000px";e.style.left="-1000px";e.style.width="100px";e.style.height="50px";e.style.overflow="hidden";d=document.createElement("div");d.style.width="100%";d.style.height="200px";e.appendChild(d);document.body.appendChild(e);a=d.offsetWidth;e.style.overflow="scroll";b=d.offsetWidth;document.body.removeChild(document.body.lastChild);OpenLayers.Util._scrollbarWidth=(a-b);c=OpenLayers.Util._scrollbarWidth}return c};OpenLayers.Util.getFormattedLonLat=function(i,b,e){if(!e){e="dms"}i=(i+540)%360-180;var d=Math.abs(i);var j=Math.floor(d);var a=(d-j)/(1/60);var c=a;a=Math.floor(a);var h=(c-a)/(1/60);h=Math.round(h*10);h/=10;if(h>=60){h-=60;a+=1;if(a>=60){a-=60;j+=1}}if(j<10){j="0"+j}var g=j+"\u00B0";if(e.indexOf("dm")>=0){if(a<10){a="0"+a}g+=a+"'";if(e.indexOf("dms")>=0){if(h<10){h="0"+h}g+=h+'"'}}if(b=="lon"){g+=i<0?OpenLayers.i18n("W"):OpenLayers.i18n("E")}else{g+=i<0?OpenLayers.i18n("S"):OpenLayers.i18n("N")}return g};OpenLayers.Util.getConstructor=function(c){var e;var d=c.split(".");if(d[0]==="OpenLayers"){e=OpenLayers}else{e=window[d[0]]}for(var a=1,b=d.length;a<b;++a){e=e[d[a]]}return e};OpenLayers.Feature=OpenLayers.Class({layer:null,id:null,lonlat:null,data:null,marker:null,popupClass:null,popup:null,initialize:function(a,c,b){this.layer=a;this.lonlat=c;this.data=(b!=null)?b:{};this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){if((this.layer!=null)&&(this.layer.map!=null)){if(this.popup!=null){this.layer.map.removePopup(this.popup)}}if(this.layer!=null&&this.marker!=null){this.layer.removeMarker(this.marker)}this.layer=null;this.id=null;this.lonlat=null;this.data=null;if(this.marker!=null){this.destroyMarker(this.marker);this.marker=null}if(this.popup!=null){this.destroyPopup(this.popup);this.popup=null}},onScreen:function(){var b=false;if((this.layer!=null)&&(this.layer.map!=null)){var a=this.layer.map.getExtent();b=a.containsLonLat(this.lonlat)}return b},createMarker:function(){if(this.lonlat!=null){this.marker=new OpenLayers.Marker(this.lonlat,this.data.icon)}return this.marker},destroyMarker:function(){this.marker.destroy()},createPopup:function(b){if(this.lonlat!=null){if(!this.popup){var a=(this.marker)?this.marker.icon:null;var c=this.popupClass?this.popupClass:OpenLayers.Popup.Anchored;this.popup=new c(this.id+"_popup",this.lonlat,this.data.popupSize,this.data.popupContentHTML,a,b)}if(this.data.overflow!=null){this.popup.contentDiv.style.overflow=this.data.overflow}this.popup.feature=this}return this.popup},destroyPopup:function(){if(this.popup){this.popup.feature=null;this.popup.destroy();this.popup=null}},CLASS_NAME:"OpenLayers.Feature"});OpenLayers.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"};OpenLayers.Feature.Vector=OpenLayers.Class(OpenLayers.Feature,{fid:null,geometry:null,attributes:null,bounds:null,state:null,style:null,url:null,renderIntent:"default",modified:null,initialize:function(c,a,b){OpenLayers.Feature.prototype.initialize.apply(this,[null,null,a]);this.lonlat=null;this.geometry=c?c:null;this.state=null;this.attributes={};if(a){this.attributes=OpenLayers.Util.extend(this.attributes,a)}this.style=b?b:null},destroy:function(){if(this.layer){this.layer.removeFeatures(this);this.layer=null}this.geometry=null;this.modified=null;OpenLayers.Feature.prototype.destroy.apply(this,arguments)},clone:function(){return new OpenLayers.Feature.Vector(this.geometry?this.geometry.clone():null,this.attributes,this.style)},onScreen:function(d){var c=false;if(this.layer&&this.layer.map){var a=this.layer.map.getExtent();if(d){var b=this.geometry.getBounds();c=a.intersectsBounds(b)}else{var e=a.toGeometry();c=e.intersects(this.geometry)}}return c},getVisibility:function(){return !(this.style&&this.style.display=="none"||!this.layer||this.layer&&this.layer.styleMap&&this.layer.styleMap.createSymbolizer(this,this.renderIntent).display=="none"||this.layer&&!this.layer.getVisibility())},createMarker:function(){return null},destroyMarker:function(){},createPopup:function(){return null},atPoint:function(b,d,c){var a=false;if(this.geometry){a=this.geometry.atPoint(b,d,c)}return a},destroyPopup:function(){},move:function(a){if(!this.layer||!this.geometry.move){return undefined}var b;if(a.CLASS_NAME=="OpenLayers.LonLat"){b=this.layer.getViewPortPxFromLonLat(a)}else{b=a}var d=this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat());var c=this.layer.map.getResolution();this.geometry.move(c*(b.x-d.x),c*(d.y-b.y));this.layer.drawFeature(this);return d},toState:function(a){if(a==OpenLayers.State.UPDATE){switch(this.state){case OpenLayers.State.UNKNOWN:case OpenLayers.State.DELETE:this.state=a;break;case OpenLayers.State.UPDATE:case OpenLayers.State.INSERT:break}}else{if(a==OpenLayers.State.INSERT){switch(this.state){case OpenLayers.State.UNKNOWN:break;default:this.state=a;break}}else{if(a==OpenLayers.State.DELETE){switch(this.state){case OpenLayers.State.INSERT:break;case OpenLayers.State.DELETE:break;case OpenLayers.State.UNKNOWN:case OpenLayers.State.UPDATE:this.state=a;break}}else{if(a==OpenLayers.State.UNKNOWN){this.state=a}}}}},CLASS_NAME:"OpenLayers.Feature.Vector"});OpenLayers.Feature.Vector.style={"default":{fillColor:"#ee9900",fillOpacity:0.4,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:0.4,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:0.2,hoverFillColor:"white",hoverFillOpacity:0.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:0.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},"delete":{display:"none"}};OpenLayers.Style=OpenLayers.Class({id:null,name:null,title:null,description:null,layerName:null,isDefault:false,rules:null,context:null,defaultStyle:null,defaultsPerSymbolizer:false,propertyStyles:null,initialize:function(b,a){OpenLayers.Util.extend(this,a);this.rules=[];if(a&&a.rules){this.addRules(a.rules)}this.setDefaultStyle(b||OpenLayers.Feature.Vector.style["default"]);this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){for(var b=0,a=this.rules.length;b<a;b++){this.rules[b].destroy();this.rules[b]=null}this.rules=null;this.defaultStyle=null},createSymbolizer:function(l){var a=this.defaultsPerSymbolizer?{}:this.createLiterals(OpenLayers.Util.extend({},this.defaultStyle),l);var k=this.rules;var j,b;var c=[];var g=false;for(var d=0,e=k.length;d<e;d++){j=k[d];var h=j.evaluate(l);if(h){if(j instanceof OpenLayers.Rule&&j.elseFilter){c.push(j)}else{g=true;this.applySymbolizer(j,a,l)}}}if(g==false&&c.length>0){g=true;for(var d=0,e=c.length;d<e;d++){this.applySymbolizer(c[d],a,l)}}if(k.length>0&&g==false){a.display="none"}if(a.label!=null&&typeof a.label!=="string"){a.label=String(a.label)}return a},applySymbolizer:function(g,d,b){var a=b.geometry?this.getSymbolizerPrefix(b.geometry):OpenLayers.Style.SYMBOLIZER_PREFIXES[0];var c=g.symbolizer[a]||g.symbolizer;if(this.defaultsPerSymbolizer===true){var e=this.defaultStyle;OpenLayers.Util.applyDefaults(c,{pointRadius:e.pointRadius});if(c.stroke===true||c.graphic===true){OpenLayers.Util.applyDefaults(c,{strokeWidth:e.strokeWidth,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeDashstyle:e.strokeDashstyle,strokeLinecap:e.strokeLinecap})}if(c.fill===true||c.graphic===true){OpenLayers.Util.applyDefaults(c,{fillColor:e.fillColor,fillOpacity:e.fillOpacity})}if(c.graphic===true){OpenLayers.Util.applyDefaults(c,{pointRadius:this.defaultStyle.pointRadius,externalGraphic:this.defaultStyle.externalGraphic,graphicName:this.defaultStyle.graphicName,graphicOpacity:this.defaultStyle.graphicOpacity,graphicWidth:this.defaultStyle.graphicWidth,graphicHeight:this.defaultStyle.graphicHeight,graphicXOffset:this.defaultStyle.graphicXOffset,graphicYOffset:this.defaultStyle.graphicYOffset})}}return this.createLiterals(OpenLayers.Util.extend(d,c),b)},createLiterals:function(d,c){var b=OpenLayers.Util.extend({},c.attributes||c.data);OpenLayers.Util.extend(b,this.context);for(var a in this.propertyStyles){d[a]=OpenLayers.Style.createLiteral(d[a],b,c,a)}return d},findPropertyStyles:function(){var d={};var g=this.defaultStyle;this.addPropertyStyles(d,g);var j=this.rules;var e,h;for(var c=0,a=j.length;c<a;c++){e=j[c].symbolizer;for(var b in e){h=e[b];if(typeof h=="object"){this.addPropertyStyles(d,h)}else{this.addPropertyStyles(d,e);break}}}return d},addPropertyStyles:function(b,c){var d;for(var a in c){d=c[a];if(typeof d=="string"&&d.match(/\$\{\w+\}/)){b[a]=true}}return b},addRules:function(a){Array.prototype.push.apply(this.rules,a);this.propertyStyles=this.findPropertyStyles()},setDefaultStyle:function(a){this.defaultStyle=a;this.propertyStyles=this.findPropertyStyles()},getSymbolizerPrefix:function(d){var c=OpenLayers.Style.SYMBOLIZER_PREFIXES;for(var b=0,a=c.length;b<a;b++){if(d.CLASS_NAME.indexOf(c[b])!=-1){return c[b]}}},clone:function(){var b=OpenLayers.Util.extend({},this);if(this.rules){b.rules=[];for(var c=0,a=this.rules.length;c<a;++c){b.rules.push(this.rules[c].clone())}}b.context=this.context&&OpenLayers.Util.extend({},this.context);var d=OpenLayers.Util.extend({},this.defaultStyle);return new OpenLayers.Style(d,b)},CLASS_NAME:"OpenLayers.Style"});OpenLayers.Style.createLiteral=function(d,b,a,c){if(typeof d=="string"&&d.indexOf("${")!=-1){d=OpenLayers.String.format(d,b,[a,c]);d=(isNaN(d)||!d)?d:parseFloat(d)}return d};OpenLayers.Style.SYMBOLIZER_PREFIXES=["Point","Line","Polygon","Text","Raster"];OpenLayers.Geometry=OpenLayers.Class({id:null,parent:null,bounds:null,initialize:function(){this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},destroy:function(){this.id=null;this.bounds=null},clone:function(){return new OpenLayers.Geometry()},setBounds:function(a){if(a){this.bounds=a.clone()}},clearBounds:function(){this.bounds=null;if(this.parent){this.parent.clearBounds()}},extendBounds:function(b){var a=this.getBounds();if(!a){this.setBounds(b)}else{this.bounds.extend(b)}},getBounds:function(){if(this.bounds==null){this.calculateBounds()}return this.bounds},calculateBounds:function(){},distanceTo:function(b,a){},getVertices:function(a){},atPoint:function(e,i,g){var c=false;var d=this.getBounds();if((d!=null)&&(e!=null)){var b=(i!=null)?i:0;var a=(g!=null)?g:0;var h=new OpenLayers.Bounds(this.bounds.left-b,this.bounds.bottom-a,this.bounds.right+b,this.bounds.top+a);c=h.containsLonLat(e)}return c},getLength:function(){return 0},getArea:function(){return 0},getCentroid:function(){return null},toString:function(){var a;if(OpenLayers.Format&&OpenLayers.Format.WKT){a=OpenLayers.Format.WKT.prototype.write(new OpenLayers.Feature.Vector(this))}else{a=Object.prototype.toString.call(this)}return a},CLASS_NAME:"OpenLayers.Geometry"});OpenLayers.Geometry.fromWKT=function(g){var d;if(OpenLayers.Format&&OpenLayers.Format.WKT){var h=OpenLayers.Geometry.fromWKT.format;if(!h){h=new OpenLayers.Format.WKT();OpenLayers.Geometry.fromWKT.format=h}var b=h.read(g);if(b instanceof OpenLayers.Feature.Vector){d=b.geometry}else{if(OpenLayers.Util.isArray(b)){var a=b.length;var e=new Array(a);for(var c=0;c<a;++c){e[c]=b[c].geometry}d=new OpenLayers.Geometry.Collection(e)}}}return d};OpenLayers.Geometry.segmentsIntersect=function(a,I,b){var t=b&&b.point;var A=b&&b.tolerance;var g=false;var C=a.x1-I.x1;var G=a.y1-I.y1;var q=a.x2-a.x1;var z=a.y2-a.y1;var u=I.y2-I.y1;var m=I.x2-I.x1;var E=(u*q)-(m*z);var e=(m*G)-(u*C);var c=(q*G)-(z*C);if(E==0){if(e==0&&c==0){g=true}}else{var F=e/E;var D=c/E;if(F>=0&&F<=1&&D>=0&&D<=1){if(!t){g=true}else{var k=a.x1+(F*q);var h=a.y1+(F*z);g=new OpenLayers.Geometry.Point(k,h)}}}if(A){var s;if(g){if(t){var o=[a,I];var B,k,h;outer:for(var w=0;w<2;++w){B=o[w];for(var v=1;v<3;++v){k=B["x"+v];h=B["y"+v];s=Math.sqrt(Math.pow(k-g.x,2)+Math.pow(h-g.y,2));if(s<A){g.x=k;g.y=h;break outer}}}}}else{var o=[a,I];var r,H,k,h,n,l;outer:for(var w=0;w<2;++w){r=o[w];H=o[(w+1)%2];for(var v=1;v<3;++v){n={x:r["x"+v],y:r["y"+v]};l=OpenLayers.Geometry.distanceToSegment(n,H);if(l.distance<A){if(t){g=new OpenLayers.Geometry.Point(n.x,n.y)}else{g=true}break outer}}}}}return g};OpenLayers.Geometry.distanceToSegment=function(b,c){var a=OpenLayers.Geometry.distanceSquaredToSegment(b,c);a.distance=Math.sqrt(a.distance);return a};OpenLayers.Geometry.distanceSquaredToSegment=function(l,d){var c=l.x;var k=l.y;var b=d.x1;var j=d.y1;var a=d.x2;var g=d.y2;var n=a-b;var m=g-j;var i=(n==0&&m==0)?0:((n*(c-b))+(m*(k-j)))/(Math.pow(n,2)+Math.pow(m,2));var h,e;if(i<=0){h=b;e=j}else{if(i>=1){h=a;e=g}else{h=b+i*n;e=j+i*m}}return{distance:Math.pow(h-c,2)+Math.pow(e-k,2),x:h,y:e,along:i}};OpenLayers.Geometry.Collection=OpenLayers.Class(OpenLayers.Geometry,{components:null,componentTypes:null,initialize:function(a){OpenLayers.Geometry.prototype.initialize.apply(this,arguments);this.components=[];if(a!=null){this.addComponents(a)}},destroy:function(){this.components.length=0;this.components=null;OpenLayers.Geometry.prototype.destroy.apply(this,arguments)},clone:function(){var d=OpenLayers.Util.getConstructor(this.CLASS_NAME);var c=new d();for(var b=0,a=this.components.length;b<a;b++){c.addComponent(this.components[b].clone())}OpenLayers.Util.applyDefaults(c,this);return c},getComponentsString:function(){var b=[];for(var c=0,a=this.components.length;c<a;c++){b.push(this.components[c].toShortString())}return b.join(",")},calculateBounds:function(){this.bounds=null;var d=new OpenLayers.Bounds();var c=this.components;if(c){for(var b=0,a=c.length;b<a;b++){d.extend(c[b].getBounds())}}if(d.left!=null&&d.bottom!=null&&d.right!=null&&d.top!=null){this.setBounds(d)}},addComponents:function(c){if(!(OpenLayers.Util.isArray(c))){c=[c]}for(var b=0,a=c.length;b<a;b++){this.addComponent(c[b])}},addComponent:function(b,a){var d=false;if(b){if(this.componentTypes==null||(OpenLayers.Util.indexOf(this.componentTypes,b.CLASS_NAME)>-1)){if(a!=null&&(a<this.components.length)){var e=this.components.slice(0,a);var c=this.components.slice(a,this.components.length);e.push(b);this.components=e.concat(c)}else{this.components.push(b)}b.parent=this;this.clearBounds();d=true}}return d},removeComponents:function(b){var c=false;if(!(OpenLayers.Util.isArray(b))){b=[b]}for(var a=b.length-1;a>=0;--a){c=this.removeComponent(b[a])||c}return c},removeComponent:function(a){OpenLayers.Util.removeItem(this.components,a);this.clearBounds();return true},getLength:function(){var c=0;for(var b=0,a=this.components.length;b<a;b++){c+=this.components[b].getLength()}return c},getArea:function(){var c=0;for(var b=0,a=this.components.length;b<a;b++){c+=this.components[b].getArea()}return c},getGeodesicArea:function(b){var d=0;for(var c=0,a=this.components.length;c<a;c++){d+=this.components[c].getGeodesicArea(b)}return d},getCentroid:function(h){if(!h){return this.components.length&&this.components[0].getCentroid()}var m=this.components.length;if(!m){return false}var b=[];var c=[];var d=0;var j=Number.MAX_VALUE;var n;for(var l=0;l<m;++l){n=this.components[l];var e=n.getArea();var g=n.getCentroid(true);if(isNaN(e)||isNaN(g.x)||isNaN(g.y)){continue}b.push(e);d+=e;j=(e<j&&e>0)?e:j;c.push(g)}m=b.length;if(d===0){for(var l=0;l<m;++l){b[l]=1}d=b.length}else{for(var l=0;l<m;++l){b[l]/=j}d/=j}var k=0,a=0,g,e;for(var l=0;l<m;++l){g=c[l];e=b[l];k+=g.x*e;a+=g.y*e}return new OpenLayers.Geometry.Point(k/d,a/d)},getGeodesicLength:function(b){var d=0;for(var c=0,a=this.components.length;c<a;c++){d+=this.components[c].getGeodesicLength(b)}return d},move:function(b,d){for(var c=0,a=this.components.length;c<a;c++){this.components[c].move(b,d)}},rotate:function(d,b){for(var c=0,a=this.components.length;c<a;++c){this.components[c].rotate(d,b)}},resize:function(d,a,c){for(var b=0;b<this.components.length;++b){this.components[b].resize(d,a,c)}return this},distanceTo:function(j,k){var c=!(k&&k.edge===false);var a=c&&k&&k.details;var l,d,b;var e=Number.POSITIVE_INFINITY;for(var g=0,h=this.components.length;g<h;++g){l=this.components[g].distanceTo(j,k);b=a?l.distance:l;if(b<e){e=b;d=l;if(e==0){break}}}return d},equals:function(d){var b=true;if(!d||!d.CLASS_NAME||(this.CLASS_NAME!=d.CLASS_NAME)){b=false}else{if(!(OpenLayers.Util.isArray(d.components))||(d.components.length!=this.components.length)){b=false}else{for(var c=0,a=this.components.length;c<a;++c){if(!this.components[c].equals(d.components[c])){b=false;break}}}}return b},transform:function(e,c){if(e&&c){for(var d=0,a=this.components.length;d<a;d++){var b=this.components[d];b.transform(e,c)}this.bounds=null}return this},intersects:function(d){var b=false;for(var c=0,a=this.components.length;c<a;++c){b=d.intersects(this.components[c]);if(b){break}}return b},getVertices:function(b){var c=[];for(var d=0,a=this.components.length;d<a;++d){Array.prototype.push.apply(c,this.components[d].getVertices(b))}return c},CLASS_NAME:"OpenLayers.Geometry.Collection"});OpenLayers.Geometry.Point=OpenLayers.Class(OpenLayers.Geometry,{x:null,y:null,initialize:function(a,b){OpenLayers.Geometry.prototype.initialize.apply(this,arguments);this.x=parseFloat(a);this.y=parseFloat(b)},clone:function(a){if(a==null){a=new OpenLayers.Geometry.Point(this.x,this.y)}OpenLayers.Util.applyDefaults(a,this);return a},calculateBounds:function(){this.bounds=new OpenLayers.Bounds(this.x,this.y,this.x,this.y)},distanceTo:function(g,k){var d=!(k&&k.edge===false);var a=d&&k&&k.details;var b,e,i,c,h,j;if(g instanceof OpenLayers.Geometry.Point){e=this.x;i=this.y;c=g.x;h=g.y;b=Math.sqrt(Math.pow(e-c,2)+Math.pow(i-h,2));j=!a?b:{x0:e,y0:i,x1:c,y1:h,distance:b}}else{j=g.distanceTo(this,k);if(a){j={x0:j.x1,y0:j.y1,x1:j.x0,y1:j.y0,distance:j.distance}}}return j},equals:function(a){var b=false;if(a!=null){b=((this.x==a.x&&this.y==a.y)||(isNaN(this.x)&&isNaN(this.y)&&isNaN(a.x)&&isNaN(a.y)))}return b},toShortString:function(){return(this.x+", "+this.y)},move:function(a,b){this.x=this.x+a;this.y=this.y+b;this.clearBounds()},rotate:function(d,b){d*=Math.PI/180;var a=this.distanceTo(b);var c=d+Math.atan2(this.y-b.y,this.x-b.x);this.x=b.x+(a*Math.cos(c));this.y=b.y+(a*Math.sin(c));this.clearBounds()},getCentroid:function(){return new OpenLayers.Geometry.Point(this.x,this.y)},resize:function(c,a,b){b=(b==undefined)?1:b;this.x=a.x+(c*b*(this.x-a.x));this.y=a.y+(c*(this.y-a.y));this.clearBounds();return this},intersects:function(b){var a=false;if(b.CLASS_NAME=="OpenLayers.Geometry.Point"){a=this.equals(b)}else{a=b.intersects(this)}return a},transform:function(b,a){if((b&&a)){OpenLayers.Projection.transform(this,b,a);this.bounds=null}return this},getVertices:function(a){return[this]},CLASS_NAME:"OpenLayers.Geometry.Point"});OpenLayers.Geometry.MultiPoint=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Point"],addPoint:function(a,b){this.addComponent(a,b)},removePoint:function(a){this.removeComponent(a)},CLASS_NAME:"OpenLayers.Geometry.MultiPoint"});OpenLayers.Geometry.Curve=OpenLayers.Class(OpenLayers.Geometry.MultiPoint,{componentTypes:["OpenLayers.Geometry.Point"],getLength:function(){var c=0;if(this.components&&(this.components.length>1)){for(var b=1,a=this.components.length;b<a;b++){c+=this.components[b-1].distanceTo(this.components[b])}}return c},getGeodesicLength:function(b){var e=this;if(b){var c=new OpenLayers.Projection("EPSG:4326");if(!c.equals(b)){e=this.clone().transform(b,c)}}var g=0;if(e.components&&(e.components.length>1)){var j,h;for(var d=1,a=e.components.length;d<a;d++){j=e.components[d-1];h=e.components[d];g+=OpenLayers.Util.distVincenty({lon:j.x,lat:j.y},{lon:h.x,lat:h.y})}}return g*1000},CLASS_NAME:"OpenLayers.Geometry.Curve"});OpenLayers.Geometry.LineString=OpenLayers.Class(OpenLayers.Geometry.Curve,{removeComponent:function(a){var b=this.components&&(this.components.length>2);if(b){OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments)}return b},intersects:function(n){var c=false;var m=n.CLASS_NAME;if(m=="OpenLayers.Geometry.LineString"||m=="OpenLayers.Geometry.LinearRing"||m=="OpenLayers.Geometry.Point"){var q=this.getSortedSegments();var o;if(m=="OpenLayers.Geometry.Point"){o=[{x1:n.x,y1:n.y,x2:n.x,y2:n.y}]}else{o=n.getSortedSegments()}var t,h,e,a,s,r,d,b;outer:for(var k=0,l=q.length;k<l;++k){t=q[k];h=t.x1;e=t.x2;a=t.y1;s=t.y2;inner:for(var g=0,p=o.length;g<p;++g){r=o[g];if(r.x1>e){break}if(r.x2<h){continue}d=r.y1;b=r.y2;if(Math.min(d,b)>Math.max(a,s)){continue}if(Math.max(d,b)<Math.min(a,s)){continue}if(OpenLayers.Geometry.segmentsIntersect(t,r)){c=true;break outer}}}}else{c=n.intersects(this)}return c},getSortedSegments:function(){var a=this.components.length-1;var b=new Array(a),e,d;for(var c=0;c<a;++c){e=this.components[c];d=this.components[c+1];if(e.x<d.x){b[c]={x1:e.x,y1:e.y,x2:d.x,y2:d.y}}else{b[c]={x1:d.x,y1:d.y,x2:e.x,y2:e.y}}}function g(i,h){return i.x1-h.x1}return b.sort(g)},splitWithSegment:function(s,b){var c=!(b&&b.edge===false);var p=b&&b.tolerance;var a=[];var u=this.getVertices();var o=[];var w=[];var j=false;var e,d,m;var k,r,v;var g={point:true,tolerance:p};var h=null;for(var n=0,l=u.length-2;n<=l;++n){e=u[n];o.push(e.clone());d=u[n+1];v={x1:e.x,y1:e.y,x2:d.x,y2:d.y};m=OpenLayers.Geometry.segmentsIntersect(s,v,g);if(m instanceof OpenLayers.Geometry.Point){if((m.x===s.x1&&m.y===s.y1)||(m.x===s.x2&&m.y===s.y2)||m.equals(e)||m.equals(d)){r=true}else{r=false}if(r||c){if(!m.equals(w[w.length-1])){w.push(m.clone())}if(n===0){if(m.equals(e)){continue}}if(m.equals(d)){continue}j=true;if(!m.equals(e)){o.push(m)}a.push(new OpenLayers.Geometry.LineString(o));o=[m.clone()]}}}if(j){o.push(d.clone());a.push(new OpenLayers.Geometry.LineString(o))}if(w.length>0){var q=s.x1<s.x2?1:-1;var t=s.y1<s.y2?1:-1;h={lines:a,points:w.sort(function(x,i){return(q*x.x-q*i.x)||(t*x.y-t*i.y)})}}return h},split:function(y,b){var o=null;var d=b&&b.mutual;var m,e,n,c;if(y instanceof OpenLayers.Geometry.LineString){var x=this.getVertices();var h,g,w,l,a,q;var t=[];n=[];for(var u=0,p=x.length-2;u<=p;++u){h=x[u];g=x[u+1];w={x1:h.x,y1:h.y,x2:g.x,y2:g.y};c=c||[y];if(d){t.push(h.clone())}for(var s=0;s<c.length;++s){l=c[s].splitWithSegment(w,b);if(l){a=l.lines;if(a.length>0){a.unshift(s,1);Array.prototype.splice.apply(c,a);s+=a.length-2}if(d){for(var r=0,v=l.points.length;r<v;++r){q=l.points[r];if(!q.equals(h)){t.push(q);n.push(new OpenLayers.Geometry.LineString(t));if(q.equals(g)){t=[]}else{t=[q.clone()]}}}}}}}if(d&&n.length>0&&t.length>0){t.push(g.clone());n.push(new OpenLayers.Geometry.LineString(t))}}else{o=y.splitWith(this,b)}if(c&&c.length>1){e=true}else{c=[]}if(n&&n.length>1){m=true}else{n=[]}if(e||m){if(d){o=[n,c]}else{o=c}}return o},splitWith:function(b,a){return b.split(this,a)},getVertices:function(a){var b;if(a===true){b=[this.components[0],this.components[this.components.length-1]]}else{if(a===false){b=this.components.slice(1,this.components.length-1)}else{b=this.components.slice()}}return b},distanceTo:function(k,h){var l=!(h&&h.edge===false);var C=l&&h&&h.details;var r,e={};var u=Number.POSITIVE_INFINITY;if(k instanceof OpenLayers.Geometry.Point){var s=this.getSortedSegments();var q=k.x;var p=k.y;var A;for(var w=0,z=s.length;w<z;++w){A=s[w];r=OpenLayers.Geometry.distanceToSegment(k,A);if(r.distance<u){u=r.distance;if(C){e={distance:u,x0:r.x,y0:r.y,x1:q,y1:p,index:w,indexDistance:new OpenLayers.Geometry.Point(A.x1,A.y1).distanceTo(k)}}else{e=u}if(u===0){break}}}}else{if(k instanceof OpenLayers.Geometry.LineString){var d=this.getSortedSegments();var c=k.getSortedSegments();var b,a,o,B,g;var n=c.length;var m={point:true};outer:for(var w=0,z=d.length;w<z;++w){b=d[w];B=b.x1;g=b.y1;for(var v=0;v<n;++v){a=c[v];o=OpenLayers.Geometry.segmentsIntersect(b,a,m);if(o){u=0;e={distance:0,x0:o.x,y0:o.y,x1:o.x,y1:o.y};break outer}else{r=OpenLayers.Geometry.distanceToSegment({x:B,y:g},a);if(r.distance<u){u=r.distance;e={distance:u,x0:B,y0:g,x1:r.x,y1:r.y}}}}}if(!C){e=e.distance}if(u!==0){if(b){r=k.distanceTo(new OpenLayers.Geometry.Point(b.x2,b.y2),h);var t=C?r.distance:r;if(t<u){if(C){e={distance:u,x0:r.x1,y0:r.y1,x1:r.x0,y1:r.y0}}else{e=t}}}}}else{e=k.distanceTo(this,h);if(C){e={distance:e.distance,x0:e.x1,y0:e.y1,x1:e.x0,y1:e.y0}}}}return e},simplify:function(i){if(this&&this!==null){var k=this.getVertices();if(k.length<3){return this}var d=function(m,l){return(m-l)};var c=function(o,r,p,l){var q=0;var n=0;for(var m=r,s;m<p;m++){s=b(o[r],o[p],o[m]);if(s>q){q=s;n=m}}if(q>l&&n!=r){e.push(n);c(o,r,n,l);c(o,n,p,l)}};var b=function(p,o,m){var q=Math.abs(0.5*(p.x*o.y+o.x*m.y+m.x*p.y-o.x*p.y-m.x*o.y-p.x*m.y));var n=Math.sqrt(Math.pow(p.x-o.x,2)+Math.pow(p.y-o.y,2));var l=q/n*2;return l};var g=0;var j=k.length-1;var e=[];e.push(g);e.push(j);while(k[g].equals(k[j])){j--;e.push(j)}c(k,g,j,i);var a=[];e.sort(d);for(var h=0;h<e.length;h++){a.push(k[e[h]])}return new OpenLayers.Geometry.LineString(a)}else{return this}},CLASS_NAME:"OpenLayers.Geometry.LineString"});OpenLayers.Geometry.LinearRing=OpenLayers.Class(OpenLayers.Geometry.LineString,{componentTypes:["OpenLayers.Geometry.Point"],addComponent:function(a,b){var c=false;var d=this.components.pop();if(b!=null||!a.equals(d)){c=OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,arguments)}var e=this.components[0];OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[e]);return c},removeComponent:function(a){var b=this.components&&(this.components.length>3);if(b){this.components.pop();OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this,arguments);var c=this.components[0];OpenLayers.Geometry.Collection.prototype.addComponent.apply(this,[c])}return b},move:function(b,d){for(var c=0,a=this.components.length;c<a-1;c++){this.components[c].move(b,d)}},rotate:function(d,b){for(var c=0,a=this.components.length;c<a-1;++c){this.components[c].rotate(d,b)}},resize:function(e,b,d){for(var c=0,a=this.components.length;c<a-1;++c){this.components[c].resize(e,b,d)}return this},transform:function(e,c){if(e&&c){for(var d=0,a=this.components.length;d<a-1;d++){var b=this.components[d];b.transform(e,c)}this.bounds=null}return this},getCentroid:function(){if(this.components){var g=this.components.length;if(g>0&&g<=2){return this.components[0].clone()}else{if(g>2){var k=0;var h=0;var d=this.components[0].x;var o=this.components[0].y;var a=-1*this.getArea();if(a!=0){for(var e=0;e<g-1;e++){var m=this.components[e];var j=this.components[e+1];k+=(m.x+j.x-2*d)*((m.x-d)*(j.y-o)-(j.x-d)*(m.y-o));h+=(m.y+j.y-2*o)*((m.x-d)*(j.y-o)-(j.x-d)*(m.y-o))}var n=d+k/(6*a);var l=o+h/(6*a)}else{for(var e=0;e<g-1;e++){k+=this.components[e].x;h+=this.components[e].y}var n=k/(g-1);var l=h/(g-1)}return new OpenLayers.Geometry.Point(n,l)}else{return null}}}},getArea:function(){var h=0;if(this.components&&(this.components.length>2)){var g=0;for(var e=0,d=this.components.length;e<d-1;e++){var a=this.components[e];var j=this.components[e+1];g+=(a.x+j.x)*(j.y-a.y)}h=-g/2}return h},getGeodesicArea:function(b){var d=this;if(b){var c=new OpenLayers.Projection("EPSG:4326");if(!c.equals(b)){d=this.clone().transform(b,c)}}var g=0;var a=d.components&&d.components.length;if(a>2){var j,h;for(var e=0;e<a-1;e++){j=d.components[e];h=d.components[e+1];g+=OpenLayers.Util.rad(h.x-j.x)*(2+Math.sin(OpenLayers.Util.rad(j.y))+Math.sin(OpenLayers.Util.rad(h.y)))}g=g*6378137*6378137/2}return g},containsPoint:function(n){var t=OpenLayers.Number.limitSigDigs;var m=14;var l=t(n.x,m);var k=t(n.y,m);function s(x,u,w,i,v){return(x-v)*((i-u)/(v-w))+i}var a=this.components.length-1;var h,g,r,d,p,b,e,c;var j=0;for(var o=0;o<a;++o){h=this.components[o];r=t(h.x,m);d=t(h.y,m);g=this.components[o+1];p=t(g.x,m);b=t(g.y,m);if(d==b){if(k==d){if(r<=p&&(l>=r&&l<=p)||r>=p&&(l<=r&&l>=p)){j=-1;break}}continue}e=t(s(k,r,d,p,b),m);if(e==l){if(d<b&&(k>=d&&k<=b)||d>b&&(k<=d&&k>=b)){j=-1;break}}if(e<=l){continue}if(r!=p&&(e<Math.min(r,p)||e>Math.max(r,p))){continue}if(d<b&&(k>=d&&k<b)||d>b&&(k<d&&k>=b)){++j}}var q=(j==-1)?1:!!(j&1);return q},intersects:function(d){var b=false;if(d.CLASS_NAME=="OpenLayers.Geometry.Point"){b=this.containsPoint(d)}else{if(d.CLASS_NAME=="OpenLayers.Geometry.LineString"){b=d.intersects(this)}else{if(d.CLASS_NAME=="OpenLayers.Geometry.LinearRing"){b=OpenLayers.Geometry.LineString.prototype.intersects.apply(this,[d])}else{for(var c=0,a=d.components.length;c<a;++c){b=d.components[c].intersects(this);if(b){break}}}}}return b},getVertices:function(a){return(a===true)?[]:this.components.slice(0,this.components.length-1)},CLASS_NAME:"OpenLayers.Geometry.LinearRing"});OpenLayers.Geometry.Polygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LinearRing"],getArea:function(){var c=0;if(this.components&&(this.components.length>0)){c+=Math.abs(this.components[0].getArea());for(var b=1,a=this.components.length;b<a;b++){c-=Math.abs(this.components[b].getArea())}}return c},getGeodesicArea:function(b){var d=0;if(this.components&&(this.components.length>0)){d+=Math.abs(this.components[0].getGeodesicArea(b));for(var c=1,a=this.components.length;c<a;c++){d-=Math.abs(this.components[c].getGeodesicArea(b))}}return d},containsPoint:function(a){var e=this.components.length;var c=false;if(e>0){c=this.components[0].containsPoint(a);if(c!==1){if(c&&e>1){var d;for(var b=1;b<e;++b){d=this.components[b].containsPoint(a);if(d){if(d===1){c=1}else{c=false}break}}}}}return c},intersects:function(e){var b=false;var d,a;if(e.CLASS_NAME=="OpenLayers.Geometry.Point"){b=this.containsPoint(e)}else{if(e.CLASS_NAME=="OpenLayers.Geometry.LineString"||e.CLASS_NAME=="OpenLayers.Geometry.LinearRing"){for(d=0,a=this.components.length;d<a;++d){b=e.intersects(this.components[d]);if(b){break}}if(!b){for(d=0,a=e.components.length;d<a;++d){b=this.containsPoint(e.components[d]);if(b){break}}}}else{for(d=0,a=e.components.length;d<a;++d){b=this.intersects(e.components[d]);if(b){break}}}}if(!b&&e.CLASS_NAME=="OpenLayers.Geometry.Polygon"){var c=this.components[0];for(d=0,a=c.components.length;d<a;++d){b=e.containsPoint(c.components[d]);if(b){break}}}return b},distanceTo:function(d,b){var c=!(b&&b.edge===false);var a;if(!c&&this.intersects(d)){a=0}else{a=OpenLayers.Geometry.Collection.prototype.distanceTo.apply(this,[d,b])}return a},CLASS_NAME:"OpenLayers.Geometry.Polygon"});OpenLayers.Geometry.Polygon.createRegularPolygon=function(k,g,b,m){var c=Math.PI*((1/b)-(1/2));if(m){c+=(m/180)*Math.PI}var a,j,h;var l=[];for(var e=0;e<b;++e){a=c+(e*2*Math.PI/b);j=k.x+(g*Math.cos(a));h=k.y+(g*Math.sin(a));l.push(new OpenLayers.Geometry.Point(j,h))}var d=new OpenLayers.Geometry.LinearRing(l);return new OpenLayers.Geometry.Polygon([d])};OpenLayers.Filter=OpenLayers.Class({initialize:function(a){OpenLayers.Util.extend(this,a)},destroy:function(){},evaluate:function(a){return true},clone:function(){return null},toString:function(){var a;if(OpenLayers.Format&&OpenLayers.Format.CQL){a=OpenLayers.Format.CQL.prototype.write(this)}else{a=Object.prototype.toString.call(this)}return a},CLASS_NAME:"OpenLayers.Filter"});OpenLayers.Filter.Function=OpenLayers.Class(OpenLayers.Filter,{name:null,params:null,CLASS_NAME:"OpenLayers.Filter.Function"});OpenLayers.Format=OpenLayers.Class({options:null,externalProjection:null,internalProjection:null,data:null,keepData:false,initialize:function(a){OpenLayers.Util.extend(this,a);this.options=a},destroy:function(){},read:function(a){throw new Error("Read not implemented.")},write:function(a){throw new Error("Write not implemented.")},CLASS_NAME:"OpenLayers.Format"});OpenLayers.Format.XML=OpenLayers.Class(OpenLayers.Format,{namespaces:null,namespaceAlias:null,defaultPrefix:null,readers:{},writers:{},xmldom:null,initialize:function(a){if(window.ActiveXObject){this.xmldom=new ActiveXObject("Microsoft.XMLDOM")}OpenLayers.Format.prototype.initialize.apply(this,[a]);this.namespaces=OpenLayers.Util.extend({},this.namespaces);this.namespaceAlias={};for(var b in this.namespaces){this.namespaceAlias[this.namespaces[b]]=b}},destroy:function(){this.xmldom=null;OpenLayers.Format.prototype.destroy.apply(this,arguments)},setNamespace:function(a,b){this.namespaces[a]=b;this.namespaceAlias[b]=a},read:function(c){var a=c.indexOf("<");if(a>0){c=c.substring(a)}var b=OpenLayers.Util.Try(OpenLayers.Function.bind((function(){var d;if(window.ActiveXObject&&!this.xmldom){d=new ActiveXObject("Microsoft.XMLDOM")}else{d=this.xmldom}d.loadXML(c);return d}),this),function(){return new DOMParser().parseFromString(c,"text/xml")},function(){var d=new XMLHttpRequest();d.open("GET","data:text/xml;charset=utf-8,"+encodeURIComponent(c),false);if(d.overrideMimeType){d.overrideMimeType("text/xml")}d.send(null);return d.responseXML});if(this.keepData){this.data=b}return b},write:function(b){var c;if(this.xmldom){c=b.xml}else{var a=new XMLSerializer();if(b.nodeType==1){var d=document.implementation.createDocument("","",null);if(d.importNode){b=d.importNode(b,true)}d.appendChild(b);c=a.serializeToString(d)}else{c=a.serializeToString(b)}}return c},createElementNS:function(c,a){var b;if(this.xmldom){if(typeof c=="string"){b=this.xmldom.createNode(1,a,c)}else{b=this.xmldom.createNode(1,a,"")}}else{b=document.createElementNS(c,a)}return b},createDocumentFragment:function(){var a;if(this.xmldom){a=this.xmldom.createDocumentFragment()}else{a=document.createDocumentFragment()}return a},createTextNode:function(b){var a;if(typeof b!=="string"){b=String(b)}if(this.xmldom){a=this.xmldom.createTextNode(b)}else{a=document.createTextNode(b)}return a},getElementsByTagNameNS:function(e,d,c){var a=[];if(e.getElementsByTagNameNS){a=e.getElementsByTagNameNS(d,c)}else{var b=e.getElementsByTagName("*");var k,g;for(var h=0,j=b.length;h<j;++h){k=b[h];g=(k.prefix)?(k.prefix+":"+c):c;if((c=="*")||(g==k.nodeName)){if((d=="*")||(d==k.namespaceURI)){a.push(k)}}}}return a},getAttributeNodeNS:function(c,b,a){var k=null;if(c.getAttributeNodeNS){k=c.getAttributeNodeNS(b,a)}else{var e=c.attributes;var j,d;for(var g=0,h=e.length;g<h;++g){j=e[g];if(j.namespaceURI==b){d=(j.prefix)?(j.prefix+":"+a):a;if(d==j.nodeName){k=j;break}}}}return k},getAttributeNS:function(e,d,a){var b="";if(e.getAttributeNS){b=e.getAttributeNS(d,a)||""}else{var c=this.getAttributeNodeNS(e,d,a);if(c){b=c.nodeValue}}return b},getChildValue:function(a,c){var b=c||"";if(a){for(var d=a.firstChild;d;d=d.nextSibling){switch(d.nodeType){case 3:case 4:b+=d.nodeValue}}}return b},isSimpleContent:function(a){var c=true;for(var b=a.firstChild;b;b=b.nextSibling){if(b.nodeType===1){c=false;break}}return c},contentType:function(c){var e=false,b=false;var a=OpenLayers.Format.XML.CONTENT_TYPE.EMPTY;for(var d=c.firstChild;d;d=d.nextSibling){switch(d.nodeType){case 1:b=true;break;case 8:break;default:e=true}if(b&&e){break}}if(b&&e){a=OpenLayers.Format.XML.CONTENT_TYPE.MIXED}else{if(b){return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX}else{if(e){return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE}}}return a},hasAttributeNS:function(c,b,a){var d=false;if(c.hasAttributeNS){d=c.hasAttributeNS(b,a)}else{d=!!this.getAttributeNodeNS(c,b,a)}return d},setAttributeNS:function(d,c,a,e){if(d.setAttributeNS){d.setAttributeNS(c,a,e)}else{if(this.xmldom){if(c){var b=d.ownerDocument.createNode(2,a,c);b.nodeValue=e;d.setAttributeNode(b)}else{d.setAttribute(a,e)}}else{throw"setAttributeNS not implemented"}}},createElementNSPlus:function(b,a){a=a||{};var d=a.uri||this.namespaces[a.prefix];if(!d){var g=b.indexOf(":");d=this.namespaces[b.substring(0,g)]}if(!d){d=this.namespaces[this.defaultPrefix]}var c=this.createElementNS(d,b);if(a.attributes){this.setAttributes(c,a.attributes)}var e=a.value;if(e!=null){c.appendChild(this.createTextNode(e))}return c},setAttributes:function(c,e){var d,b;for(var a in e){if(e[a]!=null&&e[a].toString){d=e[a].toString();b=this.namespaces[a.substring(0,a.indexOf(":"))]||null;this.setAttributeNS(c,b,a,d)}}},getFirstElementChild:function(a){if(a.firstElementChild){return a.firstElementChild}else{var b=a.firstChild;while(b.nodeType!=1&&(b=b.nextSibling)){}return b}},readNode:function(c,e){if(!e){e={}}var d=this.readers[c.namespaceURI?this.namespaceAlias[c.namespaceURI]:this.defaultPrefix];if(d){var b=c.localName||c.nodeName.split(":").pop();var a=d[b]||d["*"];if(a){a.apply(this,[c,e])}}return e},readChildNodes:function(d,e){if(!e){e={}}var c=d.childNodes;var g;for(var b=0,a=c.length;b<a;++b){g=c[b];if(g.nodeType==1){this.readNode(g,e)}}return e},writeNode:function(a,g,d){var e,c;var b=a.indexOf(":");if(b>0){e=a.substring(0,b);c=a.substring(b+1)}else{if(d){e=this.namespaceAlias[d.namespaceURI]}else{e=this.defaultPrefix}c=a}var h=this.writers[e][c].apply(this,[g]);if(d){d.appendChild(h)}return h},getChildEl:function(c,a,b){return c&&this.getThisOrNextEl(c.firstChild,a,b)},getNextEl:function(c,a,b){return c&&this.getThisOrNextEl(c.nextSibling,a,b)},getThisOrNextEl:function(d,a,c){outer:for(var b=d;b;b=b.nextSibling){switch(b.nodeType){case 1:if((!a||a===(b.localName||b.nodeName.split(":").pop()))&&(!c||c===b.namespaceURI)){break outer}b=null;break outer;case 3:if(/^\s*$/.test(b.nodeValue)){break}case 4:case 6:case 12:case 10:case 11:b=null;break outer}}return b||null},lookupNamespaceURI:function(e,g){var d=null;if(e){if(e.lookupNamespaceURI){d=e.lookupNamespaceURI(g)}else{outer:switch(e.nodeType){case 1:if(e.namespaceURI!==null&&e.prefix===g){d=e.namespaceURI;break outer}var b=e.attributes.length;if(b){var a;for(var c=0;c<b;++c){a=e.attributes[c];if(a.prefix==="xmlns"&&a.name==="xmlns:"+g){d=a.value||null;break outer}else{if(a.name==="xmlns"&&g===null){d=a.value||null;break outer}}}}d=this.lookupNamespaceURI(e.parentNode,g);break outer;case 2:d=this.lookupNamespaceURI(e.ownerElement,g);break outer;case 9:d=this.lookupNamespaceURI(e.documentElement,g);break outer;case 6:case 12:case 10:case 11:break outer;default:d=this.lookupNamespaceURI(e.parentNode,g);break outer}}}return d},getXMLDoc:function(){if(!OpenLayers.Format.XML.document&&!this.xmldom){if(document.implementation&&document.implementation.createDocument){OpenLayers.Format.XML.document=document.implementation.createDocument("","",null)}else{if(!this.xmldom&&window.ActiveXObject){this.xmldom=new ActiveXObject("Microsoft.XMLDOM")}}}return OpenLayers.Format.XML.document||this.xmldom},CLASS_NAME:"OpenLayers.Format.XML"});OpenLayers.Format.XML.CONTENT_TYPE={EMPTY:0,SIMPLE:1,COMPLEX:2,MIXED:3};OpenLayers.Format.XML.lookupNamespaceURI=OpenLayers.Function.bind(OpenLayers.Format.XML.prototype.lookupNamespaceURI,OpenLayers.Format.XML.prototype);OpenLayers.Format.XML.document=null;OpenLayers.Geometry.MultiLineString=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.LineString"],split:function(o,t){var h=null;var s=t&&t.mutual;var p,a,r,n,b;var e=[];var q=[o];for(var g=0,l=this.components.length;g<l;++g){a=this.components[g];n=false;for(var d=0;d<q.length;++d){p=a.split(q[d],t);if(p){if(s){r=p[0];for(var c=0,m=r.length;c<m;++c){if(c===0&&e.length){e[e.length-1].addComponent(r[c])}else{e.push(new OpenLayers.Geometry.MultiLineString([r[c]]))}}n=true;p=p[1]}if(p.length){p.unshift(d,1);Array.prototype.splice.apply(q,p);break}}}if(!n){if(e.length){e[e.length-1].addComponent(a.clone())}else{e=[new OpenLayers.Geometry.MultiLineString(a.clone())]}}}if(e&&e.length>1){n=true}else{e=[]}if(q&&q.length>1){b=true}else{q=[]}if(n||b){if(s){h=[e,q]}else{h=q}}return h},splitWith:function(o,t){var h=null;var s=t&&t.mutual;var p,c,r,n,a,e,q;if(o instanceof OpenLayers.Geometry.LineString){q=[];e=[o];for(var g=0,l=this.components.length;g<l;++g){a=false;c=this.components[g];for(var d=0;d<e.length;++d){p=e[d].split(c,t);if(p){if(s){r=p[0];if(r.length){r.unshift(d,1);Array.prototype.splice.apply(e,r);d+=r.length-2}p=p[1];if(p.length===0){p=[c.clone()]}}for(var b=0,m=p.length;b<m;++b){if(b===0&&q.length){q[q.length-1].addComponent(p[b])}else{q.push(new OpenLayers.Geometry.MultiLineString([p[b]]))}}a=true}}if(!a){if(q.length){q[q.length-1].addComponent(c.clone())}else{q=[new OpenLayers.Geometry.MultiLineString([c.clone()])]}}}}else{h=o.split(this)}if(e&&e.length>1){n=true}else{e=[]}if(q&&q.length>1){a=true}else{q=[]}if(n||a){if(s){h=[e,q]}else{h=q}}return h},CLASS_NAME:"OpenLayers.Geometry.MultiLineString"});OpenLayers.Geometry.MultiPolygon=OpenLayers.Class(OpenLayers.Geometry.Collection,{componentTypes:["OpenLayers.Geometry.Polygon"],CLASS_NAME:"OpenLayers.Geometry.MultiPolygon"});OpenLayers.Format.GML=OpenLayers.Class(OpenLayers.Format.XML,{featureNS:"http://mapserver.gis.umn.edu/mapserver",featurePrefix:"feature",featureName:"featureMember",layerName:"features",geometryName:"geometry",collectionName:"FeatureCollection",gmlns:"http://www.opengis.net/gml",extractAttributes:true,xy:true,initialize:function(a){this.regExes={trimSpace:(/^\s*|\s*$/g),removeSpace:(/\s*/g),splitSpace:(/\s+/),trimComma:(/\s*,\s*/g)};OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(d){if(typeof d=="string"){d=OpenLayers.Format.XML.prototype.read.apply(this,[d])}var e=this.getElementsByTagNameNS(d.documentElement,this.gmlns,this.featureName);var c=[];for(var b=0;b<e.length;b++){var a=this.parseFeature(e[b]);if(a){c.push(a)}}return c},parseFeature:function(o){var r=["MultiPolygon","Polygon","MultiLineString","LineString","MultiPoint","Point","Envelope"];var e,t,g,c;for(var s=0;s<r.length;++s){e=r[s];t=this.getElementsByTagNameNS(o,this.gmlns,e);if(t.length>0){c=this.parseGeometry[e.toLowerCase()];if(c){g=c.apply(this,[t[0]]);if(this.internalProjection&&this.externalProjection){g.transform(this.externalProjection,this.internalProjection)}}else{throw new TypeError("Unsupported geometry type: "+e)}break}}var j;var m=this.getElementsByTagNameNS(o,this.gmlns,"Box");for(s=0;s<m.length;++s){var q=m[s];var n=this.parseGeometry.box.apply(this,[q]);var k=q.parentNode;var p=k.localName||k.nodeName.split(":").pop();if(p==="boundedBy"){j=n}else{g=n.toGeometry()}}var l;if(this.extractAttributes){l=this.parseAttributes(o)}var h=new OpenLayers.Feature.Vector(g,l);h.bounds=j;var b=this.getFirstElementChild(o);h.gml={featureType:b.nodeName.split(":")[1],featureNS:b.namespaceURI,featureNSPrefix:b.prefix};h.type=h.gml.featureType;var d=o.firstChild;var a;while(d){if(d.nodeType==1){a=d.getAttribute("fid")||d.getAttribute("id");if(a){break}}d=d.nextSibling}h.fid=a;return h},parseGeometry:{point:function(d){var b,a;var e=[];var b=this.getElementsByTagNameNS(d,this.gmlns,"pos");if(b.length>0){a=b[0].firstChild.nodeValue;a=a.replace(this.regExes.trimSpace,"");e=a.split(this.regExes.splitSpace)}if(e.length==0){b=this.getElementsByTagNameNS(d,this.gmlns,"coordinates");if(b.length>0){a=b[0].firstChild.nodeValue;a=a.replace(this.regExes.removeSpace,"");e=a.split(",")}}if(e.length==0){b=this.getElementsByTagNameNS(d,this.gmlns,"coord");if(b.length>0){var g=this.getElementsByTagNameNS(b[0],this.gmlns,"X");var c=this.getElementsByTagNameNS(b[0],this.gmlns,"Y");if(g.length>0&&c.length>0){e=[g[0].firstChild.nodeValue,c[0].firstChild.nodeValue]}}}if(e.length==2){e[2]=null}if(this.xy){return new OpenLayers.Geometry.Point(e[0],e[1],e[2])}else{return new OpenLayers.Geometry.Point(e[1],e[0],e[2])}},multipoint:function(e){var b=this.getElementsByTagNameNS(e,this.gmlns,"Point");var d=[];if(b.length>0){var a;for(var c=0;c<b.length;++c){a=this.parseGeometry.point.apply(this,[b[c]]);if(a){d.push(a)}}}return new OpenLayers.Geometry.MultiPoint(d)},linestring:function(c,e){var d,b;var o=[];var p=[];d=this.getElementsByTagNameNS(c,this.gmlns,"posList");if(d.length>0){b=this.getChildValue(d[0]);b=b.replace(this.regExes.trimSpace,"");o=b.split(this.regExes.splitSpace);var k=parseInt(d[0].getAttribute("dimension"));var g,n,m,l;for(var h=0;h<o.length/k;++h){g=h*k;n=o[g];m=o[g+1];l=(k==2)?null:o[g+2];if(this.xy){p.push(new OpenLayers.Geometry.Point(n,m,l))}else{p.push(new OpenLayers.Geometry.Point(m,n,l))}}}if(o.length==0){d=this.getElementsByTagNameNS(c,this.gmlns,"coordinates");if(d.length>0){b=this.getChildValue(d[0]);b=b.replace(this.regExes.trimSpace,"");b=b.replace(this.regExes.trimComma,",");var a=b.split(this.regExes.splitSpace);for(var h=0;h<a.length;++h){o=a[h].split(",");if(o.length==2){o[2]=null}if(this.xy){p.push(new OpenLayers.Geometry.Point(o[0],o[1],o[2]))}else{p.push(new OpenLayers.Geometry.Point(o[1],o[0],o[2]))}}}}var q=null;if(p.length!=0){if(e){q=new OpenLayers.Geometry.LinearRing(p)}else{q=new OpenLayers.Geometry.LineString(p)}}return q},multilinestring:function(e){var b=this.getElementsByTagNameNS(e,this.gmlns,"LineString");var d=[];if(b.length>0){var a;for(var c=0;c<b.length;++c){a=this.parseGeometry.linestring.apply(this,[b[c]]);if(a){d.push(a)}}}return new OpenLayers.Geometry.MultiLineString(d)},polygon:function(e){var b=this.getElementsByTagNameNS(e,this.gmlns,"LinearRing");var d=[];if(b.length>0){var a;for(var c=0;c<b.length;++c){a=this.parseGeometry.linestring.apply(this,[b[c],true]);if(a){d.push(a)}}}return new OpenLayers.Geometry.Polygon(d)},multipolygon:function(e){var a=this.getElementsByTagNameNS(e,this.gmlns,"Polygon");var d=[];if(a.length>0){var c;for(var b=0;b<a.length;++b){c=this.parseGeometry.polygon.apply(this,[a[b]]);if(c){d.push(c)}}}return new OpenLayers.Geometry.MultiPolygon(d)},envelope:function(b){var e=[];var a;var g;var k=this.getElementsByTagNameNS(b,this.gmlns,"lowerCorner");if(k.length>0){var i=[];if(k.length>0){a=k[0].firstChild.nodeValue;a=a.replace(this.regExes.trimSpace,"");i=a.split(this.regExes.splitSpace)}if(i.length==2){i[2]=null}if(this.xy){var d=new OpenLayers.Geometry.Point(i[0],i[1],i[2])}else{var d=new OpenLayers.Geometry.Point(i[1],i[0],i[2])}}var h=this.getElementsByTagNameNS(b,this.gmlns,"upperCorner");if(h.length>0){var i=[];if(h.length>0){a=h[0].firstChild.nodeValue;a=a.replace(this.regExes.trimSpace,"");i=a.split(this.regExes.splitSpace)}if(i.length==2){i[2]=null}if(this.xy){var j=new OpenLayers.Geometry.Point(i[0],i[1],i[2])}else{var j=new OpenLayers.Geometry.Point(i[1],i[0],i[2])}}if(d&&j){e.push(new OpenLayers.Geometry.Point(d.x,d.y));e.push(new OpenLayers.Geometry.Point(j.x,d.y));e.push(new OpenLayers.Geometry.Point(j.x,j.y));e.push(new OpenLayers.Geometry.Point(d.x,j.y));e.push(new OpenLayers.Geometry.Point(d.x,d.y));var c=new OpenLayers.Geometry.LinearRing(e);g=new OpenLayers.Geometry.Polygon([c])}return g},box:function(e){var c=this.getElementsByTagNameNS(e,this.gmlns,"coordinates");var b;var g,a=null,d=null;if(c.length>0){b=c[0].firstChild.nodeValue;g=b.split(" ");if(g.length==2){a=g[0].split(",");d=g[1].split(",")}}if(a!==null&&d!==null){return new OpenLayers.Bounds(parseFloat(a[0]),parseFloat(a[1]),parseFloat(d[0]),parseFloat(d[1]))}}},parseAttributes:function(e){var g={};var a=e.firstChild;var d,h,c,l,k,b,j;while(a){if(a.nodeType==1){d=a.childNodes;for(h=0;h<d.length;++h){c=d[h];if(c.nodeType==1){l=c.childNodes;if(l.length==1){k=l[0];if(k.nodeType==3||k.nodeType==4){b=(c.prefix)?c.nodeName.split(":")[1]:c.nodeName;j=k.nodeValue.replace(this.regExes.trimSpace,"");g[b]=j}}else{g[c.nodeName.split(":").pop()]=null}}}break}a=a.nextSibling}return g},write:function(c){if(!(OpenLayers.Util.isArray(c))){c=[c]}var b=this.createElementNS("http://www.opengis.net/wfs","wfs:"+this.collectionName);for(var a=0;a<c.length;a++){b.appendChild(this.createFeatureXML(c[a]))}return OpenLayers.Format.XML.prototype.write.apply(this,[b])},createFeatureXML:function(k){var i=k.geometry;var e=this.buildGeometryNode(i);var j=this.createElementNS(this.featureNS,this.featurePrefix+":"+this.geometryName);j.appendChild(e);var a=this.createElementNS(this.gmlns,"gml:"+this.featureName);var l=this.createElementNS(this.featureNS,this.featurePrefix+":"+this.layerName);var c=k.fid||k.id;l.setAttribute("fid",c);l.appendChild(j);for(var h in k.attributes){var g=this.createTextNode(k.attributes[h]);var d=h.substring(h.lastIndexOf(":")+1);var b=this.createElementNS(this.featureNS,this.featurePrefix+":"+d);b.appendChild(g);l.appendChild(b)}a.appendChild(l);return a},buildGeometryNode:function(d){if(this.externalProjection&&this.internalProjection){d=d.clone();d.transform(this.internalProjection,this.externalProjection)}var c=d.CLASS_NAME;var b=c.substring(c.lastIndexOf(".")+1);var a=this.buildGeometry[b.toLowerCase()];return a.apply(this,[d])},buildGeometry:{point:function(b){var a=this.createElementNS(this.gmlns,"gml:Point");a.appendChild(this.buildCoordinatesNode(b));return a},multipoint:function(g){var d=this.createElementNS(this.gmlns,"gml:MultiPoint");var c=g.components;var b,e;for(var a=0;a<c.length;a++){b=this.createElementNS(this.gmlns,"gml:pointMember");e=this.buildGeometry.point.apply(this,[c[a]]);b.appendChild(e);d.appendChild(b)}return d},linestring:function(b){var a=this.createElementNS(this.gmlns,"gml:LineString");a.appendChild(this.buildCoordinatesNode(b));return a},multilinestring:function(g){var d=this.createElementNS(this.gmlns,"gml:MultiLineString");var a=g.components;var c,e;for(var b=0;b<a.length;++b){c=this.createElementNS(this.gmlns,"gml:lineStringMember");e=this.buildGeometry.linestring.apply(this,[a[b]]);c.appendChild(e);d.appendChild(c)}return d},linearring:function(b){var a=this.createElementNS(this.gmlns,"gml:LinearRing");a.appendChild(this.buildCoordinatesNode(b));return a},polygon:function(h){var d=this.createElementNS(this.gmlns,"gml:Polygon");var g=h.components;var c,e,b;for(var a=0;a<g.length;++a){b=(a==0)?"outerBoundaryIs":"innerBoundaryIs";c=this.createElementNS(this.gmlns,"gml:"+b);e=this.buildGeometry.linearring.apply(this,[g[a]]);c.appendChild(e);d.appendChild(c)}return d},multipolygon:function(g){var d=this.createElementNS(this.gmlns,"gml:MultiPolygon");var a=g.components;var e,b;for(var c=0;c<a.length;++c){e=this.createElementNS(this.gmlns,"gml:polygonMember");b=this.buildGeometry.polygon.apply(this,[a[c]]);e.appendChild(b);d.appendChild(e)}return d},bounds:function(b){var a=this.createElementNS(this.gmlns,"gml:Box");a.appendChild(this.buildCoordinatesNode(b));return a}},buildCoordinatesNode:function(g){var a=this.createElementNS(this.gmlns,"gml:coordinates");a.setAttribute("decimal",".");a.setAttribute("cs",",");a.setAttribute("ts"," ");var e=[];if(g instanceof OpenLayers.Bounds){e.push(g.left+","+g.bottom);e.push(g.right+","+g.top)}else{var c=(g.components)?g.components:[g];for(var b=0;b<c.length;b++){e.push(c[b].x+","+c[b].y)}}var d=this.createTextNode(e.join(" "));a.appendChild(d);return a},CLASS_NAME:"OpenLayers.Format.GML"});if(!OpenLayers.Format.GML){OpenLayers.Format.GML={}}OpenLayers.Format.GML.Base=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance",wfs:"http://www.opengis.net/wfs"},defaultPrefix:"gml",schemaLocation:null,featureType:null,featureNS:null,geometryName:"geometry",extractAttributes:true,srsName:null,xy:true,geometryTypes:null,singleFeatureType:null,regExes:{trimSpace:(/^\s*|\s*$/g),removeSpace:(/\s*/g),splitSpace:(/\s+/),trimComma:(/\s*,\s*/g),featureMember:(/^(.*:)?featureMembers?$/)},initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]);this.setGeometryTypes();if(a&&a.featureNS){this.setNamespace("feature",a.featureNS)}this.singleFeatureType=!a||(typeof a.featureType==="string")},read:function(e){if(typeof e=="string"){e=OpenLayers.Format.XML.prototype.read.apply(this,[e])}if(e&&e.nodeType==9){e=e.documentElement}var c=[];this.readNode(e,{features:c},true);if(c.length==0){var d=this.getElementsByTagNameNS(e,this.namespaces.gml,"featureMember");if(d.length){for(var b=0,a=d.length;b<a;++b){this.readNode(d[b],{features:c},true)}}else{var d=this.getElementsByTagNameNS(e,this.namespaces.gml,"featureMembers");if(d.length){this.readNode(d[0],{features:c},true)}}}return c},readNode:function(a,b,c){if(c===true&&this.autoConfig===true){this.featureType=null;delete this.namespaceAlias[this.featureNS];delete this.namespaces.feature;this.featureNS=null}if(!this.featureNS&&(!(a.prefix in this.namespaces)&&a.parentNode.namespaceURI==this.namespaces.gml&&this.regExes.featureMember.test(a.parentNode.nodeName))){this.featureType=a.nodeName.split(":").pop();this.setNamespace("feature",a.namespaceURI);this.featureNS=a.namespaceURI;this.autoConfig=true}return OpenLayers.Format.XML.prototype.readNode.apply(this,[a,b])},readers:{gml:{_inherit:function(b,c,a){},featureMember:function(a,b){this.readChildNodes(a,b)},featureMembers:function(a,b){this.readChildNodes(a,b)},name:function(a,b){b.name=this.getChildValue(a)},boundedBy:function(b,c){var a={};this.readChildNodes(b,a);if(a.components&&a.components.length>0){c.bounds=a.components[0]}},Point:function(b,a){var c={points:[]};this.readChildNodes(b,c);if(!a.components){a.components=[]}a.components.push(c.points[0])},coordinates:function(e,h){var j=this.getChildValue(e).replace(this.regExes.trimSpace,"");j=j.replace(this.regExes.trimComma,",");var a=j.split(this.regExes.splitSpace);var g;var d=a.length;var c=new Array(d);for(var b=0;b<d;++b){g=a[b].split(",");if(this.xy){c[b]=new OpenLayers.Geometry.Point(g[0],g[1],g[2])}else{c[b]=new OpenLayers.Geometry.Point(g[1],g[0],g[2])}}h.points=c},coord:function(a,b){var c={};this.readChildNodes(a,c);if(!b.points){b.points=[]}b.points.push(new OpenLayers.Geometry.Point(c.x,c.y,c.z))},X:function(a,b){b.x=this.getChildValue(a)},Y:function(a,b){b.y=this.getChildValue(a)},Z:function(a,b){b.z=this.getChildValue(a)},MultiPoint:function(b,a){var c={components:[]};this.readers.gml._inherit.apply(this,[b,c,a]);this.readChildNodes(b,c);a.components=[new OpenLayers.Geometry.MultiPoint(c.components)]},pointMember:function(a,b){this.readChildNodes(a,b)},LineString:function(b,a){var c={};this.readers.gml._inherit.apply(this,[b,c,a]);this.readChildNodes(b,c);if(!a.components){a.components=[]}a.components.push(new OpenLayers.Geometry.LineString(c.points))},MultiLineString:function(b,a){var c={components:[]};this.readers.gml._inherit.apply(this,[b,c,a]);this.readChildNodes(b,c);a.components=[new OpenLayers.Geometry.MultiLineString(c.components)]},lineStringMember:function(a,b){this.readChildNodes(a,b)},Polygon:function(b,a){var c={outer:null,inner:[]};this.readers.gml._inherit.apply(this,[b,c,a]);this.readChildNodes(b,c);c.inner.unshift(c.outer);if(!a.components){a.components=[]}a.components.push(new OpenLayers.Geometry.Polygon(c.inner))},LinearRing:function(b,c){var a={};this.readers.gml._inherit.apply(this,[b,a]);this.readChildNodes(b,a);c.components=[new OpenLayers.Geometry.LinearRing(a.points)]},MultiPolygon:function(b,a){var c={components:[]};this.readers.gml._inherit.apply(this,[b,c,a]);this.readChildNodes(b,c);a.components=[new OpenLayers.Geometry.MultiPolygon(c.components)]},polygonMember:function(a,b){this.readChildNodes(a,b)},GeometryCollection:function(b,a){var c={components:[]};this.readers.gml._inherit.apply(this,[b,c,a]);this.readChildNodes(b,c);a.components=[new OpenLayers.Geometry.Collection(c.components)]},geometryMember:function(a,b){this.readChildNodes(a,b)}},feature:{"*":function(c,d){var a;var b=c.localName||c.nodeName.split(":").pop();if(d.features){if(!this.singleFeatureType&&(OpenLayers.Util.indexOf(this.featureType,b)!==-1)){a="_typeName"}else{if(b===this.featureType){a="_typeName"}}}else{if(c.childNodes.length==0||(c.childNodes.length==1&&c.firstChild.nodeType==3)){if(this.extractAttributes){a="_attribute"}}else{a="_geometry"}}if(a){this.readers.feature[a].apply(this,[c,d])}},_typeName:function(c,d){var a={components:[],attributes:{}};this.readChildNodes(c,a);if(a.name){a.attributes.name=a.name}var b=new OpenLayers.Feature.Vector(a.components[0],a.attributes);if(!this.singleFeatureType){b.type=c.nodeName.split(":").pop();b.namespace=c.namespaceURI}var e=c.getAttribute("fid")||this.getAttributeNS(c,this.namespaces.gml,"id");if(e){b.fid=e}if(this.internalProjection&&this.externalProjection&&b.geometry){b.geometry.transform(this.externalProjection,this.internalProjection)}if(a.bounds){b.bounds=a.bounds}d.features.push(b)},_geometry:function(a,b){if(!this.geometryName){this.geometryName=a.nodeName.split(":").pop()}this.readChildNodes(a,b)},_attribute:function(b,d){var a=b.localName||b.nodeName.split(":").pop();var c=this.getChildValue(b);d.attributes[a]=c}},wfs:{FeatureCollection:function(a,b){this.readChildNodes(a,b)}}},write:function(c){var b;if(OpenLayers.Util.isArray(c)){b="featureMembers"}else{b="featureMember"}var a=this.writeNode("gml:"+b,c);this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation);return OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{gml:{featureMember:function(a){var b=this.createElementNSPlus("gml:featureMember");this.writeNode("feature:_typeName",a,b);return b},MultiPoint:function(e){var d=this.createElementNSPlus("gml:MultiPoint");var c=e.components||[e];for(var a=0,b=c.length;a<b;++a){this.writeNode("pointMember",c[a],d)}return d},pointMember:function(b){var a=this.createElementNSPlus("gml:pointMember");this.writeNode("Point",b,a);return a},MultiLineString:function(e){var d=this.createElementNSPlus("gml:MultiLineString");var c=e.components||[e];for(var a=0,b=c.length;a<b;++a){this.writeNode("lineStringMember",c[a],d)}return d},lineStringMember:function(b){var a=this.createElementNSPlus("gml:lineStringMember");this.writeNode("LineString",b,a);return a},MultiPolygon:function(e){var d=this.createElementNSPlus("gml:MultiPolygon");var c=e.components||[e];for(var a=0,b=c.length;a<b;++a){this.writeNode("polygonMember",c[a],d)}return d},polygonMember:function(b){var a=this.createElementNSPlus("gml:polygonMember");this.writeNode("Polygon",b,a);return a},GeometryCollection:function(d){var c=this.createElementNSPlus("gml:GeometryCollection");for(var b=0,a=d.components.length;b<a;++b){this.writeNode("geometryMember",d.components[b],c)}return c},geometryMember:function(b){var a=this.createElementNSPlus("gml:geometryMember");var c=this.writeNode("feature:_geometry",b);a.appendChild(c.firstChild);return a}},feature:{_typeName:function(b){var c=this.createElementNSPlus("feature:"+this.featureType,{attributes:{fid:b.fid}});if(b.geometry){this.writeNode("feature:_geometry",b.geometry,c)}for(var a in b.attributes){var d=b.attributes[a];if(d!=null){this.writeNode("feature:_attribute",{name:a,value:d},c)}}return c},_geometry:function(c){if(this.externalProjection&&this.internalProjection){c=c.clone().transform(this.internalProjection,this.externalProjection)}var b=this.createElementNSPlus("feature:"+this.geometryName);var a=this.geometryTypes[c.CLASS_NAME];var d=this.writeNode("gml:"+a,c,b);if(this.srsName){d.setAttribute("srsName",this.srsName)}return b},_attribute:function(a){return this.createElementNSPlus("feature:"+a.name,{value:a.value})}},wfs:{FeatureCollection:function(c){var d=this.createElementNSPlus("wfs:FeatureCollection");for(var b=0,a=c.length;b<a;++b){this.writeNode("gml:featureMember",c[b],d)}return d}}},setGeometryTypes:function(){this.geometryTypes={"OpenLayers.Geometry.Point":"Point","OpenLayers.Geometry.MultiPoint":"MultiPoint","OpenLayers.Geometry.LineString":"LineString","OpenLayers.Geometry.MultiLineString":"MultiLineString","OpenLayers.Geometry.Polygon":"Polygon","OpenLayers.Geometry.MultiPolygon":"MultiPolygon","OpenLayers.Geometry.Collection":"GeometryCollection"}},CLASS_NAME:"OpenLayers.Format.GML.Base"});OpenLayers.Format.GML.v3=OpenLayers.Class(OpenLayers.Format.GML.Base,{schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",curve:false,multiCurve:true,surface:false,multiSurface:true,initialize:function(a){OpenLayers.Format.GML.Base.prototype.initialize.apply(this,[a])},readers:{gml:OpenLayers.Util.applyDefaults({_inherit:function(b,d,a){var c=parseInt(b.getAttribute("srsDimension"),10)||(a&&a.srsDimension);if(c){d.srsDimension=c}},featureMembers:function(a,b){this.readChildNodes(a,b)},Curve:function(b,a){var c={points:[]};this.readers.gml._inherit.apply(this,[b,c,a]);this.readChildNodes(b,c);if(!a.components){a.components=[]}a.components.push(new OpenLayers.Geometry.LineString(c.points))},segments:function(a,b){this.readChildNodes(a,b)},LineStringSegment:function(b,a){var c={};this.readChildNodes(b,c);if(c.points){Array.prototype.push.apply(a.points,c.points)}},pos:function(b,d){var e=this.getChildValue(b).replace(this.regExes.trimSpace,"");var c=e.split(this.regExes.splitSpace);var a;if(this.xy){a=new OpenLayers.Geometry.Point(c[0],c[1],c[2])}else{a=new OpenLayers.Geometry.Point(c[1],c[0],c[2])}if(!!!d.points){d.points=[]}d.points.push(a)},posList:function(a,d){var k=this.getChildValue(a).replace(this.regExes.trimSpace,"");var n=k.split(this.regExes.splitSpace);var e=d.srsDimension||parseInt(a.getAttribute("srsDimension")||a.getAttribute("dimension"),10)||2;var b,o,m,h;var l=n.length/e;var p=new Array(l);for(var c=0,g=n.length;c<g;c+=e){o=n[c];m=n[c+1];h=(e==2)?undefined:n[c+2];if(this.xy){p[c/e]=new OpenLayers.Geometry.Point(o,m,h)}else{p[c/e]=new OpenLayers.Geometry.Point(m,o,h)}}d.points=p},Surface:function(a,b){this.readChildNodes(a,b)},patches:function(a,b){this.readChildNodes(a,b)},PolygonPatch:function(a,b){this.readers.gml.Polygon.apply(this,[a,b])},exterior:function(b,a){var c={};this.readChildNodes(b,c);a.outer=c.components[0]},interior:function(b,a){var c={};this.readChildNodes(b,c);a.inner.push(c.components[0])},MultiCurve:function(b,a){var c={components:[]};this.readers.gml._inherit.apply(this,[b,c,a]);this.readChildNodes(b,c);if(c.components.length>0){a.components=[new OpenLayers.Geometry.MultiLineString(c.components)]}},curveMember:function(a,b){this.readChildNodes(a,b)},MultiSurface:function(b,a){var c={components:[]};this.readers.gml._inherit.apply(this,[b,c,a]);this.readChildNodes(b,c);if(c.components.length>0){a.components=[new OpenLayers.Geometry.MultiPolygon(c.components)]}},surfaceMember:function(a,b){this.readChildNodes(a,b)},surfaceMembers:function(a,b){this.readChildNodes(a,b)},pointMembers:function(a,b){this.readChildNodes(a,b)},lineStringMembers:function(a,b){this.readChildNodes(a,b)},polygonMembers:function(a,b){this.readChildNodes(a,b)},geometryMembers:function(a,b){this.readChildNodes(a,b)},Envelope:function(d,b){var e={points:new Array(2)};this.readChildNodes(d,e);if(!b.components){b.components=[]}var c=e.points[0];var a=e.points[1];b.components.push(new OpenLayers.Bounds(c.x,c.y,a.x,a.y))},lowerCorner:function(b,a){var c={};this.readers.gml.pos.apply(this,[b,c]);a.points[0]=c.points[0]},upperCorner:function(b,a){var c={};this.readers.gml.pos.apply(this,[b,c]);a.points[1]=c.points[0]}},OpenLayers.Format.GML.Base.prototype.readers.gml),feature:OpenLayers.Format.GML.Base.prototype.readers.feature,wfs:OpenLayers.Format.GML.Base.prototype.readers.wfs},write:function(c){var b;if(OpenLayers.Util.isArray(c)){b="featureMembers"}else{b="featureMember"}var a=this.writeNode("gml:"+b,c);this.setAttributeNS(a,this.namespaces.xsi,"xsi:schemaLocation",this.schemaLocation);return OpenLayers.Format.XML.prototype.write.apply(this,[a])},writers:{gml:OpenLayers.Util.applyDefaults({featureMembers:function(c){var d=this.createElementNSPlus("gml:featureMembers");for(var b=0,a=c.length;b<a;++b){this.writeNode("feature:_typeName",c[b],d)}return d},Point:function(b){var a=this.createElementNSPlus("gml:Point");this.writeNode("pos",b,a);return a},pos:function(a){var b=(this.xy)?(a.x+" "+a.y):(a.y+" "+a.x);return this.createElementNSPlus("gml:pos",{value:b})},LineString:function(b){var a=this.createElementNSPlus("gml:LineString");this.writeNode("posList",b.components,a);return a},Curve:function(b){var a=this.createElementNSPlus("gml:Curve");this.writeNode("segments",b,a);return a},segments:function(b){var a=this.createElementNSPlus("gml:segments");this.writeNode("LineStringSegment",b,a);return a},LineStringSegment:function(b){var a=this.createElementNSPlus("gml:LineStringSegment");this.writeNode("posList",b.components,a);return a},posList:function(d){var b=d.length;var e=new Array(b);var a;for(var c=0;c<b;++c){a=d[c];if(this.xy){e[c]=a.x+" "+a.y}else{e[c]=a.y+" "+a.x}}return this.createElementNSPlus("gml:posList",{value:e.join(" ")})},Surface:function(b){var a=this.createElementNSPlus("gml:Surface");this.writeNode("patches",b,a);return a},patches:function(b){var a=this.createElementNSPlus("gml:patches");this.writeNode("PolygonPatch",b,a);return a},PolygonPatch:function(d){var c=this.createElementNSPlus("gml:PolygonPatch",{attributes:{interpolation:"planar"}});this.writeNode("exterior",d.components[0],c);for(var b=1,a=d.components.length;b<a;++b){this.writeNode("interior",d.components[b],c)}return c},Polygon:function(d){var c=this.createElementNSPlus("gml:Polygon");this.writeNode("exterior",d.components[0],c);for(var b=1,a=d.components.length;b<a;++b){this.writeNode("interior",d.components[b],c)}return c},exterior:function(a){var b=this.createElementNSPlus("gml:exterior");this.writeNode("LinearRing",a,b);return b},interior:function(a){var b=this.createElementNSPlus("gml:interior");this.writeNode("LinearRing",a,b);return b},LinearRing:function(a){var b=this.createElementNSPlus("gml:LinearRing");this.writeNode("posList",a.components,b);return b},MultiCurve:function(e){var d=this.createElementNSPlus("gml:MultiCurve");var c=e.components||[e];for(var b=0,a=c.length;b<a;++b){this.writeNode("curveMember",c[b],d)}return d},curveMember:function(b){var a=this.createElementNSPlus("gml:curveMember");if(this.curve){this.writeNode("Curve",b,a)}else{this.writeNode("LineString",b,a)}return a},MultiSurface:function(e){var d=this.createElementNSPlus("gml:MultiSurface");var c=e.components||[e];for(var b=0,a=c.length;b<a;++b){this.writeNode("surfaceMember",c[b],d)}return d},surfaceMember:function(a){var b=this.createElementNSPlus("gml:surfaceMember");if(this.surface){this.writeNode("Surface",a,b)}else{this.writeNode("Polygon",a,b)}return b},Envelope:function(b){var a=this.createElementNSPlus("gml:Envelope");this.writeNode("lowerCorner",b,a);this.writeNode("upperCorner",b,a);if(this.srsName){a.setAttribute("srsName",this.srsName)}return a},lowerCorner:function(a){var b=(this.xy)?(a.left+" "+a.bottom):(a.bottom+" "+a.left);return this.createElementNSPlus("gml:lowerCorner",{value:b})},upperCorner:function(a){var b=(this.xy)?(a.right+" "+a.top):(a.top+" "+a.right);return this.createElementNSPlus("gml:upperCorner",{value:b})}},OpenLayers.Format.GML.Base.prototype.writers.gml),feature:OpenLayers.Format.GML.Base.prototype.writers.feature,wfs:OpenLayers.Format.GML.Base.prototype.writers.wfs},setGeometryTypes:function(){this.geometryTypes={"OpenLayers.Geometry.Point":"Point","OpenLayers.Geometry.MultiPoint":"MultiPoint","OpenLayers.Geometry.LineString":(this.curve===true)?"Curve":"LineString","OpenLayers.Geometry.MultiLineString":(this.multiCurve===false)?"MultiLineString":"MultiCurve","OpenLayers.Geometry.Polygon":(this.surface===true)?"Surface":"Polygon","OpenLayers.Geometry.MultiPolygon":(this.multiSurface===false)?"MultiPolygon":"MultiSurface","OpenLayers.Geometry.Collection":"GeometryCollection"}},CLASS_NAME:"OpenLayers.Format.GML.v3"});OpenLayers.Format.OGCExceptionReport=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ogc:"http://www.opengis.net/ogc"},regExes:{trimSpace:(/^\s*|\s*$/g),removeSpace:(/\s*/g),splitSpace:(/\s+/),trimComma:(/\s*,\s*/g)},defaultPrefix:"ogc",read:function(c){var a;if(typeof c=="string"){c=OpenLayers.Format.XML.prototype.read.apply(this,[c])}var b=c.documentElement;var d={exceptionReport:null};if(b){this.readChildNodes(c,d);if(d.exceptionReport===null){d=new OpenLayers.Format.OWSCommon().read(c)}}return d},readers:{ogc:{ServiceExceptionReport:function(a,b){b.exceptionReport={exceptions:[]};this.readChildNodes(a,b.exceptionReport)},ServiceException:function(b,c){var a={code:b.getAttribute("code"),locator:b.getAttribute("locator"),text:this.getChildValue(b)};c.exceptions.push(a)}}},CLASS_NAME:"OpenLayers.Format.OGCExceptionReport"});OpenLayers.Format.XML.VersionedOGC=OpenLayers.Class(OpenLayers.Format.XML,{defaultVersion:null,version:null,profile:null,allowFallback:false,name:null,stringifyOutput:false,parser:null,initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a]);var b=this.CLASS_NAME;this.name=b.substring(b.lastIndexOf(".")+1)},getVersion:function(b,c){var a;if(b){a=this.version;if(!a){a=b.getAttribute("version");if(!a){a=this.defaultVersion}}}else{a=(c&&c.version)||this.version||this.defaultVersion}return a},getParser:function(a){a=a||this.defaultVersion;var b=this.profile?"_"+this.profile:"";if(!this.parser||this.parser.VERSION!=a){var c=OpenLayers.Format[this.name]["v"+a.replace(/\./g,"_")+b];if(!c){if(b!==""&&this.allowFallback){b="";c=OpenLayers.Format[this.name]["v"+a.replace(/\./g,"_")]}if(!c){throw"Can't find a "+this.name+" parser for version "+a+b}}this.parser=new c(this.options)}return this.parser},write:function(d,c){var b=this.getVersion(null,c);this.parser=this.getParser(b);var a=this.parser.write(d,c);if(this.stringifyOutput===false){return a}else{return OpenLayers.Format.XML.prototype.write.apply(this,[a])}},read:function(d,c){if(typeof d=="string"){d=OpenLayers.Format.XML.prototype.read.apply(this,[d])}var b=d.documentElement;var a=this.getVersion(b);this.parser=this.getParser(a);var g=this.parser.read(d,c);var h=this.parser.errorProperty||null;if(h!==null&&g[h]===undefined){var e=new OpenLayers.Format.OGCExceptionReport();g.error=e.read(d)}g.version=a;g.requestType=this.name;return g},CLASS_NAME:"OpenLayers.Format.XML.VersionedOGC"});OpenLayers.Filter.FeatureId=OpenLayers.Class(OpenLayers.Filter,{fids:null,type:"FID",initialize:function(a){this.fids=[];OpenLayers.Filter.prototype.initialize.apply(this,[a])},evaluate:function(c){for(var b=0,a=this.fids.length;b<a;b++){var d=c.fid||c.id;if(d==this.fids[b]){return true}}return false},clone:function(){var a=new OpenLayers.Filter.FeatureId();OpenLayers.Util.extend(a,this);a.fids=this.fids.slice();return a},CLASS_NAME:"OpenLayers.Filter.FeatureId"});OpenLayers.Filter.Logical=OpenLayers.Class(OpenLayers.Filter,{filters:null,type:null,initialize:function(a){this.filters=[];OpenLayers.Filter.prototype.initialize.apply(this,[a])},destroy:function(){this.filters=null;OpenLayers.Filter.prototype.destroy.apply(this)},evaluate:function(c){var b,a;switch(this.type){case OpenLayers.Filter.Logical.AND:for(b=0,a=this.filters.length;b<a;b++){if(this.filters[b].evaluate(c)==false){return false}}return true;case OpenLayers.Filter.Logical.OR:for(b=0,a=this.filters.length;b<a;b++){if(this.filters[b].evaluate(c)==true){return true}}return false;case OpenLayers.Filter.Logical.NOT:return(!this.filters[0].evaluate(c))}return undefined},clone:function(){var c=[];for(var b=0,a=this.filters.length;b<a;++b){c.push(this.filters[b].clone())}return new OpenLayers.Filter.Logical({type:this.type,filters:c})},CLASS_NAME:"OpenLayers.Filter.Logical"});OpenLayers.Filter.Logical.AND="&&";OpenLayers.Filter.Logical.OR="||";OpenLayers.Filter.Logical.NOT="!";OpenLayers.Filter.Comparison=OpenLayers.Class(OpenLayers.Filter,{type:null,property:null,value:null,matchCase:true,lowerBoundary:null,upperBoundary:null,initialize:function(a){OpenLayers.Filter.prototype.initialize.apply(this,[a]);if(this.type===OpenLayers.Filter.Comparison.LIKE&&a.matchCase===undefined){this.matchCase=null}},evaluate:function(c){if(c instanceof OpenLayers.Feature.Vector){c=c.attributes}var a=false;var b=c[this.property];if(b===undefined){return false}var e;switch(this.type){case OpenLayers.Filter.Comparison.EQUAL_TO:e=this.value;if(!this.matchCase&&typeof b=="string"&&typeof e=="string"){a=(b.toUpperCase()==e.toUpperCase())}else{a=(b==e)}break;case OpenLayers.Filter.Comparison.NOT_EQUAL_TO:e=this.value;if(!this.matchCase&&typeof b=="string"&&typeof e=="string"){a=(b.toUpperCase()!=e.toUpperCase())}else{a=(b!=e)}break;case OpenLayers.Filter.Comparison.LESS_THAN:a=b<this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN:a=b>this.value;break;case OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO:a=b<=this.value;break;case OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO:a=b>=this.value;break;case OpenLayers.Filter.Comparison.BETWEEN:a=(b>=this.lowerBoundary)&&(b<=this.upperBoundary);break;case OpenLayers.Filter.Comparison.LIKE:var d=new RegExp(this.value,"gi");a=d.test(b);break;case OpenLayers.Filter.Comparison.IS_NULL:a=(b===null);break}return a},value2regex:function(c,b,a){if(c=="."){throw new Error("'.' is an unsupported wildCard character for OpenLayers.Filter.Comparison")}c=c?c:"*";b=b?b:".";a=a?a:"!";this.value=this.value.replace(new RegExp("\\"+a+"(.|$)","g"),"\\$1");this.value=this.value.replace(new RegExp("\\"+b,"g"),".");this.value=this.value.replace(new RegExp("\\"+c,"g"),".*");this.value=this.value.replace(new RegExp("\\\\.\\*","g"),"\\"+c);this.value=this.value.replace(new RegExp("\\\\\\.","g"),"\\"+b);return this.value},regex2value:function(){var a=this.value;a=a.replace(/!/g,"!!");a=a.replace(/(\\)?\\\./g,function(c,b){return b?c:"!."});a=a.replace(/(\\)?\\\*/g,function(c,b){return b?c:"!*"});a=a.replace(/\\\\/g,"\\");a=a.replace(/\.\*/g,"*");return a},clone:function(){return OpenLayers.Util.extend(new OpenLayers.Filter.Comparison(),this)},CLASS_NAME:"OpenLayers.Filter.Comparison"});OpenLayers.Filter.Comparison.EQUAL_TO="==";OpenLayers.Filter.Comparison.NOT_EQUAL_TO="!=";OpenLayers.Filter.Comparison.LESS_THAN="<";OpenLayers.Filter.Comparison.GREATER_THAN=">";OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO="<=";OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO=">=";OpenLayers.Filter.Comparison.BETWEEN="..";OpenLayers.Filter.Comparison.LIKE="~";OpenLayers.Filter.Comparison.IS_NULL="NULL";OpenLayers.Format.Filter=OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC,{defaultVersion:"1.0.0",CLASS_NAME:"OpenLayers.Format.Filter"});OpenLayers.Date={dateRegEx:/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/,toISOString:(function(){if("toISOString" in Date.prototype){return function(a){return a.toISOString()}}else{return function(a){var b;if(isNaN(a.getTime())){b="Invalid Date"}else{b=a.getUTCFullYear()+"-"+OpenLayers.Number.zeroPad(a.getUTCMonth()+1,2)+"-"+OpenLayers.Number.zeroPad(a.getUTCDate(),2)+"T"+OpenLayers.Number.zeroPad(a.getUTCHours(),2)+":"+OpenLayers.Number.zeroPad(a.getUTCMinutes(),2)+":"+OpenLayers.Number.zeroPad(a.getUTCSeconds(),2)+"."+OpenLayers.Number.zeroPad(a.getUTCMilliseconds(),3)+"Z"}return b}}})(),parse:function(k){var b;var i=k.match(this.dateRegEx);if(i&&(i[1]||i[7])){var l=parseInt(i[1],10)||0;var j=(parseInt(i[2],10)-1)||0;var n=parseInt(i[3],10)||1;b=new Date(Date.UTC(l,j,n));var m=i[7];if(m){var o=parseInt(i[4],10);var d=parseInt(i[5],10);var a=parseFloat(i[6]);var p=a|0;var c=Math.round(1000*(a-p));b.setUTCHours(o,d,p,c);if(m!=="Z"){var h=parseInt(m,10);var g=parseInt(i[8],10)||0;var e=-1000*(60*(h*60)+g*60);b=new Date(b.getTime()+e)}}}else{b=new Date("invalid")}return b}};OpenLayers.Format.Filter.v1=OpenLayers.Class(OpenLayers.Format.XML,{namespaces:{ogc:"http://www.opengis.net/ogc",gml:"http://www.opengis.net/gml",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},defaultPrefix:"ogc",schemaLocation:null,initialize:function(a){OpenLayers.Format.XML.prototype.initialize.apply(this,[a])},read:function(a){var b={};this.readers.ogc.Filter.apply(this,[a,b]);return b.filter},readers:{ogc:{_expression:function(a){var c,b="";for(var d=a.firstChild;d;d=d.nextSibling){switch(d.nodeType){case 1:c=this.readNode(d);if(c.property){b+="${"+c.property+"}"}else{if(c.value!==undefined){b+=c.value}}break;case 3:case 4:b+=d.nodeValue}}return b},Filter:function(b,a){var c={fids:[],filters:[]};this.readChildNodes(b,c);if(c.fids.length>0){a.filter=new OpenLayers.Filter.FeatureId({fids:c.fids})}else{if(c.filters.length>0){a.filter=c.filters[0]}}},FeatureId:function(a,b){var c=a.getAttribute("fid");if(c){b.fids.push(c)}},And:function(b,c){var a=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.AND});this.readChildNodes(b,a);c.filters.push(a)},Or:function(b,c){var a=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.OR});this.readChildNodes(b,a);c.filters.push(a)},Not:function(b,c){var a=new OpenLayers.Filter.Logical({type:OpenLayers.Filter.Logical.NOT});this.readChildNodes(b,a);c.filters.push(a)},PropertyIsLessThan:function(b,c){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LESS_THAN});this.readChildNodes(b,a);c.filters.push(a)},PropertyIsGreaterThan:function(b,c){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.GREATER_THAN});this.readChildNodes(b,a);c.filters.push(a)},PropertyIsLessThanOrEqualTo:function(b,c){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO});this.readChildNodes(b,a);c.filters.push(a)},PropertyIsGreaterThanOrEqualTo:function(b,c){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO});this.readChildNodes(b,a);c.filters.push(a)},PropertyIsBetween:function(b,c){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN});this.readChildNodes(b,a);c.filters.push(a)},Literal:function(a,b){b.value=OpenLayers.String.numericIf(this.getChildValue(a),true)},PropertyName:function(b,a){a.property=this.getChildValue(b)},LowerBoundary:function(b,a){a.lowerBoundary=OpenLayers.String.numericIf(this.readers.ogc._expression.call(this,b),true)},UpperBoundary:function(b,a){a.upperBoundary=OpenLayers.String.numericIf(this.readers.ogc._expression.call(this,b),true)},Intersects:function(a,b){this.readSpatial(a,b,OpenLayers.Filter.Spatial.INTERSECTS)},Within:function(a,b){this.readSpatial(a,b,OpenLayers.Filter.Spatial.WITHIN)},Contains:function(a,b){this.readSpatial(a,b,OpenLayers.Filter.Spatial.CONTAINS)},DWithin:function(a,b){this.readSpatial(a,b,OpenLayers.Filter.Spatial.DWITHIN)},Distance:function(a,b){b.distance=parseInt(this.getChildValue(a));b.distanceUnits=a.getAttribute("units")},Function:function(a,b){return},PropertyIsNull:function(b,c){var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.IS_NULL});this.readChildNodes(b,a);c.filters.push(a)}}},readSpatial:function(c,d,b){var a=new OpenLayers.Filter.Spatial({type:b});this.readChildNodes(c,a);a.value=a.components[0];delete a.components;d.filters.push(a)},encodeLiteral:function(a){if(a instanceof Date){a=OpenLayers.Date.toISOString(a)}return a},writeOgcExpression:function(b,a){if(b instanceof OpenLayers.Filter.Function){this.writeNode("Function",b,a)}else{this.writeNode("Literal",b,a)}return a},write:function(a){return this.writers.ogc.Filter.apply(this,[a])},writers:{ogc:{Filter:function(a){var b=this.createElementNSPlus("ogc:Filter");this.writeNode(this.getFilterType(a),a,b);return b},_featureIds:function(c){var d=this.createDocumentFragment();for(var a=0,b=c.fids.length;a<b;++a){this.writeNode("ogc:FeatureId",c.fids[a],d)}return d},FeatureId:function(a){return this.createElementNSPlus("ogc:FeatureId",{attributes:{fid:a}})},And:function(d){var e=this.createElementNSPlus("ogc:And");var c;for(var a=0,b=d.filters.length;a<b;++a){c=d.filters[a];this.writeNode(this.getFilterType(c),c,e)}return e},Or:function(d){var e=this.createElementNSPlus("ogc:Or");var c;for(var a=0,b=d.filters.length;a<b;++a){c=d.filters[a];this.writeNode(this.getFilterType(c),c,e)}return e},Not:function(b){var c=this.createElementNSPlus("ogc:Not");var a=b.filters[0];this.writeNode(this.getFilterType(a),a,c);return c},PropertyIsLessThan:function(a){var b=this.createElementNSPlus("ogc:PropertyIsLessThan");this.writeNode("PropertyName",a,b);this.writeOgcExpression(a.value,b);return b},PropertyIsGreaterThan:function(a){var b=this.createElementNSPlus("ogc:PropertyIsGreaterThan");this.writeNode("PropertyName",a,b);this.writeOgcExpression(a.value,b);return b},PropertyIsLessThanOrEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsLessThanOrEqualTo");this.writeNode("PropertyName",a,b);this.writeOgcExpression(a.value,b);return b},PropertyIsGreaterThanOrEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsGreaterThanOrEqualTo");this.writeNode("PropertyName",a,b);this.writeOgcExpression(a.value,b);return b},PropertyIsBetween:function(a){var b=this.createElementNSPlus("ogc:PropertyIsBetween");this.writeNode("PropertyName",a,b);this.writeNode("LowerBoundary",a,b);this.writeNode("UpperBoundary",a,b);return b},PropertyName:function(a){return this.createElementNSPlus("ogc:PropertyName",{value:a.property})},Literal:function(b){var a=this.encodeLiteral||OpenLayers.Format.Filter.v1.prototype.encodeLiteral;return this.createElementNSPlus("ogc:Literal",{value:a(b)})},LowerBoundary:function(a){var b=this.createElementNSPlus("ogc:LowerBoundary");this.writeOgcExpression(a.lowerBoundary,b);return b},UpperBoundary:function(a){var b=this.createElementNSPlus("ogc:UpperBoundary");this.writeNode("Literal",a.upperBoundary,b);return b},INTERSECTS:function(a){return this.writeSpatial(a,"Intersects")},WITHIN:function(a){return this.writeSpatial(a,"Within")},CONTAINS:function(a){return this.writeSpatial(a,"Contains")},DWITHIN:function(a){var b=this.writeSpatial(a,"DWithin");this.writeNode("Distance",a,b);return b},Distance:function(a){return this.createElementNSPlus("ogc:Distance",{attributes:{units:a.distanceUnits},value:a.distance})},Function:function(c){var d=this.createElementNSPlus("ogc:Function",{attributes:{name:c.name}});var e=c.params;for(var b=0,a=e.length;b<a;b++){this.writeOgcExpression(e[b],d)}return d},PropertyIsNull:function(a){var b=this.createElementNSPlus("ogc:PropertyIsNull");this.writeNode("PropertyName",a,b);return b}}},getFilterType:function(a){var b=this.filterMap[a.type];if(!b){throw"Filter writing not supported for rule type: "+a.type}return b},filterMap:{"&&":"And","||":"Or","!":"Not","==":"PropertyIsEqualTo","!=":"PropertyIsNotEqualTo","<":"PropertyIsLessThan",">":"PropertyIsGreaterThan","<=":"PropertyIsLessThanOrEqualTo",">=":"PropertyIsGreaterThanOrEqualTo","..":"PropertyIsBetween","~":"PropertyIsLike",NULL:"PropertyIsNull",BBOX:"BBOX",DWITHIN:"DWITHIN",WITHIN:"WITHIN",CONTAINS:"CONTAINS",INTERSECTS:"INTERSECTS",FID:"_featureIds"},CLASS_NAME:"OpenLayers.Format.Filter.v1"});OpenLayers.Format.Filter.v1_1_0=OpenLayers.Class(OpenLayers.Format.GML.v3,OpenLayers.Format.Filter.v1,{VERSION:"1.1.0",schemaLocation:"http://www.opengis.net/ogc/filter/1.1.0/filter.xsd",initialize:function(a){OpenLayers.Format.GML.v3.prototype.initialize.apply(this,[a])},readers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(b,d){var c=b.getAttribute("matchCase");var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.EQUAL_TO,matchCase:!(c==="false"||c==="0")});this.readChildNodes(b,a);d.filters.push(a)},PropertyIsNotEqualTo:function(b,d){var c=b.getAttribute("matchCase");var a=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.NOT_EQUAL_TO,matchCase:!(c==="false"||c==="0")});this.readChildNodes(b,a);d.filters.push(a)},PropertyIsLike:function(d,e){var c=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.LIKE});this.readChildNodes(d,c);var g=d.getAttribute("wildCard");var b=d.getAttribute("singleChar");var a=d.getAttribute("escapeChar");c.value2regex(g,b,a);e.filters.push(c)}},OpenLayers.Format.Filter.v1.prototype.readers.ogc),gml:OpenLayers.Format.GML.v3.prototype.readers.gml,feature:OpenLayers.Format.GML.v3.prototype.readers.feature},writers:{ogc:OpenLayers.Util.applyDefaults({PropertyIsEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsEqualTo",{attributes:{matchCase:a.matchCase}});this.writeNode("PropertyName",a,b);this.writeOgcExpression(a.value,b);return b},PropertyIsNotEqualTo:function(a){var b=this.createElementNSPlus("ogc:PropertyIsNotEqualTo",{attributes:{matchCase:a.matchCase}});this.writeNode("PropertyName",a,b);this.writeOgcExpression(a.value,b);return b},PropertyIsLike:function(a){var b=this.createElementNSPlus("ogc:PropertyIsLike",{attributes:{matchCase:a.matchCase,wildCard:"*",singleChar:".",escapeChar:"!"}});this.writeNode("PropertyName",a,b);this.writeNode("Literal",a.regex2value(),b);return b},BBOX:function(a){var c=this.createElementNSPlus("ogc:BBOX");a.property&&this.writeNode("PropertyName",a,c);var b=this.writeNode("gml:Envelope",a.value);if(a.projection){b.setAttribute("srsName",a.projection)}c.appendChild(b);return c},SortBy:function(d){var c=this.createElementNSPlus("ogc:SortBy");for(var b=0,a=d.length;b<a;b++){this.writeNode("ogc:SortProperty",d[b],c)}return c},SortProperty:function(b){var a=this.createElementNSPlus("ogc:SortProperty");this.writeNode("ogc:PropertyName",b,a);this.writeNode("ogc:SortOrder",(b.order=="DESC")?"DESC":"ASC",a);return a},SortOrder:function(b){var a=this.createElementNSPlus("ogc:SortOrder",{value:b});return a}},OpenLayers.Format.Filter.v1.prototype.writers.ogc),gml:OpenLayers.Format.GML.v3.prototype.writers.gml,feature:OpenLayers.Format.GML.v3.prototype.writers.feature},writeSpatial:function(b,a){var c=this.createElementNSPlus("ogc:"+a);this.writeNode("PropertyName",b,c);if(b.value instanceof OpenLayers.Filter.Function){this.writeNode("Function",b.value,c)}else{var d;if(b.value instanceof OpenLayers.Geometry){d=this.writeNode("feature:_geometry",b.value).firstChild}else{d=this.writeNode("gml:Envelope",b.value)}if(b.projection){d.setAttribute("srsName",b.projection)}c.appendChild(d)}return c},CLASS_NAME:"OpenLayers.Format.Filter.v1_1_0"});(function(b,a,c){L.AwesomeMarkers={};L.AwesomeMarkers.version="2.0.1";L.AwesomeMarkers.Icon=L.Icon.extend({options:{iconSize:[35,45],iconAnchor:[17,42],popupAnchor:[1,-32],shadowAnchor:[10,12],shadowSize:[36,16],className:"awesome-marker",prefix:"glyphicon",spinClass:"fa-spin",icon:"home",markerColor:"blue",iconColor:"white"},initialize:function(d){d=L.Util.setOptions(this,d)},createIcon:function(){var d=a.createElement("div"),g=this.options;g.icon&&(d.innerHTML=this._createInner());g.bgPos&&(d.style.backgroundPosition=-g.bgPos.x+"px "+-g.bgPos.y+"px");this._setIconStyles(d,"icon-"+g.markerColor);return d},_createInner:function(){var j,g="",k="",h="",d=this.options;d.icon.slice(0,d.prefix.length+1)===d.prefix+"-"?j=d.icon:j=d.prefix+"-"+d.icon;d.spin&&typeof d.spinClass=="string"&&(g=d.spinClass);d.iconColor&&(d.iconColor==="white"||d.iconColor==="black"?k="icon-"+d.iconColor:h="style='color: "+d.iconColor+"' ");return"<i "+h+"class='"+d.prefix+" "+j+" "+g+" "+k+"'></i>"},_setIconStyles:function(j,g){var k=this.options,h=L.point(k[g==="shadow"?"shadowSize":"iconSize"]),d;g==="shadow"?d=L.point(k.shadowAnchor||k.iconAnchor):d=L.point(k.iconAnchor);!d&&h&&(d=h.divideBy(2,!0));j.className="awesome-marker-"+g+" "+k.className;if(d){j.style.marginLeft=-d.x+"px";j.style.marginTop=-d.y+"px"}if(h){j.style.width=h.x+"px";j.style.height=h.y+"px"}},createShadow:function(){var d=a.createElement("div");this._setIconStyles(d,"shadow");return d}});L.AwesomeMarkers.icon=function(d){return new L.AwesomeMarkers.Icon(d)}})(this,document);(function(c){var b=L.divIcon({className:"leaflet-usermarker",iconSize:[34,34],iconAnchor:[17,17],popupAnchor:[0,-20],labelAnchor:[11,-3],html:""});var a=L.divIcon({className:"leaflet-usermarker",iconSize:[34,34],iconAnchor:[17,17],popupAnchor:[0,-20],labelAnchor:[11,-3],html:'<i class="pulse"></i>'});var e=L.divIcon({className:"leaflet-usermarker",iconSize:[18,18],iconAnchor:[9,9],popupAnchor:[0,-10],labelAnchor:[11,-3],html:""});var d=L.divIcon({className:"leaflet-usermarker-small",iconSize:[18,18],iconAnchor:[9,9],popupAnchor:[0,-10],labelAnchor:[11,-3],html:'<i class="pulse"></i>'});var g={stroke:true,color:"#03f",weight:3,opacity:0.5,fillOpacity:0.15,clickable:false};L.UserMarker=L.Marker.extend({options:{pulsing:false,smallIcon:false,accuracy:0},initialize:function(i,h){h=L.Util.setOptions(this,h);if(this.options.smallIcon){this.options.icon=(h.pulsing?d:e)}else{this.options.icon=(h.pulsing?a:b)}this._accMarker=L.circle(i,this.options.accuracy,g);L.Marker.prototype.initialize.call(this,i,this.options);this.on("move",function(){this._accMarker.setLatLng(this.getLatLng())}).on("remove",function(){this._map.removeLayer(this._accMarker)})},setPulsing:function(h){this._pulsing=h;this.setIcon(!!this._pulsing?a:b)},setAccuracy:function(h){this._accuracy=h;if(!this._accMarker){this._accMarker=L.circle(this._latlng,h,g).addTo(this._map)}else{this._accMarker.setRadius(h)}},onAdd:function(h){L.Marker.prototype.onAdd.call(this,h);this._accMarker.addTo(h)}});L.userMarker=function(i,h){return new L.UserMarker(i,h)}})(window);L.GeoJSON.WFS=L.GeoJSON.extend({CLASS_NAME:"L.GeoJSON.WFS",options:{uniqueKey:"",noBindZoom:true,noBindDrag:false,params:{typeName:null,service:"WFS",version:"1.1.0",request:"GetFeature",srsName:"EPSG:4326",format:"text/geojson",maxFeatures:10000,outputFormat:"json"},selectStyle:{weight:5,color:"#00FFFF",opacity:1}},initialize:function(b,a){a=a||{};a=$.extend(true,{},this.options,a);L.GeoJSON.prototype.initialize.call(this,null,a);if(a.proxy||L.GeoJSON.WFS.proxy){this.proxy=a.proxy||L.GeoJSON.WFS.proxy||null}this.getFeatureUrl=b;this.on("featureparse",function(h){if(h.geometryType!="Point"&&h.geometryType!="MultiPoint"){if(a.style){h.layer._originalStyle=a.style;h.layer.setStyle(a.style)}else{if(a.filteredStyles){var d=a.filteredStyles.propName;var c=h.properties[d];var g=L.Util.extend({},a.filteredStyles["default"],a.filteredStyles.styles[c]);h.layer._originalStyle=g;h.layer.setStyle(g)}}}if(a.popupObj&&a.popupOptions){h.layer.on("click",function(e){h.layer._map.openPopup(a.popupObj.generatePopup(h,a.popupOptions));if(a.popupFn){a.popupFn(h)}})}else{if(a.popupFld&&h.properties.hasOwnProperty(a.popupFld)){h.layer.bindPopup(h.properties[a.popupFld],{maxWidth:600})}}if(a.hoverObj||a.hoverFld){h.layer.on("mouseover",function(e){hoverContent=a.hoverObj?a.hoverObj.generateContent(h):h.properties[a.hoverFld]||"Invalid field name";hoverPoint=h.layer._map.latLngToContainerPoint(e.target._latlng);h.layer._hoverControl=new L.Control.Hover(hoverPoint,hoverContent);h.layer._map.addControl(h.layer._hoverControl)});h.layer.on("mouseout",function(e){h.layer._map.removeControl(h.layer._hoverControl)})}if(a.hoverColor){h.layer.on("mouseover",function(e){var i=L.Util.extend({},h.layer._originalStyle,{stroke:true,color:a.hoverColor,weight:3});h.layer.setStyle(i)});h.layer.on("mouseout",function(e){h.layer.setStyle(h.layer._originalStyle)})}if(h.layer instanceof L.Marker.AttributeFilter){h.layer.setIcon(h)}})},onAdd:function(a){L.LayerGroup.prototype.onAdd.call(this,a);this._refresh();this._bindEvents(a)},_bindEvents:function(c){var b=this;if(!this.options.noBindDrag){c.on("dragend",function(){b._refresh()})}if(!this.options.noBindZoom){var b=this;var a=c.getZoom();c.on("zoomend",function(){if(a>c.getZoom()){b._refresh()}a=c.getZoom()})}},_featureIndexes:[],addData:function(a){var c=L.Util.isArray(a)?a:a.features,h,k,o,e,m=this.options.uniqueKey;if(c){var d=this._featureIndexes,g=this.addData;for(h=0,k=c.length;h<k;h++){o=c[h];var b="";if(m){uniqueKeyArr=m.split(",");var l=o.properties;$.each(uniqueKeyArr,function(p,q){b+=(""+l[q])})}else{b=o.id}if((o.geometries||o.geometry||o.features||o.coordinates)&&$.inArray(b,d)===-1&&this){g.call(this,o);d.push(b)}}return this}var n=this.options;if(n.filter&&!n.filter(a)){return}var j=L.GeoJSON.geometryToLayer(a,n.pointToLayer,n.coordsToLatLng,n);j.feature=L.GeoJSON.asFeature(a);j.defaultOptions=j.options;this.resetStyle(j);if(n.onEachFeature){n.onEachFeature(a,j)}return this.addLayer(j)},_refresh:function(c){c=c||false;if(c===true){this._featureIndexes=[]}var a=this;if(!this._map){return false}var b=this._map.getBounds();this.getFeature(b,function(){if(a.options.uniqueKey===null){a.clearLayers()}a.addData(a.jsonData);var d;var e=$.proxy(function(h){var l=h.target.feature,m=h.target;var j=a.options.uniqueKey||"-";var k=null;var g=a.options.layerId||m.options.layerId;if(j){var n;if(j.split(",").length>1){var i=j.split(",");n=l.properties[i[0]]+"_"+l.properties[i[1]]}else{n=l.properties[j]}if(g&&n){k=[g,j,n].join(":")}}a._map.fire("selected",{layerType:"vector",paramVal:k,layerId:g,properties:l.properties});a.eachLayer(function(o){a.resetStyle(o)});if(m.setStyle){m.setStyle(a.options.selectStyle)}if(a.bringToFront&&!L.Browser.ie&&!L.Browser.opera){a.bringToFront()}},this);a.eachLayer(function(g){g.on("click",e)})})},_boundsToBbox:function(g,e){var b=6;var i=Math.pow(10,b);var h=Math.round(g.getWest()*i)/i;var d=Math.round(g.getSouth()*i)/i;var c=Math.round(g.getEast()*i)/i;var a=Math.round(g.getNorth()*i)/i;if(e===true){return d+","+h+","+a+","+c}else{return h+","+d+","+c+","+a}},_projectBounds:function(b,l,i){this.centerLonLat=null;var j=window.proj4(l,i,[b.getWest(),b.getSouth()]),g=window.proj4(l,i,[b.getEast(),b.getSouth()]),d=window.proj4(l,i,[b.getEast(),b.getNorth()]),e=window.proj4(l,i,[b.getWest(),b.getNorth()]);var c=Math.min(j[0],g[0]),a=Math.min(j[1],g[1]),k=Math.max(e[0],d[0]),h=Math.max(e[1],d[1]);b=L.latLngBounds(L.latLng(a,c),L.latLng(h,k));return b},getFeature:function(b,d){if(b&&!this.options.params.filter){var c=this.options.hasOwnProperty("reverseAxisBbox")?this.options.reverseAxisBbox:this.options.reverseAxis;if(this.options.inputCrs){b=this._projectBounds(b,"EPSG:4326",this.options.inputCrs);this.options.params.srsName=this.options.inputCrs}this.options.params.bbox=this._boundsToBbox(b,c)}var a=this.proxy?this.proxy+encodeURIComponent(this.getFeatureUrl):this.getFeatureUrl;if(this.xhr){this.xhr.abort();this.xhr=null}this.fire("loading",{layer:this});this.xhr=$.ajax({url:a,type:"POST",data:this.options.params,context:this,success:function(e){if(e.type&&e.type=="FeatureCollection"){this.jsonData=e;this.toGeographicCoords(this.options.inputCrs||"EPSG:4326");d();this.fire("load",{layer:this})}},dataType:"json"})},swapCoords:function(a){a=[a[1],a[0]];return a},toGeographicCoords:function(g){function e(r,q){var p=q||"EPSG:4326",o="EPSG:4326",i=r[0],s=r[1];return window.proj4(p,o,[i,s])}var k,n,h,d,a,j,c=this.jsonData.features||[];for(d=0,len=c.length;d<len;d++){j=c[d].geometry;switch(j.type){case"Point":k=j.coordinates;if(this.options.reverseAxis){k=this.swapCoords(k)}h=e(k,g);j.coordinates=h;break;case"MultiPoint":for(a=0,len2=j.coordinates.length;a<len2;a++){k=j.coordinates[a];if(this.options.reverseAxis){k=this.swapCoords(k)}h=e(k,g);c[d].geometry.coordinates[a]=h}break;case"MultiLineString":n=[];var b,m,l=[];for(a=0,len2=j.coordinates.length;a<len2;a++){n=j.coordinates[a];for(b=0,len3=n.length;b<len3;b++){k=n[b];if(this.options.reverseAxis){k=this.swapCoords(k)}h=e(k,g);n[b]=h}j.coordinates[a]=n}break;case"MultiPolygon":n=j.coordinates[0][0];for(a=0,lenP=n.length;a<lenP;a++){k=n[a];if(this.options.reverseAxis){k=this.swapCoords(k)}h=e(k,g);n[a]=h}j.coordinates[0][0]=n;break}}}});!function(a,b){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(c){L.Util.setOptions(this,c),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[]},addLayer:function(d){if(d instanceof L.LayerGroup){var h=[];for(var c in d._layers){h.push(d._layers[c])}return this.addLayers(h)}if(!d.getLatLng){return this._nonPointGroup.addLayer(d),this}if(!this._map){return this._needsClustering.push(d),this}if(this.hasLayer(d)){return this}this._unspiderfy&&this._unspiderfy(),this._addLayer(d,this._maxZoom);var j=d,g=this._map.getZoom();if(d.__parent){for(;j.__parent._zoom>=g;){j=j.__parent}}return this._currentShownBounds.contains(j.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(d,j):this._animationAddLayerNonAnimated(d,j)),this},removeLayer:function(d){if(d instanceof L.LayerGroup){var g=[];for(var c in d._layers){g.push(d._layers[c])}return this.removeLayers(g)}return d.getLatLng?this._map?d.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(d)),this._removeLayer(d,!0),this._featureGroup.hasLayer(d)&&(this._featureGroup.removeLayer(d),d.setOpacity&&d.setOpacity(1)),this):this:(!this._arraySplice(this._needsClustering,d)&&this.hasLayer(d)&&this._needsRemoving.push(d),this):(this._nonPointGroup.removeLayer(d),this)},addLayers:function(z){var q,m,j,A,c=this._featureGroup,g=this._nonPointGroup,w=this.options.chunkedLoading,p=this.options.chunkInterval,x=this.options.chunkProgress;if(this._map){var y=0,k=(new Date).getTime(),v=L.bind(function(){for(var l=(new Date).getTime();y<z.length;y++){if(w&&0===y%200){var d=(new Date).getTime()-l;if(d>p){break}}if(A=z[y],A.getLatLng){if(!this.hasLayer(A)&&(this._addLayer(A,this._maxZoom),A.__parent&&2===A.__parent.getChildCount())){var o=A.__parent.getAllChildMarkers(),h=o[0]===A?o[1]:o[0];c.removeLayer(h)}}else{g.addLayer(A)}}x&&x(y,z.length,(new Date).getTime()-k),y===z.length?(this._featureGroup.eachLayer(function(e){e instanceof L.MarkerCluster&&e._iconNeedsUpdate&&e._updateIcon()}),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(v,this.options.chunkDelay)},this);v()}else{for(q=[],m=0,j=z.length;j>m;m++){A=z[m],A.getLatLng?this.hasLayer(A)||q.push(A):g.addLayer(A)}this._needsClustering=this._needsClustering.concat(q)}return this},removeLayers:function(d){var j,c,k,g=this._featureGroup,h=this._nonPointGroup;if(!this._map){for(j=0,c=d.length;c>j;j++){k=d[j],this._arraySplice(this._needsClustering,k),h.removeLayer(k)}return this}for(j=0,c=d.length;c>j;j++){k=d[j],k.__parent?(this._removeLayer(k,!0,!0),g.hasLayer(k)&&(g.removeLayer(k),k.setOpacity&&k.setOpacity(1))):h.removeLayer(k)}return this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),g.eachLayer(function(e){e instanceof L.MarkerCluster&&e._updateIcon()}),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(c){delete c.__parent}),this._map&&this._generateInitialClusters(),this},getBounds:function(){var c=new L.LatLngBounds;if(this._topClusterLevel){c.extend(this._topClusterLevel._bounds)}else{for(var d=this._needsClustering.length-1;d>=0;d--){c.extend(this._needsClustering[d].getLatLng())}}return c.extend(this._nonPointGroup.getBounds()),c},eachLayer:function(d,g){var c,h=this._needsClustering.slice();for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(h),c=h.length-1;c>=0;c--){d.call(g,h[c])}this._nonPointGroup.eachLayer(d,g)},getLayers:function(){var c=[];return this.eachLayer(function(d){c.push(d)}),c},getLayer:function(c){var d=null;return this.eachLayer(function(e){L.stamp(e)===c&&(d=e)}),d},hasLayer:function(d){if(!d){return !1}var g,c=this._needsClustering;for(g=c.length-1;g>=0;g--){if(c[g]===d){return !0}}for(c=this._needsRemoving,g=c.length-1;g>=0;g--){if(c[g]===d){return !1}}return !(!d.__parent||d.__parent._group!==this)||this._nonPointGroup.hasLayer(d)},zoomToShowLayer:function(d,g){var c=function(){if((d._icon||d.__parent._icon)&&!this._inZoomAnimation){if(this._map.off("moveend",c,this),this.off("animationend",c,this),d._icon){g()}else{if(d.__parent._icon){var e=function(){this.off("spiderfied",e,this),g()};this.on("spiderfied",e,this),d.__parent.spiderfy()}}}};d._icon&&this._map.getBounds().contains(d.getLatLng())?g():d.__parent._zoom<this._map.getZoom()?(this._map.on("moveend",c,this),this._map.panTo(d.getLatLng())):(this._map.on("moveend",c,this),this.on("animationend",c,this),this._map.setView(d.getLatLng(),d.__parent._zoom+1),d.__parent.zoomToBounds())},onAdd:function(d){this._map=d;var g,c,h;if(!isFinite(this._map.getMaxZoom())){throw"Map has no maxZoom specified"}for(this._featureGroup.onAdd(d),this._nonPointGroup.onAdd(d),this._gridClusters||this._generateInitialClusters(),g=0,c=this._needsRemoving.length;c>g;g++){h=this._needsRemoving[g],this._removeLayer(h,!0)}this._needsRemoving=[],this._zoom=this._map.getZoom(),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),c=this._needsClustering,this._needsClustering=[],this.addLayers(c)},onRemove:function(c){c.off("zoomend",this._zoomEnd,this),c.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),this._hideCoverage(),this._featureGroup.onRemove(c),this._nonPointGroup.onRemove(c),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(c){for(var d=c;d&&!d._icon;){d=d.__parent}return d||null},_arraySplice:function(d,g){for(var c=d.length-1;c>=0;c--){if(d[c]===g){return d.splice(c,1),!0}}},_removeLayer:function(v,l,j){var g=this._gridClusters,w=this._gridUnclustered,c=this._featureGroup,d=this._map;if(l){for(var m=this._maxZoom;m>=0&&w[m].removeObject(v,d.project(v.getLatLng(),m));m--){}}var k,p=v.__parent,q=p._markers;for(this._arraySplice(q,v);p&&(p._childCount--,!(p._zoom<0));){l&&p._childCount<=1?(k=p._markers[0]===v?p._markers[1]:p._markers[0],g[p._zoom].removeObject(p,d.project(p._cLatLng,p._zoom)),w[p._zoom].addObject(k,d.project(k.getLatLng(),p._zoom)),this._arraySplice(p.__parent._childClusters,p),p.__parent._markers.push(k),k.__parent=p.__parent,p._icon&&(c.removeLayer(p),j||c.addLayer(k))):(p._recalculateBounds(),j&&p._icon||p._updateIcon()),p=p.__parent}delete v.__parent},_isOrIsParent:function(c,d){for(;d;){if(c===d){return !0}d=d.parentNode}return !1},_propagateEvent:function(c){if(c.layer instanceof L.MarkerCluster){if(c.originalEvent&&this._isOrIsParent(c.layer._icon,c.originalEvent.relatedTarget)){return}c.type="cluster"+c.type}this.fire(c.type,c)},_defaultIconCreateFunction:function(d){var g=d.getChildCount(),c=" marker-cluster-";return c+=10>g?"small":100>g?"medium":"large",new L.DivIcon({html:"<div><span>"+g+"</span></div>",className:"marker-cluster"+c,iconSize:new L.Point(40,40)})},_bindEvents:function(){var d=this._map,g=this.options.spiderfyOnMaxZoom,c=this.options.showCoverageOnHover,h=this.options.zoomToBoundsOnClick;(g||h)&&this.on("clusterclick",this._zoomOrSpiderfy,this),c&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),d.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(c){var d=this._map;d.getMaxZoom()===d.getZoom()?this.options.spiderfyOnMaxZoom&&c.layer.spiderfy():this.options.zoomToBoundsOnClick&&c.layer.zoomToBounds(),c.originalEvent&&13===c.originalEvent.keyCode&&d._container.focus()},_showCoverage:function(c){var d=this._map;this._inZoomAnimation||(this._shownPolygon&&d.removeLayer(this._shownPolygon),c.layer.getChildCount()>2&&c.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(c.layer.getConvexHull(),this.options.polygonOptions),d.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var d=this.options.spiderfyOnMaxZoom,g=this.options.showCoverageOnHover,c=this.options.zoomToBoundsOnClick,h=this._map;(d||c)&&this.off("clusterclick",this._zoomOrSpiderfy,this),g&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),h.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=this._map._zoom,this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var c=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,c),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._map._zoom,c),this._currentShownBounds=c}},_generateInitialClusters:function(){var d=this._map.getMaxZoom(),g=this.options.maxClusterRadius,c=g;"function"!=typeof g&&(c=function(){return g}),this.options.disableClusteringAtZoom&&(d=this.options.disableClusteringAtZoom-1),this._maxZoom=d,this._gridClusters={},this._gridUnclustered={};for(var h=d;h>=0;h--){this._gridClusters[h]=new L.DistanceGrid(c(h)),this._gridUnclustered[h]=new L.DistanceGrid(c(h))}this._topClusterLevel=new L.MarkerCluster(this,-1)},_addLayer:function(q,l){var j,g,u=this._gridClusters,c=this._gridUnclustered;for(this.options.singleMarkerMode&&(q.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[q]}}));l>=0;l--){j=this._map.project(q.getLatLng(),l);var d=u[l].getNearObject(j);if(d){return d._addChild(q),q.__parent=d,void 0}if(d=c[l].getNearObject(j)){var m=d.__parent;m&&this._removeLayer(d,!1);var k=new L.MarkerCluster(this,l,d,q);u[l].addObject(k,this._map.project(k._cLatLng,l)),d.__parent=k,q.__parent=k;var p=k;for(g=l-1;g>m._zoom;g--){p=new L.MarkerCluster(this,g,p),u[g].addObject(p,this._map.project(d.getLatLng(),g))}for(m._addChild(p),g=l;g>=0&&c[g].removeObject(d,this._map.project(d.getLatLng(),g));g--){}return}c[l].addObject(q,j)}this._topClusterLevel._addChild(q),q.__parent=this._topClusterLevel},_enqueue:function(c){this._queue.push(c),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var c=0;c<this._queue.length;c++){this._queue[c].call(this)}this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){this._processQueue(),this._zoom<this._map._zoom&&this._currentShownBounds.contains(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,this._map._zoom)):this._zoom>this._map._zoom?(this._animationStart(),this._animationZoomOut(this._zoom,this._map._zoom)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(!this.options.removeOutsideVisibleBounds){return this.getBounds()}var d=this._map,j=d.getBounds(),c=j._southWest,k=j._northEast,g=L.Browser.mobile?0:Math.abs(c.lat-k.lat),h=L.Browser.mobile?0:Math.abs(c.lng-k.lng);return new L.LatLngBounds(new L.LatLng(c.lat-g,c.lng-h,!0),new L.LatLng(k.lat+g,k.lng+h,!0))},_animationAddLayerNonAnimated:function(d,g){if(g===d){this._featureGroup.addLayer(d)}else{if(2===g._childCount){g._addToMap();var c=g.getAllChildMarkers();this._featureGroup.removeLayer(c[0]),this._featureGroup.removeLayer(c[1])}else{g._updateIcon()}}}}),L.MarkerClusterGroup.include(L.DomUtil.TRANSITION?{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_animationZoomIn:function(d,h){var c,j=this._getExpandedVisibleBounds(),g=this._featureGroup;this._topClusterLevel._recursively(j,d,0,function(k){var l,e=k._latlng,i=k._markers;for(j.contains(e)||(e=null),k._isSingleParent()&&d+1===h?(g.removeLayer(k),k._recursivelyAddChildrenToMap(null,h,j)):(k.setOpacity(0),k._recursivelyAddChildrenToMap(e,h,j)),c=i.length-1;c>=0;c--){l=i[c],j.contains(l._latlng)||g.removeLayer(l)}}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(j,h),g.eachLayer(function(e){e instanceof L.MarkerCluster||!e._icon||e.setOpacity(1)}),this._topClusterLevel._recursively(j,d,h,function(e){e._recursivelyRestoreChildPositions(h)}),this._enqueue(function(){this._topClusterLevel._recursively(j,d,0,function(e){g.removeLayer(e),e.setOpacity(1)}),this._animationEnd()})},_animationZoomOut:function(c,d){this._animationZoomOutSingle(this._topClusterLevel,c-1,d),this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,c,this._getExpandedVisibleBounds())},_animationZoomOutSingle:function(d,h,c){var j=this._getExpandedVisibleBounds();d._recursivelyAnimateChildrenInAndAddSelfToMap(j,h+1,c);var g=this;this._forceLayout(),d._recursivelyBecomeVisible(j,c),this._enqueue(function(){if(1===d._childCount){var e=d._markers[0];e.setLatLng(e.getLatLng()),e.setOpacity&&e.setOpacity(1)}else{d._recursively(j,c,0,function(i){i._recursivelyRemoveChildrenFromMap(j,h+1)})}g._animationEnd()})},_animationAddLayer:function(d,g){var c=this,h=this._featureGroup;h.addLayer(d),g!==d&&(g._childCount>2?(g._updateIcon(),this._forceLayout(),this._animationStart(),d._setPos(this._map.latLngToLayerPoint(g.getLatLng())),d.setOpacity(0),this._enqueue(function(){h.removeLayer(d),d.setOpacity(1),c._animationEnd()})):(this._forceLayout(),c._animationStart(),c._animationZoomOutSingle(g,this._map.getMaxZoom(),this._map.getZoom())))},_forceLayout:function(){L.Util.falseFn(b.body.offsetWidth)}}:{_animationStart:function(){},_animationZoomIn:function(c,d){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,c),this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(c,d){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,c),this._topClusterLevel._recursivelyAddChildrenToMap(null,d,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(c,d){this._animationAddLayerNonAnimated(c,d)}}),L.markerClusterGroup=function(c){return new L.MarkerClusterGroup(c)},L.MarkerCluster=L.Marker.extend({initialize:function(d,g,c,h){L.Marker.prototype.initialize.call(this,c?c._cLatLng||c.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=d,this._zoom=g,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._bounds=new L.LatLngBounds,c&&this._addChild(c),h&&this._addChild(h)},getAllChildMarkers:function(d){d=d||[];for(var g=this._childClusters.length-1;g>=0;g--){this._childClusters[g].getAllChildMarkers(d)}for(var c=this._markers.length-1;c>=0;c--){d.push(this._markers[c])}return d},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var d,j=this._childClusters.slice(),c=this._group._map,l=c.getBoundsZoom(this._bounds),g=this._zoom+1,h=c.getZoom();j.length>0&&l>g;){g++;var k=[];for(d=0;d<j.length;d++){k=k.concat(j[d]._childClusters)}j=k}l>g?this._group._map.setView(this._latlng,g):h>=l?this._group._map.setView(this._latlng,h+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var c=new L.LatLngBounds;return c.extend(this._bounds),c},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(c,d){this._iconNeedsUpdate=!0,this._expandBounds(c),c instanceof L.MarkerCluster?(d||(this._childClusters.push(c),c.__parent=this),this._childCount+=c._childCount):(d||this._markers.push(c),this._childCount++),this.__parent&&this.__parent._addChild(c,!0)},_expandBounds:function(d){var g,c=d._wLatLng||d._latlng;d instanceof L.MarkerCluster?(this._bounds.extend(d._bounds),g=d._childCount):(this._bounds.extend(c),g=1),this._cLatLng||(this._cLatLng=d._cLatLng||c);var h=this._childCount+g;this._wLatLng?(this._wLatLng.lat=(c.lat*g+this._wLatLng.lat*this._childCount)/h,this._wLatLng.lng=(c.lng*g+this._wLatLng.lng*this._childCount)/h):this._latlng=this._wLatLng=new L.LatLng(c.lat,c.lng)},_addToMap:function(c){c&&(this._backupLatlng=this._latlng,this.setLatLng(c)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(d,g,c){this._recursively(d,0,c-1,function(h){var e,k,j=h._markers;for(e=j.length-1;e>=0;e--){k=j[e],k._icon&&(k._setPos(g),k.setOpacity(0))}},function(h){var e,k,j=h._childClusters;for(e=j.length-1;e>=0;e--){k=j[e],k._icon&&(k._setPos(g),k.setOpacity(0))}})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(d,g,c){this._recursively(d,c,0,function(e){e._recursivelyAnimateChildrenIn(d,e._group._map.latLngToLayerPoint(e.getLatLng()).round(),g),e._isSingleParent()&&g-1===c?(e.setOpacity(1),e._recursivelyRemoveChildrenFromMap(d,g)):e.setOpacity(0),e._addToMap()})},_recursivelyBecomeVisible:function(c,d){this._recursively(c,0,d,null,function(e){e.setOpacity(1)})},_recursivelyAddChildrenToMap:function(d,g,c){this._recursively(c,-1,g,function(i){if(g!==i._zoom){for(var e=i._markers.length-1;e>=0;e--){var h=i._markers[e];c.contains(h._latlng)&&(d&&(h._backupLatlng=h.getLatLng(),h.setLatLng(d),h.setOpacity&&h.setOpacity(0)),i._group._featureGroup.addLayer(h))}}},function(h){h._addToMap(d)})},_recursivelyRestoreChildPositions:function(d){for(var h=this._markers.length-1;h>=0;h--){var c=this._markers[h];c._backupLatlng&&(c.setLatLng(c._backupLatlng),delete c._backupLatlng)}if(d-1===this._zoom){for(var j=this._childClusters.length-1;j>=0;j--){this._childClusters[j]._restorePosition()}}else{for(var g=this._childClusters.length-1;g>=0;g--){this._childClusters[g]._recursivelyRestoreChildPositions(d)}}},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(d,h,c){var j,g;this._recursively(d,-1,h-1,function(e){for(g=e._markers.length-1;g>=0;g--){j=e._markers[g],c&&c.contains(j._latlng)||(e._group._featureGroup.removeLayer(j),j.setOpacity&&j.setOpacity(1))}},function(e){for(g=e._childClusters.length-1;g>=0;g--){j=e._childClusters[g],c&&c.contains(j._latlng)||(e._group._featureGroup.removeLayer(j),j.setOpacity&&j.setOpacity(1))}})},_recursively:function(p,l,j,g,q){var c,d,m=this._childClusters,k=this._zoom;if(l>k){for(c=m.length-1;c>=0;c--){d=m[c],p.intersects(d._bounds)&&d._recursively(p,l,j,g,q)}}else{if(g&&g(this),q&&this._zoom===j&&q(this),j>k){for(c=m.length-1;c>=0;c--){d=m[c],p.intersects(d._bounds)&&d._recursively(p,l,j,g,q)}}}},_recalculateBounds:function(){var d,g=this._markers,c=this._childClusters;for(this._bounds=new L.LatLngBounds,delete this._wLatLng,d=g.length-1;d>=0;d--){this._expandBounds(g[d])}for(d=c.length-1;d>=0;d--){this._expandBounds(c[d])}},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.DistanceGrid=function(c){this._cellSize=c,this._sqCellSize=c*c,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(g,k){var d=this._getCoord(k.x),m=this._getCoord(k.y),h=this._grid,j=h[m]=h[m]||{},l=j[d]=j[d]||[],c=L.Util.stamp(g);this._objectPoint[c]=k,l.push(g)},updateObject:function(c,d){this.removeObject(c),this.addObject(c,d)},removeObject:function(p,l){var j,g,q=this._getCoord(l.x),c=this._getCoord(l.y),d=this._grid,m=d[c]=d[c]||{},k=m[q]=m[q]||[];for(delete this._objectPoint[L.Util.stamp(p)],j=0,g=k.length;g>j;j++){if(k[j]===p){return k.splice(j,1),1===g&&delete m[q],!0}}},eachObject:function(q,l){var j,g,u,c,d,m,k,p=this._grid;for(j in p){d=p[j];for(g in d){for(m=d[g],u=0,c=m.length;c>u;u++){k=q.call(l,m[u]),k&&(u--,c--)}}}},getNearObject:function(B){var w,q,k,C,c,j,y,v,z=this._getCoord(B.x),A=this._getCoord(B.y),m=this._objectPoint,x=this._sqCellSize,g=null;for(w=A-1;A+1>=w;w++){if(C=this._grid[w]){for(q=z-1;z+1>=q;q++){if(c=C[q]){for(k=0,j=c.length;j>k;k++){y=c[k],v=this._sqDist(m[L.Util.stamp(y)],B),x>v&&(x=v,g=y)}}}}}return g},_getCoord:function(c){return Math.floor(c/this._cellSize)},_sqDist:function(d,g){var c=g.x-d.x,h=g.y-d.y;return c*c+h*h}},function(){L.QuickHull={getDistant:function(d,g){var c=g[1].lat-g[0].lat,h=g[0].lng-g[1].lng;return h*(d.lat-g[0].lat)+c*(d.lng-g[0].lng)},findMostDistantPointFromBaseLine:function(g,k){var d,m,h,j=0,l=null,c=[];for(d=k.length-1;d>=0;d--){m=k[d],h=this.getDistant(m,g),h>0&&(c.push(m),h>j&&(j=h,l=m))}return{maxPoint:l,newPoints:c}},buildConvexHull:function(d,g){var c=[],h=this.findMostDistantPointFromBaseLine(d,g);return h.maxPoint?(c=c.concat(this.buildConvexHull([d[0],h.maxPoint],h.newPoints)),c=c.concat(this.buildConvexHull([h.maxPoint,d[1]],h.newPoints))):[d[0]]},getConvexHull:function(g){var k,d=!1,m=!1,h=null,j=null;for(k=g.length-1;k>=0;k--){var l=g[k];(d===!1||l.lat>d)&&(h=l,d=l.lat),(m===!1||l.lat<m)&&(j=l,m=l.lat)}var c=[].concat(this.buildConvexHull([j,h],g),this.buildConvexHull([h,j],g));return c}}}(),L.MarkerCluster.include({getConvexHull:function(){var d,g,c=this.getAllChildMarkers(),h=[];for(g=c.length-1;g>=0;g--){d=c[g].getLatLng(),h.push(d)}return L.QuickHull.getConvexHull(h)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var d,h=this.getAllChildMarkers(),c=this._group,j=c._map,g=j.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,h.length>=this._circleSpiralSwitchover?d=this._generatePointsSpiral(h.length,g):(g.y+=10,d=this._generatePointsCircle(h.length,g)),this._animationSpiderfy(h,d)}},unspiderfy:function(c){this._group._inZoomAnimation||(this._animationUnspiderfy(c),this._group._spiderfied=null)},_generatePointsCircle:function(g,k){var d,m,h=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+g),j=h/this._2PI,l=this._2PI/g,c=[];for(c.length=g,d=g-1;d>=0;d--){m=this._circleStartAngle+d*l,c[d]=new L.Point(k.x+j*Math.cos(m),k.y+j*Math.sin(m))._round()}return c},_generatePointsSpiral:function(g,k){var d,m=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthStart,h=this._group.options.spiderfyDistanceMultiplier*this._spiralFootSeparation,j=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthFactor,l=0,c=[];for(c.length=g,d=g-1;d>=0;d--){l+=h/m+0.0005*d,c[d]=new L.Point(k.x+m*Math.cos(l),k.y+m*Math.sin(l))._round(),m+=this._2PI*j/l}return c},_noanimationUnspiderfy:function(){var d,j,c=this._group,k=c._map,g=c._featureGroup,h=this.getAllChildMarkers();for(this.setOpacity(1),j=h.length-1;j>=0;j--){d=h[j],g.removeLayer(d),d._preSpiderfyLatlng&&(d.setLatLng(d._preSpiderfyLatlng),delete d._preSpiderfyLatlng),d.setZIndexOffset&&d.setZIndexOffset(0),d._spiderLeg&&(k.removeLayer(d._spiderLeg),delete d._spiderLeg)}c._spiderfied=null}}),L.MarkerCluster.include(L.DomUtil.TRANSITION?{SVG_ANIMATION:function(){return b.createElementNS("http://www.w3.org/2000/svg","animate").toString().indexOf("SVGAnimate")>-1}(),_animationSpiderfy:function(D,w){var k,E,e,j,A=this,x=this._group,B=x._map,C=x._featureGroup,v=B.latLngToLayerPoint(this._latlng);for(k=D.length-1;k>=0;k--){E=D[k],E.setOpacity?(E.setZIndexOffset(1000000),E.setOpacity(0),C.addLayer(E),E._setPos(v)):C.addLayer(E)}x._forceLayout(),x._animationStart();var y=L.Path.SVG?0:0.3,g=L.Path.SVG_NS;for(k=D.length-1;k>=0;k--){if(j=B.layerPointToLatLng(w[k]),E=D[k],E._preSpiderfyLatlng=E._latlng,E.setLatLng(j),E.setOpacity&&E.setOpacity(1),e=new L.Polyline([A._latlng,j],{weight:1.5,color:"#222",opacity:y}),B.addLayer(e),E._spiderLeg=e,L.Path.SVG&&this.SVG_ANIMATION){var z=e._path.getTotalLength();e._path.setAttribute("stroke-dasharray",z+","+z);var q=b.createElementNS(g,"animate");q.setAttribute("attributeName","stroke-dashoffset"),q.setAttribute("begin","indefinite"),q.setAttribute("from",z),q.setAttribute("to",0),q.setAttribute("dur",0.25),e._path.appendChild(q),q.beginElement(),q=b.createElementNS(g,"animate"),q.setAttribute("attributeName","stroke-opacity"),q.setAttribute("attributeName","stroke-opacity"),q.setAttribute("begin","indefinite"),q.setAttribute("from",0),q.setAttribute("to",0.5),q.setAttribute("dur",0.25),e._path.appendChild(q),q.beginElement()}}if(A.setOpacity(0.3),L.Path.SVG){for(this._group._forceLayout(),k=D.length-1;k>=0;k--){E=D[k]._spiderLeg,E.options.opacity=0.5,E._path.setAttribute("stroke-opacity",0.5)}}setTimeout(function(){x._animationEnd(),x.fire("spiderfied")},200)},_animationUnspiderfy:function(q){var l,j,g,u=this._group,c=u._map,d=u._featureGroup,m=q?c._latLngToNewLayerPoint(this._latlng,q.zoom,q.center):c.latLngToLayerPoint(this._latlng),k=this.getAllChildMarkers(),p=L.Path.SVG&&this.SVG_ANIMATION;for(u._animationStart(),this.setOpacity(1),j=k.length-1;j>=0;j--){l=k[j],l._preSpiderfyLatlng&&(l.setLatLng(l._preSpiderfyLatlng),delete l._preSpiderfyLatlng,l.setOpacity?(l._setPos(m),l.setOpacity(0)):d.removeLayer(l),p&&(g=l._spiderLeg._path.childNodes[0],g.setAttribute("to",g.getAttribute("from")),g.setAttribute("from",0),g.beginElement(),g=l._spiderLeg._path.childNodes[1],g.setAttribute("from",0.5),g.setAttribute("to",0),g.setAttribute("stroke-opacity",0),g.beginElement(),l._spiderLeg._path.setAttribute("stroke-opacity",0)))}setTimeout(function(){var e=0;for(j=k.length-1;j>=0;j--){l=k[j],l._spiderLeg&&e++}for(j=k.length-1;j>=0;j--){l=k[j],l._spiderLeg&&(l.setOpacity&&(l.setOpacity(1),l.setZIndexOffset(0)),e>1&&d.removeLayer(l),c.removeLayer(l._spiderLeg),delete l._spiderLeg)}u._animationEnd()},200)}}:{_animationSpiderfy:function(p,l){var j,g,q,c,d=this._group,m=d._map,k=d._featureGroup;for(j=p.length-1;j>=0;j--){c=m.layerPointToLatLng(l[j]),g=p[j],g._preSpiderfyLatlng=g._latlng,g.setLatLng(c),g.setZIndexOffset&&g.setZIndexOffset(1000000),k.addLayer(g),q=new L.Polyline([this._latlng,c],{weight:1.5,color:"#222"}),m.addLayer(q),g._spiderLeg=q}this.setOpacity(0.3),d.fire("spiderfied")},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerClusterGroup.include({_spiderfied:null,_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Path.SVG&&!L.Browser.touch&&this._map._initPathRoot()},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(c){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(c))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(c){this._spiderfied&&this._spiderfied.unspiderfy(c)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(c){c._spiderLeg&&(this._featureGroup.removeLayer(c),c.setOpacity(1),c.setZIndexOffset(0),this._map.removeLayer(c._spiderLeg),delete c._spiderLeg)}})}(window,document);(function(){L.labelVersion="0.2.2-dev",L.Label=L.Class.extend({includes:L.Mixin.Events,options:{className:"",clickable:!1,direction:"right",noHide:!1,offset:[12,-15],opacity:1,zoomAnimation:!0},initialize:function(a,b){L.setOptions(this,a),this._source=b,this._animated=L.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(a){this._map=a,this._pane=this._source instanceof L.Marker?a._panes.markerPane:a._panes.popupPane,this._container||this._initLayout(),this._pane.appendChild(this._container),this._initInteraction(),this._update(),this.setOpacity(this.options.opacity),a.on("moveend",this._onMoveEnd,this).on("viewreset",this._onViewReset,this),this._animated&&a.on("zoomanim",this._zoomAnimation,this),L.Browser.touch&&!this.options.noHide&&L.DomEvent.on(this._container,"click",this.close,this)},onRemove:function(a){this._pane.removeChild(this._container),a.off({zoomanim:this._zoomAnimation,moveend:this._onMoveEnd,viewreset:this._onViewReset},this),this._removeInteraction(),this._map=null},setLatLng:function(a){return this._latlng=L.latLng(a),this._map&&this._updatePosition(),this},setContent:function(a){return this._previousContent=this._content,this._content=a,this._updateContent(),this},close:function(){var a=this._map;a&&(L.Browser.touch&&!this.options.noHide&&L.DomEvent.off(this._container,"click",this.close),a.removeLayer(this))},updateZIndex:function(a){this._zIndex=a,this._container&&this._zIndex&&(this._container.style.zIndex=a)},setOpacity:function(a){this.options.opacity=a,this._container&&L.DomUtil.setOpacity(this._container,a)},_initLayout:function(){this._container=L.DomUtil.create("div","leaflet-label "+this.options.className+" leaflet-zoom-animated"),this.updateZIndex(this._zIndex)},_update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updatePosition(),this._container.style.visibility="")},_updateContent:function(){this._content&&this._map&&this._prevContent!==this._content&&"string"==typeof this._content&&(this._container.innerHTML=this._content,this._prevContent=this._content,this._labelWidth=this._container.offsetWidth)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},_setPosition:function(g){var j=this._map,d=this._container,m=j.latLngToContainerPoint(j.getCenter()),k=j.layerPointToContainerPoint(g),h=this.options.direction,c=this._labelWidth,b=L.point(this.options.offset);"right"===h||"auto"===h&&k.x<m.x?(L.DomUtil.addClass(d,"leaflet-label-right"),L.DomUtil.removeClass(d,"leaflet-label-left"),g=g.add(b)):(L.DomUtil.addClass(d,"leaflet-label-left"),L.DomUtil.removeClass(d,"leaflet-label-right"),g=g.add(L.point(-b.x-c,b.y))),L.DomUtil.setPosition(d,g)},_zoomAnimation:function(a){var b=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPosition(b)},_onMoveEnd:function(){this._animated&&"auto"!==this.options.direction||this._updatePosition()},_onViewReset:function(a){a&&a.hard&&this._update()},_initInteraction:function(){if(this.options.clickable){var b=this._container,c=["dblclick","mousedown","mouseover","mouseout","contextmenu"];L.DomUtil.addClass(b,"leaflet-clickable"),L.DomEvent.on(b,"click",this._onMouseClick,this);for(var a=0;c.length>a;a++){L.DomEvent.on(b,c[a],this._fireMouseEvent,this)}}},_removeInteraction:function(){if(this.options.clickable){var b=this._container,c=["dblclick","mousedown","mouseover","mouseout","contextmenu"];L.DomUtil.removeClass(b,"leaflet-clickable"),L.DomEvent.off(b,"click",this._onMouseClick,this);for(var a=0;c.length>a;a++){L.DomEvent.off(b,c[a],this._fireMouseEvent,this)}}},_onMouseClick:function(a){this.hasEventListeners(a.type)&&L.DomEvent.stopPropagation(a),this.fire(a.type,{originalEvent:a})},_fireMouseEvent:function(a){this.fire(a.type,{originalEvent:a}),"contextmenu"===a.type&&this.hasEventListeners(a.type)&&L.DomEvent.preventDefault(a),"mousedown"!==a.type?L.DomEvent.stopPropagation(a):L.DomEvent.preventDefault(a)}}),L.BaseMarkerMethods={showLabel:function(){return this.label&&this._map&&(this.label.setLatLng(this._latlng),this._map.showLabel(this.label)),this},hideLabel:function(){return this.label&&this.label.close(),this},setLabelNoHide:function(a){this._labelNoHide!==a&&(this._labelNoHide=a,a?(this._removeLabelRevealHandlers(),this.showLabel()):(this._addLabelRevealHandlers(),this.hideLabel()))},bindLabel:function(b,c){var a=this.options.icon?this.options.icon.options.labelAnchor:this.options.labelAnchor,d=L.point(a)||L.point(0,0);return d=d.add(L.Label.prototype.options.offset),c&&c.offset&&(d=d.add(c.offset)),c=L.Util.extend({offset:d},c),this._labelNoHide=c.noHide,this.label||(this._labelNoHide||this._addLabelRevealHandlers(),this.on("remove",this.hideLabel,this).on("move",this._moveLabel,this).on("add",this._onMarkerAdd,this),this._hasLabelHandlers=!0),this.label=new L.Label(c,this).setContent(b),this},unbindLabel:function(){return this.label&&(this.hideLabel(),this.label=null,this._hasLabelHandlers&&(this._labelNoHide||this._removeLabelRevealHandlers(),this.off("remove",this.hideLabel,this).off("move",this._moveLabel,this).off("add",this._onMarkerAdd,this)),this._hasLabelHandlers=!1),this},updateLabelContent:function(a){this.label&&this.label.setContent(a)},getLabel:function(){return this.label},_onMarkerAdd:function(){this._labelNoHide&&this.showLabel()},_addLabelRevealHandlers:function(){this.on("mouseover",this.showLabel,this).on("mouseout",this.hideLabel,this),L.Browser.touch&&this.on("click",this.showLabel,this)},_removeLabelRevealHandlers:function(){this.off("mouseover",this.showLabel,this).off("mouseout",this.hideLabel,this),L.Browser.touch&&this.off("click",this.showLabel,this)},_moveLabel:function(a){this.label.setLatLng(a.latlng)}},L.Icon.Default.mergeOptions({labelAnchor:new L.Point(9,-20)}),L.Marker.mergeOptions({icon:new L.Icon.Default}),L.Marker.include(L.BaseMarkerMethods),L.Marker.include({_originalUpdateZIndex:L.Marker.prototype._updateZIndex,_updateZIndex:function(a){var b=this._zIndex+a;this._originalUpdateZIndex(a),this.label&&this.label.updateZIndex(b)},_originalSetOpacity:L.Marker.prototype.setOpacity,setOpacity:function(a,b){this.options.labelHasSemiTransparency=b,this._originalSetOpacity(a)},_originalUpdateOpacity:L.Marker.prototype._updateOpacity,_updateOpacity:function(){var a=0===this.options.opacity?0:1;this._originalUpdateOpacity(),this.label&&this.label.setOpacity(this.options.labelHasSemiTransparency?this.options.opacity:a)},_originalSetLatLng:L.Marker.prototype.setLatLng,setLatLng:function(a){return this.label&&!this._labelNoHide&&this.hideLabel(),this._originalSetLatLng(a)}}),L.CircleMarker.mergeOptions({labelAnchor:new L.Point(0,0)}),L.CircleMarker.include(L.BaseMarkerMethods),L.Path.include({bindLabel:function(a,b){return this.label&&this.label.options===b||(this.label=new L.Label(b,this)),this.label.setContent(a),this._showLabelAdded||(this.on("mouseover",this._showLabel,this).on("mousemove",this._moveLabel,this).on("mouseout remove",this._hideLabel,this),L.Browser.touch&&this.on("click",this._showLabel,this),this._showLabelAdded=!0),this},unbindLabel:function(){return this.label&&(this._hideLabel(),this.label=null,this._showLabelAdded=!1,this.off("mouseover",this._showLabel,this).off("mousemove",this._moveLabel,this).off("mouseout remove",this._hideLabel,this)),this},updateLabelContent:function(a){this.label&&this.label.setContent(a)},_showLabel:function(a){this.label.setLatLng(a.latlng),this._map.showLabel(this.label)},_moveLabel:function(a){this.label.setLatLng(a.latlng)},_hideLabel:function(){this.label.close()}}),L.Map.include({showLabel:function(a){return this.addLayer(a)}}),L.FeatureGroup.include({clearLayers:function(){return this.unbindLabel(),this.eachLayer(this.removeLayer,this),this},bindLabel:function(a,b){return this.invoke("bindLabel",a,b)},unbindLabel:function(){return this.invoke("unbindLabel")},updateLabelContent:function(a){this.invoke("updateLabelContent",a)}})})(this,document);var utils={rmPx:function(a){return parseInt(a.replace(/px/gi,"").replace(/em/gi,"").replace(/pt/gi,""))},drawDialog:function(e,h,a,b){b=b||{};b.size=b.size||"";var c=$('<div class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>'+(e.search(/</g)===-1?'<h4 class="modal-title">'+e+"</h4>":e)+'</div><div class="modal-body"></div></div>');c.find(".modal-body").append(h);if(a){var g=$('<div class="modal-footer"></div>');c.find(".modal-body").after(g);g.append(a)}if(b.size){c.addClass("bs-modal-"+b.size);c.find(".modal-dialog").addClass("modal-"+b.size)}return c},round:function(c,a){var b=Math.pow(10,a||0);return Math.round(c*b)/b},makeUnselectable:function(a){a.attr("unselectable","unselectable").addClass("unselectable")},extractToHtml:function(html,props){function getFunctionEnd(text){var p=1,found=false,startIndex=text.search(/\{/g);text=text.substring(startIndex+1);var i=0;for(i=0,len=text.length;i<len;i++){if(text.charAt(i)==="{"){p+=1}else{if(text.charAt(i)==="}"){p-=1}}if(p===0){found=true;i=i+startIndex+2;break}}if(!found){i=-1}return i}function extractAttribute(a,txt){var index=txt.search(/\${/g);if(index!==-1){var extractedAttribute="";var attr=html.substring(index+2);var endIndex=0;if(attr.substring(0,8)==="function"){endIndex=getFunctionEnd(attr)}else{endIndex=attr.search(/\}/g)}attr=attr.substring(0,endIndex);if(attr.substring(0,8)==="function"){var theFunc=attr.replace("function","function f");eval(theFunc);extractedAttribute=f.call(this,a)}else{extractedAttribute=a[attr]||""}txt=txt.replace("${"+attr+"}",extractedAttribute)}return txt}var index=html.search(/\${/g);while(index!==-1){html=extractAttribute(props,html);index=html.search(/\${/g)}return html}};var smap={core:{},event:$("<div />"),copyright:"© 2014 Malmö stad, Kristianstad kommun, Helsingborg stad, Lunds kommun"};smap.core.mainConfig={mapConfig:{layers:[],crs:L.CRS.EPSG3857,attributionControl:true,zoomControl:false,center:[0,0],zoom:2,maxZoom:18}};smap.core.Div=L.Class.extend({initialize:function(){this.parentTag=$("body");this.draw()},draw:function(){var a=$('<div id="mapdiv" />');this.parentTag.append(a);if(L.Browser.touch){$(window).on("orientationchange",function(){window.scrollTo(0,0)})}},CLASS_NAME:"smap.core.Div"});smap.core.Layer=L.Class.extend({options:{selectStyle:{weight:5,color:"#00DDFF",dashArray:"",fillOpacity:0.8,strokeOpacity:1}},_layers:{},_selectedFeatures:[],_bindEvents:function(){var a=this;var b=this.map;b.on("layeradd",$.proxy(this.onLayerAdd,this));smap.event.on("smap.core.createparams",function(h,g){if(a._selectedFeatures&&a._selectedFeatures.length){var d=a._selectedFeatures[0];var c=d.split(":");g.SEL=encodeURIComponent(c[0]+":"+c[1]+":"+c[2])}});smap.event.on("smap.core.applyparams",$.proxy(function(u,n){var c;if(n.BL){c=smap.cmd.getLayerConfig(n.BL)}else{c=smap.config.bl[0]}c.options.isBaseLayer=true;b.addLayer(this._createLayer(c));if(n.OL){var k,r;var j=n.OL instanceof Array?n.OL:n.OL.split(",");for(r=0,len=j.length;r<len;r++){k=smap.cmd.getLayerConfig(j[r]);if(!k||!k.init){continue}b.addLayer(this._createLayer(k))}}if(n.SEL){var q=decodeURIComponent(n.SEL),l,m=this,x;var g=q.split(":");var h=g[0],y=g[1],z=g[2],o=true;var v=parseFloat(y),w=parseFloat(z);if(isNaN(v)||isNaN(w)){o=false}if(o===false){x=smap.core.layerInst.showLayer(h);function d(){var e=null,p=this,i;$.each(p._layers,function(t,B){if(B.feature){var A=B.feature.properties;if(y.split(",").length>1){var s=y.split(",");i=A[s[0]]+"_"+A[s[1]]}else{i=B.properties[y]}if(!i){return false}if(i.toString()===z){e=B;return false}}});if(e){e.fire("click",{properties:e.feature.properties});e.openPopup()}this.off("load",d)}x.on("load",d)}}},this));b.on("click",function(){var d=a._wfsLayers;for(var e=0,c=d.length;e<c;e++){a._resetStyle(d[e])}b.fire("unselected",{})});b.on("unselected",function(){a._selectedFeatures=[]});b.on("selected",function(e){var k=a._wfsLayers;for(var h=0,m=k.length;h<m;h++){k[h].resetStyle(k[h])}a._selectedFeatures=[];var n=e.properties,g=e.layerId;var p=e.paramVal;a._selectedFeatures.push(p);if(e.layerType==="wms"&&e.latLng){for(var o in n){}var l=o.split(":");var q=l[l.length-1];var r=smap.cmd.getLayerConfigBy("layers",q,{inText:true});if(!r){return false}n=n[o][0];n._displayName=r.options.displayName;var j=utils.extractToHtml(r.options.popup,n);j=j.replace("${_displayName}",r.options.displayName);var d=$("<div>"+j+"</div>");d.find("a").each(function(){var i=$(this).attr("href"),t=$(this).text();var s=$('<button class="btn btn-default btn-sm">'+t+"</button>");s.attr("onclick",'window.open("'+i+'", "_blank")');$(this).after(s);$(this).remove();j=d.html()});b.closePopup();var c=L.popup().setLatLng(e.latLng).setContent(j).openOn(b)}})},initialize:function(a){this.map=a;this._bindEvents()},addOverlays:function(a){this._addLayers(a)},_addLayers:function(a){a=a||[];var d,c,b;for(d=0,len=a.length;d<len;d++){c=a[d];this._addLayerWithConfig(c)}},_addLayerWithConfig:function(b){var a=this._createLayer(b);this.map.addLayer(a);return a},onLayerAdd:function(c){var b=c.layer;if(!b.options||!b.options.layerId||b.feature||!(b._tileContainer||b._layers)){return}var a=b.options.layerId;this._layers[a]=b},_getLayer:function(a){return this._layers[a]||null},_setSelectStyle:function(b){var a=b.target;if(a.setStyle){a.setStyle(this.options.selectStyle)}if(a.bringToFront&&!L.Browser.ie&&!L.Browser.opera){a.bringToFront()}},_resetStyle:function(a){a.eachLayer(function(b){a.resetStyle(b)})},_wfsLayers:[],_createLayer:function(t){var init=eval(t.init);if(t.options.isBaseLayer){t.options.zIndex=t.options.zIndex||0}else{t.options.zIndex=t.options.zIndex||10}var layer=new init(t.url,t.options);var self=this;if(layer._layers){if(!t.options.style){var style={weight:2,opacity:1,color:"#fff",dashArray:"3",fillOpacity:0.7};layer.setStyle(style);layer.options.style=style}layer.on("load",function(e){var html;layer.eachLayer(function(f){if(!f._popup&&f.feature){html=utils.extractToHtml(layer.options.popup,f.feature.properties);f.bindPopup(html,{autoPan:false});if(f._popup){f._popup.options.autoPanPaddingTopLeft=[0,50]}}});smap.cmd.loading(false)});this._wfsLayers.push(layer)}else{layer.on("load",function(e){smap.cmd.loading(false)})}layer.on("loading",function(e){smap.cmd.loading(true)});return layer},showLayer:function(a){var c=smap.cmd.getLayerConfig(a);var b=this._getLayer(a);if(!b){b=this._createLayer(c)}if(this.map.hasLayer(b)===false){this.map.addLayer(b)}return b},hideLayer:function(a){var b=this._getLayer(a);this.map.removeLayer(b)},CLASS_NAME:"smap.core.Layer"});smap.core.Param=L.Class.extend({initialize:function(a){this.map=a},_lang:{sv:{remove:"Ta bort"},en:{remove:"Remove"}},_setLang:function(){langCode=smap.config.langCode;if(this._lang){this.lang=this._lang?this._lang[langCode]:null}},getParams:function(){var m="?";var a=location.href.split(m);var h=a.length>1?a[1]:"";var e={},l,k,d,b=h.split(/[&;]/);for(var g=0,j=b.length;g<j;g++){d=b[g].split("=");if(d[0]){l=d[0];try{l=decodeURIComponent(l)}catch(c){l=unescape(l)}k=(d[1]||"").replace(/\+/g," ");try{k=decodeURIComponent(k)}catch(c){k=unescape(k)}k=k.split(",");if(k.length==1){k=k[0]}e[l.toUpperCase()]=k}}return e},createParamsAsObject:function(){var j=this.map.getCenter(),i,b;var h=this.map._layers,a,g=[];for(var d in h){b=h[d];if(!b||!b.options||!b.options.layerId){continue}a=b.options.layerId;if(b.options.isBaseLayer){i=a}else{if($.inArray(b.options.layerId,g)===-1){g.push(a)}}}var e={zoom:this.map.getZoom(),center:[utils.round(j.lng,5),utils.round(j.lat,5)],ol:g,bl:i};if(smap.config.configName){e.config=smap.config.configName}smap.event.trigger("smap.core.createparams",e);return e},createParams:function(b){b=b||false;var c=this.createParamsAsObject();var e="",d;for(var a in c){d=c[a];if(d instanceof Array){if(!d.length){continue}d=d.join(",")}e+="&"+a+"="+d}e=e.substring(1);if(b===true){e=document.URL.split("?")[0]+"?"+e}return e},applyParams:function(g){g=g||{};var c=this;this._setLang();var e=g.ZOOM?parseInt(g.ZOOM):0,a=g.CENTER?L.latLng([parseFloat(g.CENTER[1]),parseFloat(g.CENTER[0])]):null;if(!e&&e!==0){e=this.map.options.minZoom||0}if(a){this.map.setView(a,e,{animate:false})}else{this.map.fitWorld()}if(g.XY){var b=L.marker(L.latLng(parseFloat(g.XY[1]),parseFloat(g.XY[0])));this.map.addLayer(b);if(g.XY.length>2){var d="<p>"+g.XY[2]+'</p><button class="btn btn-default smap-core-btn-popup">'+this.lang.remove+"</button>";b.bindPopup(d).openPopup();$(".smap-core-btn-popup").on("click",function(){c.map.removeLayer(b)})}}smap.event.trigger("smap.core.applyparams",g)},CLASS_NAME:"smap.core.Param"});smap.cmd={createParams:function(a){return smap.core.paramInst.createParams(a)},getControl:function(e){var d,b=smap.core.controls||[];for(var c=0,a=b.length;c<a;c++){d=b[c];if(d instanceof L.Control[e]){return d}}return null},notify:function(d,a,b){b=b||{};b.parent=b.parent||$("body");switch(a){case"success":a="alert-success";break;case"error":a="alert-danger";break}var c=$('<div class="alert '+a+' alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+d+"</div>");b.parent.find(".alert").remove();b.parent.append(c);return c},addLayerWithConfig:function(a){return smap.core.layerInst._addLayerWithConfig(a)},getLayerConfig:function(a){return this.getLayerConfigBy("layerId",a)},getLayerConfigBy:function(e,h,b){b=b||{};var a=smap.config.bl.concat(smap.config.ol||[]),d,c;for(d=0,len=a.length;d<len;d++){c=a[d];var g=c.options[e];if(b.inText){if(g!==undefined&&g.search(h)>-1){return c}}else{if(g!==undefined&&g===h){return c}}}return null},reloadCore:function(a){a=a||{};smap.core.initInst.resetMap();smap.core.initInst.init(a)},loading:function(a){if(a&&a===true){if(!this.spinner){var b={length:10,width:8,radius:15};this.spinner=new Spinner(b).spin()}this.spinner.spin();$("#mapdiv").append(this.spinner.el);$(this.spinner.el).css({left:"50%",top:"50%"})}else{this.spinner.stop()}}};smap.core.Init=L.Class.extend({_selectedFeatures:[],initialize:function(){this.defineProjs();smap.core.divInst=new smap.core.Div();smap.cmd.loading(true);this.init()},init:function(b){b=b||{};var a=this;this.drawMap();this.bindEvents(this.map);smap.core.layerInst=new smap.core.Layer(this.map);smap.core.paramInst=new smap.core.Param(this.map);var c=b.params||smap.core.paramInst.getParams();this.loadConfig(c.CONFIG).done(function(){smap.config=config||window.config;smap.config.configName=c.CONFIG;smap.config.langCode=c.LANG||navigator.language.split("-")[0]||"en";a.applyConfig(smap.config);smap.core.paramInst.applyParams(c);smap.cmd.loading(false)}).fail(function(d,e,g){console.log("Config not loaded because: "+e);smap.cmd.loading(false)})},applyConfig:function(a){this.preProcessConfig(a);$.extend(this.map.options,a.mapOptions||{});this.addPlugins(a.plugins)},resetMap:function(){smap.map.off();this.map.remove();this.map=null;delete this.map;smap.map=null;delete smap.map;window.config=null;delete window.config;smap.config=null;delete smap.config;smap.event.off();smap.core.controls=[];smap.core.layerInst=null;smap.core.modInst=null;smap.core.paramInst=null;delete smap.core.layerInst;delete smap.core.modInst;delete smap.core.paramInst},bindEvents:function(a){},drawMap:function(b){b=b||{};var a=smap.core.mainConfig.mapConfig||{};this.map=L.map("mapdiv",$.extend(a,b));smap.map=this.map},loadConfig:function(a){a=a||"config.js";return $.ajax({url:"configs/"+a,context:this,dataType:"script"})},preProcessConfig:function(b){try{b.ws=b.ws?b.ws[document.domain]:{}}catch(g){b.log("smap.core.Init: config file's ws property not specified for domain: "+document.domain)}var d=b.bl||[];for(var c=0,a=d.length;c<a;c++){d[c].options.isBaseLayer=true}},addPlugins:function(arr){var t,init,autoActivates=[];smap.core.controls=smap.core.controls||[];for(var i=0,len=arr.length;i<len;i++){t=arr[i];init=eval(t.init);if(init){init=new init(t.options||{});this.map.addControl(init);smap.core.controls.push(init);if(init.options.autoActivate){autoActivates.push(init)}}}smap.event.trigger("smap.core.pluginsadded");for(var i=0,len=autoActivates.length;i<len;i++){autoActivates[i].activate()}},defineProjs:function(){if(window.proj4){proj4=window.proj4;proj4.defs([["EPSG:4326","+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"],["EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"],["EPSG:3008","+proj=tmerc +lat_0=0 +lon_0=13.5 +k=1 +x_0=150000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:3006","+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"],["EPSG:3021","+proj=tmerc +lat_0=0 +lon_0=15.8062845294444 +k=1.00000561024+x_0=1500064.274 +y_0=-667.711 +ellps=GRS80 +units=m"]])}},CLASS_NAME:"smap.core.Init"});$(document).ready(function(){smap.core.initInst=new smap.core.Init()});L.Control.SelectWMS=L.Control.extend({options:{wmsVersion:"1.3",outputFormat:"GML2",srs:"EPSG:4326",info_format:"text/plain",featureCount:1,buffer:5,onSuccess:function(e,a){var c=a.context;var d=smap.cmd.getLayerConfigBy("layers",a.params.layers);var b=d.options.layerId;if(e&&$.isEmptyObject(e)===false){c._selectedFeatures.push([b,a.latLng.lng,a.latLng.lat]);var g=a.latLng;a.map.fire("selected",{layerType:"wms",paramVal:[b,g.lng,g.lat].join(":"),properties:e,latLng:g,layerId:b})}},onError:function(){}},_layers:[],_selectedFeatures:[],initialize:function(a){L.setOptions(this,a)},onAdd:function(a){this.map=a;this._bindEvents();this._container=L.DomUtil.create("div","leaflet-control-selectwms");L.DomEvent.disableClickPropagation(this._container);return this._container},onRemove:function(a){this._unbindEvents()},_applyParam:function(a){var k,g;var c=a.split(":");var e=c[0],h=c[1],d=c[2],i=true;var j=parseFloat(h),b=parseFloat(d);if(isNaN(j)||isNaN(b)){i=false}if(i===true){g=smap.core.layerInst.showLayer(e);latLng=L.latLng(parseFloat(d),parseFloat(h));this.onMapClick({latlng:latLng,_layers:[g]})}},_bindEvents:function(){var a=this;smap.event.on("smap.core.applyparams",function(c,b){if(b.SEL){a._applyParam(decodeURIComponent(b.SEL))}});this.map.on("layeradd",this.onLayerAdd,this).on("layerremove",this.onLayerRemove,this).on("click",this.onMapClick,this)},_unbindEvents:function(){this.map.off("layeradd",this.onLayerAdd,this).off("layerremove",this.onLayerRemove,this).off("click",this.onMapClick,this)},onLayerAdd:function(b){var a=b.layer;if(this._layerShouldBeAdded(a)===true){this._layers.push(a)}},onLayerRemove:function(c){var b=c.layer;var a=this._hasLayer(b);if(a!==false){this._layers.splice(a,1)}},onMapClick:function(g){this._selectedFeatures=[];var b=g.latlng;if(this.xhr){this.xhr.abort()}var d=g._layers||this._layers;if(!d.length){return}var j=[];var k,a,i,h={};$.each(d,function(l,e){a=e._url;i=a.toUpperCase();if(!h[i]){h[i]={layerNames:[],url:a,wmsVersion:e._wmsVersion,layerId:e.options.layerId}}h[i].layerNames.push(e.options.layers)});var c;for(var i in h){k=h[i];c=this._makeParams({layers:k.layerNames.join(","),version:k._wmsVersion||this.options.wmsVersion,info_format:this.options.info_format,latLng:b});this.request(k.url,c,{onSuccess:this.options.onSuccess,onError:function(){},layerId:k.layerId,latLng:b})}},_layerShouldBeAdded:function(b){var a=b._wmsVersion?true:false;if(b.options&&b.options.selectable&&b.options.selectable===true&&this._hasLayer(b)===false&&a===true){return true}return false},_hasLayer:function(c){var d=this._layers;for(var b=0,a=d.length;b<a;b++){if(c===d[b]){return b}}return false},_makeParams:function(c){c=c||{};var d=this.map.latLngToContainerPoint(c.latLng);var a=this.map.getBounds();var e={service:"WMS",request:"GetFeatureInfo",version:"1.1.1",bbox:a.toBBoxString(),layers:c.layers,query_layers:c.layers,info_format:c.info_format,format:"image/png",feature_count:this.options.featureCount,x:d.x,y:d.y,buffer:this.options.buffer,width:this.map.getSize().x,height:this.map.getSize().y,srs:this.options.srs||"EPSG:4326",exceptions:"application%2Fvnd.ogc.se_xml"};return e},_parseText:function(c){var d={},b={},q,o,a,n,k,p=c.split("\n");for(var g=0,j=p.length;g<j;g++){q=p[g];if(q.search("=")===-1){var h=q.search(/'/);if(h>-1){q=q.substring(h+1);h=q.search(/'/);if(k&&d[k]&&$.isEmptyObject(b)===false){d[k].push($.extend({},b));b={}}k=q.substring(0,h);if(!d[k]){d[k]=[]}continue}else{if(k&&d[k]&&$.isEmptyObject(b)===false){d[k].push($.extend({},b));b={}}continue}}o=q.split("=");if(o.length>2){var m=o.slice(1);a=m.join("=")}else{a=o[1]}a=$.trim(a);try{n=parseFloat(a)}catch(l){}if(n&&isNaN(n)===false){a=n}b[$.trim(o[0])]=a}if(k&&d[k]&&$.isEmptyObject(b)===false){d[k].push($.extend({},b))}return d},request:function(b,d,a){d=d||{};a=a||{};var c=this.proxy||L.Control.SelectWMS.proxy;this.xhr=$.ajax({url:(c?c+encodeURIComponent(b):b),data:d,type:"POST",dataType:"text",context:this,success:function(h,i,g){var e=this._parseText(h);a.onSuccess(e,{latLng:a.latLng,map:this.map,context:this,params:d})},error:function(){a.onError()},complete:function(){}})},CLASS_NAME:"L.Control.SelectWMS"});L.control.selectWMS=function(a){return new L.Control.SelectWMS(a)};L.Control.Geolocate=L.Control.extend({options:{position:"bottomright",locateOptions:{maxZoom:12,enableHighAccuracy:true}},_lang:{sv:{errorGeolocate:"Kunde inte hitta din position"},en:{errorGeolocate:"The browser could not detect your position"}},_setLang:function(a){a=a||smap.config.langCode||navigator.language.split("-")[0]||"en";if(this._lang){this.lang=this._lang?this._lang[a]:null}},initialize:function(a){L.setOptions(this,a);this._setLang(a.langCode)},onAdd:function(a){this.map=a;this._container=L.DomUtil.create("div","leaflet-control-Geolocate");L.DomEvent.disableClickPropagation(this._container);this.$container=$(this._container);this._drawButton();return this._container},onRemove:function(a){},_drawButton:function(){var a=$('<button id="smap-glocate-btn" class="btn btn-default"><span class="fa fa-location-arrow"></span></button>');this.$container.append(a);this.btn=a;a.on("click",$.proxy(function(){if(this.active){this.deactivate()}else{this.activate()}return false},this))},activate:function(){if(this.active){return false}this.active=true;this.btn.addClass("btn-primary");smap.cmd.loading(true);this.__onLocationFound=this.__onLocationFound||$.proxy(this._onLocationFound,this);this.__onLocationError=this.__onLocationError||$.proxy(this._onLocationError,this);this.__onDragStart=this.__onDragStart||$.proxy(this._onDragStart,this);this.map.on("locationfound",this.__onLocationFound);this.map.on("locationerror",this.__onLocationError);this.map.on("dragstart",this.__onDragStart);this.map.on("zoomstart",this.__onDragStart);this._startLocate(this.options.locateOptions)},deactivate:function(){if(!this.active){return false}this.active=false;smap.cmd.loading(false);this.btn.removeClass("btn-primary");this.map.off("locationfound",this.__onLocationFound);this.map.off("locationerror",this.__onLocationError);this.map.off("dragstart",this.__onDragStart);this.map.off("zoomstart",this.__onDragStart);this._stopLocate();if(this.marker){this.map.removeLayer(this.marker);this.marker=null}},_startLocate:function(b){b=b||{};var a={watch:true,setView:true,enableHighAccuracy:false};b=$.extend(a,b);this.map.locate(b)},_stopLocate:function(){this.map.stopLocate()},_onLocationFound:function(a){smap.cmd.loading(false);this.marker=this.marker||L.userMarker(a.latlng,{pulsing:true}).addTo(this.map);this.marker.setLatLng(a.latlng);this.marker.setAccuracy(a.accuracy)},_onLocationError:function(b){smap.cmd.loading(false);var a=smap.cmd.notify(this.lang.errorGeolocate+": "+b.message,"error",{parent:$("body")});a.on("touchstart",function(){$("body").find(".alert").remove()});this.deactivate()},_onDragStart:function(){this._stopLocate();this._startLocate({setView:false})}});L.control.geolocate=function(a){return new L.Control.Geolocate(a)};L.Control.GuideIntroScreen=L.Control.extend({options:{autoActivate:true,position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>',langs:{sv:"Svenska",en:"English"},words:{sv:{btnStartTour:"Starta turen"},en:{btnStartTour:"Start the tour"}},header:{sv:{title:"Promenadstaden",subHeaders:["Malmö museer","Science Center"]},en:{title:"The walking city",subHeaders:["Malmö museums","Science Center"]}},configs:[{configName:"guide-industri.js",sv:{title:"Industristaden",description:"Industrispåret guidar dig genom de gamla industrierna i Malmös innerstad."},en:{title:"The industrial city",description:"This tour guides you to some old industrial buildings of Malmö"}},{configName:"guide-vh.js",sv:{title:"Västra hamnen",description:"Västra hamnen guidar dig genom Malmös modernaste och fräsigaste stadsdel."},en:{title:"Western harbor",description:"This tour guides you through the most modern part of Malmö."}},{configName:"guide-rosengard.js",sv:{title:"Rosengård",description:"Den här turen tar dig genom Sveriges kanske mest omtalade stadsdel."},en:{title:"Rose garden",description:"This tour will take you through the infamous Rosengård."}}]},initialize:function(a){L.setOptions(this,a)},onAdd:function(b){this.map=b;this._container=L.DomUtil.create("div","leaflet-control-guideintroscreen");L.DomEvent.disableClickPropagation(this._container);this.$container=$(this._container);var a=this._makeContent("sv"),c=$('<div class="guide-introscreen" />');c.append(a);this.$container=c;return this._container},onRemove:function(a){$(".guide-introscreen").empty().remove();return this},activate:function(){$("body").append(this.$container)},deactivate:function(){this.$container.detach()},_makeContent:function(A){var q=this.options.words[A];var p=this;var d=function(){smap.cmd.loading(true);var b=$(this).data("configName");smap.map.removeControl(p);smap.cmd.reloadCore({params:{CONFIG:b,CENTER:[13,55.605],ZOOM:15}});return false};var w=this.options.header[A],o="";for(var u=0,v=w.subHeaders.length;u<v;u++){o+='<p class="lead">'+w.subHeaders[u]+"</p>"}var a='<div class="container"><h1 style="margin-bottom:20px;">'+w.title+"</h1>"+o+"</div>";var s="btn-danger";var n=this.options.langs,l="",k,t=$('<div style="margin-top:30px;" class="btn-group" />');for(var e in n){l=n[e];k=$('<button type="button" class="guideintro-btn-option btn btn-default">'+l+"</button>");if(e===A){k.addClass(s)}k.data("langCode",e);t.append(k)}var g=$('<div class="guide-content" />');g.append(a);g.append(t);var y,j,x,m=this.options.configs;var r=$('<div class="row" />');g.append(r);for(var u=0,v=m.length;u<v;u++){y=m[u];x=y.configName;y=y[A];j=$('<div class="gintro-box col-xs-6 col-md-4 col-lg-3 text-left"><h3>'+y.title+'</h3><div style="margin-bottom:20px;"><p class="lead text-muted">'+y.description+'</p><button class="btn btn-default btn-sm gintro-btn-configoption">'+q.btnStartTour+"</button></div></div>");j.addClass("col-xs-offset-3 col-md-offset-1 col-lg-offset-1");var z=j.find("button");z.data("configName",x);r.append(j)}g.find(".guideintro-btn-option").on("click",function(){var c=$(this).data("langCode");if(A!==c){$(this).addClass(s).siblings().removeClass(s).addClass("btn-default");var b=p._makeContent(c);$(".guide-introscreen").empty().append(b)}return false});g.find(".gintro-btn-configoption").on("click",d);return g}});L.control.guideIntroScreen=function(a){return new L.Control.GuideIntroScreen(a)};L.Control.GuidePopup=L.Control.extend({options:{},initialize:function(a){L.setOptions(this,a);this._setLang()},_lang:{sv:{mediaHeader:"Media"},en:{mediaHeader:"Media"}},_setLang:function(a){a=a||smap.config.langCode||navigator.language.split("-")[0]||"en";if(this._lang){this.lang=this._lang?this._lang[a]:null}},onAdd:function(a){this.map=a;this._container=L.DomUtil.create("div","leaflet-control-guidepopup");L.DomEvent.disableClickPropagation(this._container);this.$container=$(this._container);this._activate();return this._container},onRemove:function(a){this._deactivate();if(windowWidth<950){this.hideTheTag()}else{this.showTheTag()}},_onPopupClick:function(h){var c=$("#gp-btn-show").data("props");var b=this.options.data[c[this.options.attrId]]||{};var g=b.tabMedia,a=b.tabIntro;if(a){this.createPopup(c)}else{if(g&&g instanceof Object){var d=this._makeMediaContent(g.mediaType,utils.extractToHtml(g.sources,c).split(","));this.showFullScreen(d)}}return false},_onPopupOpen:function(d){if(d.popup._source.feature){var c=d.popup._source.feature.properties;var b=this.options.data[c[this.options.attrId]];if(b&&b instanceof Object){var a=$('<button style="margin-top:10px;" id="gp-btn-show" class="btn btn-primary">Visa mer</button>');$(".leaflet-popup-content").append(a);a.data("props",c);a.on("touchstart click",$.proxy(this._onPopupClick,this))}}},_onPopupClose:function(a){$(a.popup._wrapper).off("touchstart",this.onPopupClick)},_activate:function(){var b=this;var d={audio:{icon:L.icon({iconUrl:"img/glyphish-icons/PNG-icons/120-headphones.png",iconSize:[22,21],iconAnchor:[11,10],popupAnchor:[0,-8]})},video:{icon:L.icon({iconUrl:"img/glyphish-icons/PNG-icons/46-movie-2.png",iconSize:[20,25],iconAnchor:[10,12],popupAnchor:[0,-9]})},image:{icon:L.icon({iconUrl:"img/glyphish-icons/PNG-icons/121-landscape.png",iconSize:[22,21],iconAnchor:[11,10],popupAnchor:[0,-8]})}};var a=smap.cmd.getLayerConfig(this.options.layerId);a.options.pointToLayer=function(j,i){var h=j.properties||{};var g=b.options.data[h[b.options.attrId]]||{};var e=g.tabMedia;if(g.iconType&&d[g.iconType]){return L.marker(i,d[g.iconType])}else{return L.marker(i)}};var c=smap.cmd.addLayerWithConfig(a);this.map.on("popupopen",$.proxy(this._onPopupOpen,this));this.map.on("popupclose",$.proxy(this._onPopupClose,this))},_deactivate:function(){this.map.off("popupopen",$.proxy(this._onPopupOpen,this));this.map.off("popupclose",$.proxy(this._onPopupClose,this))},_makeCarousel:function(h){h=h||[];var d=$('<div id="guide-carousel" class="carousel slide">'),g,e=$('<ol class="carousel-indicators" />'),j=$('<div class="carousel-inner" />'),b=$('<a class="left carousel-control" href="#guide-carousel" data-slide="prev"><span class="icon-prev"></span></a><a class="right carousel-control" href="#guide-carousel" data-slide="next"><span class="icon-next"></span></a>');for(var c=0,a=h.length;c<a;c++){g=h[c];e.append('<li data-target="#guide-carousel" data-slide-to="'+c+'"></li>');j.append('<div class="item"><img src="'+g+'"></img></div>')}j.find(".item:first").add(e.find("li:first")).addClass("active");d.append(e).append(j).append(b);d.swiperight(function(){$(this).carousel("prev")}).swipeleft(function(){$(this).carousel("next")});$(document).on("orientationchange",function(){var i=window.innerHeight;$(".gp-fullscreen").height(i)});return d},_makeAudioTag:function(b){b=b||[];var h,e,d,g=$("<audio controls />"),j;for(var c=0,a=b.length;c<a;c++){h=b[c];e=h.substring(h.length-3).toUpperCase();switch(e){case"OGG":d="audio/ogg";break;case"MP3":d="audio/mpeg";break}j='<source src="'+h+'" type="'+d+'" />';g.append(j)}return g},_makeVideoTag:function(c){c=c||[];var a=$(window).width()-2,d=$(window).height()-65;if(d>a){var b=a;a=d;d=b}d/=2;a/=2;var g=c[0];var e;if(g.search(/youtu.be|youtube/i)>-1){e=$('<iframe src="'+g+'" width="100%" height="80%" frameborder="0" allowfullscreen></iframe>')}else{if(g.search(/vimeo.com/i)){e=$('<iframe src="'+g+'" width="100%" height="80%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>')}}return e},_makeMediaList:function(b,g){b=b||[];var e={image:"picture",audio:"volume-up",video:"facetime-video"};var d,c,a,h=$('<div id="gp-listmoreinfo" class="list-group" />');for(c=0,len=b.length;c<len;c++){d=b[c];a=$('<a href="#" class="list-group-item"><span class="glyphicon glyphicon-'+e[d.mediaType]+'"></span>&nbsp;&nbsp;&nbsp;'+utils.extractToHtml(d.label,g)+"</a>");h.append(a)}return h},showFullScreen:function(b){var e=$('<div class="gp-fullscreen"></div>');function a(g){if(g.which===27){c()}}function c(){$("body").off("keydown",a);$(".gp-fullscreen").removeClass("gp-fs-visible");setTimeout(function(){$(".gp-fullscreen").empty().remove()},500);return false}$("body").on("keydown",a);var d=$('<button type="button" class="btn btn-default">Stäng</button>');d.on("click",function(){c();return false});e.append(b);e.append(d);d.css("z-index",3000);$("body").append(e);setTimeout(function(){e.addClass("gp-fs-visible")},1)},_makeMediaContent:function(a,b){switch(a.toLowerCase()){case"image":content=this._makeCarousel(b);break;case"audio":content=this._makeAudioTag(b);break;case"video":content=this._makeVideoTag(b);break;default:break}return content},createPopup:function(i){i=i||{};var j=this;var g='<ul class="nav nav-tabs"><li class="active"><a href="#gp-intro" data-toggle="tab">Intro</a></li><li><a href="#gp-moreinfo" data-toggle="tab">'+this.lang.mediaHeader+'</a></li></ul><div class="tab-content gp-popup"><div class="tab-pane active" id="gp-intro"></div><div class="tab-pane" id="gp-moreinfo"></div></div>';g=$(g);var c=i[this.options.attrId];var d=j.options.data[c];var e=this._makeMediaList(d.tabMedia,i);g.find("#gp-moreinfo").append(e);var a=utils.extractToHtml(d.dialogTitle||i[this.options.dialogTitle],i);this.dialog=utils.drawDialog(a,g);this.dialog.on("hidden.bs.modal",function(){$(this).empty().remove();j.dialog=null;delete j.dialog});this.dialog.attr("id","gp-popup");function h(o){var l=$(this).index();var m=d.tabMedia[l];var k=utils.extractToHtml(m.sources,i);var n=j._makeMediaContent(m.mediaType,k.split(","));j.showFullScreen(n);return false}this.dialog.find("#gp-listmoreinfo").find(".list-group-item").on("tap click",h);$("body").append(this.dialog);this.dialog.modal();var b;if(d.tabIntro){b=utils.extractToHtml(d.tabIntro,i)}else{b=utils.extractToHtml(this.options.tabIntroFolderUrl,i)}this._getIntroContent(b)},_getIntroContent:function(a,b){var c=$("<div />");smap.cmd.loading(true);a=this.options.useProxy?smap.config.ws.proxy+encodeURIComponent(a):a;c.load(a,function(){$("#gp-intro").append(utils.extractToHtml($(this).html(),b));smap.cmd.loading(false)})},});L.control.guidePopup=function(a){return new L.Control.GuidePopup(a)};L.Control.LayerSwitcher=L.Control.extend({options:{pxDesktop:992},_lang:{sv:{baselayers:"Bakgrundslager",overlays:"Kartskikt"},en:{baselayers:"Baselayers",overlays:"Overlays"}},showLayer:function(a){smap.core.layerInst.showLayer(a)},hideLayer:function(a){smap.core.layerInst.hideLayer(a)},_setLang:function(a){a=a||smap.config.langCode||navigator.language.split("-")[0]||"en";if(this._lang){this.lang=this._lang?this._lang[a]:null}},initialize:function(a){L.setOptions(this,a);this._setLang(a.lang)},onAdd:function(b){this.map=b;this._container=L.DomUtil.create("div","leaflet-control-LayerSwitcher");L.DomEvent.disableClickPropagation(this._container);this.$container=$(this._container);this._addPanel();this._addLayers(smap.config.bl,smap.config.ol);this._addBtn();this._bindEvents();$("#mapdiv").addClass("lswitch-panelslide");if(L.Browser.android){function a(c){var d=0;$(c).on("touchstart",function(e){d=this.scrollTop+e.originalEvent.touches[0].pageY});$(c).on("touchmove",function(e){this.scrollTop=d-e.originalEvent.touches[0].pageY})}a($(".lswitch-panel"))}return this._container},onRemove:function(a){},_addLayers:function(d,e){d=d||[];e=e||[];var c;for(var b=0,a=d.length;b<a;b++){c=d[b];this._addRow({displayName:c.options.displayName,layerId:c.options.layerId,isBaseLayer:true})}for(var b=0,a=e.length;b<a;b++){c=e[b];this._addRow({displayName:c.options.displayName,layerId:c.options.layerId,isBaseLayer:false})}},_bindEvents:function(){var a=this;$("#mapdiv").on("touchstart click",$.proxy(function(){if($(window).width()<this.options.pxDesktop){this.hidePanel();return false}},this));if(L.Browser.ielt9){var a=this;this.map.on("click dragstart",function(){a.hidePanel()})}var c=$.proxy(this.showPanel,this),b=$.proxy(this.hidePanel,this);if(L.Browser.touch){$(window).on("orientationchange",function(){if(a.$panel.is(":visible")){b()}})}this.map.on("layeradd layerremove",function(i){if(!i.layer.options||!i.layer.options.layerId||i.layer.feature){return}var d=i.layer.options.layerId;var h=a._makeId(d);var j=$("#"+h);var g=j.hasClass("active");if(j.length){if(i.type==="layeradd"&&g===false){j.addClass("active")}else{if(i.type==="layerremove"&&g===true){j.removeClass("active")}}}})},_addBtn:function(){var a=$('<div id="lswitch-btn"><span class="fa fa-bars fa-2x"></span></div>');$("#mapdiv").prepend(a);a.on("click mousedown "+L.DomEvent._touchstart,$.proxy(function(){this.showPanel();return false},this))},_addPanel:function(){this.$panel=$('<div class="lswitch-panel unselectable" />');this.$panel.swipeleft($.proxy(function(){this.hidePanel()},this));this.$list=$('<div class="panel panel-default"><div class="panel-heading">'+this.lang.baselayers+'</div><div id="lswitch-blcont" class="list-group"></div></div><div class="panel panel-default"><div class="panel-heading">'+this.lang.overlays+'</div><div id="lswitch-olcont" class="list-group"></div></div>');this.$panel.append(this.$list);$("body").append(this.$panel)},showPanel:function(){this.$panel.show();$("#mapdiv").css({"margin-left":this.$panel.outerWidth()+"px"});$("#lswitch-btn").hide()},hidePanel:function(){$("#mapdiv").css({"margin-left":"0px"});$("#lswitch-btn").show();$("html, body").addClass("lswitch-overflow-hidden");setTimeout($.proxy(function(){this.$panel.hide();$("html, body").removeClass("lswitch-overflow-hidden")},this),300)},_setBaseLayer:function(a){var d=this.map._layers,c;for(var b in d){c=d[b];if(c&&c.options&&c.options.isBaseLayer){if(c.options.layerId!==a){this.hideLayer(c.options.layerId)}}}this.showLayer(a)},_onRowTap:function(h){var a=$(h.target);var d=a.attr("id");var b=this._unMakeId(d),c=$("#"+d).parent().attr("id")==="lswitch-blcont";if(c){a.siblings().removeClass("active");a.addClass("active");this._setBaseLayer(b);return false}a.toggleClass("active");var g=a.hasClass("active");if(g){this.showLayer(b)}else{this.map.closePopup();this.hideLayer(b)}return false},_makeId:function(a){return"lswitchrow-"+encodeURIComponent(a).replace(/%/g,"--pr--")},_unMakeId:function(a){return decodeURIComponent(a.replace("lswitchrow-","").replace(/--pr--/g,"%"))},_addRow:function(a){var b=$('<a class="list-group-item">'+a.displayName+"</a>");b.attr("id",this._makeId(a.layerId));b.on("tap",$.proxy(this._onRowTap,this));var c;if(a.isBaseLayer){c=$("#lswitch-blcont")}else{c=$("#lswitch-olcont")}c.append(b)}});L.control.layerSwitcher=function(a){return new L.Control.LayerSwitcher(a)};L.Control.ShareTweet=L.Control.extend({options:{position:"topright",wfsSource:"http://localhost:8080/geoserver/wfs",wfsFeatureType:"local:tweets"},_lang:{sv:{btnAdd:"Lägg till",btnUnshare:"Sluta dela position",titleDialog:"Skriv nånting",btnCancel:"Avbryt",btnSubmit:"Skicka",loading:"Arbetar..."},en:{btnAdd:"Add tweet",btnUnshare:"Stop sharing position",titleDialog:"Write something",btnCancel:"Cancel",btnSubmit:"Submit",loading:"Working..."}},_setLang:function(a){a=a||smap.config.langCode||navigator.language.split("-")[0]||"en";if(this._lang){this.lang=this._lang?this._lang[a]:null}},initialize:function(a){L.setOptions(this,a);this._setLang(a.langCode)},onAdd:function(b){this.map=b;this._container=L.DomUtil.create("div","leaflet-control-sharetweet");L.DomEvent.disableClickPropagation(this._container);this.$container=$(this._container);this._drawBtn();this._addWfsLayer();var a=this;this.map.on("zoomend moveend",function(){a.layer._refresh()});return this._container},onRemove:function(a){},_notify:function(c,a){switch(a){case"success":a="alert-success";break;case"error":a="alert-danger";break}var b=$('<div class="alert '+a+' alert-dismissable"> <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>'+c+"</div>");b.css({"margin-top":"20px"});$(".modal-body").find(".alert").remove();$(".modal-body .sharetweet-footer").before(b)},_addWfsLayer:function(){this.cluster=new L.MarkerClusterGroup();this.layer=smap.core.layerInst._createLayer({init:"L.GeoJSON.WFS",url:this.options.wfsSource,options:{layerId:"sharetweet-wfstlayer",displayName:"Tweets",featureType:this.options.wfsFeatureType,attribution:"Malmö stads WFS",inputCrs:"EPSG:4326",reverseAxis:true,selectable:true,popup:'<p class="lead">${text_text}</p><p>Skrivet den: <strong>${function(p) {var d = new Date(p.dtime_created);return d.toLocaleString();}}</strong></p>',uniqueAttr:null,hoverColor:"#FF0",style:{weight:6,color:"#F00",dashArray:"",fillOpacity:0.5}}});var a=this;this.layer._map=this.map;this.layer.on("load",function(b){b.layer.eachLayer(function(c){a.cluster.addLayer(c)});b.layer.clearLayers();a.map.removeLayer(a.cluster);a.map.addLayer(a.cluster);smap.cmd.loading(false)});this.map.addLayer(this.cluster)},_onLocationFound:function(a){smap.cmd.loading(false);var b=6;if(this.modal){this.modal.find('form td[name="easting"]').empty().text(utils.round(a.latlng.lng,b));this.modal.find('form td[name="northing"]').empty().text(utils.round(a.latlng.lat,b));this.modal.find('form td[name="accuracy"]').empty().text(utils.round(a.accuracy,1)+" m");this.modal.find(".btn-primary").button("reset")}},_onLocationError:function(b){var a=this;this._notify("Your position could not be determined","error");setTimeout(function(){a.deactivate()},3000)},deactivate:function(){if(this.modal){this.modal.modal("hide")}},shareTweet:function(){$("#sharetweet-btn").button(this.lang.btnUnshare);smap.cmd.loading(true);this.modal=this._showDialog();this.modal.find(".btn-primary").button("loading");var a=smap.cmd.getControl("Geolocate");if(a){a.deactivate()}this.map.on("locationfound",$.proxy(this._onLocationFound,this));this.map.on("locationerror",$.proxy(this._onLocationError,this));this.map.locate({watch:true,setView:true,enableHighAccuracy:true});smap.cmd.loading(false)},unShareTweet:function(){$("#sharetweet-btn").button(this.lang.btnAdd);this.map.off("locationfound",$.proxy(this._onLocationFound,this));this.map.off("locationerror",$.proxy(this._onLocationError,this))},_showDialog:function(){var c=$('<form id="sharetweet-form" role="form"><textarea class="form-control" rows="4" name="text" minlength="5" maxlength="140" required></textarea><table><tr><td>Easting:</td><td name="easting"></td></tr><tr><td>Northing:</td><td name="northing"></td></tr><tr style="font-weight:bold;"><td>Felmarginal:</td><td name="accuracy"></td></tr></table><div class="row sharetweet-footer"><button type="button" class="btn btn-default" data-dismiss="modal">'+this.lang.btnCancel+'</button><button type="submit" class="btn btn-primary" data-loading-text="'+this.lang.loading+'">'+this.lang.btnSubmit+"</button></div></form>");var a=this;c.on("submit",function(h){var d=$(this).serializeArray(),g={};$.each(d,function(j,e){g[e.name]=e.value});g.easting=parseFloat($(this).find('[name="easting"]').text());g.northing=parseFloat($(this).find('[name="northing"]').text());a._save(L.latLng(g.northing,g.easting),g.text);return false});c.find("tr").each(function(){var d=$(this).find("td:eq(1)");d.text("");a._addSpin(d)});var b=utils.drawDialog(this.lang.titleDialog,c,null,{size:"sm"});c.find(".btn-default").on("click",function(){b.modal("hide");return false}).find(".btn-primary").on("click",function(){return false});b.modal("show");b.on("hidden.bs.modal",function(){a.map.stopLocate();a.modal.empty().remove();a.modal=null;$("#sharetweet-btn").button(this.lang.btnAdd);$("#sharetweet-btn").removeClass("btn-primary");delete a.modal});return b},_addSpin:function(a){var b={length:5,width:1,radius:3};var c=new Spinner(b).spin();$(a).append(c.el)},_drawBtn:function(){var a=this;var b=$('<button id="sharetweet-btn" class="btn btn-default btn-lg"><span class="glyphicon glyphicon-map-marker"></span>&nbsp;&nbsp;<span>'+this.lang.btnAdd+"</span></button>");b.on("click",function(){if($(this).hasClass("btn-primary")){$(this).removeClass("btn-primary");a.unShareTweet()}else{$(this).addClass("btn-primary");a.shareTweet()}});this.$container.append(b)},_createRequest:function(c,b){var a='<wfs:Transaction\n  service="WFS"\n  version="1.1.0"\n  xmlns:grp="http://localhost/"\n  xmlns:wfs="http://www.opengis.net/wfs"\n  xmlns:gml="http://www.opengis.net/gml"\n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xsi:schemaLocation="http://www.opengis.net/wfs\n                      http://schemas.opengis.net/wfs/1.1.0/WFS-transaction.xsd\n                      '+this.options.wfsSource+"/DescribeFeatureType?typename="+this.options.wfsFeatureType+'">\n  <wfs:Insert>\n    <grp:tweets>\n      <grp:text_text>'+b.text+'</grp:text_text>\n      <grp:the_geom>\n        <gml:Point srsDimension="2" srsName="urn:x-ogc:def:crs:EPSG:4326">\n          <gml:coordinates decimal="." cs="," ts=" ">'+c.lat+","+c.lng+"</gml:coordinates>\n        </gml:Point>\n      </grp:the_geom>\n    </grp:tweets>\n  </wfs:Insert>\n</wfs:Transaction>";return a},_save:function(b,c){if(this.submitting){return false}this.map.stopLocate();this.submitting=true;smap.cmd.loading(true);this.modal.find(".btn-primary").button("loading");var a=this._createRequest(b,{text:c});$.ajax({url:smap.config.ws.proxy+encodeURIComponent(this.options.wfsSource),type:"POST",context:this,data:a,contentType:"text/xml",dataType:"text",success:function(e){smap.cmd.loading(false);var d=$.xml2json(e);if(parseInt(d.TransactionSummary.totalInserted)>0){this.deactivate();this._reload()}},error:function(d,e,g){this._notify("Kunde inte spara. Fel: <strong>"+e+"</strong>","error");smap.cmd.loading(false)},complete:function(){this.modal.find(".btn-primary").button("reset");this.submitting=false}})},_reload:function(a){a=a||{};smap.cmd.loading(true);this.layer._refresh()}});L.control.shareTweet=function(a){return new L.Control.ShareTweet(a)};L.Control.SharePosition=L.Control.extend({options:{position:"bottomright",autoActivate:false,wfsSource:"http://xyz.malmo.se:8081/geoserver/wfs",wfsFeatureType:"sandbox:sharedpositions",wfsUri:"http://www.malmo.se/sandbox/",useProxy:true,maxAge:5},_refreshIntervalMs:15000,_lang:{sv:{dTitle:"Dela position",dShare:"Dela!",yourName:"Ditt namn",stopSharing:"Sluta dela",btnCancel:"Avbryt"},en:{dTitle:"Share position",dShare:"Share!",yourName:"Your name",stopSharing:"Stop sharing",btnCancel:"Cancel"}},_setLang:function(a){a=a||smap.config.langCode||navigator.language.split("-")[0]||"en";if(this._lang){this.lang=this._lang?this._lang[a]:null}},initialize:function(a){L.setOptions(this,a);this._setLang(a.langCode)},deactivate:function(){clearInterval(self._refreshInterval);$("#sharepos-gui button").text(this.lang.dShare).removeClass("btn-danger");this.dialog.find("input").val(null);$("#sharepos-gui").hide();this.map.removeLayer(this.layer)},onAdd:function(a){this.map=a;this._container=L.DomUtil.create("div","leaflet-control-shareposition");L.DomEvent.disableClickPropagation(this._container);this.$container=$(this._container);this._drawGui();this._bindEvents();return this._container},onRemove:function(a){a.stopLocate()},_drawGui:function(){var b=$('<div id="sharepos-gui" />');var c=$('<button class="btn btn-default btn-lg" type="button">'+this.lang.dShare+"</button>");b.append(c);$(".leaflet-control-Geolocate").prepend(b);b.hide();var d='<div class="form-group"><label>'+this.lang.yourName+'</label><input type="text" class="form-control" placeholder="'+this.lang.yourName+'"></input></div>';var a=$('<button type="button" class="btn btn-default" data-dismiss="modal">'+this.lang.btnCancel+'</button><button type="button" class="btn btn-primary">'+this.lang.dShare+"</button>");this.dialog=utils.drawDialog(this.lang.dTitle,d,a)},_makeFilter:function(){var h=this.options.maxAge;var a=new Date();var c=a.getTime();var e=c-h*60*1000;var d=new Date(e);var b=new OpenLayers.Filter.Comparison({type:OpenLayers.Filter.Comparison.BETWEEN,property:"datetime_changed",lowerBoundary:d,upperBoundary:a});var j=new OpenLayers.Format.Filter({version:"1.1.0"}),g=new OpenLayers.Format.XML();var i=g.write(j.write(b));return i},_addLayer:function(){var a=this;this.layer=smap.core.layerInst._createLayer({init:"L.GeoJSON.WFS",url:this.options.wfsSource,options:{noBindZoom:true,noBindDrag:true,layerId:"shareposition",displayName:"Shared locations",featureType:this.options.wfsFeatureType,attribution:"Malmö stads WFS",inputCrs:"EPSG:4326",reverseAxis:true,selectable:true,popup:'<span><strong>${text_username}</strong>&nbsp;&nbsp;(<span style="white-space:nowrap;">${function(p) {var d = new Date(p.datetime_changed);var dNow = new Date(); var dDiff = new Date( Math.abs(dNow.getTime() - d.getTime()) ); return dDiff.getMinutes(); }}</span> min ago)</span>',uniqueAttr:null,hoverColor:"#FF0"}});this.layer.params.filter=this._makeFilter();this.layer.off("load");this.layer.on("load",function(){a.layer.eachLayer(function(b){var c=L.userMarker(b.getLatLng(),{pulsing:true,smallIcon:true});a.layer.removeLayer(b);if(b.feature){var e=parseInt(b.feature.id.split(".")[1]);if(!a.uid||(a.uid&&a.uid!==e)){a.layer.addLayer(c)}var d=utils.extractToHtml(a.layer.options.popup,b.feature.properties);c.bindLabel(d,{noHide:true,direction:"right"}).showLabel()}});smap.cmd.loading(false)});this.map.addLayer(this.layer);var a=this},_bindEvents:function(){var a=this;smap.event.on("smap.core.pluginsadded",function(){$("#smap-glocate-btn").on("click",function(){if($(this).hasClass("btn-primary")){$("#sharepos-gui").show();a._addLayer();a._refreshInterval=setInterval($.proxy(a._refresh,a),a._refreshIntervalMs)}else{a.deactivate()}return false})});this.dialog.find("input").on("click",function(){$(this).focus()});this.dialog.find(".modal-footer .btn-primary").on("click",function(){$("#sharepos-gui button").addClass("btn-danger").text(a.lang.stopSharing);a.dialog.modal("hide");var b=$.trim(a.dialog.find("input[type='text']").val());a._startShare(b)});$("#sharepos-gui button").on("click",function(){var b=$(this).hasClass("btn-danger");if(!b){a.dialog.modal("show")}else{$(this).removeClass("btn-danger");a._stopShare();$(this).text(a.lang.dShare)}})},_onLocationFound:function(a){this._location=a},_onLocationError:function(a){smap.cmd.loading(false);console.log("Geolocate error: +"+a.message)},_setLocateSettings:function(){var a={watch:true,timeout:30000,enableHighAccuracy:true,frequency:3000};$.extend(this.map._locateOptions,a)},_startShare:function(a){this.uName=a;this.map.on("locationfound",$.proxy(this._onLocationFound,this));this.map.on("locationerror",$.proxy(this._onLocationError,this));this.uid=localStorage.share_uid||null;this._storeInterval=setInterval($.proxy(this._store,this),5000);this._setLocateSettings();this.map.fire("drag")},_stopShare:function(){smap.cmd.loading(false);clearInterval(this._storeInterval);this._storeInterval=null;this.map.off("locationfound",this._onLocationFound,this);this.map.off("locationerror",this._onLocationError,this);this._location=null;this.uid=null;this.uName=null},uid:null,_store:function(){if(this._working||!this._location){return false}this._working=true;console.log("Storing position");$.ajax({url:this.options.useProxy?smap.config.ws.proxy+encodeURIComponent(this.options.wfsSource):this.options.wfsSource,type:"POST",context:this,data:this._getXml(this._location.latlng,this._location.accuracy,this.uName,this.uid),contentType:"text/xml",dataType:"text",success:function(b){var a=$.xml2json(b);if(!this.uid&&a&&a.TransactionSummary&&parseInt(a.TransactionSummary.totalInserted)>0){this.uid=parseInt(a.InsertResults.Feature.FeatureId.fid.split(".")[1]);localStorage.share_uid=this.uid}},complete:function(){this._working=false}})},_refresh:function(){this.layer.params.filter=this._makeFilter();this.layer._refresh(true)},_getXml:function(c,d,g,e){var a="";var b=this.options.wfsFeatureType.split(":")[1];if(e){a='<wfs:Transaction\n  service="WFS"\n  version="1.1.0"\n  xmlns:grp="'+this.options.wfsUri+'"\n  xmlns:wfs="http://www.opengis.net/wfs"\n  xmlns:ogc="http://www.opengis.net/ogc"\n  xmlns:gml="http://www.opengis.net/gml"\n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xsi:schemaLocation="http://www.opengis.net/wfs\n                      http://schemas.opengis.net/wfs/1.1.0/WFS-transaction.xsd">\n  <wfs:Update typeName="grp:'+b+'">\n	 <wfs:Property><wfs:Name>text_username</wfs:Name><wfs:Value>'+g+"</wfs:Value></wfs:Property>	 <wfs:Property><wfs:Name>int_accuracy</wfs:Name><wfs:Value>"+d+'</wfs:Value></wfs:Property>    <wfs:Property>\n      <wfs:Name>the_geom</wfs:Name>\n      <wfs:Value>\n        <gml:Point srsDimension="2" srsName="urn:x-ogc:def:crs:EPSG:4326">\n          <gml:coordinates decimal="." cs="," ts=" ">'+c.lat+","+c.lng+"</gml:coordinates>\n        </gml:Point>\n      </wfs:Value>\n    </wfs:Property>\n    <ogc:Filter>\n      <PropertyIsEqualTo>\n        <PropertyName>id</PropertyName>\n        <Literal>"+e+"</Literal>\n      </PropertyIsEqualTo>\n    </ogc:Filter>\n  </wfs:Update>\n</wfs:Transaction>"}else{a='<wfs:Transaction\n  service="WFS"\n  version="1.1.0"\n  xmlns:grp="'+this.options.wfsUri+'"\n  xmlns:wfs="http://www.opengis.net/wfs"\n  xmlns:gml="http://www.opengis.net/gml"\n  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xsi:schemaLocation="http://www.opengis.net/wfs\n                      http://schemas.opengis.net/wfs/1.1.0/WFS-transaction.xsd\n                      '+this.options.wfsSource+"/DescribeFeatureType?typename="+this.options.wfsFeatureType+'">\n  <wfs:Insert>\n    <grp:'+b+'>\n      <grp:the_geom>\n        <gml:Point srsDimension="2" srsName="urn:x-ogc:def:crs:EPSG:4326">\n          <gml:coordinates decimal="." cs="," ts=" ">'+c.lat+","+c.lng+"</gml:coordinates>\n        </gml:Point>\n      </grp:the_geom>\n      <grp:int_accuracy>"+d+"</grp:int_accuracy>\n      <grp:text_username>"+g+"</grp:text_username>\n    </grp:"+b+">\n  </wfs:Insert>\n  </wfs:Transaction>"}return a}});L.control.sharePosition=function(a){return new L.Control.SharePosition(a)};L.Control.Search=L.Control.extend({options:{wsAcUrl:"http://xyz.malmo.se/WS/sKarta/autocomplete_limit.ashx",wsLocateUrl:"http://xyz.malmo.se/WS/sKarta/sokexakt.ashx",whitespace:"%2B",wsOrgProj:"EPSG:3006",pxDesktop:992},_lang:{sv:{search:"Sök",addressNotFound:"Den sökta adressen hittades inte",remove:"Ta bort"},en:{search:"Search",addressNotFound:"The searched address was not found",remove:"Remove"}},_setLang:function(a){a=a||smap.config.langCode||navigator.language.split("-")[0]||"en";if(this._lang){this.lang=this._lang?this._lang[a]:null}},initialize:function(a){L.setOptions(this,a);this._setLang(a.langCode)},onAdd:function(b){var a=this;a.map=b;a._container=L.DomUtil.create("div","leaflet-control-search");L.DomEvent.disableClickPropagation(this._container);a.$container=$(a._container);a._makeSearchField();this.__onApplyParams=this.__onApplyParams||$.proxy(this._onApplyParams,this);smap.event.on("smap.core.applyparams",this.__onApplyParams);this.__onCreateParams=this.__onCreateParams||$.proxy(this._onCreateParams,this);smap.event.on("smap.core.createparams",this.__onCreateParams);this.map.on("click",this._blurSearch);return a._container},_blurSearch:function(){$("#smap-search-div input").blur()},onRemove:function(a){smap.event.off("smap.core.applyparams",this.__onApplyParams);smap.event.off("smap.core.createparams",this.__onCreateParams);this.map.off("click",this._blurSearch)},_onApplyParams:function(b,a){if(a.POI){this._geoLocate(decodeURIComponent(a.POI))}},_onCreateParams:function(b,a){if(this.marker&&this.marker.options.q){a.POI=encodeURIComponent(this.marker.options.q)}},_rmAdressMarker:function(a){if(a!=null){this.map.removeLayer(a);this.addressMarker=null}},_makeSearchField:function(){var d=this;var b=$('<div id="smap-search-div" class="input-group input-group-lg"><span class="input-group-addon"><span class="glyphicon glyphicon-search"></span></span><input autocorrect="off" autocomplete="off" data-provide="typeahead" type="text" class="form-control" placeholder="'+this.lang.search+'"></input></div>');var g=b.find("input");g.attr("pattern","[0-9]");function h(){var j=$(window).width();if(j>=d.options.pxDesktop||!L.Browser.touch){return}var k=$("#smap-search-bg");if(!k.length){k=$('<div id="smap-search-bg" />');b.addClass("search-active");$("#mapdiv").append(k);setTimeout(function(){k.addClass("search-bg-visible")},1)}}function i(){var j=$(window).width();if(j>=d.options.pxDesktop||!L.Browser.touch){return}b.removeClass("search-active");$("#smap-search-bg").removeClass("search-bg-visible");setTimeout(function(){$("#smap-search-bg").remove()},300)}function c(j){j.stopPropagation()}g.on("keypress",h).on("dblclick",c).on("mousedown",c).on("focus",function(){$(this).parent().addClass("smap-search-div-focused")}).on("blur",function(){$(this).parent().removeClass("smap-search-div-focused")}).on("touchstart",function(){$(this).focus()});b.on("click touchstart",function(j){$(this).find("input").focus();j.stopImmediatePropagation()});g.on("blur",i);$("#mapdiv").append(b);var e=this.options.whitespace;var a=this._geoLocate;g.typeahead({items:5,minLength:2,highlight:true,hint:true,updater:function(j){smap.cmd.loading(true);a.call(d,j);i();return j},source:function(k,l){var j=encodeURIComponent(d.options.wsAcUrl+"?q="+k);if(e){j=j.replace(/%20/g,e)}if(d.proxyInst){d.proxyInst.abort()}d.proxyInst=$.ajax({type:"GET",url:smap.config.ws.proxy+j,dataType:"text",success:function(n){var m=n.split("\n");l(m)},error:function(){}})}})},_geoLocate:function(c){var b=encodeURIComponent(this.options.wsLocateUrl+"?q="+c);var a=this.options.whitespace;if(a){b=b.replace(/%20/g,a)}$.ajax({url:smap.config.ws.proxy+b,type:"GET",dataType:"json",context:this,success:function(i){var e=this;if(this.marker){this.map.removeLayer(this.marker);this.marker=null}if(!i.features.length){smap.cmd.notify(this.lang.addressNotFound,"error");return}var k=i.features[0].geometry.coordinates;var j=L.latLng(k[1],k[0]);var h="EPSG:4326";if(this.options.wsOrgProj&&this.options.wsOrgProj!==h){var d=window.proj4(this.options.wsOrgProj,h,[j.lng,j.lat]);j=L.latLng(d[1],d[0])}function g(l){$("#smap-search-popupbtn").off("click").on("click",function(){e.map.removeLayer(e.marker);return false})}this.map.off("popupopen",g);this.map.on("popupopen",g);this.marker=L.marker(j).addTo(this.map);this.marker.options.q=c;this.marker.bindPopup('<p class="lead">'+c+'</p><div><button id="smap-search-popupbtn" class="btn btn-default">'+this.lang.remove+"</button></div>");this.marker.openPopup();this.map.setView(j,15);$("#smap-search-div input").val(null);$("#smap-search-div input").blur();setTimeout(function(){$("#smap-search-div input").blur()},100)},complete:function(){smap.cmd.loading(false)}})},CLASS_NAME:"L.Control.Search"});L.control.search=function(a){return new L.Control.Search(a)};L.Control.Info=L.Control.extend({options:{autoActivate:false,position:"bottomright",_lang:{sv:{titleInfo:"<h4>Välkommen till smap-mobile!</h4>",bodyContent:'<h4>Vad?</h4><p>Smap-mobile är ett ramverk för att skapa kartor med "responsiv design". Det innebär att kartorna anpassar sitt innehåll efter skärmens storlek. Ramverket kan byggas ut med plugins (Leaflet-kontroller).</p><p>Koden är öppen och kan laddas ner gratis från <a target="_blank" href="https://github.com/getsmap/smap-mobile/">GitHub</a>.</p><h4>Vem?</h4><p>Ramverket har hittills utvecklats av Malmö Stadsbyggnadskontor men är tänkt att ingå i sMap-samarbetet – där även kommunerna Kristianstad, Helsingborg och Lund är delaktiga.<h4>Kontakta oss!</h4><p>Har du synpunkter, frågor eller vill hjälpa till med utvecklingen? Kontakta GIT-utvecklare <a href="mailto:johan.lahti@malmo.se">Johan Lahti</a>, Malmö stad.</p><p>Vill du veta mer om sMap-samarbetet eller publicering av geodata? Kontakta projektsamordnade <a href="mailto:ulf.minor@malmo.se">Ulf Minör</a> eller <a href="mailto:Karl-Magnus.Jonsson@kristianstad.se">Karl-Magnus Jönsson.</a></p>'},en:{titleInfo:"<h4>Welcome to smap-mobile!</h4>",bodyContent:'<h4>What?</h4><p>Smap-mobile is a framework for creating maps with a "responsive design". This means the site adapts the content to the screen size. The framework can be extended with plugins (Leaflet controls).</p><p>The code is open source and can be downloaded free from <a target="_blank" href="https://github.com/getsmap/smap-mobile/">GitHub</a>.</p><h4>Who?</h4><p>The framework has so far been developed by Malmö Stadsbyggnadskontor but will be used in the sMap project – where the municipalities of Kristianstad, Helsingborg and Lund will participate.<h4>Feed-back!</h4><p>Do you have suggestions, or are you interested in contributing with the development of sMap mobile? Please contact GIT-developer <a href="mailto:johan.lahti@malmo.se">Johan Lahti</a>.</p><p>Do you want more info about the sMap project or publishing geographic data? Then contact the project administrators <a href="mailto:ulf.minor@malmo.se">Ulf Minör</a> or <a href="mailto:Karl-Magnus.Jonsson@kristianstad.se">Karl-Magnus Jönsson.</a></p>'}}},_lang:{sv:{close:"Stäng"},en:{close:"Close"}},_setLang:function(a){a=a||smap.config.langCode||navigator.language.split("-")[0]||"en";if(this._lang){this.lang=this._lang?this._lang[a]:null}},initialize:function(a){L.setOptions(this,a);if(this.options._lang){$.extend(true,this._lang,this.options._lang)}this._setLang(a.langCode)},onAdd:function(a){this.map=a;this._container=L.DomUtil.create("div","leaflet-control-info");L.DomEvent.disableClickPropagation(this._container);this.$container=$(this._container);this._drawBtn();return this._container},onRemove:function(a){},activate:function(){if(!this._$dialog){var a='<button type="button" class="btn btn-default" data-dismiss="modal">'+this.lang.close+"</button>";this._$dialog=utils.drawDialog(this.lang.titleInfo,this.lang.bodyContent,a)}this._$dialog.modal("show")},_drawBtn:function(){var a=this;var b=$('<button id="smap-info-btn" class="btn btn-default"><span class="fa fa-info-circle"></span></button>');b.on("click",function(){a.activate();return false});this.$container.append(b)}});L.control.info=function(a){return new L.Control.Info(a)};L.Icon.Default.imagePath="lib/leaflet-0.7.1/images/";